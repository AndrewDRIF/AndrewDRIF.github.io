<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Flume使用指南</title>
      <link href="/2023/05/30/Flume%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"/>
      <url>/2023/05/30/Flume%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/</url>
      
        <content type="html"><![CDATA[<h1 id="Flume使用指南"><a href="#Flume使用指南" class="headerlink" title="Flume使用指南"></a>Flume使用指南</h1><h1 id="一、安装-Flume"><a href="#一、安装-Flume" class="headerlink" title="一、安装 Flume"></a>一、安装 Flume</h1><p>首先检查机器是否联网</p><blockquote><p><code>8.8.8.8</code> 是Google提供的公共 DNS 服务器的IP地址。ping 命令是用来测试网络通信的，它通过向目标IP地址发送数据包并等待响应，来检查是否能够成功地与该地址进行通信。</p><p>通过向Google提供的公共DNS服务器发送数据包并等待响应，可以检查本地主机是否能够成功地连接到互联网上的其他计算机。因为Google的公共 DNS 服务器在全球多个位置提供服务，并且稳定可靠，所以它成为了Linux用户常用的网络测试地址之一。</p><p>当用户发现自己的电脑无法上网时，可以使用 <code>ping 8.8.8.8</code> 命令来检查是否能够与 Google 的DNS服务器进行通信。如果能够成功连接，那么问题可能出现在其他地方，如果连接失败，则意味着可能存在网络连接问题，需要进一步检查和解决。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ping 8.8.8.8</span><br></pre></td></tr></table></figure><p>检查 <code>nc（netcat）</code> 的版本</p><blockquote><p><code>netcat</code>（也称为 <code>nc</code>）是一种网络工具，它是一个非常强大的用于创建 TCP&#x2F;IP 连接的命令行工具。<code>netcat</code> 的功能十分强大，可以用于端口扫描、文件传输、调试协议等多种场景。</p><p>通过 <code>netcat</code> 可以进行以下操作：</p><ul><li>在主机之间传输数据，可以作为 client（客户端）或 server（服务器）。</li><li>在不打开 FTP、SSH、Telnet 等服务的情况下，创建服务器程序，监听端口并处理连接请求。</li><li>进行端口扫描和服务探测，可测试端口是否打开，并查看被连接服务的协议版本。</li><li>通过网络发送文件或数据，如将文件拷贝到目标主机、进行数据备份等。</li><li>调试网络协议，可以手动输入数据包并观察响应信息来调试各种协议的通信。</li></ul><p><code>netcat</code> 是一个非常灵活的工具，它可以作为一个网络的 Swiss Army Knife，可以被用于多种不同的目的。但同时，由于其强大的功能和灵活的使用方式，也可能被用于网络攻击和安全测试，因此在使用时需要谨慎。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nc -version</span><br></pre></td></tr></table></figure><p>如果你的虚拟机没有 <code>nc</code> ，使用以下指令来安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install nc</span><br></pre></td></tr></table></figure><p>GUI 用户打开虚拟机中的浏览器，然后复制链接点击下载 <code>https://archive.apache.org/dist/flume/1.9.0/</code></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230419084651670.png" alt="点击下载"></p><p>命令行用户在安装目录下执行以下指令（需要安装 <code>wget</code> 工具）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget https://archive.apache.org/dist/flume/1.9.0/apache-flume-1.9.0-bin.tar.gz</span><br></pre></td></tr></table></figure><p>没有 <code>wget</code> 工具的执行以下指令进行安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yum install wget</span><br></pre></td></tr></table></figure><p>解压安装包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tar -xvf apache-flume-1.9.0-bin.tar.gz</span><br></pre></td></tr></table></figure><p>将解压之后的文件夹进行重命名为 <code>flume</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mv</span> apache-flume-1.9.0-bin flume</span><br></pre></td></tr></table></figure><p>将重命名之后的文件夹移动到 <code>/training</code> 文件夹下（大数据所有组件都在这里）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mv</span> flume /training/</span><br></pre></td></tr></table></figure><p>修改配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi ~/.bash_profile</span><br></pre></td></tr></table></figure><p>将下面两行加入配置文件</p><p><code>export FLUME_HOME=/training/flume/</code></p><p><code>export PATH=$PATH:$FLUME_HOME/bin</code></p><p>重新导入资源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure><p>查看 <code>flume</code> 版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ flume-ng version</span><br></pre></td></tr></table></figure><p>查看 <code>JAVA_HOME</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="variable">$JAVA_HOME</span></span><br></pre></td></tr></table></figure><p>将 <code>flume-env.sh.template</code> 文件重命名为 <code>flume-env.sh</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mv</span> /training/flume/conf/flume-env.sh.template flume-env.sh</span><br></pre></td></tr></table></figure><p>修改 <code>flume-env.sh</code> 文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vi /training/flume/conf/flume-env.sh</span><br></pre></td></tr></table></figure><p>将 <code>flume-env.sh</code> 文件中的 <code>JAVA_HOME</code> 修改位自己的 <code>jdk</code> 路径</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/training/jdk1.8.0_301</span><br></pre></td></tr></table></figure><p>再次查看 <code>flume</code> 版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ flume-ng version</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230419091755567.png" alt="安装成功"></p><h1 id="二、什么是-Flume"><a href="#二、什么是-Flume" class="headerlink" title="二、什么是 Flume"></a>二、什么是 Flume</h1><p>Flume是一个高可靠性、高可用性、分布式、可定制化的海量日志采集、聚合和传输的系统工具。</p><p>Flume 是 Apache 的一个开源项目，是一个分布式日志收集系统，以流水线的方式收集、聚合日志。它具有高可扩展性和高可靠性，可以在不停机的情况下进行在线扩容和日志收集。</p><p>Flume 支持多种数据源，例如 Avro、Netcat、JMS、Exec、Thrift 等，也支持多种数据目的地，例如 HDFS、HBase、Solr、Elasticsearch 等。</p><p>Flume 的核心工作单元是 Agent，它由三个主要组件组成：Source、Channel 和 Sink，分别表示数据来源、数据缓存和数据目的地。</p><p>Flume 有许多不同的使用场景，例如日志收集、数据摄取、事件处理等，广泛应用于 Web 应用程序、大数据、云计算等领域。</p><p>没有 Hadoop 我们也可以运行 Flume</p><p>从不同的数据源手机数据，然后传输到中心化储存的系统中</p><p>不依赖于任何操作系统，可以运行在任何设备</p><blockquote><p>Flume Event</p></blockquote><blockquote><p>Flume Event 是 Apache Flume 中的一个概念，代表了一个在 Flume Agent 中传输的<strong>数据单元</strong>。一个 Flume Event 包含了一个数据载体和多个可选的头部信息（header）。其中，数据载体是必须的，而头部信息是可选的。</p><p>Flume Event 的数据载体是一个字节数组，在传输过程中可以被多个 <code>Source</code> 和 <code>Sink</code> <strong>共享</strong>使用。Flume Event 的头部信息是一组<strong>键值对</strong>，通过这些头部信息可以对数据进行标记和描述，例如可以包含数据的来源、时间戳、数据类型、序列号等信息。</p><p>在 Flume Agent 中，<strong>多个</strong> <code>Source</code> 可以向<strong>一个</strong> <code>Channel</code> 发送 <code>Flume Event</code>，<strong>多个</strong> <code>Sink</code> 可以从一个 <code>Channel</code> 中获取 Flume Event。在传输过程中，每个 Flume Event 可以通过<strong>拦截器</strong>（interceptor）进行处理，例如可以对数据进行清洗、格式化、过滤等操作，从而满足不同的业务需求。</p><p>需要注意的是，在 Flume Agent 中，一个 Flume Event 的传输是基于<strong>异步</strong>的，即在发送和接收 Flume Event 的过程中，不需要等待对方的响应。这种设计可以确保高效地传输大量的日志和事件数据。同时，Flume Event 的传输还可以进行<strong>批量处理</strong>，从而进一步提高传输效率。</p></blockquote><p><code>Flume</code> 用来传送数据的最小单位，一个 <code>event</code> 就是一个数据的单位，<code>event</code> 就是数据，许多数据流的集合</p><blockquote><p>Flume Agent</p></blockquote><blockquote><p>Flume Agent 是 Apache Flume 中的一个概念，代表了一个在单个 JVM 进程中运行的 Flume 实例。可以将 Flume Agent 看作是一个数据传输管道，通过各种 <code>Source</code> 和 <code>Sink</code> 连接起来，从而实现数据的采集、传输、处理等功能。</p><p>在 Flume Agent 中，每个 <code>Source</code> 和 <code>Sink</code> 都是一个独立的组件。<code>Source</code> 用于采集数据，可以从各种数据源中获取数据，例如从日志文件、网络流、消息队列、Twitter 等等中获取数据。<code>Sink</code> 用于输出数据，可以将获取到的数据输出到各种存储或处理目的地，例如输出到 HDFS、HBase、MySQL、Kafka、Elasticsearch 等等。</p><p>除了 <code>Source</code> 和 <code>Sink</code> 组件，Flume Agent 中还有一个 <code>Channel</code> 组件。<code>Channel</code> 是连接 <code>Source</code> 和 <code>Sink</code> 的缓冲区，用于暂存从 <code>Source</code> 中获取到的数据，等待 <code>Sink</code> 进行输出。Flume Agent 中可以配置<strong>多个</strong> <code>Source</code> 和多个 <code>Sink</code>，它们通过 <code>Channel</code> 进行连接，从而实现数据的传输和处理。</p><p>Flume Agent 的配置文件通过指定各个组件的名称、类型、属性等来实现对 Agent 的定义。Flume Agent 配置文件的结构与 XML 文件类似，由 <code>&lt;agent&gt;</code> 标签组成，其中包含了<strong>多个</strong> <code>&lt;source&gt;</code>、<code>&lt;channel&gt;</code>、<code>&lt;sink&gt;</code> 标签，每个标签都包含了对应组件的相关配置信息。在配置好 Flume Agent 后，可以通过启动 Flume Agent 进程来启动整个数据传输管道，从而实现数据的采集、传输、处理等功能。</p></blockquote><blockquote><p>Flume Agent（Flume代理）是 Flume 中的核心概念之一，代表一个 Flume 进程实例，其中包含 <code>Source</code>、<code>Channel</code> 和 <code>Sink</code> 三个组件。Flume Agent 用于采集、聚合和传输日志和数据，可运行于单个节点或多个节点的集群中。每个 Flume Agent 进程都可以独立工作，同时也可以和其他 Flume Agent 进程协同工作，以实现更高的可靠性和扩展性。</p><p>Flume Agent 包含以下三个核心组件：</p><ol><li><code>Source</code>（数据源）：负责从数据源（例如文件、日志、数据流、消息队列等）收集数据，并将数据传递到 <code>Channel</code>。</li><li><code>Channel</code>（数据缓存）：负责存储 <code>Source</code> 收集到的数据，以便 <code>Sink</code> 进一步处理。<code>Channel</code> 可以是内存缓存、文件系统缓存、Kafka 等第三方缓存系统。</li><li><code>Sink</code>（数据目的地）：负责将数据从 <code>Channel</code> 读取并将其传输到目标系统，例如 HDFS、HBase、Elasticsearch、Solr 等。</li></ol><p>Flume Agent 可以根据需要自定义配置，如定义<strong>多个</strong> Source<code>、</code>Channel<code>和</code>Sink&#96;，也可以将多个 Agent 配置成一个 Agent 组，以实现更高效的数据采集和传输。</p></blockquote><p><code>web server</code> 网路服务器，不停产生日志文件，是一个数据源</p><p><code>Flume agent</code> 的任务是将日志文件传输到HDFS中</p><p><code>source</code> 将日志数据从网络服务器传输到 <code>channel</code> 中，拉取数据</p><p><code>channel</code> 将存储数据并传输到 <code>sink</code></p><p><code>sink</code> 消费从 <code>channel</code> 传来的数据并将他们传输到 HDFS，推送数据</p><p><code>-put</code> 每次只能传输一个文件（从本地到HDFS），这就是第一个限制</p><p>flume 可以实时与 hadoop 链接，这样就不用来一个数据执行一次 <code>-put</code>命令了</p><p>flume 可以发送大量 实时数据，可以管理数据流</p><p>channel会存储数据，直到sink将所有数据都存储到HDFS 中，channel才会把这些数据删除</p><p>如果hdfs接收的速度小于webserver发送的速度，channel就会把剩下的数据存储起来，直到sink将其存储到hdfs</p><p>channel就像水阀</p><p>临时保存</p><p>一种是临时保存在内存上，另一种是保存在一个文件上</p><p>内存会比硬盘更快，</p><p>complex data flow</p><p>“复杂数据流”是指在数据处理系统中的一种数据流，它包含一系列复杂的计算和处理过程，用于处理和转换复杂的数据结构。这种处理方式通常需要使用一些先进的数据处理技术和算法，如机器学习、图像处理、自然语言处理等。</p><p>复杂数据流通常涉及到多个数据处理阶段，每个阶段都需要处理原始数据并输出处理结果。每个阶段的处理方式和输出结果通常会影响到下一个阶段的处理方式和输出结果。因此，在设计和实现复杂数据流时需要考虑到数据处理阶段之间的依赖关系和数据流的整个工作流程。</p><p>复杂数据流可以应用于各种领域，例如金融、医疗、电商、物流等等，用于解决各种数据处理和决策方面的问题。然而，设计和实现复杂数据流也是具有挑战性的，需要考虑到数据的质量、效率、可靠性和安全性等因素。因此，许多现代数据处理系统提供了各种复杂数据处理和分析的工具和框架，以帮助企业处理和分析大量数据，并从中获得更多价值。</p><p>Flume Avro 是 Flume 中用于实现数据流的一种机制。Avro 是一种数据序列化格式，它具有良好的可扩展性和高效性能，使得 Flume Avro 可以非常高效地传输大量数据。Flume Avro 可以通过 Avro Source 和 Avro Sink 实现数据的传输，使用 Avro 的优点是可以减少数据传输时所需的带宽和网络延迟。</p><p>Avro Source 是 Flume 中的一种 Source 类型，用于接收 Avro 格式的数据。它可以从任何支持 Avro 协议和数据类型的源系统中接收数据，并将其传输到 Flume 的 Channel 组件中，以便后续处理。 Avro Sink 是 Flume 中的一种 Sink 类型，用于将数据传输到支持 Avro 格式的目的地系统。它可以从 Flume 的 Channel 组件中获取数据，并将其传输到目标系统，例如 Avro RPC 服务、HDFS、HBase、Elasticsearch 等。</p><p>使用 Flume Avro 的好处是，它可以支持面向数据的实时流处理，同时也可以有效地降低数据传输时所需的带宽和延迟。在 Flume Avro 中，数据是以二进制格式传输的，数据包括数据类型和数据值，可以快速地进行序列化、反序列化和传输。同时，使用 Avro 的模式定义语言，可以定义和更新数据模式，从而支持数据的演进。这种灵活的模式定义方式使得 Flume Avro 可以支持向后兼容和向前兼容，使得数据流处理更加容易和灵活。</p><p>当我们使用复杂数据流的时候，我们需要使用avro</p><p>。在计算机领域中，replicating 通常指复制数据或实现数据的冗余备份，以增加数据的可靠性和可用性。通过复制数据或备份数据，可以保证数据不会因为单点故障而丢失，同时也可以提高数据的读取速度和吞吐量。Replication 在数据库、分布式系统以及数据中心等领域中被广泛应用。</p><p>netcat是一个数据生成器</p><p>在 Flume 中，Replicating 是一种 Channel 类型，用于在多个 Sink 之间复制消息。当使用 Replicating Channel 时，Flume 会将每个事件广播到多个 Sink，从而提高了消息的可靠性和可用性。Replicating Channel 相对于其他 Channel 类型的优点是，可以同时将消息发送到多个 Sink，从而减少了单点故障的风险，并且可以提供更好的消息传递效率。</p><p>在使用 Replicating Channel 时，每个 Sink 都会接收到相同的消息，并且处理消息的方式也相同。这种方式适用于许多场景，例如在多个数据中心之间复制消息，或者在多个目的地系统之间分发消息。使用 Replicating Channel 可以确保消息的一致性，并提高消息的投递成功率。</p><p>需要注意的是，在使用 Replicating Channel 时，由于每个事件都要广播到多个 Sink，因此会增加网络带宽的使用量。同时，如果 Sink 数量很多，也会增加 Flume Agent 的负载和延迟。因此，在使用 Replicating Channel 时需要根据具体情况权衡利弊，选择合适的 Channel 类型和 Sink 数量。</p><p>multiplexing可以分发数据到不同的hdfs</p><p>Flume 可以传输非结构化数据</p><p><code>FLumeData = filePrefix</code></p><p>是个默认名字后缀</p><p>改名字只是更改前缀</p><h1 id="三、Flume-的操作"><a href="#三、Flume-的操作" class="headerlink" title="三、Flume 的操作"></a>三、Flume 的操作</h1><h2 id="使用另一台机器作为数据源"><a href="#使用另一台机器作为数据源" class="headerlink" title="使用另一台机器作为数据源"></a>使用另一台机器作为数据源</h2><ol><li><p>设置agent name设置source name设置channel name设置sink name</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">agentname.source = sourcename <span class="comment">//我们可以使用任何名字来命名</span></span><br></pre></td></tr></table></figure></li><li><p>定义source 的属性</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">agentname.sources.sourcename.type = netcat; <span class="comment">//有专门的几个词，不能随意</span></span><br><span class="line">agentname.sources.sourcename.bind = localhost; <span class="comment">//ip地址</span></span><br><span class="line">agentname.sources.sourcename.port = portnumber(<span class="number">1</span>-<span class="number">65000</span>);</span><br><span class="line"><span class="comment">//我们不能</span></span><br></pre></td></tr></table></figure></li><li><p>定义 channel的属性</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">agentname.channel.channelname.type = memory;<span class="comment">//有专门的几个词，不能随意</span></span><br></pre></td></tr></table></figure></li><li><p>定义sink 的属性</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">agentnamename.sink.sinkname.type = logger <span class="comment">//是hdfs的话就写和hdfs，logger是终端（terminal）</span></span><br></pre></td></tr></table></figure></li><li><p>在channel的帮助下链接source和sink</p></li></ol><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># names of agent,source,channel,sink</span><br><span class="line"></span><br><span class="line">andrew.sources=source1</span><br><span class="line">andrew.channels=channel1</span><br><span class="line">andrew.sinks=sink1</span><br><span class="line"></span><br><span class="line"># source information</span><br><span class="line"></span><br><span class="line">andrew.sources.source1.type=netcat</span><br><span class="line">andrew.sources.source1.bind=localhost</span><br><span class="line">andrew.sources.source1.port=22222</span><br><span class="line"></span><br><span class="line"># channel information</span><br><span class="line"></span><br><span class="line">andrew.channels.channel1.type=memory</span><br><span class="line"></span><br><span class="line"># sink information</span><br><span class="line"></span><br><span class="line">andrew.sinks.sink1.type=logger</span><br><span class="line"></span><br><span class="line"># connection between source and sink with the help of channel</span><br><span class="line"></span><br><span class="line">andrew.sources.source1.channels=channel1</span><br><span class="line">andrew.sinks.sink1.channel=channel1</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># names of agent,source,channel,sink</span><br><span class="line"></span><br><span class="line">andrew.sources=source1 # 这里可以用任何名字，Andrew 是 agentname</span><br><span class="line">andrew.channels=channel1</span><br><span class="line">andrew.sinks=sink1</span><br><span class="line"></span><br><span class="line"># source information</span><br><span class="line"></span><br><span class="line">andrew.sources.source1.type=netcat</span><br><span class="line">andrew.sources.source1.bind=localhost # 接收所有来自这个 IP 的信息，不是这个 IP 发出的信息</span><br><span class="line">andrew.sources.source1.port=22222# 阈值是 1-65000</span><br><span class="line"></span><br><span class="line"># channel information</span><br><span class="line"></span><br><span class="line">andrew.channels.channel1.type=memory</span><br><span class="line"># 可选值为 memory、file</span><br><span class="line"></span><br><span class="line"># sink information</span><br><span class="line"></span><br><span class="line">andrew.sinks.sink1.type=logger</span><br><span class="line"># logger 的意思是会把数据显示在终端上（另一个可选：HDFS）</span><br><span class="line"></span><br><span class="line"># connection between source and sink with the help of channel</span><br><span class="line"></span><br><span class="line">andrew.sources.source1.channels=channel1</span><br><span class="line">andrew.sinks.sink1.channel=channel1 # 只有这里用channel，其他所有都加s</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>启动 Flume</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ flume-ng agent -n agentname -f filename</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230420181554804.png" alt="指令截图"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ flume-ng agent -n agentname -f filename</span><br><span class="line"></span><br><span class="line"><span class="comment"># -n 后面的是 agentname，一定要跟文件里的一样，不然会报错</span></span><br><span class="line"><span class="comment"># -f 后面的是 数据源文件</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230420181535129.png" alt="agentname输错结果报错"></p><p>运行指令后出现端口号表示执行成功</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230420181200210.png" alt="执行并互通"></p><p>我们启动另一个窗口来当做另一台机器来链接 Flume</p><p>输入指令来链接 Flume</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nc localhost 22222</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ nc localhost 22222</span><br><span class="line"></span><br><span class="line"><span class="comment"># local 是文件中绑定的 IP 地址</span></span><br><span class="line"><span class="comment"># 22222 是文件中设定的端口号</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230420181305851.png" alt="链接Flume"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230420181511494.png" alt="互通成功"></p><h2 id="使用-Windows-作为数据源"><a href="#使用-Windows-作为数据源" class="headerlink" title="使用 Windows 作为数据源"></a>使用 <code>Windows</code> 作为数据源</h2><p>现在我们用Windows来当做source源来运行flume</p><p>在 Linux 中写入配置文件，带不带 <code>.config</code> 都可以</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources=win_source</span><br><span class="line">andrew.channels=win_channel</span><br><span class="line">andrew.sinks=win_sink</span><br><span class="line"></span><br><span class="line">andrew.sources.win_source.type=netcat</span><br><span class="line">andrew.sources.win_source.bind=192.168.1.130</span><br><span class="line">andrew.sources.win_source.port=22222</span><br><span class="line"></span><br><span class="line">andrew.channels.win_channel.type=memory</span><br><span class="line"></span><br><span class="line">andrew.sinks.win_sink.type=logger</span><br><span class="line"></span><br><span class="line">andrew.sources.win_source.channels=win_channel</span><br><span class="line">andrew.sinks.win_sink.channel=win_channel</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources=win_source</span><br><span class="line">andrew.channels=win_channel</span><br><span class="line">andrew.sinks=win_sink</span><br><span class="line"></span><br><span class="line">andrew.sources.win_source.type=netcat</span><br><span class="line">andrew.sources.win_source.bind=192.168.1.130 </span><br><span class="line"></span><br><span class="line"># 因为是要与其他机器相连，所以不能用localhost，要用本机地址</span><br><span class="line"># localhost 是相对于本机而言的，在网络上无法访问 localhost，所以这里必须使用本机 IP</span><br><span class="line"></span><br><span class="line">andrew.sources.win_source.port=22222</span><br><span class="line"></span><br><span class="line">andrew.channels.win_channel.type=memory</span><br><span class="line"></span><br><span class="line">andrew.sinks.win_sink.type=logger</span><br><span class="line"></span><br><span class="line">andrew.sources.win_source.channels=win_channel</span><br><span class="line">andrew.sinks.win_sink.channel=win_channel</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230426081857545.png" alt="配置文件这样写"></p><p>启动 flume</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ flume-ng agent -n andrew -f win</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230426082005315.png" alt="启动成功"></p><p>在 Windows 中断中输入指令，连接虚拟机</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ncat 192.168.1.130 22222</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230426082122152.png" alt="输点什么"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230426082138859.png" alt="连接成功"></p><h2 id="Flume-与防火墙"><a href="#Flume-与防火墙" class="headerlink" title="Flume 与防火墙"></a><code>Flume</code> 与防火墙</h2><blockquote><p>这一部分是以后工作中可能需要用到的</p></blockquote><blockquote><p>注意一下指定都需要使用 <code>sudo</code> 执行</p></blockquote><p>查看防火墙状态</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl status firewalld</span><br></pre></td></tr></table></figure><p>启动防火墙</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl start firewalld</span><br></pre></td></tr></table></figure><p>启动防火墙之后我们饿就不能接收这个 IP 地址的消息了</p><p>防火墙打开，端口就被封闭住了</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230426090355740.png" alt="连得上但是不能接收消息"></p><p>查看端口是否开放（允许使用）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo firewall-cmd --list-ports</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230426090536810.png" alt="啥都没显示，没有一个端口在白名单"></p><p>开放 <code>22222</code> 端口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo firewall-cmd --add-port=22222/tcp --permanent</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230426090742090.png" alt="image-20230426090742090"></p><p>重新加载</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230426090823304.png" alt="成功开放22222端口"></p><p>再次关闭防火墙，方便日后学习</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl stop firewalld</span><br></pre></td></tr></table></figure><h2 id="使用-Linux-指令作为数据源"><a href="#使用-Linux-指令作为数据源" class="headerlink" title="使用 Linux 指令作为数据源"></a>使用 <code>Linux</code> 指令作为数据源</h2><p>exec source：</p><p>我们使用Linux指令来收集数据（Linux指令作为源代码）</p><p>通过命令产生数据，flume 会监听这个产生的数据</p><p><code>cat</code></p><p>我们修改这个文件，cat 不会更新，只能重新使用这个命令来显示</p><p><code>tail</code></p><p>tail -F</p><p>会追踪这个文件，文件更新，这个指令的显示结果就回更新</p><p>适合用于流处理</p><p>我们的数据源是执行 <code>-cat</code> 命令来读取这些命令</p><p>我们的source会收集数据传输到channel然后再传输到sink，再在终端上输出数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources=lin_source</span><br><span class="line">andrew.channels=lin_channel</span><br><span class="line">andrew.sinks=lin_sink</span><br><span class="line"></span><br><span class="line">andrew.sources.lin_source.type=exec</span><br><span class="line">andrew.sources.lin_source.command=cat /root/bd3/data.txt</span><br><span class="line"></span><br><span class="line">andrew.channels.lin_channel.type=memory</span><br><span class="line"></span><br><span class="line">andrew.sinks.lin_sink.type=logger</span><br><span class="line"></span><br><span class="line">andrew.sources.lin_source.channels=lin_channel</span><br><span class="line">andrew.sinks.lin_sink.channel=lin_channel</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources=lin_source</span><br><span class="line">andrew.channels=lin_channel</span><br><span class="line">andrew.sinks=lin_sink</span><br><span class="line"></span><br><span class="line"># 注意这两句跟之前的不一样</span><br><span class="line">andrew.sources.lin_source.type=exec# source 的类型为 exec，表示执行（指令）</span><br><span class="line"># 只适配一个文件，只能读取一个文件，2 个就不行了</span><br><span class="line"></span><br><span class="line">andrew.sources.lin_source.command=cat /root/bd3/data.txt</span><br><span class="line"># 这里是要写执行的指令，这次是 cat 指令，后面加上要抓取文件的路径</span><br><span class="line"></span><br><span class="line">andrew.channels.lin_channel.type=memory</span><br><span class="line"># memory 表示 channel 将数据暂存在内存够中</span><br><span class="line"></span><br><span class="line">andrew.sinks.lin_sink.type=logger</span><br><span class="line"># sink 的数据类型是日志</span><br><span class="line"></span><br><span class="line">andrew.sources.lin_source.channels=lin_channel</span><br><span class="line">andrew.sinks.lin_sink.channel=lin_channel</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230427170021431.png" alt="要抓取文件的内容"></p><p>运行指令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ flume-ng agent -n andrew -f netcat2.conf</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230427165722372.png" alt="抓取文件内容作为数据源"></p><blockquote><p>使用 <code>tail</code> 指令</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources=lin_source</span><br><span class="line">andrew.channels=lin_channel</span><br><span class="line">andrew.sinks=lin_sink</span><br><span class="line"></span><br><span class="line">andrew.sources.lin_source.type=exec</span><br><span class="line">andrew.sources.lin_source.command=tail -F /root/bd3/data.txt</span><br><span class="line"></span><br><span class="line">andrew.channels.lin_channel.type=memory</span><br><span class="line"></span><br><span class="line">andrew.sinks.lin_sink.type=logger</span><br><span class="line"></span><br><span class="line">andrew.sources.lin_source.channels=lin_channel</span><br><span class="line">andrew.sinks.lin_sink.channel=lin_channel</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230427180123625.png" alt="刚启动的时候"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;curry&quot;</span> &gt;&gt; data.txt</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230427180148083.png" alt="插入些东西"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230427180201221.png" alt="追踪显示"></p><blockquote><p>更换追踪目录为 <code>/var/log/message</code></p></blockquote><p>这个文件是记录我们 Linux 的系统日程的</p><p>随着我们对 Linux 系统的操作，这个文件会不断更新日程</p><p>借助 <code>tail -F</code> 我们可以追踪更新实时数据</p><p>无论是什么系统级的操作，它都会记录下来，我们都会实时读取到</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources=lin_source</span><br><span class="line">andrew.channels=lin_channel</span><br><span class="line">andrew.sinks=lin_sink</span><br><span class="line"></span><br><span class="line">andrew.sources.lin_source.type=exec</span><br><span class="line">andrew.sources.lin_source.command=tail -F /var/log/messages</span><br><span class="line"></span><br><span class="line">andrew.channels.lin_channel.type=memory</span><br><span class="line"></span><br><span class="line">andrew.sinks.lin_sink.type=logger</span><br><span class="line"></span><br><span class="line">andrew.sources.lin_source.channels=lin_channel</span><br><span class="line">andrew.sinks.lin_sink.channel=lin_channel</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230427181146687.png" alt="image-20230427181146687"></p><h2 id="使用一整个文件夹作为数据源"><a href="#使用一整个文件夹作为数据源" class="headerlink" title="使用一整个文件夹作为数据源"></a>使用一整个文件夹作为数据源</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources = fireworm_source</span><br><span class="line">andrew.channels = fireworm_channel</span><br><span class="line">andrew.sinks = fireworm_sink</span><br><span class="line"></span><br><span class="line">andrew.sources.fireworm_source.type = spooldir</span><br><span class="line">andrew.sources.fireworm_source.spoolDir = /root/bd3</span><br><span class="line"></span><br><span class="line">andrew.channels.fireworm_channel.type = memory</span><br><span class="line"></span><br><span class="line">andrew.sinks.fireworm_sink.type = logger</span><br><span class="line"></span><br><span class="line">andrew.sources.fireworm_source.channels = fireworm_channel</span><br><span class="line">andrew.sinks.fireworm_sink.channel = fireworm_channel</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources = fireworm_source</span><br><span class="line">andrew.channels = fireworm_channel</span><br><span class="line">andrew.sinks = fireworm_sink</span><br><span class="line"></span><br><span class="line">andrew.sources.fireworm_source.type = spooldir# 这里的类型就写 spooldir 即可</span><br><span class="line"></span><br><span class="line">andrew.sources.fireworm_source.spoolDir = /root/bd3# 这里要写一个文件夹，不能是一个文件</span><br><span class="line"># 这里的 spoolDir 的 D 要大写，这是大小写敏感的</span><br><span class="line"></span><br><span class="line">andrew.channels.fireworm_channel.type = memory</span><br><span class="line"></span><br><span class="line">andrew.sinks.fireworm_sink.type = logger</span><br><span class="line"></span><br><span class="line">andrew.sources.fireworm_source.channels = fireworm_channel</span><br><span class="line">andrew.sinks.fireworm_sink.channel = fireworm_channel</span><br></pre></td></tr></table></figure><p><code>Flume</code> 的一个文件被传输之后会被加上 <code>.COMPLETED</code> 标识，<code>Flume</code> 之后就不会传输有这个标识的文件</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230504170552281.png" alt="（传输了我所有的 .conf 文件）"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230504170656364.png" alt="标识传输过的文件"></p><p>配置文件被重命名之后，文件就会被重命名，下次用它运行 <code>Flume</code> 的时候要用新的、被重命名之后的、后缀为 <code>.COMPLETED</code> 的文件</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230504170856549.png" alt="尝试一下使用之前的文件名，报错"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230504171141512.png" alt="使用新文件名，成功"></p><p>只要我们不退出程序，flume就回一直监听这个文件夹，只要有新的文件就回继续传输，不需要重启flume</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230504171323925.png" alt="新建个文件"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230504171313274.png" alt="成功监听"></p><p>如果我们手动删除了这个标识，这个文件会被当成新文件重新传输</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230504172136605.png" alt="手动去掉Flume标识"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230504172156486.png" alt="又把这个文件重新传输了一遍"></p><h2 id="修改-sink"><a href="#修改-sink" class="headerlink" title="修改 sink"></a>修改 <code>sink</code></h2><blockquote><p>得先启动 Hadoop</p></blockquote><blockquote><p>这里也是可以监听文件夹的</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources = fireworm_source</span><br><span class="line">andrew.channels = fireworm_channel</span><br><span class="line">andrew.sinks = fireworm_sink</span><br><span class="line"></span><br><span class="line">andrew.sources.fireworm_source.type = spooldir</span><br><span class="line">andrew.sources.fireworm_source.spoolDir = /root/bd3</span><br><span class="line"></span><br><span class="line">andrew.channels.fireworm_channel.type = memory</span><br><span class="line"></span><br><span class="line">andrew.sinks.fireworm_sink.type = hdfs</span><br><span class="line">andrew.sinks.fireworm_sink.hdfs.path = /batch3/spool</span><br><span class="line">andrew.sinks.fireworm_sink.hdfs.fileType = DataStream</span><br><span class="line">andrew.sinks.fireworm_sink.hdfs.hdfs.writeFormat = Text</span><br><span class="line"></span><br><span class="line">andrew.sources.fireworm_source.channels = fireworm_channel</span><br><span class="line">andrew.sinks.fireworm_sink.channel = fireworm_channel</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources = fireworm_source</span><br><span class="line">andrew.channels = fireworm_channel</span><br><span class="line">andrew.sinks = fireworm_sink</span><br><span class="line"></span><br><span class="line">andrew.sources.fireworm_source.type = spooldir</span><br><span class="line">andrew.sources.fireworm_source.spoolDir = /root/bd3</span><br><span class="line"></span><br><span class="line">andrew.channels.fireworm_channel.type = memory</span><br><span class="line"></span><br><span class="line">andrew.sinks.fireworm_sink.type = hdfs# 修改类型为 hdfs</span><br><span class="line"></span><br><span class="line">andrew.sinks.fireworm_sink.hdfs.path = /batch3/spool# 指定要上传的 hdfs 路径</span><br><span class="line"></span><br><span class="line">andrew.sinks.fireworm_sink.hdfs.fileType = DataStream# 指定传输格式为数据流传输</span><br><span class="line"># DataStream 大小写敏感</span><br><span class="line"></span><br><span class="line">andrew.sinks.fireworm_sink.hdfs.hdfs.writeFormat = Text# 指定上传格式为 .txt 文件</span><br><span class="line"># writeFormat 的 F 与 Text 的 T 都大小写敏感</span><br><span class="line"></span><br><span class="line">andrew.sources.fireworm_source.channels = fireworm_channel</span><br><span class="line">andrew.sinks.fireworm_sink.channel = fireworm_channel</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230504181231149.png" alt="这是在等待上传数据"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230504181306776.png" alt="这是传输完成"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230504181031377.png" alt="这里也在等待上传数据"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230504181043275.png" alt="上传完成"></p><p>如果文件夹里有同名的文件，会报错</p><p>现在我们假设有一个 <code>log1.txt</code> 文件，我们在这个文件夹中使用 <code>Flume</code> 监听后，这个文件的文件名变成了 <code>log1.txt.COMPLETED</code></p><p>现在我们尝试将另一个 <code>log1.txt</code> 文件从根目录中移动到这个目录下，移动过程是不会报错的</p><p>因为一个文件是 <code>log1.txt</code> 另一个文件是 <code>log1.txt.COMPLETED</code></p><p>但是此时 <code>Flume</code> 监听程序会报错，因为它给这个新文件 <code>log1.txt</code> 加上传输标识之后，一个目录下的文件会出现重名，此时不会进行数据传输，也不会将文件改名</p><p>这时将已经有标识的 <code>log1.txt.COMPLETED</code> 文件删除，依然不会将新文件 <code>log1.txt</code> 传输，必须重新运行 <code>Flume</code></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230506075935834.png" alt="报错信息"></p><blockquote><p>使用 <code>exec</code> 作为数据源</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources = lin_source</span><br><span class="line">andrew.channels = total_channel</span><br><span class="line">andrew.sinks = total_sink</span><br><span class="line"></span><br><span class="line">andrew.sources.lin_source.type = exec</span><br><span class="line">andrew.sources.lin_source.command = tail -F /root/batch3/log1.txt</span><br><span class="line"></span><br><span class="line">andrew.channels.total_channel.type = memory</span><br><span class="line"></span><br><span class="line">andrew.sinks.total_sink.type = hdfs</span><br><span class="line">andrew.sinks.total_sink.hdfs.path = /batch3/total</span><br><span class="line">andrew.sinks.total_sink.hdfs.fileType = DataStream</span><br><span class="line">andrew.sinks.total_sink.hdfs.hdfs.writeFormat = Text</span><br><span class="line"></span><br><span class="line">andrew.sources.lin_source.channels = total_channel</span><br><span class="line">andrew.sinks.total_sink.channel = total_channel</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230506091942317.png" alt="追踪成功"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230506091802291.png" alt="追踪成功"></p><blockquote><p>使用 <code>netcat</code> 作为数据源</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources = win_source</span><br><span class="line">andrew.channels = total_channel</span><br><span class="line">andrew.sinks = total_sink</span><br><span class="line"></span><br><span class="line">andrew.sources.win_source.type = netcat</span><br><span class="line">andrew.sources.win_source.bind = 192.168.1.130</span><br><span class="line">andrew.sources.win_source.port = 12345</span><br><span class="line"></span><br><span class="line">andrew.channels.total_channel.type = memory</span><br><span class="line"></span><br><span class="line">andrew.sinks.total_sink.type = hdfs</span><br><span class="line">andrew.sinks.total_sink.hdfs.path = /batch3/total</span><br><span class="line">andrew.sinks.total_sink.hdfs.fileType = DataStream</span><br><span class="line">andrew.sinks.total_sink.hdfs.hdfs.writeFormat = Text</span><br><span class="line"></span><br><span class="line">andrew.sources.win_source.channels = total_channel</span><br><span class="line">andrew.sinks.total_sink.channel = total_channel</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230506091925886.png" alt="传输成功"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230506091903957.png" alt="传输成功"></p><blockquote></blockquote><p>tailDir 使用文件，可以指定一个文件夹下的文件，一直传输一直上传</p><p>taildir 不会重复传输一个文件</p><p>有一个Jason文件会存储我们发送的数据和位置</p><p>要么删除文件要么修改JSON文件，否则不能重复发送文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> -a</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> .flume</span><br></pre></td></tr></table></figure><p>JSON文件在这个文件夹下</p><p>taildir和spoodir &#x2F;&#x2F;使用taildir时必须全部大写表示<br>ipoodir有一些限制，比如当文件传输完成后，文件后缀会变成,completed，此时当你再向这个文件中写入新数据时，fume并不会将这些新数据传输poodir: 我们可以多个文件，只要文件在我们要进行传输的路径中，flume就会全部进行传输aildir:我们可以针对特定的文件，而且它不会传输重复的内容，而且当心内容呗增加到我们传输的文件中时，它也会同步更新<br>gentname.sources.sourcename.tvpe&#x3D;TAILDIRagentname.sources.sourcename.filegroups&#x3D;f1&#x2F;&#x2F;你想要传输多少个文件，想要一个就f1，想要两个就f2aqentname.sources.sourcename.filegroups.f1&#x3D; &#x2F;&#x2F;文件路径positionFile&#x3D; &#x2F;&#x2F;因为taildir会把传输的文件位置储存在-个ison 文件中，这就是规定这个json文件的位置<br>如果你要传输多个名字近似的文件，比og1.，og2.，你可以后面写”og或者说你没有这个文件，你在echo的时候添加了新文件，你也可以用这个，但是新文件必须也得是差不多这样子</p><h2 id="HTTP-Source"><a href="#HTTP-Source" class="headerlink" title="HTTP Source"></a>HTTP Source</h2><p>post 和 get 是两个方法，可以用来接收 flume 请求</p><p>.type &#x3D; </p><p>.bind &#x3D; 产生数据的 IP 地址</p><p>.port &#x3D; 1-65535</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources = win_source</span><br><span class="line">andrew.channels = total_channel</span><br><span class="line">andrew.sinks = total_sink</span><br><span class="line"></span><br><span class="line">andrew.sources.win_source.type = http</span><br><span class="line">andrew.sources.win_source.bind = 192.168.1.130</span><br><span class="line">andrew.sources.win_source.port = 12345</span><br><span class="line"></span><br><span class="line">andrew.channels.total_channel.type = memory</span><br><span class="line"></span><br><span class="line">andrew.sinks.total_sink.type = logger</span><br><span class="line"></span><br><span class="line">andrew.sources.win_source.channels = total_channel</span><br><span class="line">andrew.sinks.total_sink.channel = total_channel</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources = win_source</span><br><span class="line">andrew.channels = total_channel</span><br><span class="line">andrew.sinks = total_sink</span><br><span class="line"></span><br><span class="line">andrew.sources.win_source.type = http<span class="comment"># 要用 http</span></span><br><span class="line">andrew.sources.win_source.bind = 192.168.1.130 <span class="comment"># 接收消息的 IP 地址</span></span><br><span class="line">andrew.sources.win_source.port = 12345</span><br><span class="line"></span><br><span class="line">andrew.channels.total_channel.type = memory</span><br><span class="line"></span><br><span class="line">andrew.sinks.total_sink.type = logger</span><br><span class="line"></span><br><span class="line">andrew.sources.win_source.channels = total_channel</span><br><span class="line">andrew.sinks.total_sink.channel = total_channel</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230517082853194.png" alt="用postman发送数据"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230517082927010.png" alt="接收成功"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources = win_source</span><br><span class="line">andrew.channels = total_channel</span><br><span class="line">andrew.sinks = total_sink</span><br><span class="line"></span><br><span class="line">andrew.sources.win_source.type = http</span><br><span class="line">andrew.sources.win_source.bind = 192.168.1.130</span><br><span class="line">andrew.sources.win_source.port = 12347</span><br><span class="line"></span><br><span class="line">andrew.channels.total_channel.type = memory</span><br><span class="line"></span><br><span class="line">andrew.sinks.total_sink.type = hdfs</span><br><span class="line">andrew.sinks.total_sink.hdfs.path = /batch3/spool1</span><br><span class="line">andrew.sinks.total_sink.hdfs.filePrefix = httpdata</span><br><span class="line">andrew.sinks.total_sink.hdfs.fileType = DataStream</span><br><span class="line">andrew.sinks.total_sink.hdfs.rollInterval = 60</span><br><span class="line">andrew.sinks.total_sink.hdfs.rollCount = 0</span><br><span class="line">andrew.sinks.total_sink.hdfs.rollSize = 0</span><br><span class="line"></span><br><span class="line">andrew.sources.win_source.channels = total_channel</span><br><span class="line">andrew.sinks.total_sink.channel = total_channel</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230517085211574.png" alt="用postman发送数据"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230517085128412.png" alt="创建文件成功"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230517085229352.png" alt="在hdfs中检查"></p><p>channels</p><p>capacity &#x3D; 100 (默认 100) 存储容量</p><p>transactionCapacity &#x3D; 100 传输容量</p><h2 id="Hbase"><a href="#Hbase" class="headerlink" title="Hbase"></a>Hbase</h2><p>sinks.sink1.type &#x3D; hbase2</p><p>使用HBASE进行数据存储</p><p>sinks.sink1.table &#x3D; </p><p>sinks.sink1.columnFamily</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ start-hbase.sh</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hbase shell</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources = hbase_source</span><br><span class="line">andrew.channels = hbase_channel</span><br><span class="line">andrew.sinks = hbase_sink</span><br><span class="line"></span><br><span class="line">andrew.sources.hbase_source.type = TAILDIR</span><br><span class="line">andrew.sources.hbase_source.filegroups = f1 f2</span><br><span class="line">andrew.sources.hbase_source.filegroups.f1 = /root/batch3/.<span class="string">&quot;log1.&quot;</span></span><br><span class="line">andrew.sources.habse_source.filegroups.f2 = /root/batch3/.<span class="string">&quot;log2.&quot;</span></span><br><span class="line"></span><br><span class="line">andrew.channels.hbase_channel.type = memory</span><br><span class="line">andrew.channels.hbase_channel.capacity = 1000</span><br><span class="line">andrew.channels.hbase_channel.transactionCapacity = 100</span><br><span class="line"></span><br><span class="line">andrew.sinks.hbase_sink.type = hbase2</span><br><span class="line">andrew.sinks.hbase_sink.table = batche</span><br><span class="line">andrew.sinks.hbase_sink.columnFamile = data</span><br><span class="line"></span><br><span class="line">andrew.sources.hbase_source.channels = hbase_channel</span><br><span class="line">andrew.sinks.hbase_sink.channel = hbase_channel</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="将-win-中-flume-输出的数据作为-lin-下-flume-的输入"><a href="#将-win-中-flume-输出的数据作为-lin-下-flume-的输入" class="headerlink" title="将 win 中 flume 输出的数据作为 lin 下 flume 的输入"></a>将 win 中 flume 输出的数据作为 lin 下 flume 的输入</h2><blockquote><p>Windows</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources = source1</span><br><span class="line">andrew.channels = channel1</span><br><span class="line">andrew.sinks = sink1</span><br><span class="line"></span><br><span class="line">andrew.sources.source1.type = spooldir</span><br><span class="line">andrew.sources.source1.spoolDir = D:\spool</span><br><span class="line"></span><br><span class="line">andrew.channels.channel1.type = memory</span><br><span class="line">andrew.channels.channel1.capacity = 1000</span><br><span class="line"></span><br><span class="line">andrew.sinks.sink1.type = avro</span><br><span class="line">andrew.sinks.sink1.hostname = 192.168.1.130</span><br><span class="line">andrew.sinks.sink1.port = 22222</span><br><span class="line"></span><br><span class="line">andrew.sources.source1.channels = channel1</span><br><span class="line">andrew.sinks.sink1.channel = channel1</span><br></pre></td></tr></table></figure><blockquote><p>Linux</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources = source1</span><br><span class="line">andrew.channels = channel1</span><br><span class="line">andrew.sinks = sink1</span><br><span class="line"></span><br><span class="line">andrew.sources.source1.type = avro</span><br><span class="line">andrew.sources.source1.bind = 192.168.1.130</span><br><span class="line">andrew.sources.source1.port = 22222</span><br><span class="line"></span><br><span class="line">andrew.channels.channel1.type = memory</span><br><span class="line">andrew.channels.channel1.capacity = 1000</span><br><span class="line"></span><br><span class="line">andrew.sinks.sink1.type = logger</span><br><span class="line"></span><br><span class="line">andrew.sources.source1.channels = channel1</span><br><span class="line">andrew.sinks.sink1.channel = channel1</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230524085952096.png" alt="在Windows上运行flume"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230524085933511.png" alt="sink为logger"></p><blockquote><p>将 <code>sink</code> 修改为 &#96;&#96;hdfs&#96;</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources = source1</span><br><span class="line">andrew.channels = channel1</span><br><span class="line">andrew.sinks = sink1</span><br><span class="line"></span><br><span class="line">andrew.sources.source1.type = avro</span><br><span class="line">andrew.sources.source1.bind = 192.168.1.130</span><br><span class="line">andrew.sources.source1.port = 22222</span><br><span class="line"></span><br><span class="line">andrew.channels.channel1.type = memory</span><br><span class="line">andrew.channels.channel1.capacity = 1000</span><br><span class="line"></span><br><span class="line">andrew.sinks.sink1.type = hdfs</span><br><span class="line">andrew.sinks.sink1.hdfs.path = /batch3/spool1</span><br><span class="line">andrew.sinks.sink1.hdfs.fileType = DataStream</span><br><span class="line">andrew.sinks.sink1.hdfs.hdfs.writeFormat = Text</span><br><span class="line"></span><br><span class="line">andrew.sources.source1.channels = channel1</span><br><span class="line">andrew.sinks.sink1.channel = channel1</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230524090513614.png" alt="sink为hdfs"></p><h2 id="多路复用扇出"><a href="#多路复用扇出" class="headerlink" title="多路复用扇出"></a>多路复用扇出</h2><p>传输同一个数据到两个不同的位置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">andrew.sources = source1</span><br><span class="line">andrew.channels = channel1 channel2</span><br><span class="line">andrew.sinks = sink1 sink2</span><br><span class="line"></span><br><span class="line">andrew.sources.source1.type = spooldir</span><br><span class="line">andrew.sources.source1.spoolDir = /root/batch3</span><br><span class="line">andrew.sources.source1.batchSize = 500</span><br><span class="line">andrew.sources.source1.selector.type = replicating</span><br><span class="line"></span><br><span class="line">andrew.channels.channel1.type = memory</span><br><span class="line">andrew.channels.channel1.transactionCapacity = 1000</span><br><span class="line">andrew.channels.channel1.capacity = 1000</span><br><span class="line"></span><br><span class="line">andrew.channels.channel2.type = memory</span><br><span class="line">andrew.channels.channel2.transactionCapacity = 1000</span><br><span class="line">andrew.channels.channel2.capacity = 1000</span><br><span class="line"></span><br><span class="line">andrew.sinks.sink1.type = hdfs</span><br><span class="line">andrew.sinks.sink1.hdfs.path = /batch3/spool</span><br><span class="line">andrew.sinks.sink1.hdfs.fileType = DataStream</span><br><span class="line">andrew.sinks.sink1.hdfs.filePrefix = repdata</span><br><span class="line"></span><br><span class="line">andrew.sinks.sink2.type = logger</span><br><span class="line"><span class="comment"># andrew.sinks.sink2.type = hbase</span></span><br><span class="line"><span class="comment"># andrew.sinks.sink2.table =</span></span><br><span class="line"><span class="comment"># andrew.sinks.sink2.columnFamily =</span></span><br><span class="line"></span><br><span class="line">andrew.sources.source1.channels = channel1 channel2</span><br><span class="line">andrew.sinks.sink1.channel = channel1</span><br><span class="line">andrew.sinks.sink2.channel = channel2</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230525170824448.png" alt="传输完成logger"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230525170841060.png" alt="传输完成hdfs"></p>]]></content>
      
      
      <categories>
          
          <category> 数据科学与大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flume </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HBase 企业应用开发</title>
      <link href="/2023/04/08/HBase%20%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/"/>
      <url>/2023/04/08/HBase%20%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/</url>
      
        <content type="html"><![CDATA[<h1 id="HBase-企业应用开发"><a href="#HBase-企业应用开发" class="headerlink" title="HBase 企业应用开发"></a>HBase 企业应用开发</h1><p>一：简介</p><p>HBase的名字的来源于Hadoop database，即hadoop数据库，不同于一般的关系数据库，它是非结构化数据存储的数据库，而且它是基于列的而不是基于行的模式。</p><p>HBase是一个分布式的、面向列的、基于Google Bigtable的开源实现。</p><p>利用Hadoop HDFS作为其文件存储系统，</p><p>利用Hadoop MapReduce来处理HBase中的海量数据，</p><p>利用Zookeeper作为协同服务。</p><p>二：HBase重要概念</p><p>HBase的表结构</p><p>HBase以表的形式存储数据。表有行和列组成。列划分为若干个列族&#x2F;列簇(column family)，每个列族&#x2F;列簇下面可以有多个普通列。</p><p>表Table</p><p>HBase是用表来存储数据的。</p><p>命名空间namespace</p><p>namespace命名空间指对一组表的逻辑分组，类似RDBMS中的database，方便对表在业务上划分。</p><p>HBase系统默认定义了两个缺省的namespace：</p><p>hbase：系统内建表，包含namespace和meta表</p><p>default：用户建表时未指定namespace的表都创建在此</p><p>行键 Row Key</p><p>行键，每一行的主键列，每行的行键要唯一，行键的值为任意字符串(最大长度是 64KB，实际应用中长度一般为 10-100bytes),在HBase内部,rowKey保存为字节数组byte[]。</p><p>行的一次读写是原子操作 (不论一次读写多少列)</p><p>区域Region</p><p>Table在行的方向上分割为多个Region。</p><p>Region是按大小分割的，每个表开始只有一个region，随着数据的增多，region不断增大，当增大到一个阀值的时候，region就会等分为两个新的region,之后会有越来越多的region。</p><p>Region是HBase中分布式存储和负载均衡的最小单元。不同的Region分布到不同的RegionServer上。</p><p>Region由一个或者多个Store组成, 每个Store保存一个column family, 每个Store又由一个MemStore(存储在内存中)和0到多个StoreFile(存储在HDFS上)组成</p><p>列族 column family</p><p>列族是每个子列的父级，每个子列都属于一个列族,一个列族包含一个或者多个相关列，创建表的时候需要指定列族，而列不需要必须指定。通过“列族名:列名”来表示某个具体的子列。</p><p>HBase中的Schema就是 TableName + Column Family Name</p><p>列限定符</p><p>就是列族下的每个子列名称，或者称为相关列，或者称为限定符，只是翻译不同。</p><p>通过columnFamily:column来定位某个子列。</p><p>存储单元 cell</p><p>我们外观看到的每个单元格其实都对应着多个存储单元，默认情况下一个单元格对应着一个存储单元，一个存储单元可以存储一份数据，如果一个单元格有多个存储单元就表示一个单元格可以存储多个值。可以通过version来设置存储单元个数。可以通过</p><p>rowKey + columnFamily + column + timestamp来唯一确定一个存储单元。cell中的数据是没有类型的，全部是字节码形式存贮。</p><p>hbase按照时间戳降序排列各时间版本，其他映射建按照升序排序。</p><p>时间戳版本号 timestamp</p><p>每个cell都保存着同一份数据的多个版本。版本通过时间戳来索引。时间戳的类型是 64位整型。时间戳可以由hbase(在数据写入时自动 )赋值，此时时间戳是精确到毫秒的当前系统时间。时间戳也可以由客户显式赋值。如果应用程序要避免数据版本冲突，就必须自己生成具有唯一性的时间戳。每个cell中，不同版本的数据按照时间倒序排序，即最新的数据排在最前面。</p><p>为了避免数据存在过多版本造成的的管理 (包括存贮和索引)负担，hbase提供了两种数据版本回收方式。一是保存数据的最后n个版本，二是保存最近一段时间内的版本（比如最近七天）。用户可以针对每个列族进行设置。</p><p>三：HBase Shell</p><p>命名  描述  语法</p><p>help ‘命名名’  查看命令的使用描述  help ‘命令名’</p><p>whoami  我是谁  whoami</p><p>version  返回hbase版本信息  version</p><p>status  返回hbase集群的状态信息  status</p><p>table_help  查看如何操作表  table_help</p><p>create  创建表  create ‘表名’, ‘列族名1’, ‘列族名2’, ‘列族名N’</p><p>alter  修改列族  添加一个列族：alter ‘表名’, ‘列族名’</p><p>删除列族：alter ‘表名’, {NAME&#x3D;&gt; ‘列族名’, METHOD&#x3D;&gt; ‘delete’}</p><p>describe  显示表相关的详细信息  describe ‘表名’</p><p>list  列出hbase中存在的所有表  list</p><p>exists  测试表是否存在  exists ‘表名’</p><p>put  添加或修改的表的值  put ‘表名’, ‘行键’, ‘列族名’, ‘列值’</p><p>put ‘表名’, ‘行键’, ‘列族名:列名’, ‘列值’</p><p>scan  通过对表的扫描来获取对用的值  scan ‘表名’</p><p>扫描某个列族： scan ‘表名’, {COLUMN&#x3D;&gt;‘列族名’}</p><p>扫描某个列族的某个列： scan ‘表名’, {COLUMN&#x3D;&gt;‘列族名:列名’}</p><p>查询同一个列族的多个列： scan ‘表名’, {COLUMNS &#x3D;&gt; [ ‘列族名1:列名1’, ‘列族名1:列名2’, …]}</p><p>get  获取行或单元（cell）的值  get ‘表名’, ‘行键’</p><p>get ‘表名’, ‘行键’, ‘列族名’</p><p>count  统计表中行的数量  count ‘表名’</p><p>incr  增加指定表行或列的值  incr ‘表名’, ‘行键’, ‘列族:列名’, 步长值</p><p>get_counter  获取计数器  get_counter ‘表名’, ‘行键’, ‘列族:列名’</p><p>delete  删除指定对象的值（可以为表，行，列对应的值，另外也可以指定时间戳的值）  删除列族的某个列： delete ‘表名’, ‘行键’, ‘列族名:列名’</p><p>deleteall  删除指定行的所有元素值  deleteall ‘表名’, ‘行键’</p><p>truncate  重新创建指定表  truncate ‘表名’</p><p>enable  使表有效  enable ‘表名’</p><p>is_enabled  是否启用  is_enabled ‘表名’</p><p>disable  使表无效  disable ‘表名’</p><p>is_disabled  是否无效  is_disabled ‘表名’</p><p>drop  删除表  drop的表必须是disable的</p><p>disable ‘表名’</p><p>drop ‘表名’</p><p>shutdown  关闭hbase集群（与exit不同）  </p><p>tools  列出hbase所支持的工具  </p><p>exit  退出hbase shell  </p><p>HBase Shell 是官方提供的一组命令，用于操作HBase。如果配置了HBase的环境变量了，就可以知己在命令行中输入hbase shell 命令进入命令行。</p><p>hbase shell</p><p>help命令</p><p>可以通过 help ‘命名名称’来查看命令行的具体使用，包括命令的作用和用法。</p><p>通过help ‘hbase’ 命名来查看hbase shell 支持的所有命令，hbase将命令进行分组，其中ddl、dml使用较多。</p><p>四：general 命名</p><p>\1. 显示集群状态status</p><p>可以为 ‘summary’, ‘simple’, ‘detailed’, or ‘replication’. 默认为 ‘summary’</p><p>hbase&gt; status</p><p>hbase&gt; status ‘simple’</p><p>hbase&gt; status ‘summary’</p><p>hbase&gt; status ‘detailed’</p><p>hbase&gt; status ‘replication’</p><p>hbase&gt; status ‘replication’, ‘source’</p><p>hbase&gt; status ‘replication’, ‘sink’</p><p>\2. 查询数据库版本version</p><p>\3. 显示当前用户与组 whoami</p><p>\4. 查看操作表的命令table_help</p><p>\5. 退出HBase Shell exit</p><p>exit</p><p>五：ddl命令</p><p>\1. 创建表create</p><p>注意：创建表时只需要指定列族名称，不需要指定列名。</p><p># 语法</p><p>create ‘表名’, {NAME &#x3D;&gt; ‘列族名1’}, {NAME &#x3D;&gt; ‘列族名2’}, {NAME &#x3D;&gt; ‘列族名3’}</p><p># 此种方式是上上面的简写方式，使用上面方式可以为列族指定更多的属性，如VERSIONS、TTL、BLOCKCACHE、CONFIGURATION等属性</p><p>create ‘表名’, ‘列族名1’, ‘列族名2’, ‘列族名3’</p><p>create ‘表名’, {NAME &#x3D;&gt; ‘列族名1’, VERSIONS &#x3D;&gt; 版本号, TTL &#x3D;&gt; 过期时间, BLOCKCACHE &#x3D;&gt; true}</p><p># 示例</p><p>create ‘tbl_user’, ‘info’, ‘detail’</p><p>create ‘t1’, {NAME &#x3D;&gt; ‘f1’, VERSIONS &#x3D;&gt; 1, TTL &#x3D;&gt; 2592000, BLOCKCACHE &#x3D;&gt; true}</p><p>\2. 修改(添加、删除)表结构Schema alter</p><p>2.1 添加一个列族</p><p># 语法</p><p>alter ‘表名’, ‘列族名’</p><p># 示例</p><p>alter ‘tbl_user’, ‘address’</p><p>2.2 删除一个列族</p><p># 语法</p><p>alter ‘表名’, {NAME&#x3D;&gt; ‘列族名’, METHOD&#x3D;&gt; ‘delete’}</p><p># 示例</p><p>alter ‘tbl_user’, {NAME&#x3D;&gt; ‘address’, METHOD&#x3D;&gt; ‘delete’}</p><p>3.3 修改列族的属性</p><p>可以修改列族的VERSIONS、IN_MEMORY</p><p># 修改f1列族的版本为5</p><p>alter ‘t1’, NAME &#x3D;&gt; ‘f1’, VERSIONS &#x3D;&gt; 5</p><p># 修改多个列族，修改f2为内存，版本号为5</p><p>alter ‘t1’, ‘f1’, {NAME &#x3D;&gt; ‘f2’, IN_MEMORY &#x3D;&gt; true}, {NAME &#x3D;&gt; ‘f3’, VERSIONS &#x3D;&gt; 5}</p><p># 也可以修改table-scope属性，例如MAX_FILESIZE, READONLY,MEMSTORE_FLUSHSIZE, DEFERRED_LOG_FLUSH等。</p><p># 例如，修改region的最大大小为128MB：</p><p>alter ‘t1’, MAX_FILESIZE &#x3D;&gt; ‘134217728’</p><p>\3. 异步修改Schema alter_async</p><p># change or add the ‘f1’ column family in table ‘t1’ from defaults</p><p>to instead keep a maximum of 5 cell VERSIONS</p><p>alter_async ‘t1’, NAME &#x3D;&gt; ‘f1’, VERSIONS &#x3D;&gt; 5</p><p># delete the ‘f1’ column family in table ‘ns1:t1’</p><p>alter_async ‘ns1:t1’, NAME &#x3D;&gt; ‘f1’, METHOD &#x3D;&gt; ‘delete’</p><p>alter_async ‘ns1:t1’, ‘delete’ &#x3D;&gt; ‘f1’</p><p># change the max size of a family to 128MB</p><p>alter ‘t1’, METHOD &#x3D;&gt; ‘table_att’, MAX_FILESIZE &#x3D;&gt; ‘134217728’</p><p>alter ‘t1’, {NAME &#x3D;&gt; ‘f1’}, {NAME &#x3D;&gt; ‘f2’, METHOD &#x3D;&gt; ‘delete’}</p><p>\4. 获取alter_async执行的状态 alter_status</p><p>alter_status ‘表名’</p><p>1</p><p>\5. 获取表的描述describe</p><p># 语法</p><p>describe ‘表名’</p><p># 示例</p><p>describe ‘tbl_user’</p><p>\6. 列举所有表list</p><p>\7. 表是否存在exists</p><p># 语法</p><p>exists ‘表名’</p><p># 示例</p><p>exists ‘tbl_user’</p><p>\8. 启用表enable和禁用表disable</p><p>通过enable和disable来启用&#x2F;禁用这个表,相应的可以通过is_enabled和is_disabled来检查表是否被禁用。</p><p># 语法</p><p>enable ‘表名’</p><p>is_enabled ‘表名’</p><p>disable ‘表名’</p><p>is_disabled ‘表名’</p><p># 示例</p><p>disable ‘tbl_user’</p><p>is_disabled ‘tbl_user’</p><p>enable ‘tbl_user’</p><p>is_enabled ‘tbl_user’</p><p>\9. 禁用满足正则表达式的所有表disable_all</p><p>.匹配除“\n”和”\r”之外的任何单个字符</p><p>*匹配前面的子表达式任意次</p><p># 匹配以t开头的表名</p><p>disable_all ‘t.*’</p><p># 匹配指定命名空间ns下的以t开头的所有表</p><p>disable_all ‘ns:t.*’</p><p># 匹配ns命名空间下的所有表</p><p>disable_all ‘ns:.*’</p><p>\10. 启用满足正则表达式的所有表enable_all</p><p>enable_all ‘t.*’</p><p>enable_all ‘ns:t.*’</p><p>enable_all ‘ns:.*’</p><p>\11. 删除表drop</p><p>需要先禁用表，然后再删除表，启用的表是不允许删除的</p><p># 语法</p><p>disable ‘表名’</p><p>drop ‘表名’</p><p># 示例</p><p>disable ‘tbl_user’</p><p>drop ‘tbl_user’</p><p>\12. 删除满足正则表达式的所有表drop_all</p><p>drop_all ‘t.*’</p><p>drop_all ‘ns:t.*’</p><p>drop_all ‘ns:.*’</p><p>\13. 获取某个表赋值给一个变量 get_table</p><p>通过 var &#x3D; get_table ‘表名’ 赋值给一个变量对象，然后对象.来调用，就像面向对象编程一样，通过对象.方法来调用，这种方式在操作某个表时就不必每次列举表名了。</p><p>\14. 获取rowKey所在的区 locate_region</p><p>locate_region ‘表名’, ‘行键’</p><p>\15. 显示hbase所支持的所有过滤器show_filters</p><p>过滤器用于get和scan命令中作为筛选数据的条件，类型关系型数据库中的where的作用</p><p>六：namespace命令</p><p>\1. 列举命名空间 list_namespace</p><p>\2. 获取命名空间描述 describe_namespace</p><p>\3. 查看命名空间下的所有表 list_namespace_tables</p><p>\4. 创建命名空间create_namespace</p><p>\5. 修改命名空间的属性</p><p># add&#x2F;modify a property</p><p>alter_namespace ‘ns1’, {METHOD &#x3D;&gt; ‘set’, ‘PROPERTY_NAME’ &#x3D;&gt; ‘PROPERTY_VALUE’}</p><p># delete a property</p><p>alter_namespace ‘ns1’, {METHOD &#x3D;&gt; ‘unset’, NAME&#x3D;&gt;’PROPERTY_NAME’}</p><p>\6. 删除命名空间drop_namespace</p><p>drop_namespace ‘命名空间名称’</p><p>七：dml命令</p><p>\1. 插入或者修改数据put</p><p># 语法</p><p># 当列族中只有一个列时’列族名:列名’使用’列族名’</p><p>put ‘表名’, ‘行键’, ‘列族名’, ‘列值’</p><p>put ‘表名’, ‘行键’, ‘列族名:列名’, ‘列值’</p><p># 示例</p><p># 创建表</p><p>create ‘tbl_user’, ‘info’, ‘detail’, ‘address’</p><p># 第一行数据</p><p>put ‘tbl_user’, ‘mengday’, ‘info:id’, ‘1’</p><p>put ‘tbl_user’, ‘mengday’, ‘info:name’, ‘张三’</p><p>put ‘tbl_user’, ‘mengday’, ‘info:age’, ‘28’</p><p>put ‘tbl_user’, ‘mengday’, ‘detail:birthday’, ‘1990-06-26’</p><p>put ‘tbl_user’, ‘mengday’, ‘detail:email’, ‘<a href="mailto:abc@163.com">abc@163.com</a>‘</p><p>put ‘tbl_user’, ‘mengday’, ‘detail:create_time’, ‘2019-03-04 14:26:10’</p><p>put ‘tbl_user’, ‘mengday’, ‘address’, ‘上海市’</p><p># 第二行数据</p><p>put ‘tbl_user’, ‘vbirdbest’, ‘info:id’, ‘2’</p><p>put ‘tbl_user’, ‘vbirdbest’, ‘info:name’, ‘李四’</p><p>put ‘tbl_user’, ‘vbirdbest’, ‘info:age’, ‘27’</p><p>put ‘tbl_user’, ‘vbirdbest’, ‘detail:birthday’, ‘1990-06-27’</p><p>put ‘tbl_user’, ‘vbirdbest’, ‘detail:email’, ‘<a href="mailto:xxx@gmail.com">xxx@gmail.com</a>‘</p><p>put ‘tbl_user’, ‘vbirdbest’, ‘detail:create_time’, ‘2019-03-05 14:26:10’</p><p>put ‘tbl_user’, ‘vbirdbest’, ‘address’, ‘北京市’</p><p># 第一行数据</p><p>put ‘tbl_user’, ‘xiaoming’, ‘info:id’, ‘3’</p><p>put ‘tbl_user’, ‘xiaoming’, ‘info:name’, ‘王五’</p><p>put ‘tbl_user’, ‘xiaoming’, ‘info:age’, ‘26’</p><p>put ‘tbl_user’, ‘xiaoming’, ‘detail:birthday’, ‘1990-06-28’</p><p>put ‘tbl_user’, ‘xiaoming’, ‘detail:email’, ‘<a href="mailto:xyz@qq.com">xyz@qq.com</a>‘</p><p>put ‘tbl_user’, ‘xiaoming’, ‘detail:create_time’, ‘2019-03-06 14:26:10’</p><p>put ‘tbl_user’, ‘xiaoming’, ‘address’, ‘杭州市’</p><p>\2. 全表扫描scan</p><p>获取表的所有数据</p><p># 语法</p><p>scan ‘表名’</p><p># 示例</p><p>scan ‘tbl_user’</p><p>注意：中文编码了</p><p>扫描整个列簇</p><p># 语法</p><p>scan ‘表名’, {COLUMN&#x3D;&gt;’列族名’}</p><p># 示例</p><p>scan ‘tbl_user’, {COLUMN&#x3D;&gt;’info’}</p><p>扫描整个列簇的某个列</p><p># 语法</p><p>scan ‘表名’, {COLUMN&#x3D;&gt;’列族名:列名’}</p><p># 示例</p><p>scan ‘tbl_user’, {COLUMN&#x3D;&gt;’info:age’}</p><p>\3. 获取数据get</p><p># 语法</p><p>get ‘表名’, ‘行键’</p><p># 示例</p><p>get ‘tbl_user’, ‘mengday’</p><p>根据某一行某列族的数据</p><p># 语法</p><p>get ‘表名’, ‘行键’, ‘列族名’</p><p># 示例</p><p>get ‘tbl_user’, ‘mengday’, ‘info’</p><p># 创建表，c1版本为4， 元数据mykey&#x3D;myvalue</p><p>hbase(main):009:0&gt; create ‘t1’, {NAME &#x3D;&gt; ‘c1’, VERSIONS &#x3D;&gt; 4}, METADATA &#x3D;&gt; { ‘mykey’ &#x3D;&gt; ‘myvalue’ }</p><p>0 row(s) in 2.2810 seconds</p><p>&#x3D;&gt; Hbase::Table - t1</p><p># 添加列族c2, c3</p><p>hbase(main):010:0&gt; alter ‘t1’, ‘c2’, ‘c3’</p><p>Updating all regions with the new schema…</p><p>1&#x2F;1 regions updated.</p><p>Done.</p><p>Updating all regions with the new schema…</p><p>1&#x2F;1 regions updated.</p><p>Done.</p><p>0 row(s) in 3.8320 seconds</p><p># 出入数据，c1 插入4个版本的值</p><p>hbase(main):011:0&gt; put ‘t1’, ‘r1’, ‘c1’, ‘v1’</p><p>0 row(s) in 0.1000 seconds</p><p>hbase(main):012:0&gt; put ‘t1’, ‘r1’, ‘c1’, ‘v11’</p><p>0 row(s) in 0.0180 seconds</p><p>hbase(main):013:0&gt; put ‘t1’, ‘r1’, ‘c1’, ‘v111’</p><p>0 row(s) in 0.0140 seconds</p><p>hbase(main):014:0&gt; put ‘t1’, ‘r1’, ‘c1’, ‘v1111’</p><p>0 row(s) in 0.0140 seconds</p><p># 插入c2、c3的值</p><p>hbase(main):015:0&gt; put ‘t1’, ‘r1’, ‘c2’, ‘v2’</p><p>0 row(s) in 0.0140 seconds</p><p>hbase(main):016:0&gt; put ‘t1’, ‘r1’, ‘c3’, ‘v3’</p><p>0 row(s) in 0.0210 seconds</p><p># 获取rowKey&#x3D;r1的一行记录</p><p>hbase(main):017:0&gt; get ‘t1’, ‘r1’</p><p>COLUMN                       CELL</p><p>c1:                        timestamp&#x3D;1552819382575, value&#x3D;v1111</p><p>c2:                        timestamp&#x3D;1552819392398, value&#x3D;v2</p><p>c3:                        timestamp&#x3D;1552819398244, value&#x3D;v3</p><p>3 row(s) in 0.0550 seconds</p><p># 获取rowKey&#x3D;r1并且 1552819392398 &lt;&#x3D; 时间戳范围 &lt; 1552819398244</p><p>hbase(main):018:0&gt; get ‘t1’, ‘r1’, {TIMERANGE &#x3D;&gt; [1552819392398, 1552819398244]}</p><p>COLUMN                       CELL</p><p>c2:                        timestamp&#x3D;1552819392398, value&#x3D;v2</p><p>1 row(s) in 0.0090 seconds</p><p># 获取指定列的值</p><p>hbase(main):019:0&gt; get ‘t1’, ‘r1’, {COLUMN &#x3D;&gt; ‘c1’}</p><p>COLUMN                       CELL</p><p>c1:                        timestamp&#x3D;1552819382575, value&#x3D;v1111</p><p>1 row(s) in 0.0160 seconds</p><p># 获取指定列的值，多个值使用数组表示</p><p>hbase(main):020:0&gt; get ‘t1’, ‘r1’, {COLUMN &#x3D;&gt; [‘c1’, ‘c2’, ‘c3’]}</p><p>COLUMN                       CELL</p><p>c1:                        timestamp&#x3D;1552819382575, value&#x3D;v1111</p><p>c2:                        timestamp&#x3D;1552819392398, value&#x3D;v2</p><p>c3:                        timestamp&#x3D;1552819398244, value&#x3D;v3</p><p>3 row(s) in 0.0170 seconds</p><p># 获取c1的值，获取4个版本的值，默认是按照时间戳降续排序的</p><p>hbase(main):021:0&gt; get ‘t1’, ‘r1’, {COLUMN &#x3D;&gt; ‘c1’, VERSIONS &#x3D;&gt; 4}</p><p>COLUMN                       CELL</p><p>c1:                        timestamp&#x3D;1552819382575, value&#x3D;v1111</p><p>c1:                        timestamp&#x3D;1552819376343, value&#x3D;v111</p><p>c1:                        timestamp&#x3D;1552819368993, value&#x3D;v11</p><p>c1:                        timestamp&#x3D;1552819362975, value&#x3D;v1</p><p>4 row(s) in 0.0180 seconds</p><p># 获取c1的3个版本值</p><p>hbase(main):027:0* get ‘t1’, ‘r1’, {COLUMN &#x3D;&gt; ‘c1’, VERSIONS &#x3D;&gt; 3}</p><p>COLUMN                        CELL</p><p>c1:                         timestamp&#x3D;1552819382575, value&#x3D;v1111</p><p>c1:                         timestamp&#x3D;1552819376343, value&#x3D;v111</p><p>c1:                         timestamp&#x3D;1552819368993, value&#x3D;v11</p><p>3 row(s) in 0.0090 seconds</p><p># 获取指定时间戳版本的列</p><p>hbase(main):022:0&gt; get ‘t1’, ‘r1’, {COLUMN &#x3D;&gt; ‘c1’, TIMESTAMP &#x3D;&gt; 1552819376343}</p><p>COLUMN                       CELL</p><p>c1:                        timestamp&#x3D;1552819376343, value&#x3D;v111</p><p>1 row(s) in 0.0170 seconds</p><p>hbase(main):023:0&gt; get ‘t1’, ‘r1’, {COLUMN &#x3D;&gt; ‘c1’, TIMESTAMP &#x3D;&gt; 1552819376343, VERSIONS &#x3D;&gt; 4}</p><p>COLUMN                       CELL</p><p>c1:                        timestamp&#x3D;1552819376343, value&#x3D;v111</p><p>1 row(s) in 0.0130 seconds</p><p># 获取rowKey&#x3D;r1中的值等于v2的所有列</p><p>hbase(main):024:0&gt; get ‘t1’, ‘r1’, {FILTER &#x3D;&gt; “ValueFilter(&#x3D;, ‘binary:v2’)”}</p><p>COLUMN                       CELL</p><p>c2:                        timestamp&#x3D;1552819392398, value&#x3D;v2</p><p>1 row(s) in 0.0510 seconds</p><p>hbase(main):025:0&gt; get ‘t1’, ‘r1’, {COLUMN &#x3D;&gt; ‘c1’, ATTRIBUTES &#x3D;&gt; {‘mykey’&#x3D;&gt;’myvalue’}}</p><p>COLUMN                       CELL</p><p>c1:                        timestamp&#x3D;1552819382575, value&#x3D;v1111</p><p>1 row(s) in 0.0100 seconds</p><p>\4. 删除某个列族中的某个列delete</p><p># 语法</p><p>delete ‘表名’, ‘行键’, ‘列族名:列名’</p><p>create ‘tbl_test’, ‘columnFamily1’</p><p>put ‘tbl_test’, ‘rowKey1’, ‘columnFamily1:column1’, ‘value1’</p><p>put ‘tbl_test’, ‘rowKey1’, ‘columnFamily1:column2’, ‘value2’</p><p>delete ‘tbl_test’, ‘rowKey1’, ‘columnFamily1:column1’</p><p>\5. 删除某行数据deleteall</p><p># 语法</p><p>deleteall ‘表名’, ‘行键’</p><p># 示例</p><p>deleteall ‘tbl_test’, ‘rowKey1’</p><p>\6. 清空整个表的数据truncate</p><p>先disable表，然后再drop表，最后重新create表</p><p>truncate ‘表名’</p><p>\7. 查询表中有多少行count</p><p># 语法</p><p>count ‘表名’</p><p># 示例</p><p>count ‘tbl_user’</p><p>\8. 自增incr</p><p># 语法</p><p>incr ‘表名’, ‘行键’, ‘列族:列名’, 步长值</p><p># 示例</p><p># 注意：incr 可以对不存的行键操作，如果行键已经存在会报错，如果使用put修改了incr的值再使用incr也会报错</p><p># ERROR: org.apache.hadoop.hbase.DoNotRetryIOException: Field is not a long, it’s 2 bytes wide</p><p>incr ‘tbl_user’, ‘xiaohong’, ‘info:age’, 1</p><p>\9. 计数器get_counter</p><p># 点击量：日、周、月</p><p>create ‘counters’, ‘daily’, ‘weekly’, ‘monthly’</p><p>incr ‘counters’, ‘20110101’, ‘daily:hits’, 1</p><p>incr ‘counters’, ‘20110101’, ‘daily:hits’, 1</p><p>get_counter ‘counters’, ‘20110101’, ‘daily:hits’</p><p>\10. 修饰词</p><p>10.1 COLUMNS: 查询同一个列族的多个列</p><p># 语法</p><p>scan ‘表名’, {COLUMNS &#x3D;&gt; [ ‘列族名1:列名1’, ‘列族名1:列名2’, …]}&#x3D;</p><p># 示例</p><p>scan ‘tbl_user’, {COLUMNS &#x3D;&gt; [ ‘info:id’, ‘info:age’]}</p><p>10.2 TIMESTAMP 指定时间戳</p><p>scan ‘t1’, {COLUMNS &#x3D;&gt; ‘c2’, TIMESTAMP&#x3D;&gt; 1552819392398}</p><p>10.3 TIMERANGE表示的是”&gt;&#x3D;开始时间 and &lt;结束时间“</p><p># 语法</p><p>scan ‘表名’,{TIMERANGE&#x3D;&gt;[timestamp1, timestamp2]}</p><p># 示例</p><p>scan ‘tbl_user’,{TIMERANGE&#x3D;&gt;[1551938004321, 1551938036450]}</p><p>10.4 VERSIONS</p><p>默认情况下一个列只能存储一个数据，后面如果修改数据就会将原来的覆盖掉，可以通过指定VERSIONS时HBase一列能存储多个值。</p><p>create ‘tbl_test’, ‘columnFamily1’</p><p>describe ‘tbl_test’</p><p># 修改列族版本号</p><p>alter ‘tbl_test’, { NAME&#x3D;&gt;’columnFamily1’, VERSIONS&#x3D;&gt;3 }</p><p>put ‘tbl_test’, ‘rowKey1’, ‘columnFamily1:column1’, ‘value1’</p><p>put ‘tbl_test’, ‘rowKey1’, ‘columnFamily1:column1’, ‘value2’</p><p>put ‘tbl_test’, ‘rowKey1’, ‘columnFamily1:column1’, ‘value3’</p><p># 默认返回最新的一条数据</p><p>get ‘tbl_test’,’rowKey1’,’columnFamily1:column1’</p><p># 返回3个</p><p>get ‘tbl_test’,’rowKey1’,{COLUMN&#x3D;&gt;’columnFamily1:column1’, VERSIONS&#x3D;&gt;3}</p><p># 返回2个</p><p>get ‘tbl_test’,’rowKey1’,{COLUMN&#x3D;&gt;’columnFamily1:column1’, VERSIONS&#x3D;&gt;2}</p><p>10.5 STARTROW</p><p>ROWKEY起始行。会先根据这个key定位到region，再向后扫描</p><p># 语法</p><p>scan ‘表名’, { STARTROW &#x3D;&gt; ‘行键名’}</p><p># 示例</p><p>scan ‘tbl_user’, { STARTROW &#x3D;&gt; ‘vbirdbest’}</p><p>10.6 STOPROW ：截止到STOPROW行，STOPROW行之前的数据，不包括STOPROW这行数据</p><p># 语法</p><p>scan ‘表名’, { STOPROW &#x3D;&gt; ‘行键名’}</p><p># 示例</p><p>scan ‘tbl_user’, { STOPROW &#x3D;&gt; ‘vbirdbest’}</p><p>10.7 LIMIT 返回的行数</p><p># 语法</p><p>scan ‘表名’, { LIMIT &#x3D;&gt; 行数}</p><p># 示例</p><p>scan ‘tbl_user’, { LIMIT &#x3D;&gt; 2 }</p><p>\11. FILTER条件过滤器</p><p>过滤器之间可以使用AND、OR连接多个过滤器。</p><p>ValueFilter 值过滤器</p><p># 语法：binary 等于某个值</p><p>scan ‘表名’, FILTER&#x3D;&gt;”ValueFilter(&#x3D;,’binary:列值’)”</p><p># 语法 substring:包含某个值</p><p>scan ‘表名’, FILTER&#x3D;&gt;”ValueFilter(&#x3D;,’substring:列值’)”</p><p># 示例</p><p>scan ‘tbl_user’, FILTER&#x3D;&gt;”ValueFilter(&#x3D;, ‘binary:26’)”</p><p>scan ‘tbl_user’, FILTER&#x3D;&gt;”ValueFilter(&#x3D;, ‘substring:6’)”</p><p>ColumnPrefixFilter 列名前缀过滤器</p><p># 语法 substring:包含某个值</p><p>scan ‘表名’, FILTER&#x3D;&gt;”ColumnPrefixFilter(‘列名前缀’)”</p><p># 示例</p><p>scan ‘tbl_user’, FILTER&#x3D;&gt;”ColumnPrefixFilter(‘birth’)”</p><p># 通过括号、AND和OR的条件组合多个过滤器</p><p>scan ‘tbl_user’, FILTER&#x3D;&gt;”ColumnPrefixFilter(‘birth’) AND ValueFilter(&#x3D;,’substring:26’)”</p><p>rowKey字典排序</p><p>Table中的所有行都是按照row key的字典排序的</p><p>三：HBase 常见错误</p><p>hbase shell在使用的时候经常会报错，这里列举了几个错误：</p><p>\1. HBase创建不存在的表报已经存在错误 ERROR: Table already exists: !</p><p>解决办法：</p><p># 1. 进入zookeeper client模式</p><p>cd &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;hbase&#x2F;1.2.9&#x2F;bin</p><p>hbase zkcli</p><p># 2. 在zk client模式下输入ls &#x2F;hbase&#x2F;table命令看到zombie table</p><p>ls &#x2F;hbase&#x2F;table</p><p># 3. 删除表，TABLE_NAME为要删除的表名</p><p>rmr &#x2F;hbase&#x2F;table&#x2F;TABLE_NAME</p><p># 4. 重启hbase</p><p>.&#x2F;stop-hbase.sh</p><p>.&#x2F;start-hbase.sh</p><p>\2. ERROR: org.apache.hadoop.hbase.ipc.ServerNotRunningYetException: Server is not running yet</p><p># 使用jps查看是否有datanode服务</p><p>jps</p><p>删除hadoop 的临时目录</p><p>&#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;hadoop&#x2F;3.1.1&#x2F;libexec&#x2F;tmp</p><p>\3. ERROR: Can’t get master address from ZooKeeper; znode data &#x3D;&#x3D; null</p><p># 重启hbase</p><p>.&#x2F;stop-hbase.sh</p><p>.&#x2F;start-hbase.sh</p><p>\4. ERROR: org.apache.hadoop.hbase.PleaseHoldException: Master is initializing</p><p>这个错误出现的原因很多，这里说一下我的错误原因是hbase-site.xml中的有个属性名配置错误, 网上有的是hbase.rootdir, name配置成这个有的时候会报错有的时候不会报错，报错的时候格式化一下hadoop然后再重新启动，这种方式有的时候能解决问题，有的时候解决不了。这里我将hbase.rootdir改为hbase.root.dir 就不报错了，不知道是不是版本不同属性名配置不同，我的hadoop版本为3.1.1，hbase版本为1.2.9</p><!-- 正确的配置的属性名应为hbase.root.dir而不是hbase.rootdir --><property><p> <name>hbase.root.dir</name></p><p> <value><a href="hdfs://localhost:8020/hbase">hdfs:&#x2F;&#x2F;localhost:8020&#x2F;hbase</a></value></p></property> ]]></content>
      
      
      <categories>
          
          <category> 数据科学与大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HBase </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hadoop 编程</title>
      <link href="/2023/04/08/Hadoop%20%E7%BC%96%E7%A8%8B/"/>
      <url>/2023/04/08/Hadoop%20%E7%BC%96%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="Hadoop-编程"><a href="#Hadoop-编程" class="headerlink" title="Hadoop 编程"></a>Hadoop 编程</h1><p>一、hadoop所在目录</p><p>cd usr&#x2F;local&#x2F;hadoop</p><p>二、启动hadoop</p><p>bash .&#x2F;starth.sh </p><p>% 运行start-dfs.sh</p><p>% 运行start-yarn.sh</p><p>启动dfs，浏览器查看：</p><p>172.16.31.17:50070</p><p>启动脚本，浏览器查看：</p><p>172.16.31.17:8088</p><p>停止脚本：</p><p>bash .&#x2F;stoph.sh</p><p>三、常用命令</p><p>参考链接：</p><p><a href="https://www.cnblogs.com/LHWorldBlog/p/8514994.html">https://www.cnblogs.com/LHWorldBlog/p/8514994.html</a></p><p>1.显示hadoop目录结构</p><p>hdfs dfs -ls -R &#x2F;</p><p>2.在hadoop指定目录内创建新目录</p><p>hdfs dfs -mkdir &#x2F;winnie</p><p>3.将本地文件夹存储至hadoop</p><p>hdfs dfs -put [本地目录] [hadoop目录]</p><p>4.将本地文件存储至hadoop</p><p>hdfs dfs -put [本地地址] [hadoop目录]</p><p>5.查看指定目录下内容</p><p>hdfs dfs -ls [文件目录]</p><p>6.打开某个已存在文件</p><p>hdfs dfs -cat [file_path]</p><p>7.在hadoop指定目录下新建一个空文件</p><p>hdfs dfs -touchz &#x2F;winnie&#x2F;test03.txt</p><p>8.将hadoop上某个文件重命名</p><p>hdfs dfs -mv &#x2F;winnie&#x2F;test03.txt &#x2F;winnie&#x2F;test.txt</p><p>9.将hadoop上某个文件down至本地已有目录下</p><p>hdfs dfs -get [文件目录] [本地目录]</p><p>10.将hadoop指定目录下所有内容保存为一个文件，同时down至本地</p><p>hdfs dfs -getmerge &#x2F;winnie&#x2F;hadoop-file &#x2F;home&#x2F;spark&#x2F;hadoop-file&#x2F;test.txt</p><p>11.删除hadoop上指定文件</p><p>hdfs dfs -rm [文件地址]</p><p>12.删除hadoop上指定文件夹（包含子目录等）</p><p>hdfs dfs -rm -r [目录地址]</p><p>hdfs dfs -rmr [目录地址]</p><p>13.将正在运行的hadoop作业kill掉</p><p>hadoop job -kill [job-id]</p><p>14.查看帮助</p><p>hdfs dfs -help</p><p>四、安全模式</p><p>1.退出安全模式</p><p>NameNode在启动时会自动进入安全模式，安全模式是NameNode的一种状态，在这个阶段，文件系统不允许有任何修改。</p><p>系统显示Name node in safe mode，说明系统正处于安全模式，这时只需要等待几十秒即可，也可通过下面的命令退出安全模式：</p><p>&#x2F;usr&#x2F;local&#x2F;hadoop$bin&#x2F;hadoop dfsadmin -safemode leave</p><p>2.进入安全模式</p><p>在必要情况下，可以通过以下命令吧HDFS置于安全模式：</p><p>&#x2F;usr&#x2F;local&#x2F;hadoop$bin&#x2F;hadoop dfsadmin -safemode enter</p><p>五、补充</p><p>1.对hdfs操作的命令格式是hdfs dfs</p><p>1.1 -ls 表示对hdfs下一级目录的查看</p><p>1.2 -lsr 表示对hdfs目录的递归查看</p><p>1.3 -mkdir 创建目录</p><p>1.4 -put 从Linux上传文件到hdfs</p><p>1.5 -get 从hdfs下载文件到linux</p><p>1.6 -text 查看文件内容</p><p>1.7 -rm 表示删除文件</p><p>1.7 -rmr 表示递归删除文件</p><p>2.hdfs在对数据存储进行block划分时，如果文件大小超过block，那么按照block大小进行划分；不如block size的，划分为一个块，是实际数据大小。</p><p>3.hadoop常用命令：</p><p>hdfs dfs 查看Hadoop HDFS支持的所有命令  </p><p>hdfs dfs –ls 列出目录及文件信息  </p><p>hdfs dfs –lsr 循环列出目录、子目录及文件信息   </p><p>hdfs dfs –tail &#x2F;user&#x2F;sunlightcs&#x2F;test.txt 查看最后1KB的内容  </p><p>hdfs dfs –copyFromLocal test.txt &#x2F;user&#x2F;sunlightcs&#x2F;test.txt 从本地文件系统复制文件到HDFS文件系统，等同于put命令  </p><p>hdfs dfs –copyToLocal &#x2F;user&#x2F;sunlightcs&#x2F;test.txt test.txt 从HDFS文件系统复制文件到本地文件系统，等同于get命令  </p><p>hdfs dfs –chgrp [-R] &#x2F;user&#x2F;sunlightcs 修改HDFS系统中&#x2F;user&#x2F;sunlightcs目录所属群组，选项-R递归执行，跟linux命令一样  </p><p>hdfs dfs –chown [-R] &#x2F;user&#x2F;sunlightcs 修改HDFS系统中&#x2F;user&#x2F;sunlightcs目录拥有者，选项-R递归执行  </p><p>hdfs dfs –chmod [-R] MODE &#x2F;user&#x2F;sunlightcs 修改HDFS系统中&#x2F;user&#x2F;sunlightcs目录权限，MODE可以为相应权限的3位数或+&#x2F;-{rwx}，选项-R递归执行</p><p>hdfs dfs –count [-q] PATH 查看PATH目录下，子目录数、文件数、文件大小、文件名&#x2F;目录名  </p><p>hdfs dfs –cp SRC [SRC …] DST    将文件从SRC复制到DST，如果指定了多个SRC，则DST必须为一个目录  </p><p>hdfs dfs –du PATH 显示该目录中每个文件或目录的大小  </p><p>hdfs dfs –dus PATH 类似于du，PATH为目录时，会显示该目录的总大小  </p><p>hdfs dfs –expunge 清空回收站，文件被删除时，它首先会移到临时目录.Trash&#x2F;中，当超过延迟时间之后，文件才会被永久删除  </p><p>hdfs dfs –getmerge SRC [SRC …] LOCALDST [addnl]  获取由SRC指定的所有文件，将它们合并为单个文件，并写入本地文件系统中的LOCALDST，选项addnl将在每个文件的末尾处加上一个换行符  </p><p>hdfs dfs –test –[ezd] PATH   对PATH进行如下类型的检查：-e PATH是否存在，如果PATH存在，返回0，否则返回1；-z 文件是否为空，如果长度为0，返回0，否则返回1； -d 是否为目录，如果PATH为目录，返回0，否则返回1 </p><p>hdfs dfs –text PATH 显示文件的内容，当文件为文本文件时，等同于cat；文件为压缩格式（gzip以及hadoop的二进制序列文件格式）时，会先解压缩  </p><p>hdfs dfs –help ls 查看某个[ls]命令的帮助文档</p>]]></content>
      
      
      <categories>
          
          <category> 数据科学与大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hive 编程</title>
      <link href="/2023/04/08/Hive%20%E7%BC%96%E7%A8%8B/"/>
      <url>/2023/04/08/Hive%20%E7%BC%96%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="Hive-编程"><a href="#Hive-编程" class="headerlink" title="Hive 编程"></a>Hive 编程</h1><p><em><strong>*启动Hive:*</strong></em></p><p>1.先启动HiveServer2服务:</p><p>hive –service hiveserver2</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps80.jpg" alt="img"> </p><p>然后挂着这个终端</p><p>2.再打开第二个终端</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps81.jpg" alt="img"> </p><p>这个终端负责写指令</p><p>3.然后在新的终端输入beeline 用来显示表格框框</p><p>4.输入指令 ! connect jdbc:hive2:&#x2F;&#x2F;zp:10000&#x2F;default (zp是主机名,可以改成自己的)</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps82.jpg" alt="img"> </p><p>5.输入用户名密码(虚拟机登录时的用户名密码)</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps83.jpg" alt="img"> </p><p>6.然后开始在终端中写Hive指令</p><p><em><strong>*基础:*</strong></em></p><p>展示所有数据库:</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps84.jpg" alt="img"> </p><p>展示这个数据库的内容:</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps85.jpg" alt="img"> </p><p>展示默认数据库:</p><p>describe database default;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps86.jpg" alt="img"> </p><p>创建数据库:</p><p>Create database db_name;</p><p>create database if not exists db_name;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps87.jpg" alt="img"> </p><p>创建数据库时添加注释:</p><p>create database if not exists niit_db1 comment “Its NIIT Database”;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps88.jpg" alt="img"> </p><p>创建数据库时添加属性:</p><p>create database if not exists db2 with dbproperties(‘creator’&#x3D;’DPS’,’date’&#x3D;’2021-03-02’);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps89.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps90.jpg" alt="img"> </p><p>展示数据库的属性:</p><p>describe database extended db1;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps91.jpg" alt="img"> </p><p>数据库中无表时删除数据库:</p><p>drop database db_name;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps92.jpg" alt="img"> </p><p>数据库有表时删除数据库:</p><p>drop database if exists db_name CASCADE;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps93.jpg" alt="img"> </p><p>创建表:</p><p>create table Manager(name string, id int,address string,age int) row format delimited fields terminated by ‘,’ lines terminated by ‘\n’ stored as textfile;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps94.jpg" alt="img"> </p><p>建表:</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps95.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps96.jpg" alt="img"> </p><p>展示表:</p><p>describe tb_name;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps97.jpg" alt="img"> </p><p>获取默认位置:</p><p>set hive.metastore.warehouse.dir</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps98.jpg" alt="img"> </p><p>将表存储到另一个位置:</p><p>create table manager1(name string, id int,address string,age int) row format delimited fields terminated by ‘,’ lines terminated by ‘\n’ stored as textfile location ‘&#x2F;user&#x2F;dps&#x2F;manager1’;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps99.jpg" alt="img"> </p><p>删除表:</p><p>drop table if exists tb_name;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps100.jpg" alt="img"> </p><p>重命名表:</p><p>alter table tb_name rename to new_tb_name;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps101.jpg" alt="img"> </p><p>更改列名和数据类型:</p><p>ALTER TABLE tb_name CHANGE old_column new_column data_type;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps102.jpg" alt="img"> </p><p>在现有表中添加新列:</p><p>ALTER TABLE tb_name ADD COLUMNS (dept STRING COMMENT ‘Department name’);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps103.jpg" alt="img"> </p><p>从本地加载数据:(不会覆盖,如果输入两次相同的指令会在表中叠加)</p><p>load data local inpath’&#x2F;tools&#x2F;datafiles&#x2F;data.txt’ into table manager;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps104.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps105.jpg" alt="img"> </p><p>检索数据:</p><p>Select * from manager;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps106.jpg" alt="img"> </p><p>覆盖表中的现有数据:</p><p>load data local inpath’&#x2F;tools&#x2F;datafiles&#x2F;data2.txt’ overwrite into table manager;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps107.jpg" alt="img"> </p><p>将文件从本地复制到HDFS:</p><p>a) 先在HDFS中创建文件夹</p><p>hdfs dfs -mkdir &#x2F;user&#x2F;files</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps108.jpg" alt="img"> </p><p>b) 从本地复制到HDFS</p><p>hdfs dfs -copyFromLocal &#x2F;tools&#x2F;datafiles&#x2F;data.txt &#x2F;user&#x2F;files</p><p>或者</p><p>hdfs dfs -put &#x2F;tools&#x2F;datafiles&#x2F;data2.txt &#x2F;user&#x2F;files</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps109.jpg" alt="img"> </p><p>从HDFS加载数据到表中:</p><p>load data local inpath’&#x2F;tools&#x2F;datafiles&#x2F;data.txt’ into table manager;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps110.jpg" alt="img"> </p><p><em><strong>*Hive管理:*</strong></em></p><p>内部表:</p><p>内部表是由Hive控制的。</p><p>metastore存储的元数据和HDFS的实际数据都被Hive控制。</p><p>访问内部表数据的唯一方法是使用Hive。不管数据的位置是HDFS还是Hive自己的仓库目录。</p><p>Hive不允许任何其他应用程序访问这些数据。如果我们必须访问内部表的数据，我们只能对这些数据使用Hive查询。</p><p>当我们删除内部表时，元数据和实际数据都会丢失，因为它们都被Hive控制。</p><p>默认情况下，如果我们创建的表没有使用“external”关键字，那么它将是内部表。</p><p>因为默认情况下，如果表没有被提到为外部表，那么它的内部表。</p><p>create table manager2(name string, id int,address string,age int) row format delimited fields terminated by ‘,’ lines terminated by ‘\n’ stored as textfile;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps111.jpg" alt="img"> </p><p>外部表:</p><p>在外部表的情况下，只有存储在metastore的元数据被Hive控制。．</p><p>HDFS的实际数据不受Hive控制。当我们删除外部表时，只有元数据会丢失。我们可以通过其他应用，比如HBase，来访问外部表。</p><p>如果我们创建一个表使用’external’关键字，那么它将是外部表。</p><p>Create external table manager3(name string, id int,address string,age int) row format delimited fields terminated by ‘,’ lines terminated by ‘\n’ stored as textfile;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps112.jpg" alt="img"> </p><p>显示列</p><p>Set hive.cli.print.header&#x3D;true</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps113.jpg" alt="img"> </p><p>Insert指令将数据从一个表加载到另一个表</p><p>(两个表的列数,列名以及每个列的数据类型都要相同)</p><p>Insert into table tar_table select col1,col2,col3 from source_tab;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps114.jpg" alt="img"> </p><p>(重复多次不会覆盖只会叠加)</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps115.jpg" alt="img"> </p><p>将一个表中的数据重写覆盖进另一个表</p><p>Insert overwrite table tar_table select col1,col2,col3 from source_tab;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps116.jpg" alt="img"> </p><p>在特定行覆盖表中信息</p><p>Insert overwrite table tar_table select col1,col2,col3 from source_tab where col3&#x3D;’Shanghai’;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps117.jpg" alt="img"> </p><p>将一个表的数据插入到多个表中</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps118.jpg" alt="img"> </p><p>重写列名</p><p>alter table manager replace columns(callnumber intstring, phone int);</p><p>只剩这些行,剩多少行剩多少数据,但是数据类型要一样</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps119.jpg" alt="img"> </p><p>显示表的元数据</p><p>desc formatted emp;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps120.jpg" alt="img"> </p><p>设置表的属性</p><p>alter table emp set tblproperties(‘auto.purge’&#x3D;’true’);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps121.jpg" alt="img"> </p><p>改变表的数据类型</p><p>alter table emp set fileformat avro;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps122.jpg" alt="img"> </p><p>静态分区:</p><p>n 将输入数据文件单独插入分区表是静态分区。 </p><p>n 通常在将文件（大文件）加载到 Hive 表时，首选静态分区。 </p><p>n 与动态分区相比，静态分区可以节省加载数据的时间。 </p><p>n 您可以“静态地”在表中添加一个分区，并将文件移动到表的分区中。 </p><p>n 我们可以改变静态分区中的分区。 </p><p>分区表 </p><p>Hive 分区的类型</p><p>n 您可以从文件名、日期等获取分区列值，而无需读取整个大文件。 </p><p>n 如果要在 Hive 中使用静态分区，应在 hive-site.xml 中默认设置属性 set hive.mapred.mode&#x3D;strict 此属性集 </p><p>n 静态分区处于严格模式。 </p><p>n 应该使用 where 子句在静态分区中使用 limit。 </p><p>n 您可以在 Hive 管理表或外部表上执行静态分区。</p><p>创建分区</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps123.jpg" alt="img"> </p><p>静态分区表</p><p>create table if not exists part_dept (deptno int,empname string,sal int) partitioned by (deptname string) row format delimited fields terminated by’,’ lines terminated by’\n’stored as textfile;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps124.jpg" alt="img"> </p><p>静态分区负荷</p><p>insert into table part_dept partition (deptname &#x3D; ‘HR’) select col1,col3,col4 from dept where col2 &#x3D; ‘HR’;</p><p>load data local inpath’&#x2F;tools&#x2F;datafiles&#x2F;act’into table part_dept partition( deptname &#x3D;’Accounts’);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps125.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps126.jpg" alt="img"> </p><p>动态分区</p><p>n 对分区表的单个插入称为动态分区。 </p><p>n 通常，动态分区从非分区表加载数据。 </p><p>n 与静态分区相比，动态分区在加载数据方面花费更多的时间。 </p><p>n 当您在表中存储了大量数据时，动态分区是合适的。 </p><p>n 如果您想划分多个列，但不知道有多少列，那么动态分区也是合适的。 </p><p>n 动态分区使用 limit 不需要 where 子句。 </p><p>n 我们无法在动态分区上执行 alter。 </p><p>n 您可以对 Hive 外部表和托管表执行动态分区。 </p><p>n 如果要在 Hive 中使用动态分区，则该模式为非严格模式。 </p><p>n 以下是您应该允许的 Hive 动态分区属性 </p><p>默认情况下，Hive 中禁用动态分区。因此，首先我们需要通过设置以下两个属性在 Hive 中启用动态分区。 </p><p>set hive.exec.dynamic.partition&#x3D;true; </p><p>set hive.exec.dynamic.partition.mode&#x3D;nonstrict; </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps127.jpg" alt="img"> </p><p>创建动态分区表</p><p>create table if not exists dyna_part_dept (deptno int,empname string,sal int) partitioned by (deptname string) row format delimited fields terminated by’,’ lines terminated by’\n’stored as textfile;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps128.jpg" alt="img"> </p><p>动态分区负荷</p><p>insert into table dyna_part_dept partition (deptname) select col1,col3,col4,col2 from dept; </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps129.jpg" alt="img"> </p><p>删除分区</p><p>alter table dyna_part_dept drop partition (deptname &#x3D; ‘HR’);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps130.jpg" alt="img"> </p><p>添加分区</p><p>alter table dyna_part_dept add partition (deptname &#x3D; ‘Dev’);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps131.jpg" alt="img"> </p><p>导入信息到分区</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps132.jpg" alt="img"> </p><p>msck repair table  dyna_part_dept;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps133.jpg" alt="img"> </p><p>创建分桶</p><p>create table if not exists dept_buck(deptno int,empname string,sal int, location string)</p><p>partitioned by (deptname string) clustered by (location ) into 4 buckets</p><p>row format delimited fields terminated by’,’ lines terminated by’\n’ stored as textfile;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps134.jpg" alt="img"> </p><p>导入信息到分桶</p><p>insert into table dept_buck partition (deptname) select deptno,empname,sal,location,deptname from dept_loc; </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps135.jpg" alt="img"> </p><p>使用分桶</p><p>set hive.enforce.bucketing&#x3D;true;</p><p>set hive.exec.dynamic.partition.mode&#x3D;nonstrict;</p><p>分桶采样</p><p>select deptno, empname,sal,location from dept_buck tablesample(bucket 1 out of 2 on location);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps136.jpg" alt="img"> </p><p>select deptno, empname,sal,location from dept_buck tablesample(2 percent);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps137.jpg" alt="img"> </p><p>select deptno, empname,sal,location from dept_buck tablesample(1M);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps138.jpg" alt="img"> </p><p>select deptno, empname,sal,location from dept_buck tablesample(20 rows);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps139.jpg" alt="img"> </p><p>保护模式</p><p>No_drop子句</p><p>防止数据被删除,控制不能使用drop table命令</p><p>alter table tb_name enable no_drop;</p><p>取消no_drop控制</p><p>table tb_name disable no_drop;</p><p>在分区中应用no_drop</p><p>alter table tb_name partition (deptname&#x3D;’HR’) enable no_drop;</p><p>控制no_drop后尝试删除分区</p><p>alter table tb_name drop partition (deptname&#x3D;’HR’);</p><p>取消分区中的no_drop控制</p><p>alter table tb_name partition (deptname&#x3D;’HR’) disable no_drop;</p><p>Offline子句</p><p>防止数据被查询</p><p>alter table tb_name enable offline;</p><p>撤销防查指令</p><p>alter table tb_name disable offline;</p><p>防止分区数据被查询</p><p>table tb_name drop partition (deptname&#x3D;’HR’) enable offline;</p><p>撤销分区防查指令</p><p>alter table tb_name drop partition (deptname&#x3D;’HR’) disable offline;</p><p>创建临时表</p><p>create temporary table table_name (col1 datatype1,…);</p><p>或者</p><p>create temporary table emp100(id int, name string, gender string, age_in_years double, weight_in_kg double,age_in_company double, salary double, city string, state string, region string) row format delimited fields terminated by ‘,’ lines terminated by ‘\n’ stored as textfile;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps140.jpg" alt="img"> </p><p>一些重要的Hive指令</p><p>插入指令(会另外开辟一行插入)</p><p>INSERT INTO table_name(col1,col2,col3) values(val1,val2,val3);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps141.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps142.jpg" alt="img"> </p><p>INSERT INTO table_name values(val1,val2,…);</p><p>以这种方式添加行必须要全部填满,有多少列就要有多少值,而且每个值要用单引号’’引上</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps143.jpg" alt="img"> </p><p>为现有表生成create table指令</p><p>Show create table table_name;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps144.jpg" alt="img"> </p><p>描述表的指令</p><p>Describe table_name</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps145.jpg" alt="img"> </p><p>describe formatted table_name;</p><p>表及分区格式化信息</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps146.jpg" alt="img"> </p><p>describe extended table_name;</p><p>带描述列信息查看</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps147.jpg" alt="img"> </p><p>Create table table_name like model_table_name</p><p>复制现有表的模式而不复制其数据，可以使用CREATE table LIKE命令</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps148.jpg" alt="img"> </p><p>Create Table table_name as Select </p><p> Create Table manager2345 as Select * from manager2 where id &#x3D;&#x3D; 2;</p><p>以表的模式以及导入输出的值来创建一个新表</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps149.jpg" alt="img"> </p><p>将hive数据导出</p><p>set hive.cli.print.header&#x3D;true;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps150.jpg" alt="img"> </p><p>INSERT OVERWRITE LOCAL DIRECTORY ‘&#x2F;tools&#x2F;datafiles&#x2F;output(导出文件位置)’ ROW FORMAT DELIMITEDFIELDS TERMINATED BY ‘,’ SELECT * FROM table_name;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps151.jpg" alt="img"> </p><p><em><strong>*第三章 HQL语法*</strong></em></p><p>创建表</p><p>create table employee(id int, name string, gender string, age_in_years double, weight_in_kg double,age_in_company double, salary double, city string, state string, region string) row format delimited fields terminated by ‘,’ lines terminated by ‘\n’ stored as textfile;</p><p>从本地导入数据</p><p>load data local inpath’&#x2F;tools&#x2F;datafiles&#x2F;emp.csv’ into table employee;</p><p>Select子句</p><p>SELECT [ALL | DISTINCT] select_expr, select_expr, …</p><p> FROM table_reference</p><p> [WHERE where_condition]</p><p> [GROUP BY col_list]</p><p> [ORDER BY col_list]</p><p> [CLUSTER BY col_list</p><p>  | [DISTRIBUTE BY col_list] [SORT BY col_list]</p><p>  ]</p><p> [LIMIT [offset,] rows]</p><p>挑选出所有列</p><p>SELECT  * from table_name;</p><p>挑选出特定列</p><p>SELECT  col1 from table_name;</p><p>挑选出n个列</p><p>SELECT  col1, col2,….coln from table_name;</p><p>All和distinct子句</p><p>ALL 和 DISTINCT 选项指定是否返回重复的行。如果未指定，则默认值为 ALL（返回所有行）。 </p><p>DISTINCT 指定从结果集中删除重复行。</p><p>没声明distinct时默认为all,在这种情况下，重复的行不会从查询结果中删除</p><p>SELECT  *  from table_name;</p><p>如果指定了DISTINCT选项，则查询结果中将排除所有重复的数据值行</p><p>SELECT  distinct col1 from table_name;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps152.jpg" alt="img"> </p><p>Where子句</p><p>SELECT * FROM sales WHERE amount &gt; 10 AND region &#x3D; “US”</p><p>Order by子句</p><p>用来使检索列按照某种格式升序或降序排列</p><p>升序排列:</p><p>SELECT Id, Name, Dept FROM employee ORDER BY DEPT;</p><p>降序排列:</p><p>SELECT Id, Name, Dept FROM employee ORDER BY DEPT desc;</p><p>Sort by子句</p><p>Hive支持SORT BY，可以对每个reducer的数据进行排序。“order by”和“sort by”之间的区别是，前者保证输出中的全部顺序，而后者只保证减速机中行的顺序。如果有多个reducer，“sort by”可能给出部分排序的最终结果。</p><p>SELECT Id, Name FROM employee sort by id;</p><p>在HQL中，Cluster By被用作distribute By和sort By子句的替代。</p><p>SELECT  Id, Name from employees CLUSTER BY Id;</p><p>Hive中用于表的Cluster BY子句。Hive使用Cluster by中的列将行分布到reducer中。Cluster BY列将转到多个reducer</p><p>SELECT  Id, Name from employees distributed BY sort by Id;</p><p>Group by子句</p><p>用于使用特定的集合列对结果集中的所有记录进行分组。用于查询一组记录。</p><p>select region, avg(salary) from employee group by region;</p><p>Having子句</p><p>HAVING子句被添加到Hive是因为WHERE关键字不能用于聚合函数</p><p>聚合函数:avg, max, min, sum, count</p><p>select region, avg(salary) from employee group by region having avg(salary)&gt;10;</p><p>Like和RLike</p><p>Like: <img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps153.jpg" alt="img"></p><p>select id,name,salary from employee where name like ‘_u%’;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps154.jpg" alt="img"> </p><p>RLike: 可以使用Java正则表达式,只要任何一个与之匹配则计算结果就为TRUE</p><p>select id,name,salary from employee where name rlike ‘(Hugh|Deane)’;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps155.jpg" alt="img"> </p><p>Hive 集运算符</p><p>Union: 从结果集中删除重复的行</p><p>Union all: 不会从结果集中删除重复的行</p><p><em><strong>*Hive链接*</strong></em></p><p>准备:</p><p>create table if not exists emp_tab (col1 int,col2 string,col3 string,col4 int,col5 int,col6 int,col7 string) row format delimited fields terminated by’,’ lines terminated by’\n’stored as textfile;</p><p>create table if not exists dept_tab (col1 int,col2 string,col3 string,col4 string) row format delimited fields terminated by’,’ lines terminated by’\n’stored as textfile;</p><p>create table if not exists third_tab (col1 int,col2 string,col3 string) row format delimited fields terminated by’,’ lines terminated by’\n’stored as textfile;</p><p>load data local inpath’&#x2F;tools&#x2F;datafiles&#x2F;emp_tab.txt’ into table emp_tab;</p><p>load data local inpath’&#x2F;tools&#x2F;datafiles&#x2F;dept_tab.txt’ into table dept_tab;</p><p>load data local inpath’&#x2F;tools&#x2F;datafiles&#x2F;third_tab.txt’ into table third_tab;</p><p>内部链接&#x2F;等效链接</p><p>Select emp_tab.col1,emp_tab.col2,emp_tab.col3,dept_tab.col1,dept_tab.col2,dept_tab.col3 from emp_tab join dept_tab on (emp_tab.col6 &#x3D; dept_tab.col1);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps156.jpg" alt="img"> </p><p>外部链接:</p><p>左外链接 :JOIN 操作符左边表中符合 WHERE 子句的所有记录将会被返回。以左边表为主,右边如果没有值就补null</p><p>select emp_tab.col1,emp_tab.col2,emp_tab.col3,dept_tab.col1,dept_tab.col2,dept_tab.col3 from emp_tab left outer join dept_tab on (emp_tab.col6 &#x3D; dept_tab.col1);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps157.jpg" alt="img"> </p><p>右外链接: JOIN 操作符右边表中符合 WHERE 子句的所有记录将会被返回。以右边表为主,左边如果没有值就补null</p><p>select emp_tab.col1,emp_tab.col2,emp_tab.col3,dept_tab.col1,dept_tab.col2,dept_tab.col3 from emp_tab right outer join dept_tab on (emp_tab.col6 &#x3D; dept_tab.col1);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps158.jpg" alt="img"> </p><p>完全外部链接:谁没有就补null</p><p>select emp_tab.col1,emp_tab.col2,emp_tab.col3,dept_tab.col1,dept_tab.col2,dept_tab.col3 from emp_tab full outer join dept_tab on (emp_tab.col6 &#x3D; dept_tab.col1);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps159.jpg" alt="img"> </p><p>连接三个表:最后join最大的表,这样可以加快处理速度</p><p>Select emp_tab.col1,emp_tab.col2,dept_tab.col2,dept_tab.col3,third_tab.col2 from emp_tab join dept_tab on ( emp_tab.col7 &#x3D; dept_tab.col4 ) join third_tab on ( dept_tab.col1 &#x3D; third_tab.col1);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps160.jpg" alt="img"> </p><p><em><strong>*筛选词*</strong></em></p><p>And并且, or或者, between之前, in在给定值内, not in不在给定值内, limit限定几行</p><p>select id,name from employee where region&#x3D;’OH’ or salary&gt;10;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps161.jpg" alt="img"> </p><p>select id,name from employee where region&#x3D;’OH’ and salary&gt;10;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps162.jpg" alt="img"> </p><p>select id,salary from employee where salary between 10 and 12;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps163.jpg" alt="img"> </p><p>select id,salary from employee where salary in (11.35,12);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps164.jpg" alt="img"> </p><p>select id,salary from employee where salary not in (11.35,12);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps165.jpg" alt="img"> </p><p>select id,salary from employee where salary not in (11.35,12) limit 49;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps166.jpg" alt="img"> </p><p><em><strong>*打印表头*</strong></em></p><p>打开配置:Set hive.cli.print.header&#x3D;true</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps167.jpg" alt="img"> </p><p><em><strong>*用正则表达式查询特定的列*</strong></em></p><p>set hive.support.quoted.identifiers&#x3D;none;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps168.jpg" alt="img"> </p><p><em><strong>*设置列别名*</strong></em></p><p>select name as ne from employee;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps169.jpg" alt="img"> </p><p><em><strong>*嵌套选择*</strong></em></p><p>(一个表中的嵌套)</p><p>select id from (select id,name from employee) a ;(这个a可以是任何词,只是作为一个EOF)</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps170.jpg" alt="img"> </p><p>select name from (select * from employee order by salary desc limit 1) a;(工资最高的人的名字)</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps171.jpg" alt="img"> </p><p>(不同表中的嵌套)</p><p>select * from student where id in (select id from employee);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps172.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps173.jpg" alt="img"> </p><p>一些示例</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps174.jpg" alt="img"> </p><p><em><strong>*Hive 视图*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps175.jpg" alt="img"> </p><p>创建视图语法:</p><p>Create view view_name {column_name,column_name…} as select…</p><p>create view emp_view1 as select * from emp_tab;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps176.jpg" alt="img"> </p><p>create view emp_view2 as select col1,col2 from emp_tab;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps177.jpg" alt="img"> </p><p>create view if not exists emp_view3 as select col1 as id,col2 as name from emp_tab;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps178.jpg" alt="img"> </p><p>create view emp_view4 as select emp_tab.col1,emp_tab.col2,dept_tab.col3 from emp_tab join dept_tab on (emp_tab.col6 &#x3D; dept_tab.col1);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps179.jpg" alt="img"> </p><p>修改视图语法:</p><p>alter view emp_view1 as select col1 from emp_tab;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps180.jpg" alt="img"> </p><p>重命名视图语法:</p><p>alter view emp_view1 rename to emp_view_new;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps181.jpg" alt="img"> </p><p>删除视图语法:</p><p>drop view emp_view_new;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps182.jpg" alt="img"> </p><p>视图的优点:</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps183.jpg" alt="img"> </p><p><em><strong>*高级表属性*</strong></em></p><p>去掉页眉页脚(直接略过上下两行):</p><p>create table if not exists log_tab (col1 string ,col2 int) </p><p>row format delimited fields terminated by ‘,’ lines terminated by ‘\n’ </p><p>stored as textfile tblproperties (“skip.header.line.count”&#x3D;”1”, “skip.footer.line.count”&#x3D;”2”);</p><p>load data local inpath’&#x2F;tools&#x2F;datafiles&#x2F;log2.txt’ into table log_tab;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps184.jpg" alt="img"> </p><p><em><strong>*Hive不可变属性*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps185.jpg" alt="img"> </p><p>创建一个不可变表:</p><p>create table if not exists dept_imu (col1 int,col2 string,col3 string,col4 int) row format delimited fields terminated by’,’ lines terminated by’\n’stored as textfile tblproperties (“immutable”&#x3D;”true”);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps186.jpg" alt="img"> </p><p>试图修改数据:报错</p><p>insert into table dept_imu select * from dept; </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps187.jpg" alt="img"> </p><p>试图重修数据:成功</p><p>insert overwrite table dept_imu select * from dept;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps188.jpg" alt="img"> </p><p>Insert overwrite指令不受不可变属性影响</p><p><em><strong>*Hive null属性*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps189.jpg" alt="img"> </p><p>如果源数据有一个部分为空,正常情况下就是一个空值,加入此属性后表中的内容为null</p><p>create table if not exists table6 (col1 string, col2 string, col3 int) row format delimited fields terminated by ‘,’ lines terminated by ‘\n’ stored as textfile tblproperties (“serialization.null.format”&#x3D;””);</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps190.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps191.jpg" alt="img"> </p><p><em><strong>*第四章 Hive运算符和函数*</strong></em></p><p><em><strong>*Hive运算符*</strong></em></p><p>算术运算符:</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps192.jpg" alt="img"> </p><p>关系运算符:</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps193.jpg" alt="img"> </p><p>逻辑运算符:</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps194.jpg" alt="img"> </p><p>字符串运算符:</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps195.jpg" alt="img"> </p><p>复杂类型运算符:</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps196.jpg" alt="img"> </p><p><em><strong>*Hive函数*</strong></em></p><p>数学函数:</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps197.jpg" alt="img"> </p><p>日期函数:</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps198.jpg" alt="img"> </p><p>条件函数:</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps199.jpg" alt="img"> </p><p>字符串函数:</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps200.jpg" alt="img"> </p><p>内置聚合函数:</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps201.jpg" alt="img"> </p><p>内置表生成函数:</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps202.jpg" alt="img"> </p><p>Hive自定义函数:</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps203.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps204.jpg" alt="img"> </p><p>用JavaAPI自定义函数:</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps205.jpg" alt="img"> </p><p>导入jar包并运行:</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps206.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps207.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps208.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps209.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps210.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps211.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps212.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps213.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps214.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps215.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps216.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps217.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps218.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps219.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps220.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps221.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps222.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps223.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps224.jpg" alt="img"> </p>]]></content>
      
      
      <categories>
          
          <category> 数据科学与大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux 操作系统基础</title>
      <link href="/2023/04/08/Linux%20%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/"/>
      <url>/2023/04/08/Linux%20%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="Linux-操作系统基础"><a href="#Linux-操作系统基础" class="headerlink" title="Linux 操作系统基础"></a>Linux 操作系统基础</h1><p>Linux中</p><p>.默认为当前目录  </p><p>..默认为父目录</p><p>终端命令格式</p><p>command [-options] [parameter]</p><p>说明：</p><p>command ：命令名，相应功能的英文单词或单词的缩写</p><p>[-options] ：选项，可用来对命令进行控制，也可以省略</p><p>parameter ：传给命令的参数，可以是 零个、一个 或者 多个</p><p>显示 command 命令的帮助信息</p><p>Command –help</p><p>查阅command命令的使用手册</p><p>Man command</p><p>使用手册操作键</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps1.jpg" alt="img"> </p><p><em><strong>*小技巧*</strong></em></p><p>ctrl + shift + &#x3D; 放大终端窗口的字体显示</p><p>ctrl + - 缩小终端窗口的字体显示</p><p>自动补全</p><p>在敲出 文件 ／ 目录 ／ 命令 的前几个字母之后，按下 tab 键</p><p>如果输入的没有歧义，系统会自动补全</p><p>如果还存在其他 文件 ／ 目录 ／ 命令 ，再按一下 tab 键，系统会提示可能存在的命令</p><p>按 上 ／ 下 光标键可以在曾经使用过的命令之间来回切换</p><p>如果想要退出选择，并且不想执行当前选中的命令，可以按 ctrl + c</p><p><em><strong>*常用命令*</strong></em></p><p><em><strong>*Ls*</strong></em> <em><strong>*查看当前文件夹下的内容*</strong></em></p><p>ls 常用选项</p><p>参数  含义</p><p>-a  显示指定目录下所有子目录与文件，包括隐藏文件</p><p>-l  以列表方式显示文件的详细信息</p><p>-h  配合-l以人性化的方式显示文件大小(ls -l -h或ls -lh)</p><p>合体: ls -lha(上述功能均能实现)</p><p>ls通配符的使用</p><p>通配符  含义</p><p>*  代表任意个数个字符</p><p>?  代表任意1个字符，至少 1 个</p><p>[]  表示可以匹配字符组中的任一一个</p><p>[abc] 匹配 a、b、c 中的任意一个</p><p>[a-f] 匹配从 a 到 f 范围内的的任意一个字符</p><p>注意：以 . 开头的文件为隐藏文件，需要用 -a 参数才能显示</p><p>查看以1开头的文件: ls 1*</p><p>查看以1结尾的文件: ls *1.txt(拓展名要加上)或ls <em>1</em>(*代表任意多个字符)</p><p>查看中间字符是1的文件: ls ?1?.txt</p><p><em><strong>*pwd 查看当前所在文件夹*</strong></em></p><p><em><strong>*Cd*</strong></em> <em><strong>*[目录名]*</strong></em> <em><strong>*切换文件夹*</strong></em></p><p>命令  含义</p><p>cd  切换到当前用户的主目录(&#x2F;home&#x2F;用户目录)</p><p>cd ~  切换到当前用户的主目录(&#x2F;home&#x2F;用户目录)</p><p>cd .  保持在当前目录不变</p><p>cd …  切换到上级目录</p><p>cd -  可以在最近两次工作目录之间来回切换</p><p>相对路径和绝对路径</p><p>相对路径 在输入路径时，最前面不是 &#x2F; 或者 ~，表示相对 当前目录 所在的目录位置</p><p>绝对路径 在输入路径时，最前面是 &#x2F; 或者 ~，表示从 根目录&#x2F;家目录 开始的具体目录位置</p><p><em><strong>*Touch*</strong></em> <em><strong>*[文件名]如果文件不存在，新建文件*</strong></em></p><p>创建文件或修改文件时间</p><p>如果文件 不存在，可以创建一个空白文件</p><p>如果文件 已经存在，可以修改文件的末次修改日期</p><p>新建隐藏文件:</p><p>Touch .文件名(文件名开头为.的文件为隐藏文件)</p><p><em><strong>*Mkdir*</strong></em> <em><strong>*[目录名] 创建目录*</strong></em></p><p>命令  含义</p><p>-p  可以递归创建目录</p><p>新建目录的名称 不能与****当前目录中已有的目录或文件****同名</p><p><em><strong>*Rm*</strong></em> <em><strong>*[文件名]删除指定文件*</strong></em><em><strong>*或目录*</strong></em></p><p>使用 rm 命令要小心，因为文件删除后<em><strong>*不能恢复*</strong></em></p><p>选项  含义</p><p>-f  强制删除,有就删掉,如果没有也不会报错误信息</p><p>-r  递归地删除目录下的内容，删除文件夹时必须加此参数</p><p>Rm -rf * 系统都会被干掉,删库跑路系列</p><p><em><strong>*tree [目录名] 以树状图列出件目录结构*</strong></em></p><p>选项  含义</p><p>-d  只显示目录</p><p><em><strong>*cp*</strong></em> <em><strong>*[*</strong></em><em><strong>*源文件*</strong></em><em><strong>*] [*</strong></em><em><strong>*目标文件*</strong></em><em><strong>*]*</strong></em> <em><strong>*复制文件或者目录*</strong></em><em><strong>*到另一个位置*</strong></em></p><p>选 项  含义</p><p>-i  覆盖文件前提示</p><p>-r  递归复制</p><p>Cp 源文件 . 将源文件复制到当前目录下</p><p><em><strong>*mv 源文件 目标文件 移动文件或者目录／文件或者目录重命名*</strong></em></p><p>选项  含义</p><p>-i  覆盖文件前提示</p><p><em><strong>*c*</strong></em><em><strong>*at 文件名  查看文件内容、创建文件、文件合并、追加文件内容等功能*</strong></em></p><p>cat 会一次显示所有的内容，适合 查看内容较少 的文本文件</p><p>选项  含义</p><p>-b  对****非空输出行****编号</p><p>-n  对****输出的所有行****编号</p><p>Linux 中还有一个 nl 的命令和 cat -b 的效果等价</p><p><em><strong>*more 文件名  分屏显示文件内容*</strong></em></p><p>适合于 查看内容较多的文本文件</p><p>使用 more 的操作键：</p><p>操作键  功能</p><p>空格键  显示手册页的下一屏</p><p>Enter键 一次滚动手册页的一行</p><p>b  回滚一屏</p><p>f  前滚一屏</p><p>q  退出</p><p>&#x2F;word  搜索 word 字符串</p><p><em><strong>*grep 搜索文本 文件名  搜索文本文件内容*</strong></em></p><p>grep 允许对文本文件进行****模式查找****，所谓模式查找，又被称为正则表达式。</p><p>选项  含义</p><p>-n  显示<em><strong>*匹配行及行号*</strong></em></p><p>-v  显示****不包含*<em><strong>匹配文本的所有行（相当于</strong></em>*求反****）</p><p>-i  忽略大小写</p><p>搜索内容中有空格的话就要用””引起来</p><p>常用的两种<em><strong>*模式查找*</strong></em></p><p>参数  含义</p><p>^a  行首，搜寻以a开头的行</p><p>z$  行尾，搜寻以z结束的行</p><p><em><strong>*echo 文字内容*</strong></em></p><p>echo 会在终端中显示参数指定的文字，通常会和 <em><strong>*重定向*</strong></em> 联合使用</p><p>和重定向一起使用时可以直接创建文件并将内容重定向到文件中</p><p>Echo 内容 &gt; 文件名</p><p><em><strong>*重定向 &gt; 和 &gt;&gt;*</strong></em></p><p>Linux 允许将命令执行结果重定向(输入)到一个文件</p><p>将本应显示在终端上的内容 输入／追加 到指定文件中</p><p>&gt; 表示输出，会覆盖文件原有的内容</p><p>&gt;&gt; 表示追加，会将内容追加到已有文件的末尾</p><p>单独使用 : 内容 &gt;&#x2F;&gt;&gt; 文件名</p><p>一起使用 : echo 内容 &gt;&#x2F;&gt;&gt; 文件名</p><p>其中内容可以是任意指令,会将其输出的内容重定向到文件中</p><p><em><strong>*管道 |*</strong></em></p><p>Linux 允许将 一个命令的<em><strong>*输出*</strong></em> 可以通过管道做为另一个命令的<em><strong>*输入*</strong></em></p><p>常用的管道命令有：</p><p>more ：分屏显示内容</p><p>grep ：在命令执行结果的基础上查询指定的文本</p><p>Ls -lh | more</p><p>Ls | grep</p><p><em><strong>*Clear*</strong></em> <em><strong>*清屏*</strong></em></p><p><em><strong>*远程管理常用命令*</strong></em></p><p><em><strong>*Shutdown*</strong></em> <em><strong>*关机&#x2F;重启*</strong></em></p><p>常用命令</p><p># ****立刻****重新启动操作系统，其中 now 表示现在</p><p>$ shutdown -r now</p><p># 立刻关机，其中 now 表示现在</p><p>$ shutdown now</p><p># 系统在今天的 20:25 会关机</p><p>$ shutdown 20:25</p><p># 系统再过十分钟后自动关机</p><p>$ shutdown +10</p><p># ****取消****之前指定的关机计划</p><p>$ shutdown -c</p><p>不指定选项和参数，默认表示 1 分钟之后 关闭电脑</p><p>远程维护服务器时，最好不要关闭系统，而应该重新启动系统</p><p>远程维护服务器时,如果权限不够,可以执行sudo shutdown -r now 表示以root权限执行命令</p><p><em><strong>*ifconfig 查看／配置计算机当前的网卡配置信息*</strong></em></p><p># 查看网卡配置信息</p><p>$ ifconfig</p><p># 查看网卡对应的 IP 地址</p><p>$ ifconfig | grep inet</p><p>提示：一台计算机中有可能会有 <em><strong>*一个物理网卡*</strong></em> 和 ****多个虚拟网卡****，在 Linux 中物理网卡的名字通常以 ensXX 表示</p><p>127.0.0.1 被称为 本地回环&#x2F;环回地址，一般用来测试本机网卡是否正常</p><p><em><strong>*ping*</strong></em> <em><strong>*ip地址用于检测目标ip地址的链接是否正常*</strong></em></p><p># 检测到目标主机是否连接正常</p><p>$ ping IP地址</p><p># 检测本地网卡工作正常</p><p>$ ping 127.0.0.1</p><p>远程登录和赋值文件</p><p><em><strong>*ssh 基础（重点）*</strong></em></p><p>在 Linux 中 SSH 是 非常常用的工具，通过 SSH 客户端我们可以连接到运行了 SSH服务器的远程机器上</p><p>ssh的简单使用：</p><p>ssh [-p port] user@remote</p><p>user 是在远程机器上的用户名，如果不指定的话默认为当前用户</p><p>remote 是远程机器的地址，可以是 IP／域名，或者是 后面会提到的别名</p><p>port 是 SSH Server 监听的端口，如果不指定，就为默认值 22</p><p>提示：</p><p>使用 exit 退出当前用户的登录</p><p>在工作中，SSH 服务器的端口号很有可能不是 22，如果遇到这种情况就需要使用 -p 选项，指定正确的端口号，否则无法正常连接到服务器</p><p>Ssh只能在 Linux系统下使用</p><p><em><strong>*Scp*</strong></em> <em><strong>*-P port*</strong></em><em><strong>*文件 文件复制地址*</strong></em>   <em><strong>*在Linu*</strong></em><em><strong>*x*</strong></em><em><strong>*下用来进行远程拷贝文件*</strong></em> </p><p>在指定端口时用的是大写的 -P 而不是小写的</p><p># 把本地当前目录下的 01.py文件 复制到远程家目录下的 Desktop&#x2F;01.py</p><p># 注意：<code>:</code> 后面的路径如果****不是绝对路径*<em><strong>，则以</strong></em>*用户的家目录****作为参照路径</p><p>scp -P port 01.py user@remote:Desktop&#x2F;01.py</p><p># 把远程家目录下的 Desktop&#x2F;01.py 文件复制到本地当前目录下的 01.py</p><p>scp -P port user@remote:Desktop&#x2F;01.py 01.py</p><p># 加上 <em><strong>*-r 选项可以传送文件夹*</strong></em></p><p># 把当前目录下的 demo 文件夹 复制到 远程 家目录下的 Desktop</p><p>scp -r demo user@remote:Desktop</p><p># 把远程 家目录下的 Desktop 复制到 当前目录下的 demo 文件夹</p><p>scp -r user@remote:Desktop demo</p><p>选 项  含义</p><p>-r  若给出的源文件是目录文件，则 scp 将递归复制该目录下的所有子目录和文件，目标文件必须为一个目录名</p><p>-P  若远程 SSH 服务器的端口不是 22，需要使用大写字母 -P 选项指定端口</p><p>注意：</p><p>scp 只能在 Linux系统下使用</p><p>其它命令</p><p>查找文件</p><p>find 命令功能非常强大，通常用来在 特定的目录下 搜索 符合条件的文件</p><p>序号        命令              作用</p><p>01  find [路径] -name “*.py”  查找指定路径下扩展名是 .py 的文件，包括子目录</p><p>如果省略路径，表示在当前文件夹下查找</p><p>之前学习的通配符，在使用 find 命令时同时可用</p><p>演练目标</p><p>1.搜索桌面目录下，文件名包含 1 的文件</p><p>find -name “<em>1</em>“</p><p>2.搜索桌面目录下，所有以 .txt 为扩展名的文件</p><p>find -name “*.txt”</p><p>3.搜索桌面目录下，以数字 1 开头的文件</p><p>find -name “1*”</p><p>软链接</p><p>序 号  命令  作用</p><p>01  ln -s 被链接的源文件 链接文件  建立文件的软链接，用通俗的方式讲类似于 Windows 下的快捷方式</p><p>注意：</p><p>没有 -s 选项建立的是一个 硬链接文件两个文件占用相同大小的硬盘空间，工作中几乎不会建立文件的硬链接</p><p>源文件要使用绝对路径，不能使用相对路径，这样可以方便移动链接文件后，仍然能够正常使用</p><p>演练目标</p><p>将桌面目录下的 01.py 移动到 demo&#x2F;b&#x2F;c 目录下</p><p>在桌面目录下新建 01.py 的 软链接 FirstPython分别使用 相对路径 和 绝对路径 建立 FirstPython 的软链接</p><p>将 FirstPython 移动到 demo 目录下，对比使用 相对路径 和 绝对路径 的区别</p><p>硬链接简介（知道）</p><p>在使用 ln 创建链接时，如果没有 -s 选项，会创建一个 硬链接，而不是软链接</p><p>硬链接演练</p><p>在 ~&#x2F;Desktop&#x2F;demo 目录下建立 ~&#x2F;Desktop&#x2F;demo&#x2F;b&#x2F;c&#x2F;01.py 的硬链接 01_hard</p><p>使用 ls -l 查看文件的硬链接数（硬链接——有多少种方式可以访问文件或者目录）</p><p>删除 ~&#x2F;Desktop&#x2F;demo&#x2F;b&#x2F;c&#x2F;01.py ，并且使用 tree 来确认 demo 目录下的三个链接文件文件软硬链接的示意图</p><p>文件软硬链接示意图</p><p>在 Linux 中，文件名 和 文件的数据 是分开存储的</p><p>提示：</p><p>在 Linux 中，只有文件的 硬链接数 &#x3D;&#x3D; 0 才会被删除</p><p>使用 ls -l 可以查看一个文件的硬链接的数量</p><p>在日常工作中，几乎不会建立文件的硬链接，知道即可</p><p>打包压缩</p><p>打包压缩 是日常工作中备份文件的一种方式</p><p>在不同操作系统中，常用的打包压缩方式是不同的选项 含义</p><p>Windows 常用 rar</p><p>Mac 常用 zip</p><p>Linux 常用 tar.gz</p><p>打包 ／ 解包</p><p>tar 是 Linux 中最常用的 备份工具，此命令可以 把一系列文件 打包到 一个大文件中，也可以把一个 打包的大文件恢复成一系列文件</p><p>tar 的命令格式如下:</p><p># 打包文件</p><p>tar -cvf 打包文件.tar 被打包的文件／路径…</p><p># 解包文件</p><p>tar -xvf 打包文件.tar</p><p>tar选项说明：</p><p>选项  含义</p><p>c  生成档案文件，创建打包文件</p><p>x  解开档案文件</p><p>v  列出归档解档的详细过程，显示进度</p><p>f  指定档案文件名称，f 后面一定是 .tar 文件，所以必须放选项最后</p><p>注意： f 选项必须放在最后，其他选项顺序可以随意</p><p>压缩／解压缩</p><p>1）gzip</p><p>tar 与 gzip 命令结合可以使用实现文件 打包和压缩</p><p>tar 只负责打包文件，但不压缩</p><p>用 gzip 压缩 tar 打包后的文件，其扩展名一般用 xxx.tar.gz</p><p>在 Linux 中，最常见的压缩文件格式就是 xxx.tar.gz</p><p>在 tar 命令中有一个选项 -z 可以调用 gzip ，从而可以方便的实现压缩和解压缩的</p><p>功能命令格式如下：</p><p># 压缩文件</p><p>tar -zcvf 打包文件.tar.gz 被压缩的文件／路径…</p><p># 解压缩文件</p><p>tar -zxvf 打包文件.tar.gz</p><p># 解压缩到指定路径</p><p>tar -zxvf 打包文件.tar.gz -C 目标路径</p><p>选项  含义</p><p>-C  解压缩到指定目录，注意：要解压缩的目录必须存在</p><p>\2) bzip2(two)</p><p>tar 与 bzip2 命令结合可以使用实现文件 打包和压缩（用法和 gzip 一样）</p><p>tar 只负责打包文件，但不压缩</p><p>用 bzip2 压缩 tar 打包后的文件，其扩展名一般用 xxx.tar.bz2</p><p>在 tar 命令中有一个选项 -j 可以调用 bzip2 ，从而可以方便的实现压缩和解压缩的功能</p><p>命令格式如下：</p><p># 压缩文件</p><p>tar -jcvf 打包文件.tar.bz2 被压缩的文件／路径…</p><p># 解压缩文件</p><p>tar -jxvf 打包文件.tar.bz2</p><p>软件安装</p><p>通过 apt 安装／卸载软件</p><p>apt 是 Advanced Packaging Tool ，是 Linux 下的一款安装包管理工具</p><p>可以在终端中方便的 安装／卸载／更新软件包</p><p># 1. 安装软件</p><p>$ sudo apt install 软件包</p><p># 2. 卸载软件</p><p>$ sudo apt remove 软件名</p><p># 3. 更新已安装的包</p><p>$ sudo apt upgrade</p><p>系统信息相关命令</p><p>时间和日期</p><p>序号  命令  作用</p><p>01  date  查看系统时间</p><p>02  cal  calendar 查看日历， -y 选项可以查看一年的日历</p><p>磁盘信息</p><p>序号  命令  作用</p><p>01  df -h  disk free 显示磁盘剩余空间</p><p>02  du -h [目录名]  disk usage 显示目录下的文件大小</p><p>进程信息</p><p>所谓进程，通俗地说就是 当前正在执行的一个程序</p><p>序号  命令  作用</p><p>01  ps aux  process status 查看进程的详细状况</p><p>02  top  动态显示运行中的进程并且排序</p><p>03  kill [-9] 进程代号  终止指定代号的进程， -9 表示强行终止</p><p>ps 默认只会显示当前用户通过终端启动的应用程序</p><p>ps 选项说明</p><p>选项  含义</p><p>a  显示终端上的所有进程，包括其他用户的进程</p><p>u  显示进程的详细状态</p><p>x  显示没有控制终端的进程</p><p>提示：使用 kill 命令时，最好只终止由当前用户开启的进程，而不要终止 root 身份开启的进程，否则可能导致系统崩溃</p><p>要退出 top 可以直接输入 q</p><p>用户权限相关命令</p><p>组管理</p><p>提示：创建组 &#x2F; 删除组 的终端命令都需要通过 sudo 执行</p><p>序号  命令  作用</p><p>01  groupadd 组名  添加组</p><p>02  groupdel 组名  删除组</p><p>03  cat &#x2F;etc&#x2F;group  确认组信息</p><p>04  chgrp -R 组名 文件&#x2F;目录名  递归修改文件&#x2F;目录的所属组</p><p>提示：</p><p>组信息保存在 &#x2F;etc&#x2F;group 文件中</p><p>&#x2F;etc 目录是专门用来保存 系统配置信息 的目录</p><p>用户管理</p><p>提示：创建用户 &#x2F; 删除用户 &#x2F; 修改其他用户密码 的终端命令都需要通过 sudo 执行</p><p>创建用户／设置密码／删除用户</p><p>提示：</p><p>创建用户时，如果忘记添加 -m 选项指定新用户的家目录 —— 最简单的方法就是删除用户，重新创建</p><p>创建用户时，默认会创建一个和用户名同名的组名</p><p>用户信息保存在 &#x2F;etc&#x2F;passwd 文件中</p><p>查看用户信息</p><p>序号  命令  作用</p><p>01  id [用户名]  查看用户 UID 和 GID 信息</p><p>02  who  查看当前所有登录的用户列表</p><p>03  whoami  查看当前登录用户的账户名</p><p>which（重要）</p><p>提示</p><p>&#x2F;etc&#x2F;passwd 是用于保存用户信息的文件</p><p>&#x2F;usr&#x2F;bin&#x2F;passwd 是用于修改用户密码的程序</p><p>which 命令可以查看执行命令所在位置，例如：</p><p>which ls</p><p># 输出</p><p># &#x2F;bin&#x2F;ls</p><p>which useradd</p><p># 输出</p><p># &#x2F;usr&#x2F;sbin&#x2F;useradd</p><p>bin 和 sbin</p><p>在 Linux 中，绝大多数可执行文件都是保存在 &#x2F;bin 、 &#x2F;sbin 、 &#x2F;usr&#x2F;bin 、 &#x2F;usr&#x2F;sbin</p><p>&#x2F;bin （ binary ）是二进制执行文件目录，主要用于具体应用</p><p>&#x2F;sbin （ system binary ）是系统管理员专用的二进制代码存放目录，主要用于系统管理</p><p>&#x2F;usr&#x2F;bin （ user commands for applications ）后期安装的一些软件</p><p>&#x2F;usr&#x2F;sbin （ super user commands for applications ）超级用户的一些管理程序</p><p>提示：</p><p>cd 这个终端命令是内置在系统内核中的，没有独立的文件，因此用 which 无法找到 cd命令的位置</p><p>切换用户</p><p>序 号  命令  作用  说明</p><p>01  su - 用户名  切换用户，并且切换目录  - 可以切换到用户家目录，否则保持位置不变</p><p>02  exit  退出当前登录账户  </p><p>su 不接用户名，可以切换到 root ，但是不推荐使用，因为不安全</p><p>exit 示意图如下：</p><p>修改文件权限</p><p>序号  命令  作用</p><p>01  chown  修改拥有者</p><p>02  chgrp  修改组</p><p>03  chmod  修改权限</p><p>命令格式如下：</p><p># 修改文件|目录的拥有者</p><p>chown 用户名 文件名|目录名</p><p># 递归修改文件|目录的组</p><p>chgrp -R 组名 文件名|目录名</p><p># 递归修改文件权限</p><p>chmod -R 755 文件名|目录名</p><p>1</p><p>2</p><p>3</p><p>4</p><p>5</p><p>6</p>]]></content>
      
      
      <categories>
          
          <category> 操作系统 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用 MySQL 查询数据</title>
      <link href="/2023/04/08/%E4%BD%BF%E7%94%A8%20MySQL%20%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE/"/>
      <url>/2023/04/08/%E4%BD%BF%E7%94%A8%20MySQL%20%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="使用-MySQL-查询数据"><a href="#使用-MySQL-查询数据" class="headerlink" title="使用 MySQL 查询数据"></a>使用 MySQL 查询数据</h1><p><em><strong>*第二章*</strong></em></p><p><em><strong>*一、*</strong></em><em><strong>*创建和管理数据库 :*</strong></em></p><p><em><strong>*创建用户定义的数据库 :*</strong></em></p><p><em><strong>*Create database [if not exists] 数据库名*</strong></em></p><p><em><strong>*<a href="%E6%9C%80%E9%BB%98%E8%AE%A4%E7%9A%84%E5%AD%97%E7%AC%A6%E9%9B%86%E6%98%AFlatin1"> [default] 默认字符集 &lt;字符集名称(big5 , dec8 , latin1 , latin2)&gt;</a>*</strong></em></p><p><em><strong>*[ [default] 排序创建值 &lt;排序名称&gt;];*</strong></em></p><p><em><strong>*Eg : create database if not exists production_management_system*</strong></em></p><p><em><strong>*Default character set latin1*</strong></em></p><p><em><strong>*Default collate latin1_bin;*</strong></em></p><p><em><strong>*访问数据库 :*</strong></em></p><p><em><strong>*语法 : Use 数据库名;*</strong></em></p><p><em><strong>*Show语句 :*</strong></em></p><p><em><strong>*Show database;(查看所有数据库的列表)*</strong></em></p><p><em><strong>*Show character set;(列出所有MySQL支持的字符集)*</strong></em></p><p><em><strong>*Show collation;(列出所有MySQL支持的字符序)*</strong></em></p><p><em><strong>*Show tables;(列出该数据库所有表名)*</strong></em></p><p><em><strong>*修改数据库 :*</strong></em> </p><p><em><strong>*Alter database 语句 :*</strong></em></p><p><em><strong>*Alter database 数据库名*</strong></em></p><p><em><strong>*[ [default] character set 指定字符集名称]*</strong></em></p><p><em><strong>*[ [default] collate 指定字符序名称]*</strong></em></p><p><em><strong>*Eg : alter database production_management_system*</strong></em></p><p><em><strong>*Character set big5*</strong></em></p><p><em><strong>*Collate big5_Chinese_ci;*</strong></em></p><p><em><strong>*删除数据库 :*</strong></em></p><p><em><strong>*Drop语句 :*</strong></em></p><p><em><strong>*Drop database 数据库名;*</strong></em></p><p><em><strong>*Eg : drop database production_management_system;*</strong></em></p><p><strong>二、</strong><em><strong>*创建和管理表*</strong></em></p><p><em><strong>*整数数据类型 :*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps2.jpg" alt="img"> </p><p><em><strong>*小数数据类型(p指精度 , s指小数位(小数点后的位数) , na指不适用) :*</strong></em></p><p><em><strong>*精度介于0至23为单精度 , 介于24至53为双精度*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps3.jpg" alt="img"> </p><p><em><strong>*Bit数据类型(接受一个或多个位的列) :*</strong></em></p><p><em><strong>*与bit类型关联的列仅可接受一个位值0或1*</strong></em></p><p><em><strong>*接受多个位 : bit(M)*</strong></em></p><p><em><strong>*字符串*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps4.jpg" alt="img"><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps5.jpg" alt="img"> </p><p><em><strong>*日期*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps6.jpg" alt="img"><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps7.jpg" alt="img"> </p><p><em><strong>*创建表 :*</strong></em></p><p><em><strong>*Create [temporary(临时表)] table [if not exists] 表名*</strong></em></p><p><em><strong>*(列名 列的数据类型 [not null | null ] [default ] ,*</strong></em></p><p> <em><strong>*列名 ….*</strong></em></p><p><em><strong>*)*</strong></em></p><p><em><strong>*<a href="%E6%B2%A1%E6%9C%89%E5%B0%B1%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E5%BC%95%E6%93%8E">指定表的存储引擎</a>*</strong></em></p><p><em><strong>*Eg : create table if not exists customers*</strong></em></p><p><em><strong>*(*</strong></em></p><p><em><strong>*Customer_ID int not null ,*</strong></em></p><p><em><strong>*Firstname varchar(45) not null ,*</strong></em></p><p><em><strong>*Lastname varchar(45) not null ,*</strong></em></p><p><em><strong>*Address varchar(50) ,*</strong></em></p><p><em><strong>*City varchar(20) ,*</strong></em></p><p><em><strong>*Postal_code int*</strong></em></p><p><em><strong>*);*</strong></em></p><p><em><strong>*Describe(查看所有列的详细信息)*</strong></em></p><p><em><strong>*Describe 表名 [列名 | 包含模式的字符串]*</strong></em></p><p><em><strong>*Eg : desc products*</strong></em> <em><strong>*‘*</strong></em><em><strong>*P%*</strong></em><em><strong>*’*</strong></em><em><strong>*;(以p开头的列名)*</strong></em></p><p><em><strong>*应用约束 :*</strong></em></p><p><em><strong>*主键约束 :*</strong></em></p><p><em><strong>*创建表时应用主键约束的语法 :*</strong></em> </p><p><em><strong>*Create table table name*</strong></em></p><p><em><strong>*(*</strong></em></p><p><em><strong>*Column definition 1,*</strong></em></p><p><em><strong>*Column definition2,*</strong></em></p><p><em><strong>*…*</strong></em></p><p><em><strong>*Constraint 约束名(可有可无) primary key (列名)*</strong></em></p><p><em><strong>*);*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*CREATE TABLE Author*</strong></em> </p><p><em><strong>*(*</strong></em></p><p> <em><strong>*Author_ID char(4) NOT NULL,*</strong></em></p><p> <em><strong>*User_ID char(4) NOT NULL,*</strong></em></p><p> <em><strong>*Author_Name varchar(20),*</strong></em></p><p> <em><strong>*Email_ID varchar(30),*</strong></em></p><p> <em><strong>*Author_Desc varchar(100),*</strong></em></p><p> <em><strong>*Created_On datetime,*</strong></em></p><p><em><strong>*Primary key (Email_ID)*</strong></em></p><p><em><strong>*);*</strong></em></p><p><em><strong>*唯一约束 :*</strong></em> </p><p><em><strong>*创建表时应用唯一约束的语法 :*</strong></em> </p><p><em><strong>*Create table table name*</strong></em></p><p><em><strong>*(*</strong></em></p><p><em><strong>*Column definition 1,*</strong></em></p><p><em><strong>*Column definition2,*</strong></em></p><p><em><strong>*…*</strong></em></p><p><em><strong>*Constraint 约束名(约束名可有可无) unique (列名)*</strong></em></p><p><em><strong>*);*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*CREATE TABLE Author*</strong></em> </p><p><em><strong>*(*</strong></em></p><p> <em><strong>*Author_ID char(4) NOT NULL,*</strong></em></p><p> <em><strong>*User_ID char(4) NOT NULL,*</strong></em></p><p> <em><strong>*Author_Name varchar(20),*</strong></em></p><p> <em><strong>*Email_ID varchar(30),*</strong></em></p><p> <em><strong>*Author_Desc varchar(100),*</strong></em></p><p> <em><strong>*Created_On datetime,*</strong></em></p><p><em><strong>*Primary key (Email_ID),*</strong></em></p><p><em><strong>*Constraint unique_pname unique (author_name)*</strong></em></p><p><em><strong>*);*</strong></em></p><p><em><strong>*外键约束 :*</strong></em> </p><p><em><strong>*创建表时应用*</strong></em><em><strong>*外键*</strong></em><em><strong>*约束的语法 :*</strong></em> </p><p><em><strong>*Create table table name*</strong></em></p><p><em><strong>*(*</strong></em></p><p><em><strong>*Column definition 1,*</strong></em></p><p><em><strong>*Column definition2,*</strong></em></p><p><em><strong>*…*</strong></em></p><p><em><strong>*Constraint 约束名(约束名可有可无) foreign (列名)*</strong></em></p><p><em><strong>*);*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*CREATE TABLE Author*</strong></em> </p><p><em><strong>*(*</strong></em></p><p> <em><strong>*Author_ID char(4) NOT NULL,*</strong></em></p><p> <em><strong>*User_ID char(4) NOT NULL,*</strong></em></p><p> <em><strong>*Author_Name varchar(20),*</strong></em></p><p> <em><strong>*Email_ID varchar(30),*</strong></em></p><p> <em><strong>*Author_Desc varchar(100),*</strong></em></p><p> <em><strong>*Created_On datetime,*</strong></em></p><p><em><strong>*Constraint  fk1 foreign key (author_name)*</strong></em></p><p><em><strong>*References product (author_name),*</strong></em></p><p><em><strong>*Constraint  fk2 foreign key (email_ID)*</strong></em></p><p><em><strong>*References foreign (email_ID)*</strong></em></p><p> <em><strong>*);*</strong></em></p><p><em><strong>*更改表 :*</strong></em> </p><p><em><strong>*Alter table语句语法 :*</strong></em></p><p><em><strong>*Alter table 表名*</strong></em></p><p>添加列</p><p><em><strong>*{add [column]列名 列*</strong></em><em><strong>*定义*</strong></em><em><strong>*符 first(将此列添加为表的第一列)|after 列名2(将此列添加到列名2的后一列)}*</strong></em></p><p>添加约束</p><p><em><strong>*{add [constraint] 约束名 指定要应用哪种约束}*</strong></em></p><p>更改列的默认值</p><p><em><strong>*{alert [column]列名 set default 指定要更改的表中的列的默认值}*</strong></em></p><p>更改列的位置、大小和数据类型</p><p><em><strong>*{modify [column] 列占位符 first | after 列名3}*</strong></em></p><p>删除列</p><p> <em><strong>*{drop [column] 列名}*</strong></em></p><p>删除约束</p><p><em><strong>*｛drop primary key | foreign key 约束名 | unique 约束名｝*</strong></em></p><p>改表名</p><p><em><strong>*{rename [to] 新表名}*</strong></em></p><p><em><strong>*添加约束 ：*</strong></em> </p><p><em><strong>*Alter table 表名*</strong></em></p><p><em><strong>*Add constraint 约束名 primay key (列名);*</strong></em></p><p><em><strong>*添加列 :*</strong></em> </p><p><em><strong>*Alter table 表名*</strong></em></p><p><em><strong>*Add column 列名 列占位符;*</strong></em></p><p><em><strong>*修改列 :*</strong></em> </p><p><em><strong>*Alter table 表名*</strong></em></p><p><em><strong>*Alter column 列名 set default ‘默认值’;*</strong></em></p><p><em><strong>*删除列 :*</strong></em> </p><p><em><strong>*Alter table 表名*</strong></em></p><p><em><strong>*Drop column 列名;*</strong></em></p><p><em><strong>*重命名表 :*</strong></em> </p><p><em><strong>*Alter table 表名 rename to 新表名;*</strong></em></p><p><em><strong>*操作表数据*</strong></em></p><p><em><strong>*插入数据 :*</strong></em></p><p><em><strong>*Insert语句用于向表中添加记录(如果表中有数据则报错)*</strong></em></p><p><em><strong>*Insert语句语法 :*</strong></em></p><p><em><strong>*Insert [low_priority | delayed] [ignore] [into] 表名*</strong></em></p><p><em><strong>*{ values子句 | set子句}*</strong></em></p><p><em><strong>*Eg :*</strong></em><em><strong>*(没有eg , 参见以下set子句与values子句)*</strong></em></p><p><em><strong>*Set子句(一个个赋值) :*</strong></em></p><p><em><strong>*Insert into products set product_ID &#x3D; 2,product_name &#x3D; ‘silk carpets’,quantity_in_hand &#x3D; 240;*</strong></em></p><p><em><strong>*Values子句(直接按顺序赋值 | 直接地毯式赋值(按照列的顺序)) :*</strong></em></p><p><em><strong>*Eg :*</strong></em> <em><strong>*Insert into products(product_ID,product_name,*</strong></em></p><p><em><strong>*Quantity_in_hand)*</strong></em></p><p><em><strong>*Values(3,’red rugs’,400);*</strong></em></p><p><em><strong>*Eg :*</strong></em> <em><strong>*Insert into products values(4, ’blue rugs’, 500, 100, 50, 400),(5,’pink rugs ’,400,200,100,500);*</strong></em></p><p><em><strong>*Replace语句用于将新记录插入表中(表中有则替换,没有则插入)*</strong></em></p><p><em><strong>*Replace语句语法 :*</strong></em></p><p><em><strong>*Replace [low_priority | delayed] [ignore] [into]*</strong></em></p><p><em><strong>*{values子句 | set子句}*</strong></em></p><p><em><strong>*Eg*</strong></em> <em><strong>*:*</strong></em> </p><p><em><strong>*Replace into*</strong></em> <em><strong>*product (product_ID, product_name, quantity_in_hand)*</strong></em></p><p><em><strong>*Values (1,’hard rugs’,5000);*</strong></em></p><p><em><strong>*更新表 :*</strong></em></p><p><em><strong>*Update语句语法 :*</strong></em></p><p><em><strong>*Update [low_priority] [ignore] 表名*</strong></em></p><p><em><strong>*Set 列名 &#x3D; 数据 | 多个列名 &#x3D; 数据*</strong></em></p><p><em><strong>*Where 识别在哪记录(在哪个值那里)*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Update products*</strong></em></p><p><em><strong>*Set quantity_in_hand &#x3D; 300*</strong></em></p><p><em><strong>*Where product_ID &#x3D; 2;*</strong></em></p><p><em><strong>*复制数据 :*</strong></em></p><p><em><strong>*将数据复制到现有表*</strong></em><em><strong>*(insert语句 replace语句)*</strong></em> <em><strong>*:*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Create table new_product*</strong></em></p><p><em><strong>*(*</strong></em></p><p><em><strong>*Pid TNT not null,*</strong></em></p><p><em><strong>*Pname varchar(20),*</strong></em></p><p><em><strong>*Primary key(pid)*</strong></em></p><p><em><strong>*);*</strong></em><em><strong>*(创建一个有pid和pname两列的表)*</strong></em></p><p><em><strong>*Select语句语法 :*</strong></em></p><p><em><strong>*Select * |列名 [列名 …..] from表名;*</strong></em></p><p><em><strong>*Eg : Insert into new_product*</strong></em></p><p><em><strong>*Select product_ID , product_name*</strong></em></p><p><em><strong>*From products;(product_ID , product_name两列都被复制到了new_product表中)*</strong></em></p><p><em><strong>*Eg : Replace into new_product*</strong></em></p><p><em><strong>*Select product_ID , product_name*</strong></em></p><p><em><strong>*From products;(没有则插入,有则替换)*</strong></em></p><p><em><strong>*将数据复制到新表 :*</strong></em></p><p><em><strong>*(后跟select的create table语句)*</strong></em></p><p><em><strong>*Eg : create table new_customers*</strong></em></p><p><em><strong>*(*</strong></em></p><p><em><strong>*Customer_ID int ,*</strong></em></p><p><em><strong>*Firstname varchar(20) ,*</strong></em></p><p><em><strong>*Lastname varchar(20) ,*</strong></em></p><p><em><strong>*)*</strong></em></p><p><em><strong>*Select customer_ID , firstname , lastname from customer ;*</strong></em></p><p><em><strong>*删除数据 :*</strong></em> </p><p><em><strong>*(delete语句和truncate语句)*</strong></em></p><p><em><strong>*Delete语句语法 :*</strong></em></p><p><em><strong>*Delete [low_priority] [ignore]*</strong></em></p><p><em><strong>*From 表名*</strong></em></p><p><em><strong>*[where 被where指定的取区域];*</strong></em></p><p><em><strong>*Eg : delete from produces*</strong></em></p><p><em><strong>*Where product_name &#x3D;*</strong></em> <em><strong>*‘*</strong></em><em><strong>*hard rug*</strong></em><em><strong>*’*</strong></em><em><strong>*;*</strong></em></p><p><em><strong>*(删除products表列中值为hard rug的记录)*</strong></em></p><p><em><strong>*Eg : delete from products;(删除该表所有记录)*</strong></em></p><p><em><strong>*Truncate语句语法(用于删除表中所有记录) :*</strong></em></p><p><em><strong>*Truncate table 表名;*</strong></em></p><p><em><strong>*Eg : truncate table products;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps8.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps9.jpg" alt="img"> </p><p><em><strong>*删除表 :*</strong></em></p><p><em><strong>*Drop table语句语法 :*</strong></em></p><p><em><strong>*Drop [temporary(指定要删除的临时表)] table [if exits] [数据库名].表名 ,表名…;*</strong></em></p><p><em><strong>*Eg : drop table new_product;*</strong></em></p><p><em><strong>*PS : 如果要删除的表被其他表引用了,必须先删除引用表或者相应外键约束,然后再删除引用表*</strong></em></p><p>​</p><p><em><strong>*第三章*</strong></em></p><p><em><strong>*一.检索数据*</strong></em></p><p><em><strong>*检索特定属性 :*</strong></em></p><p><em><strong>*Select语句可以从数据库中检索所需数据*</strong></em></p><p><em><strong>*Select*</strong></em></p><p><em><strong>*[all(显示所展示列的所有行) | distinct(只有唯一的行显示在结果中)]*</strong></em></p><p><em><strong>*列名 [, 列名 , 列名 …]*</strong></em></p><p><em><strong>*[from 表名]*</strong></em></p><p><em><strong>*[where 满足要求的那一行(如果没有则选择所有行)]*</strong></em></p><p><em><strong>*Eg : select *from customer;*</strong></em></p><p><em><strong>*Select customer_ID , store_ID , first_name , last_name from customer;*</strong></em></p><p><em><strong>*Select title as ‘film name’ from film;(在用户定义的列(伪列)中显示)*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps10.jpg" alt="img"> </p><p><em><strong>*检索选定行 :*</strong></em></p><p><em><strong>*在select语句中使用where子句,来查询满足条件的行*</strong></em></p><p><em><strong>*Eg :*</strong></em> <em><strong>*Select title ,length ,rental_rate from film where rental_rate &#x3D;4.99;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps11.jpg" alt="img"> </p><p><em><strong>*当仅需检索满足查询条件的特定数量的记录而不是全部记录时,可以通过limit子句来实现*</strong></em></p><p><em><strong>*Limit(将查询结果限制在指定范围内)*</strong></em></p><p><em><strong>*Limit [从结果集的开头跳过的行数 , ] 结果集要返回的最大行数*</strong></em></p><p><em><strong>*Eg : select film_ID , title from film limit 5;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps12.jpg" alt="img"> </p><p><em><strong>*Eg : select film_ID , title from film limit 5 , 10;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps13.jpg" alt="img"> </p><p><em><strong>*使用逻辑运算符(在where子句条件下) :*</strong></em></p><p><em><strong>*Or(||) : 满足一个条件就行*</strong></em></p><p><em><strong>*Eg : Select * from customer where last_name &#x3D; ‘Smith’ or*</strong></em> <em><strong>*last_name  &#x3D; ‘Jones’;*</strong></em></p><p><em><strong>*And(&amp;&amp;) : 需要同时满足*</strong></em></p><p><em><strong>*Eg : select * from customer where first_name &#x3D; ‘Elizabeth’ and last_name &#x3D; ‘brown’;*</strong></em></p><p><em><strong>*Not(!) : 除去这些全都要*</strong></em></p><p><em><strong>*Eg : select * from customer where not first_name &#x3D; ‘Mary’;*</strong></em></p><p><em><strong>*使用比较运算符(在where子句条件下) :*</strong></em></p><p><em><strong>*&#x3D; , &gt; , &lt; , &gt;&#x3D; , &lt;&#x3D; , &lt;&gt; , !&#x3D; (后两个都是不等于)*</strong></em></p><p><em><strong>*Eg :  Select film_ID , title ,rental_rate from film where rental_rate*</strong></em> <em><strong>*&lt; 1;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps14.jpg" alt="img"> </p><p><em><strong>*Between运算符(在两个值之间的记录)*</strong></em></p><p><em><strong>*Eg : select title , rental_rate from film where rental_rate between*</strong></em> <em><strong>*0.99 and 2.99;*</strong></em></p><p><em><strong>*Like运算符(不区分大小写)*</strong></em></p><p><em><strong>*% 用于与任意数目的字符匹配*</strong></em></p><p><em><strong>*_*</strong></em> <em><strong>*用于与单个字符匹配*</strong></em></p><p><em><strong>*Eg : select title from film where title like’_F%’;(检索第二个字母为*</strong></em><em><strong>*f的片名)*</strong></em></p><p><em><strong>*In运算符(用于检索指定特定字段的多个值)*</strong></em></p><p><em><strong>*Eg : select film_ID , title , description , rental_rate from film where*</strong></em> <em><strong>*title in (‘African egg’ , ‘agent truman’ , ‘alone trip’);*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps15.jpg" alt="img"> </p><p><em><strong>*使用算数运算符 :*</strong></em> </p><p><em><strong>*Div : 两个整数的除法运算,显示商*</strong></em></p><p><em><strong>*Eg : select 7 div 2; 显示 3*</strong></em></p><p><em><strong>*&#x2F; : 两个整数的除法运算,显示精确的商*</strong></em></p><p><em><strong>*Eg : select 7 &#x2F; 2; 显示3.5000*</strong></em></p><p><em><strong>*- : 两个整数的减法运算*</strong></em></p><p><em><strong>*Eg : select 7 - 2; 显示 5*</strong></em></p><p><em><strong>*%或MOD : 两个整数除法,取余*</strong></em></p><p><em><strong>*Eg : select 7 % 2; 显示 1*</strong></em></p><p><em><strong>*+ : 两个整数的加法*</strong></em></p><p><em><strong>*Eg : select 7 + 2; 显示9*</strong></em></p><p><strong><em>*</em> : 两个整数的乘法*</strong>*</p><p><em><strong>*Eg : select 7 * 2; 显示14*</strong></em></p><p><em><strong>*Eg : select 2*(rental_rate) from film where title &#x3D; ‘academy*</strong></em> <em><strong>*dinosaur’*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps16.jpg" alt="img"> </p><p><em><strong>*二.使用函数来自定义结果集 :*</strong></em> </p><p><em><strong>*字符串函数 :*</strong></em></p><p><em><strong>*ASCII*</strong></em></p><p><em><strong>*Select ascii(‘string’);  返回字符串首字母的ACSII码*</strong></em></p><p><em><strong>*Eg : Select ascii(‘ABC’); 返回65,即A的ASCII码.*</strong></em></p><p><em><strong>*Left*</strong></em></p><p><em><strong>*Select left(‘string’,length); 返回字符串从左往右数length个长度*</strong></em></p><p><em><strong>*Eg : Select left(‘DAVID’,4); 返回DAVI*</strong></em></p><p><em><strong>*Reverse*</strong></em></p><p><em><strong>*Select reverse(‘string’); 倒序输出字符串*</strong></em></p><p><em><strong>*Eg : Select reverse(‘RAM’); 输出MAR*</strong></em></p><p><em><strong>*Right*</strong></em></p><p><em><strong>*Select right(‘string’,length); 返回字符串从右往左length个长度*</strong></em></p><p><em><strong>*Eg : Select right(‘LAWSON’,4); 返回WSON*</strong></em></p><p><em><strong>*Substring*</strong></em></p><p><em><strong>*Select substring(‘string1 string2’,length1,length2); 从length1处抽取length2个长度输出*</strong></em></p><p><em><strong>*Eg : Select substring(‘Whet her’,2,2); 返回he*</strong></em></p><p><em><strong>*Upper(有大写字母怎么办?)*</strong></em></p><p><em><strong>*Select upper(‘string’); 将小写字符转换为大写字符*</strong></em></p><p><em><strong>*Eg : Select upper(‘lawson’); 返回LAWSON*</strong></em></p><p><em><strong>*Lower(有小写字母怎么办?)*</strong></em></p><p><em><strong>*Select lower(‘STRING’); 将大写字符转换为小写字符*</strong></em></p><p><em><strong>*Eg : Select lower(‘RI CHARD’); 返回ri chard*</strong></em></p><p><em><strong>*Eg : select first_name , last_name , lower (email) from customer;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps17.jpg" alt="img"> </p><p><em><strong>*Concat*</strong></em></p><p><em><strong>*Select concat(‘string1’,’ ’,’string2’); 连接所有字符串*</strong></em></p><p><em><strong>*Eg : Select concat(‘Mary’,’ ’,’Smith’); 返回Mary Smith*</strong></em></p><p><em><strong>*Regexp(是否区分大小写?)*</strong></em></p><p><em><strong>*Select ‘string1’ regexp ‘string2’; 如果string2包含在string1中,*</strong></em></p><p><em><strong>*返回1;否则返回0*</strong></em></p><p><em><strong>*Eg : Select ‘John Peter’ regexp ‘Peter’; 返回1*</strong></em></p><p><em><strong>*与Regexp运算符一起使用的特殊字符和构造*</strong></em></p><p><em><strong>*. : 与单个字符匹配*</strong></em></p><p><em><strong>*P* : 与0个或任意数目的p字符匹配*</strong></em></p><p><em><strong>*P+ : 与1个或任意数目的p字符匹配*</strong></em></p><p><em><strong>*P? : 与0个或1个p字符匹配*</strong></em></p><p><em><strong>*^p : 与以p字符开头的字符串匹配*</strong></em></p><p><em><strong>*$p : 与以p字符结尾的字符串匹配*</strong></em></p><p><em><strong>*Pqr | abc : 与具有pqr或abc序列的字符串匹配*</strong></em></p><p><em><strong>*[pqrs] : 与[]中包含的字符中的单个字符匹配*</strong></em></p><p><em><strong>*[^pqrs] : 与不包含在[]中的字符匹配*</strong></em></p><p><em><strong>*[p-s] : 与从p到s的任意字符匹配*</strong></em></p><p><em><strong>*[^p-s] : 与除p到s中的字符之外的任意字符匹配*</strong></em></p><p><em><strong>*Eg : select * from sakila.actor*</strong></em></p><p><em><strong>*Where first_name regexp ‘^a’;(显示以a开头的所有演员的)*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps18.jpg" alt="img"> </p><p><em><strong>*Eg : Select * from sakila.actor*</strong></em></p><p><em><strong>*Where first_name regexp ‘^[ab][a-z]*a$’;(以a*</strong></em><em><strong>*或b*</strong></em><em><strong>*开头以*</strong></em><em><strong>*a*</strong></em><em><strong>*结尾*</strong></em><em><strong>*的演员*</strong></em><em><strong>*)*</strong></em></p><p><em><strong>*日期函数 :*</strong></em> </p><p><em><strong>*检索当前系统日期 : select curdate();*</strong></em></p><p><em><strong>*Adddate (推迟日期函数)*</strong></em></p><p><em><strong>*参数 : (date , interval expr unit)*</strong></em></p><p><em><strong>*Eg :*</strong></em> </p><p><em><strong>*select adddate(‘2008-8-24 15:25:52’,interval ‘8:20’ hour_minute);*</strong></em></p><p><em><strong>*返回比键入时间晚8小时20分钟的时间2008-8-24 15:25:52*</strong></em></p><p><em><strong>*Date(日期函数)*</strong></em></p><p><em><strong>*参数 : (date)*</strong></em></p><p><em><strong>*Eg : select date (‘2008-08-16 22:55:56’);*</strong></em></p><p><em><strong>*返回完整日期(不返回时间)2008-08-16*</strong></em></p><p><em><strong>*Month (月函数)*</strong></em></p><p><em><strong>*参数 : (date)*</strong></em></p><p><em><strong>*Eg : select month(‘2007-08-16 16:40:45’);*</strong></em></p><p><em><strong>*返回月份8*</strong></em></p><p><em><strong>*Monthname(月名)*</strong></em></p><p><em><strong>*参数 : (date)*</strong></em></p><p><em><strong>*Eg : select monthname(‘2008-07-24 20:40:45’);*</strong></em></p><p><em><strong>*返回月份名称7月*</strong></em></p><p><em><strong>*Year (年份)*</strong></em></p><p><em><strong>*参数 : (date)*</strong></em></p><p><em><strong>*Eg : select year(‘2005*</strong></em><em><strong>*-*</strong></em><em><strong>*06*</strong></em><em><strong>*-*</strong></em><em><strong>*16 20:45:30’);*</strong></em></p><p><em><strong>*返回年份2005*</strong></em></p><p><em><strong>*DateDiff(日期差)*</strong></em></p><p><em><strong>*参数 : (date,date)*</strong></em></p><p><em><strong>*Eg : select DateDiff(‘2005-08-24 20:50:59’,’2004-05-20 16:40:50’);*</strong></em></p><p><em><strong>*返回两个日期之间的天数差461*</strong></em></p><p><em><strong>*Timediff(时间差)*</strong></em></p><p><em><strong>*参数 : (time,time)*</strong></em></p><p><em><strong>*Eg : select timediff(‘2005-08-30 23:59:59’ , ‘2005-08-29 23:59:59’);*</strong></em></p><p><em><strong>*返回两个时间的差24:00:00*</strong></em></p><p><em><strong>*Day*</strong></em></p><p><em><strong>*参数 : (expr)*</strong></em></p><p><em><strong>*Eg : select day(‘2008-08-24 22:50:40’);*</strong></em></p><p><em><strong>*返回具体的日子24*</strong></em></p><p><em><strong>*Extract(抽取函数)*</strong></em></p><p><em><strong>*参数 : (unit from date)*</strong></em></p><p><em><strong>*Eg : select extract(year from ‘2009-05-20 22:50:40’);*</strong></em></p><p><em><strong>*抽取年份2009*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps19.jpg" alt="img"> </p><p><em><strong>*Unit预期expr格式*</strong></em></p><p><em><strong>*Eg : select payment_ID as ‘payment ID’ , payment_date as ‘old payment date’ , adddate(payment_date , interval 2 month) as ‘new payment date’ from payment where payment_ID 10;*</strong></em></p><p><em><strong>*将付款ID为10的付款日期延迟2个月*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps20.jpg" alt="img"> </p><p><em><strong>*Date_format函数*</strong></em></p><p><em><strong>*将各种值用于format自变量*</strong></em></p><p><em><strong>*%a : 以缩写形式显示工作日的名称(Sun , Mon , Sat)*</strong></em></p><p><em><strong>*%b : 以缩写格式显示月份的名称(jan , dec , feb)*</strong></em></p><p><em><strong>*%c ：以数值格式显示介于0至12的月份(范围从0开始)*</strong></em></p><p><em><strong>*%H ：以数值格式显示介于00至23的小时*</strong></em></p><p><em><strong>*%i ：以数值格式显示介于00至59的分钟数*</strong></em></p><p><em><strong>*%j ：以数值格式显示介于001至366的一年中的日子(范围从0开始)*</strong></em></p><p><em><strong>*%M ： 显示月份名称(January , December)*</strong></em></p><p><em><strong>*%p ： 以AM或PM显示时间*</strong></em></p><p><em><strong>*%s ： 显示介于00至59的秒数*</strong></em></p><p><em><strong>*Eg : select date_format(rental_date , ‘%H:%i‘) as ‘rental time’from rental；*</strong></em></p><p><em><strong>*客户最多访问商店并租借DVD的时间段*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps21.jpg" alt="img"> </p><p><em><strong>*数学函数 ：*</strong></em> </p><p><em><strong>*Floor(向下取整)*</strong></em></p><p><em><strong>*参数 ： (某个数)*</strong></em></p><p><em><strong>*Eg ：select floor(12.30);*</strong></em></p><p><em><strong>*返回小于等于指定值的最大整数12*</strong></em></p><p><em><strong>*Cot(余切)*</strong></em></p><p><em><strong>*参数 : (某个角的弧度)*</strong></em> </p><p><em><strong>*Eg : select cot(3.5);*</strong></em></p><p><em><strong>*返回弧度中指定角的余切2.669616484968866*</strong></em></p><p><em><strong>*Pi(π)*</strong></em></p><p><em><strong>*无参数*</strong></em></p><p><em><strong>*Eg ： select pi();*</strong></em></p><p><em><strong>*返回常量值3.141593*</strong></em></p><p><em><strong>*Pow(平方函数)*</strong></em></p><p><em><strong>*参数 : (一个数,多少次方)*</strong></em></p><p><em><strong>*Eg : select pow(5,2);*</strong></em></p><p><em><strong>*返回5的2次方25*</strong></em></p><p><em><strong>*Round(四舍五入保留小数)*</strong></em></p><p><em><strong>*参数 : (某个数,小数点后保留的位数)*</strong></em></p><p><em><strong>*Eg : select round(12.789,2);*</strong></em></p><p><em><strong>*返回12.79,四舍五入返回指定数的小数点后两位*</strong></em></p><p><em><strong>*Sqrt(开平方)*</strong></em></p><p><em><strong>*参数 : (某个数)*</strong></em></p><p><em><strong>*Eg : select sqrt(81);*</strong></em></p><p><em><strong>*返回81的平方根9*</strong></em></p><p><em><strong>*信息函数 :*</strong></em> </p><p><em><strong>*Current_user()*</strong></em></p><p><em><strong>*无参数*</strong></em></p><p><em><strong>*Eg : select current_user();*</strong></em></p><p><em><strong>*返回当前登陆的用户的用户名和主机名*</strong></em></p><p><em><strong>*Connection_id()*</strong></em></p><p><em><strong>*无参数*</strong></em></p><p><em><strong>*Eg : select connection_id();*</strong></em></p><p><em><strong>*返回当前连接的id*</strong></em></p><p><em><strong>*Database()*</strong></em></p><p><em><strong>*无参数*</strong></em></p><p><em><strong>*Eg : select database();*</strong></em></p><p><em><strong>*返回当前使用的数据库名称*</strong></em></p><p><em><strong>*Version*</strong></em></p><p><em><strong>*无参数*</strong></em></p><p><em><strong>*Eg : Select version();*</strong></em></p><p><em><strong>*返回mysql服务器当前的版本*</strong></em></p><p><em><strong>*Charset()*</strong></em></p><p><em><strong>*参数 : (某个字符串)*</strong></em></p><p><em><strong>*Eg ： select charset(‘andre’)*</strong></em></p><p><em><strong>*返回字符串参数的字符集utf8(就是刚学mysql定义的那个)*</strong></em></p><p><em><strong>*转换函数(将一种数据类型转换为另一种) :*</strong></em> </p><p><em><strong>*Binary(区分大小写的检索)*</strong></em></p><p><em><strong>*语法 :*</strong></em> <em><strong>*Binary(‘要检索的字符串’)*</strong></em></p><p><em><strong>*Eg : select *from film where title &#x3D; binary(‘AFRICAN EGG‘);*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps22.jpg" alt="img"> </p><p><em><strong>*Eg  : select*from film where title &#x3D; binary(‘african egg’);*</strong></em></p><p><em><strong>*由于区分大小写,第二个eg无结果*</strong></em></p><p><em><strong>*Cast()*</strong></em></p><p><em><strong>*Cast(定义的表达式 as 某种数据类型)*</strong></em></p><p><em><strong>*Eg : select payment_id , customer_id , cast(payment_date as date) as ‘rental date’ from payment;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps23.jpg" alt="img"> </p><p><em><strong>*Convert()  (效果同上,只不过语法不同)*</strong></em></p><p><em><strong>*Convert(定义表达式 , 数据类型)*</strong></em></p><p><em><strong>*Eg : select payment_ID , customer_ID , convert(payment_date , date) as ‘rental date’ from payment;*</strong></em></p><p><em><strong>*聚合(分组)函数(将汇总一列或一组列的值,并生成一个值) :*</strong></em> </p><p><em><strong>*AVG*</strong></em></p><p><em><strong>*参数 : (列名)*</strong></em></p><p><em><strong>*Eg :　select AVG(rental_rate) from film;*</strong></em></p><p><em><strong>*返回电影平均租费$2.980000*</strong></em></p><p><em><strong>*Sum*</strong></em></p><p><em><strong>*参数 : (列名)*</strong></em></p><p><em><strong>*Eg : select sum(rental_rate) from film;*</strong></em></p><p><em><strong>*返回电影总租金$2980.00*</strong></em></p><p><em><strong>*Min*</strong></em></p><p><em><strong>*参数 : (列名)*</strong></em></p><p><em><strong>*Eg : select min(rental_rate) from film;*</strong></em></p><p><em><strong>*返回电影最少租金$0.99*</strong></em></p><p><em><strong>*Max*</strong></em></p><p><em><strong>*参数 : (列名)*</strong></em></p><p><em><strong>*Eg : select max(rental_rate) from film;*</strong></em></p><p><em><strong>*返回电影最多租金$4.99*</strong></em></p><p><em><strong>*Count*</strong></em></p><p><em><strong>*参数 : (列名)*</strong></em></p><p><em><strong>*Eg : select count(title) from film;*</strong></em></p><p><em><strong>*计算电影片名的总数1000*</strong></em></p><p><em><strong>*Select count(*</strong></em><em><strong>*列名*</strong></em><em><strong>*) as ‘生成的列名*</strong></em><em><strong>*(一个伪列)*</strong></em><em><strong>*’ from 表名;*</strong></em></p><p><em><strong>*Eg : select count(*) as ‘number offilm dvds’ from film;*</strong></em></p><p><em><strong>*显示film表中电影总数*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps24.jpg" alt="img"> </p><p><strong>三、</strong><em><strong>*排序和分组数据 :*</strong></em> </p><p><em><strong>*数据排序(按升序或降序来排序数据) ：*</strong></em></p><p><em><strong>*Order by子句*</strong></em> </p><p><em><strong>*Select [all | distinct]*</strong></em></p><p><em><strong>*定义表达式 [ , 定义表达式…]*</strong></em></p><p><em><strong>*[from 表名]*</strong></em></p><p><em><strong>*[where where指定位置]*</strong></em></p><p><em><strong>*[order by 列名]*</strong></em></p><p><em><strong>*[ASC(升序) | desc(降序)]*</strong></em></p><p><em><strong>*Eg : select rental_ID , amount , payment_date*</strong></em></p><p><em><strong>*From payment*</strong></em></p><p><em><strong>*Order by amount*</strong></em> </p><p><em><strong>*Desc;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps25.jpg" alt="img"> </p><p><em><strong>*分组数据(把数据分组) :*</strong></em></p><p><em><strong>*Group by子句(依据聚合函数)*</strong></em></p><p><em><strong>*Select*</strong></em> </p><p><em><strong>*[all | distinct]*</strong></em></p><p><em><strong>*定义表达式 [ , 定义表达式…]*</strong></em></p><p><em><strong>*[from 表名]*</strong></em></p><p><em><strong>*[where where指定的位置]*</strong></em></p><p><em><strong>*[group by {(依据的)列名 | 表达式}]*</strong></em></p><p><em><strong>*[having 筛选子句生成结果集的条件表达式];*</strong></em></p><p><em><strong>*Eg : select customer_ID as ‘customer_ID’ , sum(amount) as ’total amount’ from payment group by customer_ID;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps26.jpg" alt="img"> </p><p><em><strong>*Having 子句(基于group by子句) :*</strong></em> </p><p><em><strong>*从结果集中出去某些组的某些汇总值*</strong></em></p><p><em><strong>*Eg : select customer_ID as ‘customer ID’ , sum(amount) as ‘total amount’ from payment group by customer_ID having customer_ID &lt; 5;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps27.jpg" alt="img"> </p><p><em><strong>*第四章*</strong></em></p><p><em><strong>*使用联接查询数据 :*</strong></em></p><p><em><strong>*使用内联接 :*</strong></em></p><p><em><strong>*(命令 : insert update delete ; 关键字 : join , inner join)*</strong></em></p><p><em><strong>*Select语句中应用内联接的语法 :*</strong></em> </p><p><em><strong>*Select 列名 , 列名 [ , 列名]*</strong></em></p><p><em><strong>*From 联接表名1 join 联接表名2*</strong></em></p><p><em><strong>*On 联接表名1.ref_列名 join_operator*</strong></em></p><p><em><strong>*联接表名2.ref_表名(联接依据的引用列名)*</strong></em></p><p><em><strong>*等值联接 :*</strong></em></p><p><em><strong>*(与内联接的区别是需要关键字straight_join)*</strong></em></p><p><em><strong>*Select 列名 , 列名 [ , 列名]*</strong></em></p><p><em><strong>*From 表名1 straight_join 表名2*</strong></em></p><p><em><strong>*[where 用于实现直线联接的语句];*</strong></em></p><p><em><strong>*Eg : select c.customer_ID , c.first_name , c.last_name  , a.address_id , a.district , a.city_id , a.postal_code , a.phone from sakila.customer c straight_join sakila.address a on c.address_id &#x3D; a.address_id;*</strong></em></p><p><em><strong>*此例中customer和address表用straight_join通过直线联接联接在一起*</strong></em></p><p><em><strong>*使用外联接 :*</strong></em></p><p><em><strong>*(检索结果集包括表中的所有记录以及基于联接条件另一个表中的匹配记录)*</strong></em></p><p><em><strong>*外联接语法 :*</strong></em></p><p><em><strong>*(分为左外联接与右外联接)*</strong></em></p><p><em><strong>*Select 列名 , 列名 [ , 列名]*</strong></em></p><p><em><strong>*From 表名1 [ left | right ] outer join 表名2*</strong></em></p><p><em><strong>*On 表名1.ref_列名 join_operator*</strong></em></p><p><em><strong>*表名2.ref_列名 | (using ref_列名)*</strong></em></p><p><em><strong>*[where 检索条件];*</strong></em></p><p><em><strong>*左外联接 :*</strong></em> </p><p><em><strong>*(检索left outer join关键字左侧列出的表中的所有行 , 以及left outer join关键字右侧列出的表中的匹配行.右侧列出的表找不到任何匹配记录的列显示null)*</strong></em></p><p><em><strong>*Eg :*</strong></em> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps28.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps29.jpg" alt="img"> </p><p><em><strong>*Select film.film_id , film_title , film_actor.actor_id from sakila.film left outer join sakila.film_actor on film.film_id &#x3D; film_actor.film_id where film.film_id between 257 and 260;*</strong></em></p><p><em><strong>*查看ID介于257至260的所有电影中每个演员的ID以及没有任何演员的电影的详细信息*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps30.jpg" alt="img"> </p><p><em><strong>*右外联接 :*</strong></em></p><p><em><strong>*(检索right outer join关键字右侧列出的表中的所有行 , 以及right outer join关键字左侧列出的表中的匹配行.左侧列出的表找不到任何匹配记录的列显示null)*</strong></em></p><p><em><strong>*Eg :*</strong></em> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps31.jpg" alt="img"> </p><p><em><strong>*SELECT film.title , language.name from sakila.film right outer join sakila.language on film.language_id &#x3D; language.language_id order by language.language_id desc;*</strong></em></p><p><em><strong>*查看数据库中电影使用的所有语言列表 , 以及这些语言的可用电影列表.再看看没有任何电影使用的那些语言*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps32.jpg" alt="img"> </p><p><em><strong>*使用自然联接 :*</strong></em></p><p><em><strong>*(基于公共列将一个表的一个列与另一个表的列联合起来)*</strong></em></p><p><em><strong>*(可以是左或者右.可以用在未指定表之间主-外键关系的情况中.两个表共享一个列.如果表之间存在主-外键关系,自然联接不会显示所需输出)*</strong></em></p><p><em><strong>*自然联接语法 :*</strong></em></p><p><em><strong>*Select 列名 , 列名 [ , 列名]*</strong></em></p><p><em><strong>*From 表名 natural [{left | right} [outer]] join 表名;*</strong></em></p><p><em><strong>*Eg :*</strong></em> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps33.jpg" alt="img"> </p><p><em><strong>*Select *from store natural join city ;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps34.jpg" alt="img"> </p><p><em><strong>*使用交叉联接 :*</strong></em></p><p><em><strong>*(将一个表中的每一行与另一个表中的每一行联接起来)*</strong></em></p><p><em><strong>*Eg : select a.hotel_name , b.room_type_description from  hotels as a cross join room_types as b;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps35.jpg" alt="img"> </p><p><em><strong>*使用自联接 :*</strong></em>　</p><p><em><strong>*(表与自身联接)*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps36.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps37.jpg" alt="img"> </p><p><em><strong>*Eg : select distinct f1.title , f1.film_id , f1.release_year , f1.rental_rate fro sakila.film as f1 , sakila.film as f2 where*</strong></em></p><p><em><strong>*F1.rental_rate &#x3D; f2.rental_rate and f1.film_id between 320 and 330;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps38.jpg" alt="img"> </p><p><em><strong>*使用子查询查询数据 :*</strong></em> </p><p><em><strong>*(返回用于执行外部查询的值.可以返回一个或多个值)*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g : select customer.customer_id , customer.first_name , customer.last_name*</strong></em> </p><p><em><strong>*F*</strong></em><em><strong>*rom sakila.customer where customer.customer_id &#x3D; (select payment.customer_id from sakila.payment where payment.payment_id &#x3D; 1);*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps39.jpg" alt="img"> </p><p><em><strong>*使用in和exists关键字 :*</strong></em></p><p><em><strong>*使用in和not in关键字 ：*</strong></em></p><p><em><strong>*语法 ：*</strong></em></p><p><em><strong>*S*</strong></em><em><strong>*elect 列名 ， 列名 [ , 列名*</strong></em> <em><strong>*…*</strong></em><em><strong>*]*</strong></em></p><p><em><strong>*F*</strong></em><em><strong>*rom 表名*</strong></em></p><p><em><strong>*W*</strong></em><em><strong>*here 列名 in | not in*</strong></em></p><p>​<em><strong>*(select 列名 from 表名 {where 条件表达式});*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g : select distinct film_category.category_id from sakila.film_category where film_category.fillm_id in (select film.film_id from sakila.film where film.rental_duration &#x3D; 6);*</strong></em></p><p><em><strong>*检索周期为6天的所有dvd的类别id属性*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps40.jpg" alt="img"> </p><p><em><strong>*使用exists和not exists关键字 ：*</strong></em></p><p><em><strong>*语法 ：*</strong></em> </p><p><em><strong>*S*</strong></em><em><strong>*elect 列名 ， 列名 [ , 列名 ]*</strong></em></p><p><em><strong>*F*</strong></em><em><strong>*rom 表名*</strong></em></p><p><em><strong>*W*</strong></em><em><strong>*here exists |not exists （select * from 表名 [where 表达式]）;*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g : select * from sakila.film where exists (*</strong></em> </p><p><em><strong>*S*</strong></em><em><strong>*elect * from sakila.film_actor where film_actor.actor_id &#x3D; (select distinct actor.actor_id from actor where actor.first_name &#x3D;*</strong></em> <em><strong>*‘*</strong></em><em><strong>*penelope*</strong></em><em><strong>*’*</strong></em> <em><strong>*and actor.last_name &#x3D;*</strong></em> <em><strong>*‘*</strong></em><em><strong>*guiness*</strong></em><em><strong>*’*</strong></em><em><strong>*) and film_actor.film_id &#x3D; film.film_id);*</strong></em></p><p><em><strong>*检索演员表包括演员penelope guiness的所有电影(检查film_actor表中的记录是否存在)*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps41.jpg" alt="img"> </p><p><em><strong>*使用修改过的比较运算符 :*</strong></em> </p><p><em><strong>*(可以用&#x3D; &lt; &gt;等比较运算符,还可以一起使用all any之类的关键字)*</strong></em></p><p><em><strong>*A*</strong></em><em><strong>*ll : 所有比较为真 , 返回true值 , 其余情况返回false*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g : select *from sakilla.film where film.replacement_cost &gt; all (select film.replacement_cost from film where length &#x3D; 70 );*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps42.jpg" alt="img"> </p><p><em><strong>*E*</strong></em><em><strong>*g : select count (*) from sakila.payment where amount &gt; any (select amount from payment where customer_id &#x3D; 7 and staff_id &#x3D; 1);*</strong></em></p><p><em><strong>*检索支付金额大于客户id为7的客户向员工if为1的员工所支付金额的客户数*</strong></em> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps43.jpg" alt="img"> </p><p><em><strong>*使用嵌套子查询 ：*</strong></em> </p><p><em><strong>*(在一个子查询中使用一个或多个子查询)*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g : select * from saklia.actor where actor.actor_id in*</strong></em></p><p><em><strong>*&#x2F;*第三层子查询*&#x2F;*</strong></em></p><p><em><strong>*(select film_actor.actor_id from sakila.film_actor where*</strong></em></p><p><em><strong>*F*</strong></em><em><strong>*ilm_actor.film_id in*</strong></em></p><p><em><strong>*&#x2F;*第二层子查询*&#x2F;*</strong></em></p><p><em><strong>*(select film.film_id from sakila.film where*</strong></em></p><p><em><strong>*F*</strong></em><em><strong>*ilm.language_id &#x3D;*</strong></em> </p><p><em><strong>*&#x2F;*第一层子查询*&#x2F;*</strong></em></p><p><em><strong>*(select language.language_id from language where*</strong></em></p><p><em><strong>*L*</strong></em><em><strong>*anguage.name &#x3D;*</strong></em> <em><strong>*‘*</strong></em><em><strong>*english*</strong></em><em><strong>*’*</strong></em><em><strong>*)));*</strong></em></p><p><em><strong>*查看出演英文电影的每个演员的详细信息*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps44.jpg" alt="img"> </p><p><em><strong>*使用关联子查询 ：*</strong></em></p><p><em><strong>*(使用运行取决于外部查询的内部查询)*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g ：select customer.customer_id , customer.first_name , customer.last_name from sakila.customer where exists (select * from saklia.payment where customer.customer_id &#x3D; payment.customer_id group by*</strong></em> </p><p><em><strong>*C*</strong></em><em><strong>*ustomer.customer_id having coumt (*) &gt; &#x3D;40);*</strong></em></p><p><em><strong>*检索至少支付了40次的所有客户的详细信息*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps45.jpg" alt="img"> </p><p><em><strong>*S*</strong></em><em><strong>*elect * from student where exists (select  stu_id from marks where course &#x3D;*</strong></em> <em><strong>*‘*</strong></em><em><strong>*chinses*</strong></em><em><strong>*’*</strong></em><em><strong>*);*</strong></em></p><p><em><strong>*–将返回true或者false*</strong></em></p><p><em><strong>*–如果内查询返回任何输出则为true*</strong></em></p><p><em><strong>*–如果返回true则执行外查询否则将会执行NCT（？）*</strong></em></p><p><em><strong>*第五章*</strong></em> </p><p><em><strong>*创建管理和索引 ：*</strong></em></p><p><em><strong>*(为常用的列创建索引 , 全都创建索引会在使用的时候更麻烦)*</strong></em></p><p><em><strong>*(用户只能创建索引 , 使用索引是系统的功能*</strong></em></p><p><em><strong>*了解索引类型 ：*</strong></em></p><p><em><strong>*主键(primary key) ：要求定义了该索引的列必须为表中的所有记录包含唯一值。任何记录的这些列都不得包含null值*</strong></em></p><p><em><strong>*外键(foreign key) ：在 事务表中引用主表列 的 引用列 上定义，用来定义这些表之间的关系，并确保这些表中存储的数据之间的一致性*</strong></em></p><p><em><strong>*唯一(unique) ：在包含表中记录的唯一值的列上定义，可以包含null值*</strong></em></p><p><em><strong>*常规(regular) ：在可以包含表中的重复值和null值的列上定义*</strong></em></p><p><em><strong>*(以二叉树为基础)*</strong></em></p><p><em><strong>*全文(full-text) ：在可以接受字符串值的列上定义。目的是提高搜索列数据中所包含字符串值的速度。数据类型可为 ： char ， varchar ， txet。这些列可以接搜重复值或null值*</strong></em></p><p><em><strong>*T*</strong></em><em><strong>*ip ：在表上定义主键\外键\唯一约束时,会在约束中包括的列上自动创建相应的索引*</strong></em></p><p><em><strong>*T*</strong></em><em><strong>*ip :全文引擎只能在可以使用MyISAM存储引擎访问的表上定义*</strong></em></p><p><em><strong>*创建索引 :*</strong></em></p><p><em><strong>*(创建表时创建索引  在现有表上创建索引)*</strong></em></p><p><em><strong>*1.创建表时创建索引 ：*</strong></em></p><p><strong>（1）</strong> <em><strong>*创建常规索引*</strong></em> </p><p><em><strong>*语法 ：*</strong></em></p><p><em><strong>*Create*</strong></em> <em><strong>*table 表名*</strong></em></p><p><em><strong>*(*</strong></em></p><p><em><strong>*…*</strong></em></p><p><em><strong>*{指定任意可用于创建常规索引的关键字} [常规索引名称] (列名 [( , 列名*</strong></em><em><strong>*…*</strong></em><em><strong>*)]*</strong></em></p><p><em><strong>*);*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g :*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*reate table if not exists food_menu*</strong></em></p><p><em><strong>*(*</strong></em></p><p><em><strong>*F*</strong></em><em><strong>*ood_item_id int not null ,*</strong></em></p><p><em><strong>*F*</strong></em><em><strong>*ood_item_desc varchar(45) not null ,*</strong></em></p><p><em><strong>*F*</strong></em><em><strong>*ood_item_rate float ,*</strong></em></p><p><em><strong>*F*</strong></em><em><strong>*ood_cat varchar(20) ,*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*uisine varchar(20) ,*</strong></em></p><p><em><strong>*I*</strong></em><em><strong>*ndex rate_index (food_item_rate)*</strong></em></p><p><em><strong>*) engine &#x3D; myisam;*</strong></em></p><p><em><strong>*在food_menu表的food_item_rate列上创建名为rate_index的索引*</strong></em></p><p><strong>（2）</strong> <em><strong>*创建全文索引*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*reate table 表名*</strong></em></p><p><em><strong>*(*</strong></em></p><p><em><strong>*…*</strong></em></p><p><em><strong>*F*</strong></em><em><strong>*ulltext(创建fulltext索引) [可选关键字] 索引名称 (列名 [{ , 列名*</strong></em><em><strong>*…*</strong></em><em><strong>*}*</strong></em><em><strong>*]*</strong></em><em><strong>*)*</strong></em></p><p><em><strong>*);*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g :*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*reate table if not exists food_menu*</strong></em></p><p><em><strong>*(*</strong></em></p><p><em><strong>*F*</strong></em><em><strong>*ood_item_id int not null ,*</strong></em></p><p><em><strong>*F*</strong></em><em><strong>*ood_item_desc varchar(45) not null ,*</strong></em></p><p><em><strong>*F*</strong></em><em><strong>*ood_item_rate float ,*</strong></em></p><p><em><strong>*F*</strong></em><em><strong>*ood_cat varchar(20) ,*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*uisine varchat(20) ,*</strong></em></p><p><em><strong>*I*</strong></em><em><strong>*ndex rate_index (food_item_rate) ,*</strong></em></p><p><em><strong>*F*</strong></em><em><strong>*ulltext food_descr_index (food_item_desc)*</strong></em></p><p><em><strong>*)*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*ngine &#x3D; myisam;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps46.jpg" alt="img"> </p><p><em><strong>*2.在现有表上创建索引*</strong></em></p><p><em><strong>*(alter table语句 , create index语句)*</strong></em></p><p><strong>（1）</strong> <em><strong>*ALTER table语句*</strong></em></p><p><em><strong>*(用于在现有表的列上创建索引 , 会修改表的结构)*</strong></em></p><p><em><strong>*A*</strong></em><em><strong>*lter table语句创建常规索引语法 ：*</strong></em></p><p><em><strong>*A*</strong></em><em><strong>*lter table 表名*</strong></em></p><p><em><strong>*A*</strong></em><em><strong>*dd {指定任意可用于创建常规索引的关键字}  [创建索引的名称] (列名 [ , {列名}*</strong></em><em><strong>*…*</strong></em><em><strong>*]);*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g : alter table daily_room_rates*</strong></em></p><p><em><strong>*A*</strong></em><em><strong>*dd index reqidx_room_rate(daily_room_rate_offered);*</strong></em></p><p><em><strong>*在daily_room_rates表的daily_room_rate_offered上创建常规索引*</strong></em></p><p> <em><strong>*A*</strong></em><em><strong>*lter table语句创建全文索引语法 ：*</strong></em></p><p><em><strong>*A*</strong></em><em><strong>*lter table 表名*</strong></em></p><p><em><strong>*A*</strong></em><em><strong>*dd fulltext {指定任意可用于创建常规索引的关键字}  [创建全文索引的名称] (列名 [ , {列名}*</strong></em><em><strong>*…*</strong></em><em><strong>*]);*</strong></em></p><p>​<em><strong>*E*</strong></em><em><strong>*g ：alter table food_menu*</strong></em></p><p>​<em><strong>*A*</strong></em><em><strong>*dd fulltext index index_cat (food_cat);*</strong></em></p><p><em><strong>*在food_menu表的food_cat列上创建了名为index_cat的全文索引*</strong></em></p><p><strong>（2）</strong> <em><strong>*create index语句*</strong></em></p><p><em><strong>*(允许创建唯一,常规和全文索引,不能用此语句创建主键索引和外键索引)*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*reate index创建唯一索引语法 :*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*reate 指定要创建的唯一索引列 index 唯一索引名称*</strong></em></p><p><em><strong>*O*</strong></em><em><strong>*n(用在表名之前以指定要在其上创建索引的表) 表名 (列名 , 列名*</strong></em><em><strong>*…*</strong></em><em><strong>*.);*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g : create unique index unique_characteristic_desc*</strong></em></p><p><em><strong>*O*</strong></em><em><strong>*n hotel_characteristic (characteristic_code_desc);*</strong></em></p><p><em><strong>*在名为hotel_characteristic的现有表characteristic_code_desc列上创建了名为unique_characteristic_desc的唯一索引*</strong></em></p><p>​<em><strong>*C*</strong></em><em><strong>*reate index语句创建常规索引的语法 :*</strong></em></p><p>​<em><strong>*C*</strong></em><em><strong>*reate index 索引名*</strong></em></p><p>​<em><strong>*O*</strong></em><em><strong>*n 表名 (列名*</strong></em><em><strong>*…*</strong></em><em><strong>*.);*</strong></em></p><p>​<em><strong>*E*</strong></em><em><strong>*g : create index regidx_rate_offered*</strong></em></p><p>​<em><strong>*O*</strong></em><em><strong>*n daily_room_rates (daily_room_rate_accepted); 在daily_room_rates表的daily_room_accepted列上创建常规索引*</strong></em></p><p>​<em><strong>*C*</strong></em><em><strong>*reate index语句创建全文索引的语法 ：*</strong></em></p><p>​<em><strong>*C*</strong></em><em><strong>*reate fulltext index 索引名*</strong></em></p><p>​<em><strong>*O*</strong></em><em><strong>*n 表名 (列名*</strong></em> <em><strong>*…*</strong></em><em><strong>*.);*</strong></em></p><p>​<em><strong>*E*</strong></em><em><strong>*g : create fulltext index fulltxt_food_item*</strong></em></p><p>​<em><strong>*O*</strong></em><em><strong>*n food_menu (food_item_desc);*</strong></em></p><p><em><strong>*在food_menu表的food_item_desc列上创建了名为fulltxt_food_item的全文索引*</strong></em></p><p><em><strong>*查看索引 :*</strong></em></p><p><em><strong>*S*</strong></em><em><strong>*how indexes语句语法 :*</strong></em></p><p><em><strong>*S*</strong></em><em><strong>*how indexes*</strong></em></p><p><em><strong>*F*</strong></em><em><strong>*rom 表名*</strong></em></p><p><em><strong>*[from 指定表所属的库名];*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g : show indexes from guests;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps47.jpg" alt="img"> </p><p><em><strong>*删除索引 :*</strong></em></p><p><em><strong>*(alter table , drop index)*</strong></em></p><p><em><strong>*A*</strong></em><em><strong>*lter table语句 :*</strong></em></p><p><em><strong>*(不再需要表时,可以删除在表上创建的索引)*</strong></em></p><p><em><strong>*(用此语句修改表的结构)*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*A*</strong></em><em><strong>*lter table 表名*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*rop index 索引名;*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g :*</strong></em></p><p><em><strong>*A*</strong></em><em><strong>*lter table food_menu*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*rop index index_cat;*</strong></em></p><p><em><strong>*从food_menu表中删除了名为index_cat的索引*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*rop index语句 ：*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*rop index 索引名 on 表名;*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g :*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*rop index index_cat on food_menu;*</strong></em></p><p><em><strong>*创建和管理视图 :*</strong></em></p><p><em><strong>*创建视图(虚拟表) ：*</strong></em></p><p><em><strong>*(提供对来自一个或多个表或视图的列或记录的子集进行访问)*</strong></em></p><p><em><strong>*创建视图 :*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*reate view语句 ：*</strong></em> </p><p><em><strong>*语法 ：*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*reate [or replace] (如果已经定义了同名视图,删除现有视图并创建具有指定意义的新视图)*</strong></em></p><p><em><strong>*V*</strong></em><em><strong>*iew 视图名 [{列名 , 列名*</strong></em><em><strong>*…*</strong></em><em><strong>*.}]*</strong></em></p><p><em><strong>*A*</strong></em><em><strong>*s 定义视图的select语句;*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g :*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*reate view Booking_Cust_View as*</strong></em></p><p><em><strong>*S*</strong></em><em><strong>*elect*</strong></em></p><p><em><strong>*a.Agent_ID , Agent_Name , ar.Agent_Reservation_ID , b.Booking_ID , Guest_Name from Agent as a , Agent_Reservation as ar , Guests as g , Bookings as b where a.Agent_ID &#x3D; ar.Agent_ID and ar.Agent_Reservation_ID &#x3D; b.Agent_Reservation_ID and g.Guest_ID &#x3D; b.Guset_ID;*</strong></em></p><p><em><strong>*创建了Agent , Agent_reservation , Guest和Bookings表的所需列的Booking_Cust_View视图*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g :*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*reate view Hotel_Viewl*</strong></em></p><p><em><strong>*A*</strong></em><em><strong>*s*</strong></em></p><p><em><strong>*S*</strong></em><em><strong>*elect Guest_Name , coumt(Booking_ID)*</strong></em></p><p><em><strong>*F*</strong></em><em><strong>*rom Guests as g join Bookings as b on g.Guest_ID &#x3D; b.Guest_ID group by Guest_Name;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps48.jpg" alt="img"> </p><p><em><strong>*Eg定义 :*</strong></em> </p><p><em><strong>*Create or replace view Hotel _ Viewl (GuestName , Number _ Of _ Bookings)*</strong></em></p><p><em><strong>*As*</strong></em></p><p><em><strong>*Selecct Guest_Name , count(Booking_ID)*</strong></em></p><p><em><strong>*From Guest as g join Bookings as on g.Guest_ID &#x3D; b.Guest_ID group by Guset_Name;*</strong></em></p><p><em><strong>*Tip :*</strong></em> </p><p><em><strong>*1.or replace用于删除Hotel_Viewl视图的现有定义 ,并重现创建具有新定义的Hotel_Viewl视图*</strong></em></p><p><em><strong>*2.GuestName和Number_Of_Bookings是分配给Hotel_Viewl视图的列的显示名称*</strong></em></p><p><em><strong>*查询视图*</strong></em> </p><p><em><strong>*语法 :*</strong></em></p><p> <em><strong>*select * from 视图名;(可以包含where和order by之类的子句)*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Select * from Hotel_Viewl;*</strong></em></p><p><em><strong>*查询Hotel_Viewl视图*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps49.jpg" alt="img"> </p><p><em><strong>*查询具有where子句的视图 :*</strong></em> </p><p><em><strong>*(where子句可以包含在视图定义中精化视图要显示的记录 , 对该视图发起的查询还可以包含where子句以精化其输出)*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*Create view 视图名 as*</strong></em></p><p><em><strong>*Select * from 表名*</strong></em></p><p><em><strong>*Where 约束条件;*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Create view Room_Viewl as*</strong></em></p><p><em><strong>*Select * from Rooms*</strong></em></p><p><em><strong>*Where Room_Actual_Rate&lt;600;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps50.jpg" alt="img"> </p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Select * from Room_Viewl;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps51.jpg" alt="img"> </p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Select * from Room_Viewl*</strong></em></p><p><em><strong>*Where Room_Type_Code &#x3D;*</strong></em> <em><strong>*‘*</strong></em><em><strong>*Ex*</strong></em><em><strong>*’*</strong></em><em><strong>*;*</strong></em></p><p><em><strong>*只查看Room_Viewl视图中行政客房的记录*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps52.jpg" alt="img"> </p><p><em><strong>*查询具有Order By子句的视图 :*</strong></em></p><p><em><strong>*(用该子句对视图中要存储的数据进行排序)*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*Create view 视图名 as*</strong></em></p><p><em><strong>*Select * from 表名*</strong></em></p><p><em><strong>*Order by 列名 降序或升序;*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*create view Guest_Viewl as*</strong></em></p><p><em><strong>*Select * from Guests*</strong></em></p><p><em><strong>*Order by Guest_Name dasc;*</strong></em></p><p><em><strong>*创建了Guest_Viewl来按Guest_Name列的降序存储Guests表中的所有记录*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Select * from Guest_Viewl*</strong></em></p><p><em><strong>*Order by Guest_Name;*</strong></em></p><p><em><strong>*查看Guests_Viewl视图中按升序存储的记录*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps53.jpg" alt="img"> </p><p><em><strong>*视图限制 :*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps54.jpg" alt="img"> </p><p><em><strong>*可更新视图 :*</strong></em></p><p><em><strong>*(在视图上执行插入,更新,或删除操作可以修改底层表时才认为视图可更新)*</strong></em></p><p><em><strong>*视图定义中包含一下操作 , 则视图不可更新 :*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps55.jpg" alt="img"> </p><p><em><strong>*在视图上插入 :*</strong></em></p><p><em><strong>*(只能对底层表中所有NOT NULL列且在列列表中不包含计算列的视图插入)*</strong></em></p><p><em><strong>*Eg :*</strong></em> </p><p><em><strong>*Create view Hotel_View3 as*</strong></em></p><p><em><strong>*Select Hotel_ID , Hotel_Name , Star_Rating*</strong></em></p><p><em><strong>*From Hotels;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps56.jpg" alt="img"> </p><p><em><strong>*查询视图存储的数据 : select * from Hotel_View3;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps57.jpg" alt="img"> </p><p><em><strong>*在Hotel表中插入记录 :*</strong></em></p><p><em><strong>*Insert into Hotel_View3*</strong></em></p><p><em><strong>*Values(*</strong></em><em><strong>*‘*</strong></em><em><strong>*H40001*</strong></em><em><strong>*’*</strong></em> <em><strong>*,*</strong></em> <em><strong>*‘*</strong></em><em><strong>*Pacific International*</strong></em><em><strong>*’*</strong></em> <em><strong>*, 4);*</strong></em></p><p><em><strong>*Tip : 当要插入不可更新视图时 , MySQL将发出错误*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps58.jpg" alt="img"> </p><p><em><strong>*在视图上更新 :*</strong></em></p><p><em><strong>*(会修改底层表的记录)*</strong></em></p><p><em><strong>*不能在视图上更新的情况 :*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps59.jpg" alt="img"> </p><p><em><strong>*在视图上更新只能修改一个表 :*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Update Hotel_View3*</strong></em></p><p><em><strong>*Set Star_rating &#x3D; 4 where Hotel_ID &#x3D;*</strong></em> <em><strong>*‘*</strong></em><em><strong>*H10002*</strong></em><em><strong>*’*</strong></em><em><strong>*;*</strong></em></p><p><em><strong>*将Hotel_ID为H10002的酒店的Star_Rating更新为4*</strong></em></p><p><em><strong>*在视图上删除 :*</strong></em></p><p><em><strong>*(会从底层删除记录)*</strong></em></p><p><em><strong>*(允许一个表中的列进行删除)*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Deelete from hotel_view3*</strong></em></p><p><em><strong>*Where Hotel1_ID &#x3D;*</strong></em> <em><strong>*‘*</strong></em><em><strong>*H40001*</strong></em><em><strong>*’*</strong></em><em><strong>*;*</strong></em></p><p><em><strong>*从Hotels表删除了在Hotel_ID列中值为H40001的酒店记录*</strong></em></p><p><em><strong>*管理视图 :*</strong></em></p><p><em><strong>*(更改 , 删除)*</strong></em></p><p><em><strong>*更改视图 :*</strong></em></p><p><em><strong>*Eg :*</strong></em> </p><p><em><strong>*create view Hotel_View3 as*</strong></em></p><p><em><strong>*Select Hotel_ID , Hotel_Name , Star_Rating*</strong></em></p><p><em><strong>*From Hotels;*</strong></em></p><p><em><strong>*(先创建一个)*</strong></em></p><p><em><strong>*Alter view语法 :*</strong></em></p><p><em><strong>*Alter view 视图名*</strong></em></p><p><em><strong>*As select 视图表中的各个列名*</strong></em></p><p><em><strong>*From 底层表;*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Alter view Hotel_view3*</strong></em></p><p><em><strong>*As select Hotel_ID , Hotel_Name , Star_Rating , Hotel_Address*</strong></em></p><p><em><strong>*From Hotels;*</strong></em></p><p><em><strong>*通过包含Hotels表的Hotel_Address列修改了Hotel_View3视图的定义*</strong></em></p><p><em><strong>*删除视图 :*</strong></em></p><p><em><strong>*(对底层表没有影响)*</strong></em></p><p><em><strong>*(查询的视图引用了已删除的表 , 会收到错误信息)*</strong></em></p><p><em><strong>*Drop view语法 :*</strong></em></p><p><em><strong>*Drop view [if exists] 视图名;*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Drop view if exists Hotel_View3;*</strong></em></p><p><strong>第六章</strong> <em><strong>*实现复合语句和储存例程*</strong></em></p><p><em><strong>*实现复合语句 :*</strong></em></p><p><em><strong>*创建复合语句 :*</strong></em></p><p><em><strong>*声明复合语句的语法 :*</strong></em></p><p><em><strong>*[begin_label(用于向begin…end块内括起的复合语句提供名称)]*</strong></em></p><p><em><strong>*begin[一个或多个语句列表]*</strong></em> </p><p><em><strong>*end [end_label用于标记复合语句的结束,与begin_label相同];*</strong></em></p><p><em><strong>*Tip : 若使用复合语句,则需要更改默认分隔符(默认为;)*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Begin*</strong></em></p><p><em><strong>*Select * from sakila.films;*</strong></em></p><p><em><strong>*Create table emp(empno int , ename varcher(50));*</strong></em></p><p><em><strong>*Insert into emp values(4 ,*</strong></em> <em><strong>*‘*</strong></em><em><strong>*TOM*</strong></em><em><strong>*’*</strong></em><em><strong>*);*</strong></em></p><p><em><strong>*Insert into emp values(2 ,*</strong></em> <em><strong>*‘*</strong></em><em><strong>*ANDREW*</strong></em><em><strong>*’*</strong></em><em><strong>*);*</strong></em></p><p><em><strong>*在sakila数据库中创建了名为emp的新表包含empno和ename字段并把TOM和ANDREW的记录插入到EMP表中*</strong></em></p><p><em><strong>*Declare语句 :*</strong></em></p><p><em><strong>*(用于在begin_end块中声明局部变量,此语句应该在begin…end块内的任何其他语句之前声明)*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*Decla 声明变量名称 [, 变量名…] 变量类型 [default 默认值];*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Decla a int;*</strong></em></p><p><em><strong>*声明了整型变量a*</strong></em></p><p><em><strong>*Tip : 局部变量的作用域限于在其中声明它的begin…end块内或者在声明块内所嵌套的块内*</strong></em></p><p><em><strong>*Set语句 :*</strong></em></p><p><em><strong>*(给局部变量和全局变量赋值)*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*Set 变量赋值;*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Set p&#x3D;1;*</strong></em></p><p><em><strong>*用户定义变量语法(全局变量) :*</strong></em></p><p><em><strong>*Set @变量名&#x3D;值 , …;*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Set @x &#x3D; 1 , @y &#x3D; 2;*</strong></em></p><p><em><strong>*使用流控制语句 :*</strong></em></p><p><strong>1.</strong> <em><strong>*if…then…else语句 :*</strong></em></p><p><em><strong>*(基于条件执行SQL语句)(可在if后嵌套else if)*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*If 条件 then*</strong></em></p><p><em><strong>*要执行的语句;*</strong></em></p><p><em><strong>*[else if 条件 then*</strong></em></p><p><em><strong>*要执行的语句;]*</strong></em></p><p><em><strong>*End if;*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Begin*</strong></em> </p><p><em><strong>*Declare s varchar(20);*</strong></em></p><p><em><strong>*Declare p int;*</strong></em></p><p><em><strong>*Declare q int;*</strong></em></p><p><em><strong>*Set p &#x3D; 10;*</strong></em></p><p><em><strong>*Set q &#x3D; 20;*</strong></em></p><p><em><strong>*If p &gt; q then set s &#x3D; concat(p ,*</strong></em> <em><strong>*‘*</strong></em><em><strong>*&gt;*</strong></em><em><strong>*’*</strong></em> <em><strong>*, q);*</strong></em></p><p><em><strong>*Else if p &#x3D; q then set s &#x3D; concat(p ,*</strong></em> <em><strong>*‘*</strong></em><em><strong>*&#x3D;*</strong></em><em><strong>*’*</strong></em> <em><strong>*, q);*</strong></em></p><p><em><strong>*Else set s &#x3D; concat(q ,*</strong></em> <em><strong>*‘*</strong></em><em><strong>*&gt;*</strong></em><em><strong>*’*</strong></em> <em><strong>*, p);*</strong></em></p><p><em><strong>*Select s;*</strong></em></p><p><em><strong>*End if;*</strong></em></p><p><em><strong>*End if;*</strong></em></p><p><em><strong>*End*</strong></em></p><p><em><strong>*比较两个数的值*</strong></em></p><p><strong>2.</strong> <em><strong>*Case语句 :*</strong></em></p><p><em><strong>*(多个条件检查一个共同变量的不同值时)*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*Case 要评估的表达式*</strong></em></p><p><em><strong>*When 与case比较的值*</strong></em></p><p><em><strong>*执行某语句;*</strong></em></p><p><em><strong>*[When 与case比较的值*</strong></em></p><p><em><strong>*执行某语句;]*</strong></em></p><p><em><strong>*[else*</strong></em></p><p><em><strong>*某表达式;]*</strong></em></p><p><em><strong>*End case;*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Select country_id ,*</strong></em> </p><p><em><strong>*Case country_id*</strong></em></p><p>  <em><strong>*When 2 then*</strong></em> <em><strong>*‘*</strong></em><em><strong>*You have selected Algeria*</strong></em><em><strong>*’*</strong></em></p><p>  <em><strong>*When 3 then*</strong></em> <em><strong>*‘*</strong></em><em><strong>*You have selected American Samoa*</strong></em><em><strong>*’*</strong></em></p><p>  <em><strong>*Else*</strong></em> <em><strong>*‘*</strong></em><em><strong>*Other country selected*</strong></em><em><strong>*’*</strong></em></p><p>  <em><strong>*End as DisplayCountry*</strong></em></p><p>  <em><strong>*From country limit 5;l*</strong></em></p><p><em><strong>*从country表中选择前5个记录得国家ID和国家名*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps60.jpg" alt="img"> </p><p><strong>3.</strong> <em><strong>*While语句 :*</strong></em></p><p><em><strong>*(可以在复合语句中使用)*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*[循环名称 : ] while 判定条件 do*</strong></em></p><p><em><strong>*某表达式;*</strong></em></p><p><em><strong>*End while [循环名]*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Begin*</strong></em> </p><p><em><strong>*Declare res int;*</strong></em></p><p><em><strong>*Declare no int;*</strong></em></p><p><em><strong>*Set no &#x3D; 2;*</strong></em></p><p><em><strong>*Set counter &#x3D; 1;*</strong></em></p><p><em><strong>*While counter &lt;&#x3D;10 do*</strong></em></p><p><em><strong>*Set res &#x3D; no*counter;*</strong></em></p><p><em><strong>*Set counter &#x3D; counter + 1;*</strong></em></p><p><em><strong>*Select res;*</strong></em></p><p><em><strong>*End while;*</strong></em></p><p><em><strong>*End*</strong></em></p><p><em><strong>*打印乘法口诀*</strong></em></p><p><strong>4.</strong> <em><strong>*Loop语句 :*</strong></em></p><p><em><strong>*(重复执行以分好分割的每个语句的各种语句)*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*[loop名 :] loop*</strong></em></p><p><em><strong>*某语句*</strong></em></p><p><em><strong>*End loop [结束标签,与begin_label相同]*</strong></em></p><p><em><strong>*Leave语句 :*</strong></em></p><p><em><strong>*(终止循环)(用于begin…end或循环构造中(如loop , repea , while))*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*Leave 循环名;*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Begin*</strong></em> </p><p><em><strong>*Decalre a int ;*</strong></em></p><p><em><strong>*Set a &#x3D; 1;*</strong></em></p><p><em><strong>*Labell : loop*</strong></em></p><p><em><strong>*Select * from film where film_id &#x3D; a;*</strong></em></p><p><em><strong>*Set a &#x3D; a+1;*</strong></em></p><p><em><strong>*If a&gt;5*</strong></em></p><p><em><strong>*Then leave labell;*</strong></em></p><p><em><strong>*End if;*</strong></em></p><p><em><strong>*End loop;*</strong></em></p><p><em><strong>*End*</strong></em></p><p><em><strong>*显示film表中电影的前五个记录*</strong></em></p><p><strong>5.</strong> <em><strong>*Inerate语句 :*</strong></em></p><p><em><strong>*(再次开始循环)(用在loop , repeat , while语句内)*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*Inerate 循环名;*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Begin*</strong></em> </p><p><em><strong>*Declare a int;*</strong></em></p><p><em><strong>*Set a &#x3D; 1;*</strong></em></p><p><em><strong>*Labell : loop*</strong></em></p><p><em><strong>*Select * from film where film_id &#x3D; a;*</strong></em></p><p><em><strong>*Set a &#x3D; a+1;*</strong></em></p><p><em><strong>*If a&lt;5*</strong></em></p><p><em><strong>*Then inerate labell;*</strong></em></p><p><em><strong>*End if;*</strong></em></p><p><em><strong>*Leave labell;*</strong></em></p><p><em><strong>*End loop labell;*</strong></em></p><p><em><strong>*End*</strong></em></p><p><em><strong>*显示film表中的前四个记录*</strong></em></p><p><strong>6.</strong> <em><strong>*Repe语句 :*</strong></em></p><p><em><strong>*(执行语句直到条件为真为止)(最少循环一次)*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*[构造名 :] repeat*</strong></em></p><p><em><strong>*某语句*</strong></em></p><p><em><strong>*Until 满足条件*</strong></em></p><p><em><strong>*End repeat [要终止的构造名]*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Begin declare a int;*</strong></em></p><p><em><strong>*Set a &#x3D; 1;*</strong></em></p><p><em><strong>*Repeat*</strong></em></p><p><em><strong>*Select * from film where film_id &#x3D; a;*</strong></em></p><p><em><strong>*Set a &#x3D; a+1;*</strong></em></p><p><em><strong>*Until a&gt;4*</strong></em></p><p><em><strong>*End repeat;*</strong></em></p><p><em><strong>*End*</strong></em></p><p><em><strong>*显示film表中的前四个记录*</strong></em></p><p><em><strong>*处理异常 :*</strong></em></p><p><em><strong>*Declare handler语句 :*</strong></em></p><p><em><strong>*(声明根据一个或多个条件执行操作的处理程序)*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*Declare 指定操作类型(continue继续执行 , exit中止执行begin…end块(默认操作),undo) handler*</strong></em></p><p><em><strong>*For 激活处理程序的条件 [,条件..,]*</strong></em></p><p><em><strong>*某语句;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps61.jpg" alt="img"> </p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Delimiter &#x2F;&#x2F;*</strong></em></p><p><em><strong>*Create procedure handlerdemo()*</strong></em></p><p><em><strong>*Begin*</strong></em> </p><p><em><strong>*Declare continue jandler for sqlstate*</strong></em> <em><strong>*‘*</strong></em><em><strong>*23000*</strong></em><em><strong>*’*</strong></em></p><p><em><strong>*Set @x &#x3D; 1;*</strong></em></p><p><em><strong>*Insert into category values (17 ,*</strong></em> <em><strong>*‘*</strong></em><em><strong>*Fiction*</strong></em><em><strong>*’*</strong></em> <em><strong>*, now());*</strong></em></p><p><em><strong>*Set @x &#x3D; 2;*</strong></em></p><p><em><strong>*Insert into category values (17 ,*</strong></em> <em><strong>*‘*</strong></em><em><strong>*Fiction*</strong></em><em><strong>*’*</strong></em> <em><strong>*, now());*</strong></em></p><p><em><strong>*Set @x &#x3D; 3;*</strong></em></p><p><em><strong>*Select @x;*</strong></em></p><p><em><strong>*End;*</strong></em></p><p><em><strong>*&#x2F;&#x2F;*</strong></em></p><p><em><strong>*Delimiter;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps62.jpg" alt="img"> </p><p><em><strong>*Signal语句 :*</strong></em></p><p><em><strong>*(用于向调用程序手动返回错误)(多用于调试系统)*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*Sigal sqlstate [值] 返回的sqlstate值*</strong></em></p><p><em><strong>*[set message_text &#x3D; 输出啥]*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Delimiter &#x2F;&#x2F;*</strong></em></p><p><em><strong>*Create frocedure insertPaymentDetails (pid int , cid int , sid int , rid*</strong></em> </p><p><em><strong>*Int , amount int , pay_date datetme , update_date datetime)*</strong></em></p><p><em><strong>*Begin*</strong></em></p><p><em><strong>*If amount &lt;&#x3D;0 then*</strong></em></p><p><em><strong>*Signal sqlstate*</strong></em> <em><strong>*‘*</strong></em><em><strong>*45000*</strong></em><em><strong>*’*</strong></em></p><p><em><strong>*Set message_text &#x3D;*</strong></em> <em><strong>*‘*</strong></em><em><strong>*Enter payment amount greater than 0*</strong></em><em><strong>*’*</strong></em><em><strong>*;*</strong></em></p><p><em><strong>*Else*</strong></em></p><p><em><strong>*Insert into pament values(pid , cid , sid , rid , amount , pay_date , update_date);*</strong></em></p><p><em><strong>*End if;*</strong></em></p><p><em><strong>*&#x2F;&#x2F;*</strong></em></p><p><em><strong>*Delimiter ;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps63.jpg" alt="img"> </p><p><em><strong>*Tip : call insert PaymentDetails (1 , 1 , 1 , 1 , 0 , now() , now());*</strong></em></p><p><em><strong>*(可以用此语句执行insert PaymentDetails过程)*</strong></em></p><p><em><strong>*使用游标 :*</strong></em></p><p><em><strong>*(在查询返回的每一行执行if…then…else语句 , case语句和while语句)*</strong></em></p><p><em><strong>*声明游标 ：*</strong></em></p><p><em><strong>*语法 ：*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*eclare 游标名 cursor for 检索游标将遍历的select语句；*</strong></em></p><p><em><strong>*打开游标 ：*</strong></em></p><p><em><strong>*语法 ：*</strong></em></p><p><em><strong>*O*</strong></em><em><strong>*pen 游标名；*</strong></em></p><p><em><strong>*获取游标 ：*</strong></em></p><p><em><strong>*语法 ：*</strong></em></p><p><em><strong>*F*</strong></em><em><strong>*etch 游标名 into 变量名；*</strong></em></p><p><em><strong>*关闭游标 ：*</strong></em></p><p><em><strong>*语法 ：*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*lose 游标名；*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g(总) ：*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*elimiter &#x2F;&#x2F;*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*reate procedure updateRentalRate()*</strong></em></p><p><em><strong>*B*</strong></em><em><strong>*egin*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*eclare duration int;*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*eclare counter int default 0;*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*eclare update_rent_cursor cursor for select rental_duration from*</strong></em></p><p><em><strong>*F*</strong></em><em><strong>*ilm1;*</strong></em></p><p><em><strong>*O*</strong></em><em><strong>*pen update_rent_cursor;*</strong></em></p><p><em><strong>*U*</strong></em><em><strong>*pdate_loop: LOOP*</strong></em></p><p><em><strong>*S*</strong></em><em><strong>*et counter &#x3D; counter + 1;*</strong></em></p><p><em><strong>*F*</strong></em><em><strong>*etch update_rent_cursor into duration;*</strong></em></p><p><em><strong>*I*</strong></em><em><strong>*f duration &#x3D; 6 then*</strong></em></p><p><em><strong>*U*</strong></em><em><strong>*pdate film1 set rental_rate &#x3D; rental_rate + (0.3* rental_rate) where rental_duration &#x3D; duration;*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*lseif duration &#x3D; 3 then*</strong></em></p><p><em><strong>*U*</strong></em><em><strong>*pdate film1 set rental_rate &#x3D; rental_rante + (0.2* rental_rate)*</strong></em></p><p><em><strong>*W*</strong></em><em><strong>*here rental_duration &#x3D; duration;*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*lose update_rent_cursor;*</strong></em></p><p><em><strong>*L*</strong></em><em><strong>*eave update_loop;*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*nd if;*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*nd LOOP update_loop;*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*nd*</strong></em> </p><p><em><strong>*&#x2F;&#x2F;*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*elimiter;*</strong></em></p><p><em><strong>*游标用于过程中在电影的租借周期分别为3天和6天时将电影的租金增加20%和30%*</strong></em></p><p><em><strong>*实现存储例程 ：*</strong></em></p><p><em><strong>*实现存储过程 ：*</strong></em></p><p><em><strong>*(类似于函数)*</strong></em></p><p><em><strong>*创建存储过程 :*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*reate procedure 过程名 (参数)*</strong></em></p><p>​<em><strong>*[特征] 要执行的sql语句;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps64.jpg" alt="img"> </p><p><em><strong>*E*</strong></em><em><strong>*g :*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*elimiter &#x2F;&#x2F;*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*reate procedure GetFilmDetails()*</strong></em></p><p><em><strong>*B*</strong></em><em><strong>*egin*</strong></em></p><p>​<em><strong>*S*</strong></em><em><strong>*elect * from film;*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*nd &#x2F;&#x2F;*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*elimiter ;*</strong></em></p><p><em><strong>*创建了名为GetfilmDetails的存储过程*</strong></em></p><p><em><strong>*执行存储过程 ：*</strong></em></p><p><em><strong>*语法 ：*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*all 过程名 (要传给过程执行的值);*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g :*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*all GetFilmDetails；*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps65.jpg" alt="img"> </p><p><em><strong>*创建参数化的存储过程 ：*</strong></em></p><p><em><strong>*(in , out , inout)*</strong></em></p><p><em><strong>*I*</strong></em><em><strong>*n*</strong></em></p><p><em><strong>*(用于用户向过程传递值)*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*看eg*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g :*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*eltmiter &#x2F;&#x2F;*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*reate procedure Getfilms (in filmtitle vatchar (255))*</strong></em></p><p><em><strong>*B*</strong></em><em><strong>*egin*</strong></em></p><p><em><strong>*S*</strong></em><em><strong>*elect film_id , release_year from film*</strong></em></p><p><em><strong>*W*</strong></em><em><strong>*here title &#x3D; filmtitle;*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*nd &#x2F;&#x2F;*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*elimiter ;*</strong></em></p><p><em><strong>*指定filmtitle参数是输入参数，调用Getfilms是传递此参数*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g ： call Getfilms(*</strong></em><em><strong>*‘*</strong></em><em><strong>*AFRICAN EGG*</strong></em><em><strong>*’*</strong></em><em><strong>*);*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps66.jpg" alt="img"> </p><p><em><strong>*O*</strong></em><em><strong>*ut*</strong></em></p><p><em><strong>*(用于将值从过程中传回调用方)*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*看eg*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g :*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*elimiter &#x2F;&#x2F;*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*reate procedure getmaxrate (out rate double)*</strong></em></p><p><em><strong>*B*</strong></em><em><strong>*egin*</strong></em></p><p><em><strong>*S*</strong></em><em><strong>*elect max(rental_rate) into rate from film;*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*nd &#x2F;&#x2F;*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*elimiter ;*</strong></em></p><p><em><strong>*指定rate参数是输出参数，在调用getmaxrate过程时捕获此值*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g ： call getmaxrate*</strong></em> <em><strong>*(*</strong></em><em><strong>*@a);*</strong></em></p><p>​<em><strong>*S*</strong></em><em><strong>*elect @a;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps67.jpg" alt="img"> </p><p><em><strong>*I*</strong></em><em><strong>*nout*</strong></em></p><p><em><strong>*(将值传递给过程及从过程返回值)*</strong></em></p><p><em><strong>*(可以充当in以及out)*</strong></em></p><p><em><strong>*语法 :*</strong></em></p><p><em><strong>*看eg*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g :*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*elimiter &#x2F;&#x2F;*</strong></em></p><p><em><strong>*C*</strong></em><em><strong>*reate procedure CalculateRentalRate (duration int , ID int , INOUT rate double)*</strong></em></p><p><em><strong>*B*</strong></em><em><strong>*egin*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*eclare rentDur int;*</strong></em></p><p><em><strong>*S*</strong></em><em><strong>*elect rental_duration into rentDur from film where film_id &#x3D; ID;*</strong></em></p><p><em><strong>*S*</strong></em><em><strong>*et rate &#x3D; rate * duration\rentDur;*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*nd &#x2F;&#x2F;*</strong></em></p><p><em><strong>*D*</strong></em><em><strong>*elimiter ;*</strong></em></p><p><em><strong>*租费是inout参数，如果客户借了ID为5的DVD24天,调用CalculateRentalRate来计算总租金*</strong></em></p><p><em><strong>*E*</strong></em><em><strong>*g : set @r &#x3D; 2.99;*</strong></em></p><p>​<em><strong>*C*</strong></em><em><strong>*all CalculateRentalRate(24 , 5 , @r);*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps68.jpg" alt="img"> </p><p><em><strong>*从一个过程调用另一个过程 :*</strong></em></p><p><em><strong>*(使用另一个过程的返回值)*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Delimiter &#x2F;&#x2F;*</strong></em></p><p><em><strong>*Create procedure DisplayRentalRate (duration int , ID int)*</strong></em></p><p><em><strong>*Begin*</strong></em></p><p><em><strong>*Select rental_rate into @r from film where film_id &#x3D; ID;*</strong></em></p><p><em><strong>*Call CalculateRentalRate (duration , ID , @r);*</strong></em></p><p><em><strong>*Select @r;*</strong></em></p><p><em><strong>*End &#x2F;&#x2F;*</strong></em></p><p><em><strong>*Delimiter ;*</strong></em></p><p><em><strong>*Eg : 必须执行call DisplayRentalRate(12 , 7);*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps69.jpg" alt="img"> </p><p><em><strong>*实现函数 :*</strong></em></p><p><em><strong>*(创建UDF来永久存储一组SQL语句)*</strong></em></p><p><em><strong>*(比存储过程作用少 , eg不可以从函数中修改数据库表)*</strong></em></p><p><em><strong>*创建UDF :*</strong></em></p><p><em><strong>*Create function语法 :*</strong></em></p><p><em><strong>*Create function 函数名 (函数参数列表)*</strong></em></p><p><em><strong>*Returns 返回数据的数据类型*</strong></em></p><p><em><strong>*定义函数特征 指定要执行的SQL语句 ;*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Delimiter &#x2F;&#x2F;*</strong></em></p><p><em><strong>*Create function funcGetFilmDuration (id smallint(5)) returns*</strong></em></p><p><em><strong>*Tinyint(3) reads SQL data*</strong></em></p><p><em><strong>*Begin*</strong></em></p><p><em><strong>*Declare filmduration tinyint(3);*</strong></em></p><p><em><strong>*Select rental_duration into filmduration from film where film_id &#x3D; id;*</strong></em></p><p><em><strong>*Return (filmduration);*</strong></em></p><p><em><strong>*End &#x2F;&#x2F;*</strong></em></p><p><em><strong>*Delimiter ;*</strong></em></p><p><em><strong>*创建根据电影ID返回电影租借周期的函数*</strong></em></p><p><em><strong>*调用funcGetFilmDuration()函数 :*</strong></em></p><p><em><strong>*Select funcGetFilmDuration(10) as*</strong></em> <em><strong>*‘*</strong></em><em><strong>*Pental Duration*</strong></em><em><strong>*’*</strong></em><em><strong>*;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps70.jpg" alt="img"> </p><p><strong>第七章</strong> <em><strong>*实现触发器和事务*</strong></em> </p><p><em><strong>*实现触发器 :*</strong></em></p><p><em><strong>*(预编译并存储在数据库中的小程序)*</strong></em></p><p><em><strong>*创建触发器 :*</strong></em></p><p><em><strong>*Create trigger语句语法 :*</strong></em></p><p><em><strong>*Create*</strong></em></p><p><em><strong>*{definer &#x3D; 用户账户}*</strong></em></p><p><em><strong>*Trigger 触发器名 触发时间 触发操作(如何触发触发器)*</strong></em></p><p><em><strong>*On 与触发器关联的表名 for each row 触发语句*</strong></em></p><p><em><strong>*触发时间关联值 :*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps71.jpg" alt="img"> </p><p><em><strong>*触发操作关联值 :*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps72.jpg" alt="img"> </p><p><em><strong>*Tip :根据触发时间分为  before触发器  after触发器*</strong></em></p><p><em><strong>*创建before触发器 :*</strong></em></p><p><em><strong>*(insert , update , delete)*</strong></em></p><p><em><strong>*创建before insert触发器 :*</strong></em></p><p><em><strong>*(在向该触发器的关联表添加行之前激活)*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Delimiter |*</strong></em></p><p><em><strong>*Create trigger product_add before insert on Products*</strong></em></p><p><em><strong>*For each row*</strong></em></p><p><em><strong>*Begin*</strong></em></p><p><em><strong>*If new.price&lt; 0 then*</strong></em></p><p><em><strong>*Signal sqlstate*</strong></em> <em><strong>*‘*</strong></em><em><strong>*45000*</strong></em><em><strong>*’*</strong></em></p><p><em><strong>*Set message_text &#x3D;*</strong></em> <em><strong>*‘*</strong></em><em><strong>*Please insert positive value for price*</strong></em><em><strong>*’*</strong></em><em><strong>*;*</strong></em></p><p><em><strong>*End if;*</strong></em></p><p><em><strong>*End;*</strong></em></p><p><em><strong>*| delimiter ;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps73.jpg" alt="img"> </p><p><em><strong>*创建before update触发器 :*</strong></em></p><p><em><strong>*(在更新该触发器的关联表行记录之前激活)*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Delimiter |*</strong></em></p><p><em><strong>*Create trigger check_order_quantity*</strong></em></p><p><em><strong>*Before update on Customer_Order*</strong></em></p><p><em><strong>*For each row*</strong></em></p><p><em><strong>*Begin*</strong></em></p><p><em><strong>*Select quantity_in_hand into @a from Products where*</strong></em></p><p><em><strong>*Product_id &#x3D; new.product_id;*</strong></em></p><p><em><strong>*If(new.quantity_order&gt;@a)*</strong></em></p><p><em><strong>*Then signal sqlstate*</strong></em> <em><strong>*‘*</strong></em><em><strong>*45000*</strong></em><em><strong>*’*</strong></em></p><p><em><strong>*Set message_text &#x3D;*</strong></em> <em><strong>*‘*</strong></em><em><strong>*You cannot order more products than in stock*</strong></em><em><strong>*’*</strong></em><em><strong>*;*</strong></em></p><p><em><strong>*End if;*</strong></em></p><p><em><strong>*End;*</strong></em></p><p><em><strong>*|*</strong></em></p><p><em><strong>*Delimiter ;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps74.jpg" alt="img"> </p><p><em><strong>*创建before delete触发器 :*</strong></em></p><p><em><strong>*(在删除该触发器的关联表行记录之前激活)*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Create trigger product_delete before delete on Products*</strong></em></p><p><em><strong>*For each row*</strong></em></p><p><em><strong>*Insert into Product_Audit values(OLD.product_id ,*</strong></em> <em><strong>*‘*</strong></em><em><strong>*delete*</strong></em><em><strong>*’*</strong></em><em><strong>*);*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps75.jpg" alt="img"> </p><p><em><strong>*创建after触发器 :*</strong></em></p><p><em><strong>*(insert , update , delete)*</strong></em></p><p><em><strong>*创建after insert触发器 :*</strong></em></p><p><em><strong>*(在将某个记录插入到关联表之后触发)*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Create trigger on_order*</strong></em></p><p><em><strong>*After insert on Customer_Order*</strong></em></p><p><em><strong>*For each row*</strong></em></p><p><em><strong>*Update Products set quantity_in_hand &#x3D; quantity_in_hand -*</strong></em> </p><p><em><strong>*NEW.quantity_ordered where product_id &#x3D; NEW.product_id;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps76.jpg" alt="img"> </p><p><em><strong>*创建after update触发器 :*</strong></em></p><p><em><strong>*(在将某个记录更新之后触发)*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Create trigger product_update after update on Products*</strong></em></p><p><em><strong>*For each row*</strong></em></p><p><em><strong>*Insert into Product_Audit values(OLD.product_id ,*</strong></em> <em><strong>*‘*</strong></em><em><strong>*update*</strong></em><em><strong>*’*</strong></em><em><strong>*);*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps77.jpg" alt="img"> </p><p><em><strong>*创建after delete触发器 :*</strong></em></p><p><em><strong>*(删除一个记录之后执行)*</strong></em></p><p><em><strong>*Eg :*</strong></em></p><p><em><strong>*Delimiter |*</strong></em></p><p><em><strong>*Create trigger order_del after delete on Customer_Order*</strong></em></p><p><em><strong>*For each row*</strong></em></p><p><em><strong>*Begin*</strong></em></p><p><em><strong>*If(OLD.customer_id in(select customer_id from Customers))*</strong></em></p><p><em><strong>*Then*</strong></em></p><p><em><strong>*Delete from Customers where customer_id &#x3D; OLD.customer_id;*</strong></em></p><p><em><strong>*End if;*</strong></em></p><p><em><strong>*End;*</strong></em></p><p><em><strong>*|*</strong></em></p><p><em><strong>*Delimiter ;*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps78.jpg" alt="img"> </p><p><em><strong>*触发器限制 :*</strong></em></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps79.jpg" alt="img"> </p><p><em><strong>*引用旧值和新值 ：*</strong></em></p>]]></content>
      
      
      <categories>
          
          <category> 数据科学与大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用 ZooKeeper 建立集群应用</title>
      <link href="/2023/04/08/%E4%BD%BF%E7%94%A8%20ZooKeeper%20%E5%BB%BA%E7%AB%8B%E9%9B%86%E7%BE%A4%E5%BA%94%E7%94%A8/"/>
      <url>/2023/04/08/%E4%BD%BF%E7%94%A8%20ZooKeeper%20%E5%BB%BA%E7%AB%8B%E9%9B%86%E7%BE%A4%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="使用-ZooKeeper-建立集群应用"><a href="#使用-ZooKeeper-建立集群应用" class="headerlink" title="使用 ZooKeeper 建立集群应用"></a>使用 ZooKeeper 建立集群应用</h1><p><em><strong>*启动zookeeper:*</strong></em></p><p>\1. zkServer.sh start启动zookeeper服务</p><p>netstat -anop | grep 2181检查2181端口号是否空闲(可选指令)</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps225.jpg" alt="img"> </p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps226.jpg" alt="img"> </p><p>空闲的话什么都不会显示</p><p>\2. zkServer.sh检查是否启动正常<img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps227.jpg" alt="img"></p><p>\3. 运行zookeeper</p><p>zkCli.sh -server zp:2181也可以,建议只用上一个</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps228.jpg" alt="img"> </p><p>\4. 当起不来时,杀掉多余的ZooKeeperMain进程</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps229.jpg" alt="img"> </p><p>①cd &#x2F;proc&#x2F;2176(想要删掉进程的端口号)</p><p>②cat status检查进程的状态</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps230.jpg" alt="img"> </p><p>这个Z表示僵尸进程,PPid是想要删掉进程的父进程</p><p>③kill -9 2171直接杀掉父进程</p><p>④按照这个步骤杀掉所有的僵尸进程</p><p>⑤重启zookeeper服务,就可以起来了,还一直不会掉</p><p><em><strong>*基础客户端操作:*</strong></em></p><p><a href="https://blog.csdn.net/java_66666/article/details/81015302?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522164931276416780366534875%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=164931276416780366534875&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-81015302.142%5Ev5%5Earticle_score_rank,157%5Ev4%5Econtrol&amp;utm_term=zookeeper&amp;spm=1018.2226.3001.4187">https://blog.csdn.net/java_66666/article/details/81015302?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522164931276416780366534875%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=164931276416780366534875&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-81015302.142^v5^article_score_rank,157^v4^control&amp;utm_term=zookeeper&amp;spm=1018.2226.3001.4187</a></p><p>查看zookeeper中所有内容</p><p>Ls &#x2F;</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps231.jpg" alt="img"> </p><p>Znode的类型:</p><p>持久znode</p><p>不会随着客户端的关机而删除,除非delete,不然一直在</p><p>持久znode下允许创建子节点</p><p>创建一个新的持久znode</p><p>create &#x2F;znode名称 数据</p><p>create &#x2F;moonlight shine(create要小写)</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps232.jpg" alt="img"> </p><p>在子节点下创建子节点</p><p>必须要一层一层创建并且每一层都要有数据</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps233.jpg" alt="img"> </p><p>临时znode</p><p>客户端关机之后就会消失,也可以用delete删除</p><p>临时znode下不允许创建子节点</p><p>创建临时znode</p><p>Create -e &#x2F;znode名称 数据</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps234.jpg" alt="img"> </p><p>创建子节点会报错</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps235.jpg" alt="img"> </p><p>顺序znode</p><p>ZooKeeper 在创建序列时为其分配了序列号，作为其名称的一部分.持久znode跟临时znode都可以是顺序znode</p><p>创建顺序znode(持久)</p><p>Create -s &#x2F;znode</p><p>创建顺序znode(临时)</p><p>Create -s -e &#x2F;znode</p><p>查看znode下面的数据</p><p>Get &#x2F;znode名称</p><p>Get &#x2F;moonlight</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps236.jpg" alt="img"> </p><p>修改znode下的数据</p><p>Set &#x2F;znode名称 要修改成的数据</p><p>Set &#x2F;moonlight sum</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps237.jpg" alt="img"> </p><p>删除znode</p><p>Delete &#x2F;znode名称</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps238.jpg" alt="img"> </p><p>如果znode下面有子节点,会报错</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/wps239.jpg" alt="img"> </p><p>全部(递归)删除znode下面的子节点:</p><p>Deleteall &#x2F;znode名称</p><p>Zookeeper watch</p><p>Zookeeper API:</p>]]></content>
      
      
      <categories>
          
          <category> 数据科学与大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ZooKeeper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用 Kafka 实现分布式消息传递系统</title>
      <link href="/2023/03/15/%E4%BD%BF%E7%94%A8%20Kafka%20%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E7%B3%BB%E7%BB%9F/"/>
      <url>/2023/03/15/%E4%BD%BF%E7%94%A8%20Kafka%20%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E6%B6%88%E6%81%AF%E4%BC%A0%E9%80%92%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="使用-Kafka-实现分布式消息传递系统"><a href="#使用-Kafka-实现分布式消息传递系统" class="headerlink" title="使用 Kafka 实现分布式消息传递系统"></a>使用 Kafka 实现分布式消息传递系统</h1><h1 id="第一章-Apache-Kafka-入门"><a href="#第一章-Apache-Kafka-入门" class="headerlink" title="第一章 Apache Kafka 入门"></a>第一章 Apache Kafka 入门</h1><h2 id="为什么是-Kafka"><a href="#为什么是-Kafka" class="headerlink" title="为什么是 Kafka"></a>为什么是 Kafka</h2><blockquote><p>成为传统消息代理的好选择的原因</p></blockquote><ol><li><strong>多个生产者</strong><ul><li>Kafka 能够无缝地处理多个生产者，无论这些客户使用的是多个主题还是同一个主题</li></ul></li><li><strong>多个消费者</strong><ul><li>Kafka是为多个用户设计的，可以在不相互干扰的情况下读取任何单一的消息流。</li></ul></li><li><strong>及预测盘的 Rentention (持久化)</strong><ul><li>消息将提交到磁盘，并将使用可配置的保留规则进行存储：按时间或者容量配额</li><li>可以根据每个主题选择这些选项，从而允许不同的消息流具有不同的保留量，具体取决于消费者的需要</li></ul></li><li><strong>可伸缩</strong><ul><li>Kafka 灵活的可伸缩性使处理任何数量的数据变得容易。用户可以从一个代理开始作为概念证明，扩展到由三个代理组成的小型开发集群，然后随着数据规模的扩大，由数十个甚至数百个代理组成的更大集群投入生产。当不再需要大集群时，可以动态缩容，不影响正在处理的消息</li></ul></li><li><strong>高性能</strong><ul><li>生产者、消费者和代理都可以被扩展，以轻松地处理非常大的消息流</li></ul></li></ol><h2 id="Kafka-用例"><a href="#Kafka-用例" class="headerlink" title="Kafka 用例"></a>Kafka 用例</h2><blockquote><p>下面是一些 Kafka 的流行用例</p></blockquote><ol><li><p><strong>消息传递</strong></p><ul><li>消息代理用于将数据处理与数据生产者分离</li></ul></li><li><p><strong>网站活动跟踪</strong></p><ul><li>Kafka最初的用例是能够将用户活动跟踪管道重建为一组实时发布订阅源</li><li>这意味着站点活动（页面视图、搜索或用户可能采取的其他操作）将发布到中心主题，每个活动类型有一个主题</li></ul></li><li><p><strong>Metrics (监控指标)</strong></p><ul><li>应用程序定期向Kafka主题发布 Metrics</li></ul></li><li><p><strong>日志聚合</strong></p><ul><li>使用 Kafka 可以将日志或事件数据抽象为消息流，从而消除对文件细节的依赖</li></ul></li><li><p><strong>流式处理</strong></p><p>Kafka在多个阶段收集数据进行处理——例如，从Topic消耗的原始数据被丰富或转换为新的 Kafka Topic 以供进一步使用。因此，这种处理也称为流处理</p></li></ol><h2 id="Kafka-组件"><a href="#Kafka-组件" class="headerlink" title="Kafka 组件"></a>Kafka 组件</h2><ol><li><strong>消息处理和批处理</strong><ul><li>就Kafka而言，消息只是一个字节数组，因此其中包含的数据对Kafka来说没有特定的格式或含义</li><li>批处理只是消息的集合，所有这些消息都是针对同一主题和分区生成的</li></ul></li><li><strong>模式</strong><ul><li>根据应用程序的个别需要，消息模式有许多可用的选项。简单化的系统，如JavaScript对象表示法（JSON）和可扩展标记语言（XML），易于使用和可读</li><li>在Kafka中，一致的数据格式是很重要的，因为它允许消息的读写分离</li></ul></li><li><strong>主题和分区</strong><ul><li>主题还被分解为多个分区。回到“提交日志”描述，分区是单个日志</li></ul></li><li><strong>生产者和消费者</strong><ul><li>生产者创造新的信息。在其他发布&#x2F;订阅系统中，这些可能被称为发布者或写入者</li><li>消费者阅读信息。在其他发布&#x2F;订阅系统中，这些客户端可以称为订阅服务器或读卡器</li><li>消费者可以横向扩展以使用包含大量消息的主题。此外，如果单个使用者失败，组的其余成员将重新平衡正在使用的分区，以接管丢失的成员</li></ul></li><li><strong>代理和集群</strong><ul><li>单个 Kafka 服务器称为代理。代理接收来自生产者的消息，为其分配偏移量，并将消息提交到磁盘上的存储器中</li><li>Kafka 代理是设计成集群的一部分</li><li>控制器负责管理操作，包括为代理分配分区和监视代理故障。控制器 Broker 从集群所有的 Broker 中选举出来</li><li>一个分区由集群中的一个代理拥有，这个代理称为分区的 Leader</li><li>Apache Kafka 的一个关键功能是保留功能，它是一段时间内消息的持久存储</li><li>达到这些限制后，消息将过期并删除，以便保留配置是随时可用的最小数据量</li></ul></li></ol><h1 id="第二章-安装-Kafka"><a href="#第二章-安装-Kafka" class="headerlink" title="第二章 安装 Kafka"></a>第二章 安装 Kafka</h1><h2 id="安装-Kafka-Broker"><a href="#安装-Kafka-Broker" class="headerlink" title="安装 Kafka Broker"></a>安装 Kafka Broker</h2><blockquote><p>校验 Java 安装</p></blockquote><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">which java</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export | grep &quot;java&quot;</span><br></pre></td></tr></table></figure><blockquote><p>启动 Zookeeper</p></blockquote><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./zkServer.sh <span class="built_in">start</span></span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo jps -l</span><br></pre></td></tr></table></figure><blockquote><p>启动 Kafka 并创建 Topic</p></blockquote><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-server-<span class="built_in">start</span>.sh -daemon server.properties # 启动 Kafka</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-topic.sh --create --zookeeper localhost:<span class="number">2181</span> --replication-factor <span class="number">1</span> --partitions <span class="number">1</span> --topic mytopic # 创建 topic</span><br></pre></td></tr></table></figure><blockquote><p>先生成消息, 再消费消息</p></blockquote><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-console-producer.sh --broker-list localhost:<span class="number">9092</span> --topic mytopic # 生成消息</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-console-consumer.sh --bootstrap-server localhost:<span class="number">9092</span> --topic mytopic --from-beginning # 消费消息</span><br></pre></td></tr></table></figure><h2 id="Kafka-Topic-toolkit"><a href="#Kafka-Topic-toolkit" class="headerlink" title="Kafka Topic toolkit"></a>Kafka Topic toolkit</h2><blockquote><p>创建 topic</p></blockquote><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics --create --zookeeper localhost:<span class="number">2181</span> --replication-factor <span class="number">1</span> --partitions <span class="number">1</span> --topic test</span><br></pre></td></tr></table></figure><blockquote><p>查看 topic 配置信息</p></blockquote><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics-zookeeper localhost:<span class="number">2181</span> --describe --topic test</span><br></pre></td></tr></table></figure><blockquote><p>查看 topic 列表</p></blockquote><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics-zookeeper localhost:<span class="number">2181</span> --describe --topic test</span><br></pre></td></tr></table></figure><blockquote><p>改变 topic</p></blockquote><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics --zookeeper localhost:<span class="number">2181</span> --alter --topic test --config message.max.bytes=<span class="number">12800</span> # 改变 topic 配置</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics --zookeeper localhost:<span class="number">2181</span> --alter --topic test --partitions <span class="number">2</span> # 添加分区</span><br></pre></td></tr></table></figure><h1 id="第三章-Kafka-生产者"><a href="#第三章-Kafka-生产者" class="headerlink" title="第三章 Kafka 生产者"></a>第三章 Kafka 生产者</h1><h2 id="Kafka-生产者概况"><a href="#Kafka-生产者概况" class="headerlink" title="Kafka 生产者概况"></a>Kafka 生产者概况</h2><blockquote><p>需要把消息写入 Kafka 的目的</p></blockquote><ol><li>记录用户活动以便审查或分析</li><li>记录指标（metrics）</li><li>储存日志消息</li><li>记录智能设备信息</li><li>与其他应用异步通信（ Communicating Asynchronously ）</li><li>写入数据库前缓存信息</li></ol><blockquote><p>在应用中使用 Kafka 生产者前需要确定</p></blockquote><ol><li>消息的重要程度</li><li>是否接受消息丢失</li><li>是否接受重复发送消息（Duplicate Messages）</li><li>消息的延迟（ Latency ）程度</li></ol><h2 id="Java-生产者-API"><a href="#Java-生产者-API" class="headerlink" title="Java 生产者 API"></a>Java 生产者 API</h2><ul><li><p>Kafka 生产者类 (KafkaProducer)</p><ul><li>该类可在 <code>org.apache.kafka.clients.producer</code> 包获得。</li><li>这是通用类，我们需要指定参数的类型； K 和 V 分别指分区的键（partition key）和消息的值（message value）</li></ul></li><li><p>生产者记录类 (ProducerRecord)</p><ul><li>即需要发送到 Kafka 的一个键&#x2F;值对（key&#x2F;value pair ）。由主题名称（topic name），可选的分区号（partition number）以及可选的键值对组成</li></ul></li><li><p>生产者配置类 (ProducerConfig)</p><ul><li>该类可在 <code>org.apache.kafka.clients.producer</code> 获得</li><li>它有助于设置 Kafka 生产者的配置</li></ul></li></ul><blockquote><p>同步发送消息</p></blockquote><ul><li>消息已发送，生产者等待对第一条消息的确认响应以发送第二条消息</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ProducerRecord&lt;String, String&gt; recode = <span class="keyword">new</span> <span class="title class_">ProducerRecord</span>&lt;&gt;(<span class="string">&quot;Course&quot;</span>, <span class="string">&quot;Kafka&quot;</span>, <span class="string">&quot;China&quot;</span>);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    producer.send(record).get(); <span class="comment">// 关键行 1</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    e.printStackTrace(); <span class="comment">// 关键行 2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>异步发送消息</p></blockquote><ul><li>我们不需等待到收到响应确认后再发送下一条消息</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">NIITProducerCallback</span> <span class="keyword">implements</span> <span class="title class_">Callback</span> &#123; <span class="comment">// 关键行 1</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCompletion</span> <span class="params">(RecordMetadata recordMetadata, Exception e)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123;</span><br><span class="line">            e.printStackTrace(); <span class="comment">// 关键行 2</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">ProducerRecord&lt;String, String&gt; record = <span class="keyword">new</span> <span class="title class_">ProducerRecord</span>&lt;&gt;(<span class="string">&quot;Course&quot;</span>, <span class="string">&quot;Kafka&quot;</span>, <span class="string">&quot;China&quot;</span>); <span class="comment">// 关键行 3</span></span><br><span class="line">producer.send(record, <span class="keyword">new</span> <span class="title class_">NIITProducerCallback</span>()); <span class="comment">// 关键行 4</span></span><br></pre></td></tr></table></figure><blockquote><p>配置 Kafka 生产者</p></blockquote><ol><li>使用属性创建生产者配置对象</li><li>使用我们刚刚提供的设置创建生产者对象</li><li>创建要推送到 Kafka 主题的消息</li><li>调用 <code>send()</code> 方法</li><li>发送消息后, 调用 <code>close</code> 方法</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用属性创建生产者配置对象</span></span><br><span class="line"><span class="type">Properties</span> <span class="variable">props</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line"></span><br><span class="line">props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, <span class="string">&quot;localhost:9092&quot;</span>);</span><br><span class="line">props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG,LongSerializer.class.getName());</span><br><span class="line">props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用我们刚刚提供的设置创建生产者对象</span></span><br><span class="line">Producer&lt;String, String&gt; producer = <span class="keyword">new</span> <span class="title class_">KafkaProducer</span>&lt;&gt;(props);</span><br><span class="line">ProducerRecord&lt;Integer, String&gt; record = <span class="keyword">new</span> <span class="title class_">ProducerRecord</span>&lt;String, String&gt;(<span class="string">&quot;topicName&quot;</span>, <span class="string">&quot;key1&quot;</span> <span class="string">&quot;valuel&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用 send() 方法</span></span><br><span class="line">producer.send(record);</span><br><span class="line"><span class="comment">// 发送消息后, 调用 close 方法</span></span><br><span class="line">producer.close();</span><br></pre></td></tr></table></figure><h1 id="第四章-Kafka-消费者"><a href="#第四章-Kafka-消费者" class="headerlink" title="第四章 Kafka 消费者"></a>第四章 Kafka 消费者</h1><h2 id="Kafka-消费者简介"><a href="#Kafka-消费者简介" class="headerlink" title="Kafka 消费者简介"></a>Kafka 消费者简介</h2><blockquote><p>消费者的使用场景</p></blockquote><ul><li>进行实时或接近实时分析的应用程序</li><li>使用NoSQL数据存储的应用程序</li><li>大数据数据仓库解决方案</li><li>后端服务的业务处理</li><li>Hadoop 系统中的消费者</li><li>其他基于订阅者（ subscriber-based ）的解决方案</li></ul><h2 id="交付语义"><a href="#交付语义" class="headerlink" title="交付语义"></a>交付语义</h2><blockquote><p>提交偏移量就像读者在阅读书籍或小说时使用的书签。 在Kafka中，使用了以下三种交付语义（ delivery semantics ）</p></blockquote><ul><li>最多一次 (AMOS: At Most Once Semantic) : 偏移量在消费者收到消息后立即提交</li><li>至少一次 (ALOS: At Least Once Semantic) : 在处理完消息后提交偏移量</li><li>恰好一次 (EOS: Exactly Once Semantic) : 使用 Kafka Streams API 可以实现从 Kafka 到 Kafka 工作流程的偏移量</li></ul><table><thead><tr><th>最多一次</th><th>至少一次</th><th>恰好一次</th></tr></thead><tbody><tr><td>信息只提交一次</td><td>信息至少提交一次<br />每次提交都会处理</td><td>信心至少提交一次<br />只处理一次</td></tr><tr><td>可以接收, 也可以不接收</td><td>保证会接收</td><td>保证会接收</td></tr><tr><td>无重复值</td><td>有重复值</td><td>无重复值</td></tr><tr><td>可能会丢失数据</td><td>不会丢失数据</td><td>不会丢失数据</td></tr></tbody></table><h2 id="消费者组和分区重平衡"><a href="#消费者组和分区重平衡" class="headerlink" title="消费者组和分区重平衡"></a>消费者组和分区重平衡</h2><blockquote><p>重平衡发生在以下事件</p></blockquote><ul><li><p><strong>扩大消费者组规模 (Scaling Up)</strong></p><p>将新消费者添加到消费者组。 新消费者开始使用先前由另一个消费者使用的分区中的消息</p></li><li><p><strong>缩减消费者组规模 (Scaling Down)</strong></p><p>将消费者从消费者组中删除。 另一个消费者开始使用已删除分区中的消息</p></li><li><p><strong>主题增加分区</strong></p></li><li><p><strong>应用程序崩溃</strong></p></li><li><p><strong>消费者客户端关闭</strong></p><p>存活的消费者开始使用先前由另一个消费者使用的分区中的消息</p></li><li><p>由于消费者客户端崩溃导致组协调器（ group coordinator）将某位消费者视为DEAD时，也可能发生在消费者忙于长时间运行处理时。意味着在此期间，消费者没有在配置的会话间隔内向组协调器发送任何心跳信号</p></li><li><p><strong>有消费者订阅任何主题</strong></p></li><li><p>如果您订阅尚未创建的主题，则创建主题后将触发重新平衡。 如果您订阅的主题被删除，也会触发重发重平衡</p></li></ul><h2 id="Java-消费者-API-–-高级-API"><a href="#Java-消费者-API-–-高级-API" class="headerlink" title="Java 消费者 API – 高级 API"></a>Java 消费者 API – 高级 API</h2><p>实现了:</p><ul><li><p>每个主体中每个分区的偏移量管理</p></li><li><p>Kafka 服务器故障转移（failover，broker list 添加多个 broker 主机地址）</p></li><li><p>分区和消费者改变导致的负载重平衡（load balancing）</p></li><li><p>整洁统一的 API</p><p>高级消费者结合了旧版本（Low Level）消费者客户端的 “Simple” 和原本新版本（High Level）消费者客户端的功能</p></li><li><p>减少依赖</p><p>新消费者使用纯 Java 编写（旧消费者使用 Scala 语言编写）</p></li><li><p>安全性更好</p></li></ul><blockquote><p>高级 API</p></blockquote><ul><li><p>KafkaConsumer</p><p>Kafka 消费者客户端，用来消费 Kafka 集群中的消息</p></li><li><p>ConsumerRecord</p><p>从 Kafka 接收的消息的 键&#x2F;值对。 还包括主题名称，接收记录的分区号，所在 Kafka 分区中记录的偏移量，以及由相应生产者标记的消息的时间戳</p></li><li><p>ConsumerRecords</p><p>它是消费者记录的容器。 为了保留特定主题的每个分区的消费者记录列表，我们使用此API</p></li><li><p>KafkaConfig</p><p>可帮助设置配置属性</p></li><li><p>ConsumerConnector</p><p> 负责消费者与 ZooKeeper 交互</p></li><li><p>KafkaStreams</p><p>通过 KafkaStreams API，Kafka 客户端可以对来自一个或多个主题的输入执行连续计算，并将输出发送到零个，一个或多个主题</p></li><li><p>TopicPartition</p><p>这有助于从特定主题和分区中检索消息</p></li></ul><blockquote><p>要创建 Kafka 消费者, 需要先设置属性</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">KafkaConsumer&lt;String, String&gt; consumer = <span class="keyword">new</span> <span class="title class_">KafkaConsumer</span>&lt;&gt;(props);</span><br></pre></td></tr></table></figure><blockquote><p>订阅主题</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单一主题</span></span><br><span class="line">consumer.subscribe(Collections.singletonList(<span class="string">&quot;topicName&quot;</span>)); <span class="comment">// 不可变单值列表</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 多个主题</span></span><br><span class="line">consumer.subscribe(Arrays.asList(<span class="string">&quot;topicNames&quot;</span>)); <span class="comment">// 固定长度的列表, 可为多值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用正则表达式</span></span><br><span class="line">consumer.subscribe(Pattern.compile(<span class="string">&quot;regexExp&quot;</span>); <span class="comment">// Pattern.compile(&quot;my-topic-*&quot;)</span></span><br></pre></td></tr></table></figure><blockquote><p>poll 轮询处理协调、分区重平衡、心跳 (heartbeats) 和数据提取的所有详细信息</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    ConsumerRecords&lt;String, String&gt; records = consumer.poll(<span class="number">100</span>); <span class="comment">// 超时时间</span></span><br><span class="line">    <span class="keyword">for</span> (ConsumerRecord&lt;String, String&gt; record : records) &#123;</span><br><span class="line">        System.out.printf(<span class="string">&quot;offest = %d, key = %s, value = %s\n&quot;</span>, record.offest(), record.key(), record.value());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>配置 Kafka 消费者</p></blockquote><ol><li>创建消费者属性</li><li>创建消费者</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建消费者属性</span></span><br><span class="line"><span class="type">Properties</span> <span class="variable">props</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, KAFKA_SERVER_URL + <span class="string">&quot;:&quot;</span> + KAFKA_SERVER_PORT);</span><br><span class="line">props.out(ConsumerConfig.GROUP_ID_CONFIG, CLIENT_ID);</span><br><span class="line">props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, <span class="string">&quot;org.apache.kafka.common.serialization.IntegerDeserializer&quot;</span>);</span><br><span class="line">props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, <span class="string">&quot;org.apache.kafka.common.serialization.StringDeserializer&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建消费者</span></span><br><span class="line">KafkaConsumer&lt;Integer, String&gt; consumer = <span class="keyword">new</span> <span class="title class_">KafkaConsumer</span>&lt;&gt;(props);</span><br></pre></td></tr></table></figure><blockquote><p>读消息</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 为消费者订阅特定消息</span></span><br><span class="line">consumer.subscribe(Collections.singletonList(<span class="built_in">this</span>.topic));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 循环拉取数据</span></span><br><span class="line">ConsumerRecords&lt;Integer, String&gt; records = consumer.poll(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 遍历消费</span></span><br><span class="line"><span class="keyword">for</span> (ConsumerRecord&lt;Integer, String&gt; record : records) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Receivedmessage: (&quot;</span> + record.key() + <span class="string">&quot;,&quot;</span> + record.value() + <span class="string">&quot;) at offset &quot;</span> + record.offset());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Java-消费者-API-–-低级-API"><a href="#Java-消费者-API-–-低级-API" class="headerlink" title="Java 消费者 API – 低级 API"></a>Java 消费者 API – 低级 API</h2><blockquote><p>不常用或仅在调试时使用 (在较新的版本中已取消)</p></blockquote><p>实现了:</p><ul><li>更好地控制Kafka 消息的使用<ul><li>多次读取相同的消息</li><li>只消费主题的部分分区</li><li>手动管理事务确保消息只处理一次且仅处理一次 (Exactly Once primitive)</li></ul></li><li>更灵活的控制，但以复杂性为代价<ul><li>偏移量不再透明</li><li>缓存代理自动故障转移需要手动处理</li><li>添加消费者，分区和 Broker 之后需要您自己进行负载平衡</li></ul></li></ul><blockquote><p>低级 API</p></blockquote><ul><li><p>简单消费者（kafka.javaapi.consumer.SimpleConsumer）</p><p>有助于连接到lead broker，进而获取主题中的消息，并提供了一些获取主题元数据和偏移量列表的方法</p></li><li><p>发起拉取请求 (kafka.api.FetchRequest)</p></li><li><p>偏移量请求 (kafka.javaapi.OffsetRequest)</p></li><li><p>偏移量拉取请求 (kafka.javaapi.OffsetFetchRequest)</p></li><li><p>偏移量提交请求 (kafka.javaapi.OffsetCommitRequest)</p></li><li><p>主题元数据请求 (kafka.javaapi.TopicMetadataRequest)</p></li></ul><h1 id="第五章-Kafka-监控和管理"><a href="#第五章-Kafka-监控和管理" class="headerlink" title="第五章 Kafka 监控和管理"></a>第五章 Kafka 监控和管理</h1><h2 id="5-1-主题操作"><a href="#5-1-主题操作" class="headerlink" title="5.1 主题操作"></a>5.1 主题操作</h2><ul><li>Kafka 提供了一个命令行实用程序 <code>kafka-topics.sh</code> 来操作 Kafka 服务器上的主题。在做操作之前，需要先启动并运行 kafka 集群</li></ul><blockquote><p>创建主题</p></blockquote><ul><li>使用 kafka-topics.sh 工具创建一个名为 my-topic 的主题，它只有 1 个分区和 1 个副本</li></ul><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --zookeeper localhost:<span class="number">2181</span> --create --topic my-topic --replication-factor <span class="number">1</span> --partitions <span class="number">1</span></span><br><span class="line"></span><br><span class="line"># 输出</span><br><span class="line">Create topic &quot;mytopic&quot;.</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 上面指令的参数</span><br><span class="line"></span><br><span class="line">--zookeeper &lt;host:port&gt; </span><br><span class="line"># (从Kafka <span class="number">2</span>.<span class="number">2</span>+起废弃), 用host:port格式表示的zookeeper的连接字符串，可以指定多个主机避免单点故障</span><br><span class="line"></span><br><span class="line">--create</span><br><span class="line"># 创建一个主题</span><br><span class="line"></span><br><span class="line">--partitions &lt;Integer of partitions&gt; </span><br><span class="line"># 创建或者修改操作时所指定的主题分区数</span><br><span class="line"></span><br><span class="line">--replication-factor &lt;Integer of replication factor&gt;</span><br><span class="line"># 即将创建主题的每个分区的副本因子. 如果没有指定则采用集群默认配置</span><br><span class="line"></span><br><span class="line">--topic &lt;String of topic name&gt; </span><br><span class="line"># 指定创建、修改、描述或删除操作的主题</span><br></pre></td></tr></table></figure><blockquote><p>获取主题信息</p></blockquote><ul><li>为了获取特定主题的详细信息, 可以执行下面的命令</li></ul><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --zookeeper localhost:<span class="number">2181</span> --describe --topic mytopic</span><br><span class="line"></span><br><span class="line"># --topic 也可以接受正则表达式, 用--create时除外. 主题名字中如果包含特殊字符可以在两端加上双引号转义, 例如 &quot;test.topic&quot;.</span><br><span class="line"></span><br><span class="line"># 输出:</span><br><span class="line"><span class="function">Topic: <span class="title">my</span>-<span class="title">topic</span> <span class="title">PartitionCount</span>: 1 <span class="title">ReplicationFactor</span>: 1 </span></span><br><span class="line"><span class="function"><span class="title">Configs</span>: <span class="title">Topic</span>: <span class="title">my</span>-<span class="title">topic</span> <span class="title">Partition</span>: 0 <span class="title">Leader</span>: 0 <span class="title">Replicas</span>: 0 </span></span><br><span class="line"><span class="function"><span class="title">Isr</span>: 0</span></span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 关于输出的解释</span><br><span class="line"></span><br><span class="line">PartitionCount</span><br><span class="line"># 现存的 topic 分区数量</span><br><span class="line"></span><br><span class="line">ReplicationFactor</span><br><span class="line"># 现存的 topic 副本因子</span><br><span class="line"></span><br><span class="line">Replica</span><br><span class="line"># Kafka 中用于复制数据的节点列表</span><br><span class="line"></span><br><span class="line">Isr</span><br><span class="line"># 用于当前同步副本之间的数据的结点列表</span><br></pre></td></tr></table></figure><blockquote><p>为主题添加分区</p></blockquote><ul><li>可以为现有的 Kafka 主题添加分区</li><li><code>--alter</code> 选项可以改变主题分区的数量, 副本数量以及配置信息</li><li>为上一步中创建的主题添加一个分区</li></ul><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kafka-topics.sh --bootstrap-server localhost:<span class="number">2181</span> --alter --topic mytopic --partitions <span class="number">2</span></span><br><span class="line"></span><br><span class="line"># --alter 其实是重新定义分区数量, 新分区数量 = 原分区数量 + 增加分区数量</span><br></pre></td></tr></table></figure><blockquote><p>删除主题</p></blockquote><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --zookeeper localhost:<span class="number">2181</span> --delete --topic my-topic</span><br><span class="line"></span><br><span class="line"># 默认情况下 --delete 只是将主题标记为删除状态 (逻辑删除), 并非真正意义上的删除. </span><br><span class="line"># 如果想要真正删除就需要在 server.properties 里面加上一行配置: </span><br><span class="line"># delete.topic.enable = true</span><br></pre></td></tr></table></figure><blockquote><p>列出集群汇总所有主题</p></blockquote><ul><li>获得一个 Kafka 集群汇总某台服务器上所有可用的主题列表</li></ul><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --zookeeper localhost:<span class="number">2181</span> --list</span><br></pre></td></tr></table></figure><h2 id="5-2-消费者操作"><a href="#5-2-消费者操作" class="headerlink" title="5.2 消费者操作"></a>5.2 消费者操作</h2><ul><li>使用 <code>kafka-consumer-groups.sh</code> 工具，我们可以列出、描述或删除消费者组。消费者组可以被手动删除，也可以在该组最后一次提交的偏移量到期时被自动删除。手动删除仅在<strong>组中没有任何活动成员</strong>时有效</li></ul><blockquote><p>列出消费者组</p></blockquote><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-consumer-groups.sh --bootstrap-server localhost:<span class="number">9092</span> --list</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 输出</span><br><span class="line"></span><br><span class="line">test-consumer-group-<span class="number">1</span></span><br><span class="line">test-consumer-group-<span class="number">2</span></span><br><span class="line">test-consumer-group-<span class="number">3</span></span><br><span class="line"></span><br><span class="line"># 如果使用新的消费者客户端, 要列出消费者组, 可以使用 --bootstrap-server 和 --list 选项, 因为新的客户端已经删除了 --zookeeper 选项</span><br></pre></td></tr></table></figure><blockquote><p>描述消费者组</p></blockquote><ul><li>下面语句会列出指定消费者组正在使用的所有主题, 以及每个主题分区的偏移量</li></ul><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-consumer-groups.sh --bootstrap-server localhost:<span class="number">9092</span> --describe --group my-group</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 输出</span><br><span class="line"></span><br><span class="line">TOPIC PARTITION CURRENT-OFFSET LOG-END-OFFSET LAG CONSUMER-ID HOST CLIENTID</span><br><span class="line">topic1 <span class="number">0</span> <span class="number">854144</span> <span class="number">855809</span> <span class="number">1665</span> consumer1-<span class="number">3</span>fc8d6f1-<span class="number">581</span>a-<span class="number">4472</span>-bdf3-<span class="number">3515</span>b4aee8c1 </span><br><span class="line">/<span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span> consumer1</span><br><span class="line">topic2 <span class="number">0</span> <span class="number">460537</span> <span class="number">803290</span> <span class="number">342753</span> consumer1-<span class="number">3</span>fc8d6f1-<span class="number">581</span>a-<span class="number">4472</span>-bdf3-<span class="number">3515</span>b4aee8c1 </span><br><span class="line">/<span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span> consumer1 </span><br><span class="line">topic3 <span class="number">2</span> <span class="number">243655</span> <span class="number">398812</span> <span class="number">155157</span> consumer4-<span class="number">117</span>fe4d3-c6c1-<span class="number">4178</span>-<span class="number">8</span>ee9-eb4a3954bee0 </span><br><span class="line">/<span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span> consumer4</span><br></pre></td></tr></table></figure><blockquote><p>删除消费者组</p></blockquote><ul><li><code>--delete</code> 选项可以删除一个或多个消费者组</li></ul><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-consumer-groups.sh --bootstrap-server localhost:<span class="number">9092</span> --delete --group my-group --group my-other-group</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 输出</span><br><span class="line"></span><br><span class="line">Deletion of requested consumer groups(&#x27;my-group&#x27;, &#x27;my-other-group&#x27;) was successful.</span><br><span class="line"></span><br><span class="line"># 当要删除的消费者组不为空时会报错</span><br><span class="line"># GroupNotEmptyException</span><br></pre></td></tr></table></figure><blockquote><p>偏移量管理 – 删除操作</p></blockquote><ul><li>使用 <code>--delete-offsets</code>删除消费者组偏移量, 此方法支持一个消费者组和一个或多个主题</li></ul><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kafka-consumer-groups.sh --bootstrap-server localhost:<span class="number">9092</span> --delete-offests --group my-group --topic my-topic-<span class="number">1</span> --topic my-topic-<span class="number">2</span></span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 输出</span><br><span class="line"></span><br><span class="line">TOPIC PARTITION STATUS </span><br><span class="line">my-topic-<span class="number">1</span> <span class="number">0</span> Successful</span><br><span class="line">my-topic-<span class="number">2</span> <span class="number">0</span> Successful</span><br><span class="line"></span><br><span class="line"># 当要删除的消费者组不为空时, 报以下错误</span><br><span class="line"># GroupNotEmptyException</span><br></pre></td></tr></table></figure><blockquote><p>偏移量管理 – 重置操作</p></blockquote><ul><li>使用 <code>--reset-offsets</code> 选项重置消费者组的偏移量, 此选项一次支持一个消费者组</li><li>并且需要定义以下范围: <code>--all-topic</code> 或 <code>--topic</code> </li><li>必须选择上面两个作用域, 除非使用 <code>--from-file</code> 以文件的方式导入</li></ul><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-consumer-groups.sh --bootstrap-server localhost:<span class="number">9092</span> --reset-offsets --gropu consumergroup1 --topic topic1 --to-latest</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 输出</span><br><span class="line"></span><br><span class="line">TOPIC PARTITION NEW-OFFSET</span><br><span class="line">topic1 <span class="number">0</span></span><br><span class="line"></span><br><span class="line"># 如果使用的是旧的高级消费者, 即消费者元数据是存储在 zookeeper 中的 (配置了 offset.storage = Zookeeper)</span><br><span class="line"># 则需要使用 --zookeeper 而不是 --bootstrap-server</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># 上面指令的参数</span><br><span class="line"></span><br><span class="line">--to-datetime &lt;String of datetime&gt; </span><br><span class="line"># 将偏移量重置为某个时间点的偏移量, 格式:  &#x27;YYYY-MM-DDTHH:mm:SS.sss&#x27;</span><br><span class="line"></span><br><span class="line">--to-earliest</span><br><span class="line"># 将偏移量重置为最早的偏移量</span><br><span class="line"></span><br><span class="line">--to-latest</span><br><span class="line"># 将偏移量重置为最近的偏移量</span><br><span class="line"></span><br><span class="line">--<span class="built_in">shift</span>-by &lt;Long -- number of offsets&gt; </span><br><span class="line"># 将当前的偏移量偏移 n 个单位, n 可以为正数也可为负数</span><br><span class="line"></span><br><span class="line">--from-file</span><br><span class="line"># 利用 CSV 文件中的数据重置偏移量</span><br><span class="line"></span><br><span class="line">--to-current</span><br><span class="line"># 将偏移量重置为当前值</span><br><span class="line"></span><br><span class="line">--by-duration &lt;String of duration&gt;</span><br><span class="line"># 将偏移量重置为从当前时间戳开始的时长, 格式为: &#x27;PnDTnHnMnS&#x27;</span><br><span class="line"></span><br><span class="line">--to-offset</span><br><span class="line"># 将偏移量重置为指定的值</span><br></pre></td></tr></table></figure><h2 id="5-3-动态配置修改"><a href="#5-3-动态配置修改" class="headerlink" title="5.3 动态配置修改"></a>5.3 动态配置修改</h2><ul><li>动态配置修改意味着在修改配置后我们不需要重新启动 broker 来使其生效</li><li>这个新特性包含在 <code>kafka-configs.sh</code> 的命令行工具脚本中, 使用了这个工具配置参数, 新的更改会永久存储在 zookeeper 集群中</li></ul><blockquote><p>覆盖主题默认配置</p></blockquote><ul><li>有许多应用于主题的配置，可以针对单个主题更改这些配置以适应集群中的不同用例</li><li>大多数配置都在代理配置中指定了缺省值，除非设置配置覆盖，否则将应用该缺省值</li></ul><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 指令格式</span><br><span class="line"></span><br><span class="line">kafka-configs.sh --zookeeper zoo1.example.com:<span class="number">2181</span>/kafka-cluster --alter --entity-<span class="built_in">type</span> topics --entity-name &lt;topic name&gt; --add-config &lt;key&gt;=&lt;value&gt; [, &lt;key&gt;=&lt;value&gt;...]</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 将 my-topic 主题的留存时间设置为 <span class="number">1</span> 小时, 即 <span class="number">3600000</span>ms</span><br><span class="line">kafka-configs.sh --zookeeper localhost:<span class="number">2181</span> --alter --entity-<span class="built_in">type</span> topics --entity-name my-topic --add-config retention.ms=<span class="number">3600000</span></span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 输出</span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">Warning: --<span class="title">zookeeper</span> <span class="title">is</span> <span class="title">deprecated</span> <span class="title">and</span> <span class="title">will</span> <span class="title">be</span> <span class="title">removed</span> <span class="title">in</span> <span class="title">a</span> <span class="title">future</span> </span></span><br><span class="line"><span class="function"><span class="title">version</span> <span class="title">of</span> <span class="title">Kafka</span>.</span></span><br><span class="line"><span class="function"><span class="title">Use</span> --<span class="title">bootstrap</span>-<span class="title">server</span> <span class="title">instead</span> <span class="title">to</span> <span class="title">specify</span> <span class="title">a</span> <span class="title">broker</span> <span class="title">to</span> <span class="title">connect</span> <span class="title">to</span>.</span></span><br><span class="line"><span class="function"><span class="title">Completed</span> <span class="title">updating</span> <span class="title">config</span> <span class="title">for</span> <span class="title">entity</span>: <span class="title">topic</span> &#x27;<span class="title">my</span>-<span class="title">topic</span>&#x27;.</span></span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"># kafka 主题中的部分有效配置</span><br><span class="line"></span><br><span class="line">cleanup.policy</span><br><span class="line"># 如果设置为<span class="built_in">compact</span>，则topic中 的消息将被丢弃，仅保留具有给定key的最新消息（日志压缩）</span><br><span class="line"></span><br><span class="line">compression.<span class="built_in">type</span></span><br><span class="line"># broker 将消息写入磁盘时使用的压缩类型，可以用 gzip、snappy 和 lz4</span><br><span class="line"></span><br><span class="line">delete.retention.ms</span><br><span class="line"># 压缩日志墓碑消息的最长存放时间</span><br><span class="line"></span><br><span class="line">file.delete.delay.ms</span><br><span class="line"># 从磁盘中删除此 topic 的日志端和索引之前需要等待的多长时间</span><br><span class="line"></span><br><span class="line">flush.messages</span><br><span class="line"># 在强制将此 topic 的消息刷到磁盘之前接收的消息数</span><br><span class="line"></span><br><span class="line">flush.ms</span><br><span class="line"># 在强制将此 topic 的消息刷到磁盘之前需要的时间，单位是毫秒</span><br><span class="line"></span><br><span class="line">index.interval.bytes</span><br><span class="line"># 日志段索引中的条目之间可以产生多少字节的消息</span><br><span class="line"></span><br><span class="line">max.message.bytes</span><br><span class="line"># 此 topic 中单个消息的大小</span><br><span class="line"></span><br><span class="line">retention.bytes</span><br><span class="line"># 为 topic 保留的消息量的总字节数</span><br><span class="line"></span><br><span class="line">retention.ms</span><br><span class="line"># topic 中消息保留的最长时间，单位是毫秒</span><br></pre></td></tr></table></figure><blockquote><p>覆盖客户端默认配置</p></blockquote><ul><li>Kafka 客户端唯一可以覆盖的配置是生产者和消费者的配额，即允许具有指定客户端 ID 的所有客户端在每个 broker 上每秒生产或者消费的字节数</li></ul><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 指令格式</span><br><span class="line"></span><br><span class="line">kafka-configs.sh --zookeeper zoo1.example.com:<span class="number">2181</span>/kafka-cluster --alter --entity-<span class="built_in">type</span> clients --entity-name &lt;client ID&gt; --add-config &lt;key&gt;=&lt;value&gt;[,&lt;key&gt;=&lt;value&gt;...]</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># kafka 客户端的有效配置</span><br><span class="line"></span><br><span class="line">producer_bytes_rate</span><br><span class="line"># 单个客户端ID在一秒钟内允许向单个代理生成的消息数量 (以字节为单位)</span><br><span class="line"></span><br><span class="line">consumer_bytes_rate</span><br><span class="line"># 单个客户端ID在一秒钟内允许从单个代理使用的消息数量 (以字节为单位)</span><br></pre></td></tr></table></figure><blockquote><p>显示覆盖的配置</p></blockquote><ul><li>可以使用命令行工具 <code>kafka-configs.sh</code> 来检查主题或客户机的特定配置。显示覆盖的配置需要使用 <code>--describe</code> 选项</li></ul><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 显示名为 my-topic 的主题的所有覆盖过的配置</span><br><span class="line"></span><br><span class="line">kafka-configs.sh --zookeeper localhost:<span class="number">2181</span> --describe --entity-<span class="built_in">type</span> topics --entity-name my-topic</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 输出</span><br><span class="line"></span><br><span class="line">Configs <span class="keyword">for</span> topic &#x27;my-topic&#x27; are retention.ms=<span class="number">3600000</span></span><br></pre></td></tr></table></figure><blockquote><p>删除覆盖的配置</p></blockquote><ul><li>完全删除动态配置，将导致集群配置恢复到默认值. 要，使用 <code>--alter</code> 命令以及 <code>--delete-config</code> 命令删除配置覆盖</li></ul><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 删除名为 my-topic 的主题的覆盖后的 retention.ms 配置, 即将它恢复默认值</span><br><span class="line"></span><br><span class="line">kafka-configs.sh --zookeeper localhost:<span class="number">2181</span> --alter --entity-<span class="built_in">type</span> topics --entity-name my-topic --delete-config retention.ms</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 输出</span><br><span class="line"></span><br><span class="line">Completed updating config <span class="keyword">for</span> entity: topic &#x27;my-topic&#x27;.</span><br></pre></td></tr></table></figure><h1 id="第六章-流处理"><a href="#第六章-流处理" class="headerlink" title="第六章 流处理"></a>第六章 流处理</h1><h2 id="6-1-什么是流处理"><a href="#6-1-什么是流处理" class="headerlink" title="6.1 什么是流处理"></a>6.1 什么是流处理</h2><blockquote><p>流处理 Stream Processing</p></blockquote><ul><li>数据流（ data stream，也称为事件流 event stream 或流数据 streaming data ）是无界数据集（Unbounded Dataset）抽象的表示</li><li>流处理 Stream processing 是指对一个或多个事件流的持续处理</li><li>事件流模型除了无边界之外，还有以下性质<ul><li>事件流的处理是有序的 Event streams are ordered （上游处理完接着下游处理）</li><li>发射到事件流中的数据记录是不可变的 Immutable data records（事件不可篡改）</li><li>事件流是可重播的 Event streams are replayable（错误重试，重新分析或者审计）</li></ul></li></ul><blockquote><p>Kafka Stream 的特点</p></blockquote><p>Kafka Stream 提供了对存储于 Kafka 内的数据进行流式处理和分析的功能</p><ul><li>Kafka Stream 提供了一个非常简单而轻量的 Library，它可以非常方便地嵌入任意 Java 应用中，也可以任意方式打包和部署</li><li>除了 Kafka 外，无任何外部依赖</li><li>充分利用 Kafka 分区机制实现水平扩展和顺序性保证</li><li>通过可容错的 state store 实现高效的状态操作（如 windowed join 和 aggregation）</li><li>支持恰好一次 (EOS: Exactly Once Semantic) 处理语义</li><li>提供记录级的处理能力，从而实现毫秒级的低延迟</li><li>支持基于事件时间的窗口操作，并且可处理晚到的数据（late arrival of records）</li><li>同时提供底层的处理原语 Processor（类似于Storm的spout和bolt），以及高层抽象的 DSL（类似于 Spark 的 map&#x2F;group&#x2F;reduce）</li></ul><h2 id="6-2-流处理概念"><a href="#6-2-流处理概念" class="headerlink" title="6.2 流处理概念"></a>6.2 流处理概念</h2><ul><li>在流处理过程中，流处理，通常接收数据、对数据执行一些转换、聚合、扩充等的数据的任何类型的数据处理</li><li>一般流式计算会与批量计算相比较。在流式计算模型中，输入是持续的，可以认为在时间上是无界的，也就意味着，永远拿不到全量数据去做计算。同时，计算结果是持续输出的，也即计算结果在时间上也是无界的。流式计算一般对实时性要求较高，同时一般是先定义目标计算，然后数据到来之后将计算逻辑应用于数据。同时为了提高计算效率，往往尽可能采用增量计算代替全量计算</li></ul><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230314201202875.png" alt="流处理"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230314201220700.png" alt="批处理"></p><blockquote><p>流处理关键概念 – Time (时间)</p></blockquote><p>从 Kafka 0.10 版本开始，生产者自动把时间戳信息追加到发送的消息中</p><p>Kafka消息目前支持的时间戳类型有两种： CreateTime 和 LogAppendTime 前者表示 producer 创建这条消息的时间；后者表示 broker 接收到这条消息的时间 (严格来说，是 leader broker 将这条消息写入到 log 的时间)</p><p>引入时间戳主要解决3个问题：</p><ol><li>日志保存 (log retention) 策略</li><li>日志切分 (log rolling) 策略</li><li>流式处理 (Kafka streaming)：流式处理中需要用到消息的时间戳，在流处理的上下文中，有一个共同的时间概念是至关重要的，因为大多数流应用程序在时间窗口上执行操作。例如，我们的 stream 应用程序可能会计算股票价格的5分钟移动平均值。下面是流式处理经常遇到的时间戳类型: <ul><li><strong>Event Time</strong>：跟踪的事件发生和记录创建的时间，通常是流式处理最常用的时间</li><li><strong>LogAppend Time</strong>：事件到达 Kafka 代理并存储在那里的时间，受网络影响，可能0点前的数据 0 点后才到达 Broker</li><li><strong>Processing Time</strong>：应用程序最终消费事件执行某些处理的时间，无法保证实时，不可靠。</li></ul></li></ol><p>如何使用时间戳 ?</p><ul><li><p>Kafka broker config 提供了一个参数：<code>log.message.timestamp.type</code> 来统一指定集群中的所有 topic 使用哪种时间戳类型。用户也可以为单个 topic 设置不同的时间戳类型，具体做法是创建 topic 时覆盖掉全局配置：</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --zookeeper localhost:<span class="number">2181</span> --create --topic test --partitions <span class="number">1</span> --replication-factor <span class="number">1</span> --config message.timestamp.<span class="built_in">type</span>=LogAppendTime</span><br></pre></td></tr></table></figure></li><li><p>producer 在创建 ProducerRecord 时可以指定时间戳</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ProducerRecord</span> <span class="variable">record</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProducerRecord</span>&lt;String, Stirng&gt;(<span class="string">&quot;my-topic&quot;</span>, <span class="literal">null</span>, System.currentTimeMillis(), <span class="string">&quot;key&quot;</span>, <span class="string">&quot;value&quot;</span>);</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>流处理的关键概念 – State (状态)</p></blockquote><p>流式处理中，部分操作是无状态的，例如过滤操作。而部分操作是有状态的，需要记录中间状态，如 Window 操作和聚合计算。存储中间状态的方式有可以是一个持久化的 Key-Value 存储，也可以是内存中的 HashMap，或者是数据库。而 Kafka 提供了基于 Topic 的状态存储</p><ul><li><p>本地或内部状态</p><p>优势在于速度快。缺点是可用的容量有限。另外将流处理的中间状态保存在内存中是不可靠的，因为当流处理应用程序停止时，状态将丢失，从而改变结果</p></li><li><p>外部状态</p><p>在外部数据存储中维护状态，通常是像 Cassandra，HBase 这样的 NoSQL 系统。外部存储中维护状态的优点是它几乎有无限的容量（可扩展），并且可以从应用程序的多个实例甚至不同的应用程序来远程访问它。缺点是会增加延迟和系统复杂性。大多数流处理的应用程序尽量减少与外部存储通信来控制延迟开销</p></li></ul><blockquote><p>流处理的关键概念 – Stream Table Duality (Stream 和 Table 之间的二元性)</p></blockquote><p>Kafka Streaming 中 流表二元性</p><ul><li>流是导致更改的一串不可变的有序事件</li><li>表是记录的集合，像关系数据库一样，记录由其主键标识，并包含一组属性，可以更改并记录最新状态</li><li>为了将流转换为表，我们需要应用流包含的所有更改</li><li>这也称为实现流（materializing the stream）</li><li>举例说明：鞋店的零售活动的事件流表示：<ul><li>“货物到达时，有红、蓝、绿三种颜色的鞋子各300双”</li><li>“出售蓝色鞋子以及红色鞋子各一双”</li><li>“之前售出的1双蓝鞋子遭到客户退货”</li><li>“出售绿色鞋子1双”</li></ul></li><li>鞋店库存的状态可用表来表示<ul><li>每当事件到来，更新表</li><li>表中存储的是最新状态</li></ul></li></ul><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230314203427313.png" alt="鞋店库存表"></p><p>流和表之间存在着密切的关系。 我们称之为流表二元性。 这意味着：</p><ul><li>我们可以通过使用诸如 COUNT() 或 SUM() 等操作将流聚合为表。 在我们的国际象棋类比中，我们可以通过重放所有记录的动作 (流) 来重建棋盘的最新状态 (表）</li><li>相反，也可以通过对比棋盘的前后状态，识别发生了何种事件，进而构成完整的事件流，不过这样转换的效率会很差</li></ul><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230314203604234.png" alt="流表二元性"></p><p>下面是使用 COUNT() 将流聚合成表的示例。 出于说明性的原因，没有显示事件时间戳。</p><p>随着新事件到达流中，该表不断更新。在此示例中，具有 Key&#x3D; UserID 和 Value&#x3D;Location 的事件流被聚合到一个不断更新的表中，该表跟踪每个 Key&#x3D; UserName</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230314203804663.png" alt="流聚合表"></p><p>我们可以放大 COUNT() 示例，以显示表的 (输出) 更改流。 更改流可以用来实时地对表更改做出反应，例如发出警报。或者例如当出现机器故障或集群扩（缩）容时，利用更改流将表从机器 A 迁移到机器 B</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230314203903606.png" alt="表的输出更改流"></p><blockquote><p>流处理的关键概念 – Window (时间窗口)</p></blockquote><h2 id="6-3-流处理设计模式"><a href="#6-3-流处理设计模式" class="headerlink" title="6.3 流处理设计模式"></a>6.3 流处理设计模式</h2><h2 id="6-4-Kafka-流-架构概述"><a href="#6-4-Kafka-流-架构概述" class="headerlink" title="6.4 Kafka 流: 架构概述"></a>6.4 Kafka 流: 架构概述</h2><h2 id="6-5-流处理用例"><a href="#6-5-流处理用例" class="headerlink" title="6.5 流处理用例"></a>6.5 流处理用例</h2>]]></content>
      
      
      <categories>
          
          <category> 数据科学与大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用 Sqoop 进行数据交换</title>
      <link href="/2023/03/09/%E4%BD%BF%E7%94%A8%20Sqoop%20%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2/"/>
      <url>/2023/03/09/%E4%BD%BF%E7%94%A8%20Sqoop%20%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="使用-Sqoop-进行数据交换"><a href="#使用-Sqoop-进行数据交换" class="headerlink" title="使用 Sqoop 进行数据交换"></a>使用 Sqoop 进行数据交换</h1><blockquote><p>SQOOP &#x3D; “ SQl to HadOOP”</p></blockquote><h1 id="一、开始使用-Sqoop"><a href="#一、开始使用-Sqoop" class="headerlink" title="一、开始使用 Sqoop"></a>一、开始使用 Sqoop</h1><h2 id="1-1-Sqoop-介绍"><a href="#1-1-Sqoop-介绍" class="headerlink" title="1.1 Sqoop 介绍"></a>1.1 Sqoop 介绍</h2><h2 id="为什么要用-Sqoop"><a href="#为什么要用-Sqoop" class="headerlink" title="为什么要用 Sqoop ?"></a>为什么要用 Sqoop ?</h2><blockquote><p>导入（import）—— 将数据从 RDBMS 转移到 HDFS</p><p>导出（export）—— 将数据从 HDFS 转移到 RDBMS</p></blockquote><p>我们虽然进入了大数据时代, 但是之前还有好多数据存储在 RDBMS 中, 我们如何对其进行数据迁移 ?</p><p>这时 Sqoop 出现了, 就像用勺子将哈根达斯挖到甜筒中一样</p><p>Sqoop 将 RDBMS 中的数据 <code>import</code> 到 HDFS 等大数据数据库中</p><p>而将 HDFS 等数据库中的数据 <code>export</code> 到 RDBMS 中</p><p>至于我们为什么要用到第二种 ?</p><p>有的小公司没有大数据技术, 但是还是想使用我们的数据, 怎么办 ?</p><p>我们就需要使用 Sqoop 来将我们存储在 HDFS 中的数据给到他们的 RDBMS 中</p><h2 id="1-2-Sqoop-安装"><a href="#1-2-Sqoop-安装" class="headerlink" title="1.2 Sqoop 安装"></a>1.2 Sqoop 安装</h2><p>现在默认打开了虚拟机, 并且一切都配置好了</p><p>登录 Mysql</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mysql -u root -p</span><br></pre></td></tr></table></figure><h1 id="二、Sqoop-工具"><a href="#二、Sqoop-工具" class="headerlink" title="二、Sqoop 工具"></a>二、Sqoop 工具</h1><blockquote><p>展示所有数据库</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop list-databases \</span><br><span class="line">--connect jdbc:mysql://127.0.0.1:3306 \</span><br><span class="line">--username root \</span><br><span class="line">--password 123456 \</span><br><span class="line">–-verbose</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop list-databases \<span class="comment"># 展示所有数据库</span></span><br><span class="line"></span><br><span class="line">--connect jdbc:mysql://127.0.0.1:3306 \<span class="comment"># 每个虚拟机都有 localhost, 这里可以写 localhost 也可以写127.0.0.1</span></span><br><span class="line"><span class="comment"># 大数据指令中指令 - 和 -- 效力是一样的, 都是作为指令使用</span></span><br><span class="line"><span class="comment"># 不过后来意识到用作参数时用 -- 用作连字符时用 - , 这样方便区分</span></span><br><span class="line"></span><br><span class="line">--username root \</span><br><span class="line"></span><br><span class="line">--password 123456 \</span><br><span class="line"></span><br><span class="line">–-verbose<span class="comment"># 让密码在传输过程中不会明文传输, 而是加密传输, 虽然在本地机器上能看见密码,但是只是使用虚拟机的本人能看见</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自己写指令, 不要复制</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># MapReduce 是用来处理表格数据的, 不是用来处理数据库</span></span><br></pre></td></tr></table></figure><blockquote><p>在命令行询问密码</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop list-databases \</span><br><span class="line">--connect jdbc:mysql://127.0.0.1:3306 \</span><br><span class="line">--username root –P \</span><br><span class="line">-verbose</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop list-databases \</span><br><span class="line"></span><br><span class="line">--connect jdbc:mysql://127.0.0.1:3306 \</span><br><span class="line"></span><br><span class="line">--username root –P \</span><br><span class="line"><span class="comment"># -P 表示不用在指令中写出密码, 而是直接让 Linux 在执行指令后询问密码, 而且使用遮罩功能, 在屏幕上隐藏密码</span></span><br><span class="line"><span class="comment"># 虽然都这样了但还是有风险, 因为在你旁边的人会看见你输入的密码</span></span><br><span class="line"></span><br><span class="line">-verbose</span><br></pre></td></tr></table></figure><p>将密码保存到密码文件中, 用的时候再调用</p><blockquote><p>记得，文件里只能有一行，而且直接是密码，不要有多余的东西</p><p>我有一次试了好久没成功发现文件里多了个空行。。。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> -n <span class="string">&#x27;Root123!&#x27;</span> &gt; /tools/.mysql.password</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> -n <span class="string">&#x27;Root123!&#x27;</span> &gt; /tools/.mysql.password</span><br><span class="line"></span><br><span class="line"><span class="comment"># echo 表示 print</span></span><br><span class="line"><span class="comment"># -n 表示不换行</span></span><br><span class="line"><span class="comment"># &gt; 表示将密码写入哪里, 后面接路径</span></span><br><span class="line"><span class="comment"># 这个 .password 其实就是一个普通的存放文本的文件, 只不过后缀名是 .password, 就算是 .txt 也无所谓</span></span><br><span class="line"><span class="comment"># 这个 .password 文件可以存储多个密码, 但是下次调用的时候就要用 cat 或者过滤器找密码了</span></span><br><span class="line"><span class="comment"># 一般都是一个 .password 文件存放一个密码, 这样每次找着方便</span></span><br></pre></td></tr></table></figure><p>通过密码文件来寻找密码（这样就不用输入了，这就是为啥 Linux 非常安全）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop list-databases \</span><br><span class="line">--connect jdbc:mysql://127.0.0.1:3306  \</span><br><span class="line">--username root \</span><br><span class="line">--password-file file:///tools/.mysql.password</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop list-databases \</span><br><span class="line"></span><br><span class="line">--connect jdbc:mysql://127.0.0.1:3306  \</span><br><span class="line"></span><br><span class="line">--username root \</span><br><span class="line"></span><br><span class="line">--password-file file:///tools/.mysql.password</span><br><span class="line"><span class="comment"># 这里的前两个 / 是 file: 后的格式, 第三个 / 表示 /tools 路径</span></span><br></pre></td></tr></table></figure><p>顺带一提</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mysql -uroot -p123456 <span class="comment"># 这样就是不会再询问你密码, 直接全都写在指令里了</span></span><br></pre></td></tr></table></figure><h1 id="三、Sqoop-import-工具"><a href="#三、Sqoop-import-工具" class="headerlink" title="三、Sqoop import 工具"></a>三、Sqoop import 工具</h1><h2 id="3-1-Importing-data-from-MySQL-to-HDFS"><a href="#3-1-Importing-data-from-MySQL-to-HDFS" class="headerlink" title="3.1 Importing data from MySQL to HDFS"></a>3.1 Importing data from MySQL to HDFS</h2><blockquote><p>将数据从 RDBMS <code>import</code> 到 HDFS</p></blockquote><h3 id="3-1-1-表中没有主键"><a href="#3-1-1-表中没有主键" class="headerlink" title="3.1.1 表中没有主键"></a>3.1.1 表中没有主键</h3><p>先登录 MySQL</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mysql -u root -p</span><br></pre></td></tr></table></figure><p>创建数据库, 表并插入数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database niit;</span><br><span class="line">use niit;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> author(author_name <span class="type">varchar</span>(<span class="number">65</span>), total_no_of_articles <span class="type">int</span>, phone_no <span class="type">int</span>, address <span class="type">varchar</span>(<span class="number">65</span>));</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> author <span class="keyword">values</span>(“santy”,<span class="number">10</span>,<span class="number">123456789</span>,”Gwalior”);</span><br></pre></td></tr></table></figure><p>启动 Hadoop</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ start-all.sh</span><br></pre></td></tr></table></figure><p>启动 Hive, 另开一个窗口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hive</span><br></pre></td></tr></table></figure><p>在 Hive 中创建数据库, 不用创建表</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create database niitbd3;</span><br><span class="line">use niitbd3;</span><br></pre></td></tr></table></figure><p>在 Hadoop 上运行下列命令 ( Sqoop 指令), 另开一个窗口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import --connect \</span><br><span class="line">jdbc:mysql://127.0.0.1:3306/niit \</span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> --table author \</span><br><span class="line"> --hive-import --hive-table niitbd3.author_hive \</span><br><span class="line"> --m 1</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import --connect \</span><br><span class="line"></span><br><span class="line">jdbc:mysql://127.0.0.1:3306/niit \<span class="comment"># MySQL 中的数据库名</span></span><br><span class="line"></span><br><span class="line"> --username root --password 123456 \<span class="comment"># MySQL 用户和密码</span></span><br><span class="line"> </span><br><span class="line"> --table author \<span class="comment"># 要 import 的表</span></span><br><span class="line"> </span><br><span class="line"> --hive-import --hive-table niitbd3.author_hive \</span><br><span class="line"> <span class="comment"># 要 import 到的 hive 中的数据库名.要 import 到的 hive 中的表名</span></span><br><span class="line"> <span class="comment"># 这个表名因为我们没在 hive 中创建，所以可以自定义</span></span><br><span class="line"> </span><br><span class="line"> --m 1<span class="comment"># 创建多少个 mapper (MapReduce, 这里是 m 1, 所以创建了 1 个)</span></span><br></pre></td></tr></table></figure><p>在 Hive 中查看表, 成功 import</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables;</span><br></pre></td></tr></table></figure><h3 id="3-1-2-表中有主键"><a href="#3-1-2-表中有主键" class="headerlink" title="3.1.2 表中有主键"></a>3.1.2 表中有主键</h3><p>先登录 MySQL</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mysql -u root -p</span><br></pre></td></tr></table></figure><p>创建数据库, 表并插入数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database niit;</span><br><span class="line">use niit;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> author_test(id <span class="type">int</span> <span class="keyword">primary</span> key, name <span class="type">varchar</span>(<span class="number">64</span>), age <span class="type">int</span>, major <span class="type">varchar</span>(<span class="number">64</span>));</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> author_test <span class="keyword">values</span>(<span class="number">1</span>, “santy”, <span class="number">10</span>, ”CS”);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> author_test <span class="keyword">values</span>(<span class="number">2</span>, “Andrew”, <span class="number">10</span>, ”CS”);</span><br></pre></td></tr></table></figure><p>启动 Hadoop</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ start-all.sh</span><br></pre></td></tr></table></figure><p>启动 Hive, 另开一个窗口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hive</span><br></pre></td></tr></table></figure><p>在 Hive 中创建数据库, 不用创建表</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create database niitbd3;</span><br><span class="line">use niitbd3;</span><br></pre></td></tr></table></figure><p>在 Hadoop 上运行下列命令 ( Sqoop 指令), 另开一个窗口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import --connect \</span><br><span class="line">jdbc:mysql://127.0.0.1:3306/niit \</span><br><span class="line"> --username root --password 123456 \</span><br><span class="line">--table author_test \</span><br><span class="line">--split-by  <span class="built_in">id</span> \</span><br><span class="line">--hive-import --create-hive-table \</span><br><span class="line">--hive-table niitbd3.author_test</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import --connect \</span><br><span class="line"></span><br><span class="line">jdbc:mysql://127.0.0.1:3306/niit \<span class="comment"># MySQL 中的数据库名</span></span><br><span class="line"></span><br><span class="line"> --username root --password 123456 \<span class="comment"># MySQL 用户和密码</span></span><br><span class="line"> </span><br><span class="line">--table author_test \<span class="comment"># 要 import 的 MySQL 中的表</span></span><br><span class="line"></span><br><span class="line">--split-by  <span class="built_in">id</span> \<span class="comment"># id 是主键</span></span><br><span class="line"></span><br><span class="line">--hive-import --create-hive-table \</span><br><span class="line"></span><br><span class="line">--hive-table niitbd3.author_test<span class="comment"># 要 import 到的 hive 中的数据库名.要 import 到的 hive 中的表名</span></span><br></pre></td></tr></table></figure><p>在 Hive 中查看表, 成功 import</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables;</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230222103246046.png" alt="Sqoop 执行成功"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230222103303012.png" alt="Hive 中检查成功"></p><h3 id="3-1-3-注意事项"><a href="#3-1-3-注意事项" class="headerlink" title="3.1.3 注意事项"></a>3.1.3 注意事项</h3><ul><li><code>--m 1</code> 与 <code>--split-by  id \</code> 都是用来调用 MapReduce 的指令, 没有会报错, 不能同时用, 要二选一</li><li><code>--split-by  id \</code> 中的 <code>id</code> 是主键, 要先死后活</li><li><code>--m 1</code> 是用来分配 mapper 的, 有几行 (row) 后面的数字就是几</li><li><code>import</code> 到 Hive 中时，表是自动生成的，我们只需要确定表名即可</li></ul><h2 id="3-2-Import-data-from-Windows-MySQL"><a href="#3-2-Import-data-from-Windows-MySQL" class="headerlink" title="3.2 Import data from Windows MySQL"></a>3.2 Import data from Windows MySQL</h2><blockquote><p>Windows 中的 MySQL <code>import</code> 到 Linux 中的 Hive</p><p>（不过都学到这里了操作系统什么的就无所谓了）</p></blockquote><h3 id="3-2-1-开放-Linux-与-Windows-中-MySQL-中的端口连接"><a href="#3-2-1-开放-Linux-与-Windows-中-MySQL-中的端口连接" class="headerlink" title="3.2.1 开放 Linux 与 Windows 中 MySQL 中的端口连接"></a>3.2.1 开放 Linux 与 Windows 中 MySQL 中的端口连接</h3><p>首先要安装 MySQL8.0 服务</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">USE mysql;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;Linux_IP&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;Windows_Mysql_密码&#x27;</span> ;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;Linux_IP&#x27;</span>;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">USE mysql;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;Linux_IP&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;Windows_Mysql_密码&#x27;</span> ;# 创建一个名为 Linux_IP 的 root 用户</span><br><span class="line"></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;Linux_IP&#x27;</span>;# 授予用户全局权限</span><br><span class="line"></span><br><span class="line">FLUSH PRIVILEGES;# 更新内存权限数组，使全局权限授权指令生效</span><br></pre></td></tr></table></figure><p>如果在这里报错 <code>Caused by: java.sql.SQLException: Access denied for user &#39;root&#39;@&#39;bd&#39; (using password: YES)</code>，<a href="https://yuehua-hnu.github.io/2023/02/22/Sqoop%20%E6%A3%80%E6%9F%A5%20MySQL%20%E6%8C%87%E4%BB%A4%E6%8A%A5%E9%94%99/">请见我的另一篇文章</a></p><h3 id="3-2-2-开始进行-import"><a href="#3-2-2-开始进行-import" class="headerlink" title="3.2.2 开始进行 import"></a>3.2.2 开始进行 <code>import</code></h3><p>先在 MySQL 中创建两个带主键的表, 并插入数据（下面两张表主键都是 id）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> stu_coll(</span><br><span class="line">    id, <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">65</span>),</span><br><span class="line">    job <span class="type">varchar</span>(<span class="number">65</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stu_coll <span class="keyword">values</span>(<span class="number">1</span>,&quot;Mobitor&quot;,”BD”);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stu_coll <span class="keyword">values</span>(<span class="number">2</span>,&quot;Student&quot;,”Java”);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> stu_per(</span><br><span class="line">    id, <span class="type">int</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">65</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stu_per <span class="keyword">values</span>(<span class="number">1</span>,&quot;Andrew&quot;);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stu_per <span class="keyword">values</span>(<span class="number">2</span>,&quot;Tim&quot;);</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230301203142913.png" alt="stu_per"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230301203111036.png" alt="stu_coll"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> --query <span class="string">&#x27;select a.id, a.name, b.major, b.job from stu_per a join stu_coll b on a.id = b.id where $CONDITIONS&#x27;</span> \</span><br><span class="line"> --split-by a.id \</span><br><span class="line"> --hive-import \</span><br><span class="line"> --hive-table niitbd3.import_join_test \</span><br><span class="line"> --target-dir /test \</span><br><span class="line"> --m 1</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \</span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"><span class="comment"># 如果是 Windows 中的 MySQL 的话，主机号的最后一位都要写为 1，我这里就是，我的主机号前 3 位就是 192.168.1</span></span><br><span class="line"> </span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> </span><br><span class="line"> --query <span class="string">&#x27;select a.id, a.name, b.major, b.job from stu_per a join stu_coll b on a.id = b.id where $CONDITIONS&#x27;</span> \</span><br><span class="line"><span class="comment"># --query 参数后面接一个 select 语句, 用单引号包裹起来</span></span><br><span class="line"><span class="comment"># select 语句中的 where $CONDITIONS 是必写的, 不能动, 这是让 sqoop 知道这是一个查询语句</span></span><br><span class="line"><span class="comment"># $CONDITIONS 必须大写, 不然会报错</span></span><br><span class="line"><span class="comment"># --split-by 是 Hive 的分区操作, 通过 a.id 分区, 不能通过 b.id, 因为 select 语句中没有出现 b.id, 如果出现了的话就可以</span></span><br><span class="line"> </span><br><span class="line"> --split-by a.id \</span><br><span class="line"> </span><br><span class="line"> --hive-import \</span><br><span class="line"> </span><br><span class="line"> --hive-table niitbd3.import_join_test \</span><br><span class="line"> <span class="comment"># --hive-table hive数据库.hive表 中的这个表, 是执行这个语句之后自动生成的, 不用管, 命名好就行</span></span><br><span class="line"> </span><br><span class="line"> --target-dir /test \</span><br><span class="line"> <span class="comment"># -target-dir /test 这个 /test 路径是 MapReduce 的路径</span></span><br><span class="line"> </span><br><span class="line"> --m 1</span><br><span class="line"><span class="comment"># -m 1 这个参数就是调用几个 mapper</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230301203510601.png" alt="运行成功截图"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230405152227432.png" alt="Hive中查看"></p><h2 id="3-3-Import-all-tables-command"><a href="#3-3-Import-all-tables-command" class="headerlink" title="3.3 Import-all-tables command"></a>3.3 Import-all-tables command</h2><blockquote><p>如果要使用 <code>import-all-tables</code> 指令, 则所有表都要有主键, 不然会报错</p></blockquote><p>将 MySQL 中的所有表 <code>import</code> 到指定路径</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import-all-tables \</span><br><span class="line"> --connect jdbc:mysql://127.0.0.1:3306/test \</span><br><span class="line"> --username root --P</span><br></pre></td></tr></table></figure><p>将除了指定的几个表以外的其他表都 <code>import</code> 到指定路径</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import-all-tables \</span><br><span class="line"> --connect jdbc:mysql://127.0.0.1:3306/test \</span><br><span class="line"> --username root --P \</span><br><span class="line"> --exclude-tables &lt;table1&gt;,&lt;tables2&gt;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import-all-tables \</span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://127.0.0.1:3306/test \</span><br><span class="line"> </span><br><span class="line"> --username root --P \</span><br><span class="line"> </span><br><span class="line"> --exclude-tables &lt;table1&gt;,&lt;tables2&gt;</span><br><span class="line"> <span class="comment"># --exclude-tables 指的是除了哪几张表, 不过一般都是把没有主键的表刨掉不然会报错</span></span><br><span class="line"> <span class="comment"># --exclude-tables 只能运行在 import-all-tables 指令中</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230301203803001.png" alt="没有主键的话会报这个错"></p><h2 id="3-4-Other-Import"><a href="#3-4-Other-Import" class="headerlink" title="3.4 Other Import"></a>3.4 Other Import</h2><h3 id="3-4-1-Compress-Import"><a href="#3-4-1-Compress-Import" class="headerlink" title="3.4.1 Compress Import"></a>3.4.1 Compress Import</h3><blockquote><p>压缩导入</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> --table stu_per \</span><br><span class="line"> --compress \</span><br><span class="line"> --compression-codec org.apache.hadoop.io.compress.BZip2Codec</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \<span class="comment"># 压缩路径为 MapReduce 下的 /user/root</span></span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> </span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> </span><br><span class="line"> --table stu_per \</span><br><span class="line"> </span><br><span class="line"> --compress \<span class="comment"># 压缩导入标识</span></span><br><span class="line"> </span><br><span class="line"> --compression-codec org.apache.hadoop.io.compress.BZip2Codec<span class="comment"># 压缩格式</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230405193846612.png" alt="压缩位置"></p><h3 id="3-4-2-Bulk-Import"><a href="#3-4-2-Bulk-Import" class="headerlink" title="3.4.2 Bulk Import"></a>3.4.2 Bulk Import</h3><blockquote><p>快速导入</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> --table stu_per \</span><br><span class="line"> --direct</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \<span class="comment"># 导入的表名会和压缩导入冲突, 要改名或者删除才能继续导入。导入方式不同，引擎不同</span></span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> </span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> </span><br><span class="line"> --table stu_per \</span><br><span class="line"> </span><br><span class="line"> --direct<span class="comment"># 快速导入标识</span></span><br></pre></td></tr></table></figure><h3 id="3-4-3-Incremental-Import"><a href="#3-4-3-Incremental-Import" class="headerlink" title="3.4.3 Incremental Import"></a>3.4.3 Incremental Import</h3><blockquote><p>增量导入</p></blockquote><p>我们已经将表导入后，又更新了这个表，还想把这个新表导入</p><p>但是再导入之前已经有的那些数据会浪费资源，这时候我们就要用增量导入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> --table stu_coll \</span><br><span class="line"> --incremental append \</span><br><span class="line"> --check-column <span class="built_in">id</span> \</span><br><span class="line"> --last-value 1</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \<span class="comment"># 增量导入不会与快速/压缩导入产生文件名冲突，如果重名了就再创建一个新的同名文件</span></span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> --table stu_coll \</span><br><span class="line"> --incremental append \</span><br><span class="line"> --check-column <span class="built_in">id</span> \<span class="comment"># 根据这行的参数判断是否产生增量</span></span><br><span class="line"> --last-value 1</span><br></pre></td></tr></table></figure><h3 id="3-4-4-Custom-Boundary-Query-Import"><a href="#3-4-4-Custom-Boundary-Query-Import" class="headerlink" title="3.4.4 Custom Boundary Query Import"></a>3.4.4 Custom Boundary Query Import</h3><blockquote><p>自定义边界查询导入</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> --query <span class="string">&#x27;select a.id, stu_coll.major, stu_coll.job from stu_per a join stu_coll using(id) where $CONDITIONS&#x27;</span> \</span><br><span class="line"> --split-by <span class="built_in">id</span> \</span><br><span class="line"> --target-dir /bd31 \</span><br><span class="line"> --boundary-query <span class="string">&#x27;select min(id), max(id) from stu_per&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \</span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> </span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> </span><br><span class="line"> --query <span class="string">&#x27;select a.id, stu_coll.major, stu_coll.job from stu_per a join stu_coll using(id) where $CONDITIONS&#x27;</span> \<span class="comment"># 先进行一个查询</span></span><br><span class="line"> </span><br><span class="line"> --split-by <span class="built_in">id</span> \</span><br><span class="line"> </span><br><span class="line"> --target-dir /bd31 \</span><br><span class="line"> </span><br><span class="line"> --boundary-query <span class="string">&#x27;select min(id), max(id) from stu_per&#x27;</span><span class="comment">#确定边界值（包括边界值）</span></span><br></pre></td></tr></table></figure><h2 id="3-5-File-Import"><a href="#3-5-File-Import" class="headerlink" title="3.5 File Import"></a>3.5 File Import</h2><blockquote><p>各种类型的文件导入</p></blockquote><h3 id="3-5-1-Sqoop-data-in-text-file-format"><a href="#3-5-1-Sqoop-data-in-text-file-format" class="headerlink" title="3.5.1 Sqoop data in text file format"></a>3.5.1 Sqoop data in text file format</h3><blockquote><p>导入为 <code>.txt</code> 文件格式</p></blockquote><p>将 Windows MySQL 中的表以 <code>.txt</code> 文件的格式存储在 HDFS 中（这里用的是 MapReduce）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password 123456 \ </span><br><span class="line"> --query <span class="string">&#x27;select * from ttable WHERE $CONDITIONS&#x27;</span> \</span><br><span class="line"> --m 2 \</span><br><span class="line"> --as-textfile \</span><br><span class="line"> --target-dir /bd3/tbl \</span><br><span class="line"> --split-by <span class="built_in">id</span> \</span><br><span class="line"> --fields-terminated-by <span class="string">&#x27;,&#x27;</span> \</span><br><span class="line"> --lines-terminated-by <span class="string">&#x27; &#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \</span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> </span><br><span class="line"> --username root --password 123456 \ </span><br><span class="line"> </span><br><span class="line"> --query <span class="string">&#x27;select * from ttable WHERE $CONDITIONS&#x27;</span> \</span><br><span class="line"> </span><br><span class="line"> --m 2 \</span><br><span class="line"> </span><br><span class="line"> --as-textfile \<span class="comment"># 导入为 .txt 文件的标识</span></span><br><span class="line"> </span><br><span class="line"> --target-dir /bd3/tbl \ <span class="comment"># MapReduce 的路径</span></span><br><span class="line"> </span><br><span class="line"> --split-by <span class="built_in">id</span> \</span><br><span class="line"> </span><br><span class="line"> --fields-terminated-by <span class="string">&#x27;,&#x27;</span> \<span class="comment"># 用什么字符来做每列的间隔符（这里是逗号）</span></span><br><span class="line"> </span><br><span class="line"> --lines-terminated-by <span class="string">&#x27; &#x27;</span><span class="comment"># 用什么字符来做每行的间隔符（这里是空格）</span></span><br><span class="line"> <span class="comment"># 不能是空的, 但是可以是空格</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hdfs dfs -<span class="built_in">ls</span> /test/tbl</span><br><span class="line">$ hadoop fs -text hdfs_path &gt; local_file.txt</span><br></pre></td></tr></table></figure><p>在 Hive 中的建表，必须要与 <code>.txt</code> 文件的类型相同</p><p>根据数据选择数据类型</p><p>Windows Linux 用 load</p><p>在 hdfs 中了已经, 就用 location </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create external table ttable(id int, name string) row format delimited fields terminated by &#x27;,&#x27; location &#x27;/bd3/tbl&#x27;;</span><br></pre></td></tr></table></figure><h3 id="3-5-2-Sqoop-Data-in-Avro-file-format"><a href="#3-5-2-Sqoop-Data-in-Avro-file-format" class="headerlink" title="3.5.2 Sqoop Data in Avro file format"></a>3.5.2 Sqoop Data in Avro file format</h3><blockquote><p>导入为 <code>.avro</code> 文件格式</p></blockquote><p>avrofile </p><p>avro 文件包含可用于将数据集拆分为适合 MapReduce 处理的子集的标记</p><p>一些数据交换服务使用代码声测好难过器来解释数据定义并生成代码来访问数据, 但avro 不需要这一步, 因此非常适合脚本语言</p><p>avro() - 表数据</p><p>avsc(Linux) - 表结构</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root -password 123456 \</span><br><span class="line"> --query <span class="string">&#x27;select * from stu_coll where $CONDITIONS&#x27;</span> \</span><br><span class="line"> --m 3 \</span><br><span class="line"> --split-by <span class="built_in">id</span> \</span><br><span class="line"> --as-avrodatafile \</span><br><span class="line"> --outdir /tools/tblA \</span><br><span class="line"> --target-dir /test/tblA</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \</span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> </span><br><span class="line"> --username root -password 123456 \</span><br><span class="line"> </span><br><span class="line"> --query <span class="string">&#x27;select * from stu_coll where $CONDITIONS&#x27;</span> \</span><br><span class="line"> </span><br><span class="line"> --m 3 \</span><br><span class="line"> </span><br><span class="line"> --split-by <span class="built_in">id</span> \</span><br><span class="line"> </span><br><span class="line"> --as-avrodatafile \<span class="comment"># 导入为 .avro 文件的标识</span></span><br><span class="line"> </span><br><span class="line"> --outdir /tools/tblA \<span class="comment"># 输出路径 (Linux 路径)为 /tools/tblA, 这里的 tblA 文件夹是自动生成的</span></span><br><span class="line"> <span class="comment"># 参数是 --outdir，所以路径是文件夹</span></span><br><span class="line"> </span><br><span class="line"> --target-dir /test/tblA<span class="comment"># MapReduce 中的输出路径</span></span><br></pre></td></tr></table></figure><p>在 HDFS 中检查文件内容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> /tools/tblA/QueryResult.avsc</span><br><span class="line">$ hdfs dfs -<span class="built_in">cat</span> /test/tblA/part-m-00000.avro</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> /tools/tblA/QueryResult.avsc<span class="comment"># avcs = avro schema</span></span><br><span class="line"><span class="comment"># 读取 Linux 中的 avsc 文件</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ hdfs dfs -<span class="built_in">cat</span> /test/tblA/part-m-00000.avro</span><br><span class="line"><span class="comment"># 读取 HDFS 中的 avro 文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行成功上面的序列化指令后会生成两个文件, 一个是 Linux 中的 avsc 文件, 一个是 HDFS 中的 avro 文件</span></span><br><span class="line"><span class="comment"># 这里的两个指令是用来读取 avsc 这个序列化文件, 查看表的结构</span></span><br><span class="line"><span class="comment"># avro 文件是用来反序列化解密的文件</span></span><br></pre></td></tr></table></figure><p>创建适配 <code>.avro</code> 文件的 Hive 表</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create external table tbla </span><br><span class="line">row format SERDE &#x27;org.apache.hadoop.hive.serde2.avro.AvroSerDe&#x27; </span><br><span class="line">stored as </span><br><span class="line">INPUTFORMAT &#x27;org.apache.hadoop.hive.ql.io.avro.AvroContainerInputFormat&#x27; </span><br><span class="line">OUTPUTFORMAT &#x27;org.apache.hadoop.hive.ql.io.avro.AvroContainerOutputFormat&#x27; </span><br><span class="line">location &#x27;/test/tblA&#x27; </span><br><span class="line">TBLPROPERTIES (&#x27;avro.schema.url&#x27;=&#x27;file:///tools/tblA/QueryResult.avsc&#x27;);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">create external table tbla      # 建表, 这里就不用属性分隔符了</span><br><span class="line"></span><br><span class="line">row format SERDE &#x27;org.apache.hadoop.hive.serde2.avro.AvroSerDe&#x27; # 反序列化格式包</span><br><span class="line"></span><br><span class="line">stored as </span><br><span class="line"></span><br><span class="line">INPUTFORMAT &#x27;org.apache.hadoop.hive.ql.io.avro.AvroContainerInputFormat&#x27; # 输入格式包</span><br><span class="line"></span><br><span class="line">OUTPUTFORMAT &#x27;org.apache.hadoop.hive.ql.io.avro.AvroContainerOutputFormat&#x27; # 输出格式包</span><br><span class="line"></span><br><span class="line">location &#x27;/test/tblA&#x27; # HDFS 中的存储路径</span><br><span class="line"></span><br><span class="line">TBLPROPERTIES (&#x27;avro.schema.url&#x27;=&#x27;file:///tools/tblA/QueryResult.avsc&#x27;); # Linux 中的存储路径</span><br></pre></td></tr></table></figure><h3 id="3-5-3-Sqoop-Data-in-Parquet-File-Format"><a href="#3-5-3-Sqoop-Data-in-Parquet-File-Format" class="headerlink" title="3.5.3 Sqoop Data in Parquet File Format"></a>3.5.3 Sqoop Data in Parquet File Format</h3><blockquote><p>导入为 <code>.parquet</code> 文件格式</p></blockquote><p>parquetfile</p><p>它是一种开源的, 面向列的数据文件格式, 专为游戏哦啊的数据存储 和检索而设计, 它提供高效的数据压缩和编码方案, 据欧增强</p><p>不可以使用 -query, 只能用 -table 表名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> --table stu_coll \</span><br><span class="line"> --m 3 \</span><br><span class="line"> --split-by <span class="built_in">id</span> \</span><br><span class="line"> --as-parquetfile \</span><br><span class="line"> --outdir /tools/tblP \</span><br><span class="line"> --target-dir /test/tblP</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \</span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> </span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> </span><br><span class="line"> --table stu_coll \</span><br><span class="line"> </span><br><span class="line"> --m 3 \</span><br><span class="line"> </span><br><span class="line"> --split-by <span class="built_in">id</span> \</span><br><span class="line"> </span><br><span class="line"> --as-parquetfile \</span><br><span class="line"> </span><br><span class="line"> --outdir /tools/tblP \</span><br><span class="line"> </span><br><span class="line"> --target-dir /test/tblP</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create external table tblP(id int, age int, city string) row format delimited fields terminated by &#x27;,&#x27; stored as parquetfile location &#x27;/test/tblP&#x27;;</span><br></pre></td></tr></table></figure><h3 id="3-5-4-Sqoop-Data-in-Sequential-File-format"><a href="#3-5-4-Sqoop-Data-in-Sequential-File-format" class="headerlink" title="3.5.4 Sqoop Data in Sequential File format"></a>3.5.4 Sqoop Data in Sequential File format</h3><blockquote><p>导入为二进制文件格式</p></blockquote><p>sequence 文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \</span><br><span class="line"> --connect jdbc:mysql://localhost:3306/test \</span><br><span class="line"> --username root -password 123456 \</span><br><span class="line"> --table ttable2 \</span><br><span class="line"> --m 3 \</span><br><span class="line"> --split-by <span class="built_in">id</span> \</span><br><span class="line"> --as-sequencefile \</span><br><span class="line"> --outdir /tools/tblS \</span><br><span class="line"> --target-dir /test/tblS</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \</span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://localhost:3306/test \</span><br><span class="line"> </span><br><span class="line"> --username root -password 123456 \</span><br><span class="line"> </span><br><span class="line"> --table ttable2 \</span><br><span class="line"> </span><br><span class="line"> --m 3 \</span><br><span class="line"> </span><br><span class="line"> --split-by <span class="built_in">id</span> \</span><br><span class="line"> </span><br><span class="line"> --as-sequencefile \</span><br><span class="line"> </span><br><span class="line"> --outdir /tools/tblS \</span><br><span class="line"> </span><br><span class="line"> --target-dir /test/tblS</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create external table tblS(id int, age int, city string) row format delimited fields terminated by &#x27;,&#x27; stored as sequencefile location &#x27;/test/tblS&#x27;;</span><br></pre></td></tr></table></figure><h2 id="3-6-Import-subset-of-RDBMS-Table-to-HDFS"><a href="#3-6-Import-subset-of-RDBMS-Table-to-HDFS" class="headerlink" title="3.6 Import subset of RDBMS Table to HDFS"></a>3.6 Import subset of RDBMS Table to HDFS</h2><blockquote><p>将 RDBMS 表的子集 <code>import</code> 到 HDFS</p></blockquote><h3 id="3-6-1-Import-partial-columns"><a href="#3-6-1-Import-partial-columns" class="headerlink" title="3.6.1 Import partial columns"></a>3.6.1 Import partial columns</h3><blockquote><p>导入部分列</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import -connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root -password dcef1396dnf \</span><br><span class="line"> --table emp \</span><br><span class="line"> --columns name,<span class="built_in">id</span>,dept \</span><br><span class="line"> --hive-import \</span><br><span class="line"> --hive-table niitbd3.emp \</span><br><span class="line"> --target-dir /sqoopIquery \</span><br><span class="line"> --m 1</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import -connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"></span><br><span class="line"> --username root -password dcef1396dnf \</span><br><span class="line"> </span><br><span class="line"> --table emp \</span><br><span class="line"> </span><br><span class="line"> --columns name,<span class="built_in">id</span>,dept \<span class="comment"># 往 Hive 中 import MySQL 中的部分列, &#x27;,&#x27; 后面不能有空格</span></span><br><span class="line"> </span><br><span class="line"> --hive-import \</span><br><span class="line"> </span><br><span class="line"> --hive-table niitbd3.emp \</span><br><span class="line"> <span class="comment"># 使用了 -hive-table, 下面的 mapper 文件 import 后会自动删除</span></span><br><span class="line"> </span><br><span class="line"> --target-dir /sqoopIquery \</span><br><span class="line"> <span class="comment"># 数据会被以 TXT 文件写入 MapReduce 中这个路径下的的 mapper 文件, 默认文件类型就是 TXT</span></span><br><span class="line"> </span><br><span class="line"> --m 1</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230309173208439.png" alt="Sqoop 指令执行成功"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230309173249058.png" alt="成功 import"></p><h3 id="3-6-2-Import-data-via-custom-query-statement-using-–-query-option"><a href="#3-6-2-Import-data-via-custom-query-statement-using-–-query-option" class="headerlink" title="3.6.2 Import data via custom query statement using –-query option"></a>3.6.2 Import data via custom query statement using –-query option</h3><blockquote><p>使用  <code>--query</code> 选项通过自定义查询语句导入数据</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import -connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root -password 123456 \</span><br><span class="line"> --query <span class="string">&#x27;select a.name, a.salary, b.street from emp a join emp_addr b on a.id = b.id where $CONDITIONS and a.salary &gt;= 30000 &#x27;</span> \</span><br><span class="line"> --hive-import \</span><br><span class="line"> --hive-table niitbd3.empS \</span><br><span class="line"> --target-dir /sqoopIquery \</span><br><span class="line"> --m 1</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import -connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"></span><br><span class="line"> --username root -password 123456 \</span><br><span class="line"> </span><br><span class="line"> --query <span class="string">&#x27;select a.name, a.salary, b.street from emp a join emp_addr b on a.id = b.id where $CONDITIONS and a.salary &gt;= 30000 &#x27;</span> \</span><br><span class="line"> <span class="comment"># 在 $CONDITION 后面添加 and 约束</span></span><br><span class="line"> </span><br><span class="line"> --hive-import \</span><br><span class="line"> </span><br><span class="line"> --hive-table niitbd3.empS \</span><br><span class="line"> <span class="comment"># 使用了 -hive-table, 下面的 mapper 文件 import 后会自动删除</span></span><br><span class="line"> </span><br><span class="line"> --target-dir /sqoopIquery \</span><br><span class="line"> </span><br><span class="line"> --m 1</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230309174308716.png" alt="Sqoop 指令执行成功"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230309174323983.png" alt="成功 import"></p><h3 id="3-6-3-Incremental-Import"><a href="#3-6-3-Incremental-Import" class="headerlink" title="3.6.3 Incremental Import"></a>3.6.3 Incremental Import</h3><blockquote><p>增量导入, 将表中新增的行进行单独导入</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root -password 123456 \</span><br><span class="line"> --table emp \</span><br><span class="line"> --incremental append \</span><br><span class="line"> --check-column <span class="built_in">id</span> \</span><br><span class="line"> --last-value 1105 \</span><br><span class="line"> --target-dir /sqoopIquery \</span><br><span class="line"> --m 1</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \</span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> </span><br><span class="line"> --username root -password 123456 \</span><br><span class="line"> </span><br><span class="line"> --table emp \</span><br><span class="line"> </span><br><span class="line"> --incremental append \<span class="comment"># append, 表示增量导入</span></span><br><span class="line"> </span><br><span class="line"> --check-column <span class="built_in">id</span> \<span class="comment"># 指定基准列</span></span><br><span class="line"> </span><br><span class="line"> --last-value 1105 \<span class="comment"># 指定最后的数据 (即基准列值为 1105 后的所有数据都会被视为新数据)</span></span><br><span class="line"> <span class="comment"># 没有使用 --hive-table, 下面的 mapper 文件 import 后不会自动删除, 数据就存在 mapper 文件里</span></span><br><span class="line"> </span><br><span class="line"> --target-dir /sqoopIquery \</span><br><span class="line"> </span><br><span class="line"> --m 1</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230309175001139.png" alt="Sqoop 指令执行成功"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230309175100100.png" alt="mapper 文件不会删除"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230309175217069.png" alt="数据存在 mapper 文件中"></p><h3 id="3-6-4-Incremental-data-import-using-lastmodified-mode"><a href="#3-6-4-Incremental-data-import-using-lastmodified-mode" class="headerlink" title="3.6.4 Incremental data import using lastmodified mode"></a>3.6.4 Incremental data import using lastmodified mode</h3><blockquote><p>使用 <code>lastmodified</code> 模式增量数据导入</p></blockquote><blockquote><p><code>lastmodified</code> 模式会指定最后修改时间, 这个时间之后的数据都是新数据</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import -connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root -password 123456 \</span><br><span class="line"> --table emp \</span><br><span class="line"> --incremental lastmodified \</span><br><span class="line"> --check-column hire_date -last-value <span class="string">&#x27;2019-05-02&#x27;</span> \</span><br><span class="line"> --target-dir /sqoopIquery \</span><br><span class="line"> --m 1 \</span><br><span class="line"> --append</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import -connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"></span><br><span class="line"> --username root -password 123456 \</span><br><span class="line"> </span><br><span class="line"> --table emp \</span><br><span class="line"> </span><br><span class="line"> --incremental lastmodified \<span class="comment"># 使用 lastmodified 模式进行增量导入</span></span><br><span class="line"> </span><br><span class="line"> --check-column hire_date -last-value <span class="string">&#x27;2019-05-02&#x27;</span> \</span><br><span class="line"> <span class="comment"># --last-value 会设置一个最后修改时间, 在这个时间之后的数据都是新数据</span></span><br><span class="line"> <span class="comment"># 没有使用 --hive-table, 下面的 mapper 文件 import 后不会自动删除, 数据就存在 mapper 文件里</span></span><br><span class="line"> </span><br><span class="line"> --target-dir /sqoopIquery \</span><br><span class="line"> </span><br><span class="line"> --m 1 \</span><br><span class="line"> </span><br><span class="line"> --append<span class="comment"># 增量导入标识</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230309175706909.png" alt="Sqoop 指令执行成功"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230309180059301.png" alt="查看 mapper 文件"></p><h3 id="3-6-5-Use-–merge-key-option-to-import"><a href="#3-6-5-Use-–merge-key-option-to-import" class="headerlink" title="3.6.5 Use –merge-key option to import"></a>3.6.5 Use –merge-key option to import</h3><blockquote><p>使用 <code>--merge-key</code> 选项导入</p></blockquote><blockquote><p><code>--merge-key</code> 表示将 MapReduce 中指定路径下的所有相同 key 的 <code>part-m-%</code> 文件合并为一个 <code>part-r-%</code> 文件</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import -connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root -password 123456 \</span><br><span class="line"> --table emp \</span><br><span class="line"> --incremental lastmodified \</span><br><span class="line"> --check-column hire_date -last-value <span class="string">&#x27;2019-05-02&#x27;</span> \</span><br><span class="line"> --target-dir /sqoopIquery \</span><br><span class="line"> --m 1 \</span><br><span class="line"> --merge-key <span class="built_in">id</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import -connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"></span><br><span class="line"> --username root -password 123456 \</span><br><span class="line"> </span><br><span class="line"> --table emp \</span><br><span class="line"> </span><br><span class="line"> --incremental lastmodified \</span><br><span class="line"> </span><br><span class="line"> --check-column hire_date -last-value <span class="string">&#x27;2019-05-02&#x27;</span> \</span><br><span class="line"> </span><br><span class="line"> --target-dir /sqoopIquery \</span><br><span class="line"> </span><br><span class="line"> --m 1 \</span><br><span class="line"> </span><br><span class="line"> --merge-key <span class="built_in">id</span><span class="comment"># 指定 key</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230309190345921.png" alt="Sqoop 指令执行成功"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230309190409173.png" alt="mapper 文件合并"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230309190457839.png" alt="内容合并"></p><h1 id="四、Sqoop-export-工具"><a href="#四、Sqoop-export-工具" class="headerlink" title="四、Sqoop export 工具"></a>四、Sqoop export 工具</h1><h2 id="4-1-Exporting-data-from-HDFS-to-MySQL"><a href="#4-1-Exporting-data-from-HDFS-to-MySQL" class="headerlink" title="4.1 Exporting data from HDFS to MySQL"></a>4.1 Exporting data from HDFS to MySQL</h2><blockquote><p>将数据从 HDFS <code>export</code>到 RDBMS</p></blockquote><p>启动 Hadoop</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ start-all.sh</span><br></pre></td></tr></table></figure><p>启动 Hive</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hive</span><br></pre></td></tr></table></figure><p>进入 Hive 中的数据库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use niitbd3;</span><br></pre></td></tr></table></figure><p>在 Hive 中创建表</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create table export_test(name string, age int, city string) row format delimited fields terminated by &#x27;,&#x27;;</span><br></pre></td></tr></table></figure><p>在 Hive 中插入数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into export_test values(‘Andrew’, 20, ‘HaiKou’);</span><br></pre></td></tr></table></figure><p>启动 MySQL, 新开一个窗口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mysql -u root -p</span><br></pre></td></tr></table></figure><p>进入 MySQL 中的数据库</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use niit;</span><br></pre></td></tr></table></figure><p>在 MySQL 中新建表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> export_test(name <span class="type">varchar</span>(<span class="number">64</span>), age <span class="type">int</span>, city <span class="type">varchar</span>(<span class="number">64</span>));</span><br></pre></td></tr></table></figure><p>在 Hadoop 上运行下列命令 ( Sqoop 指令), 另开一个窗口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop <span class="built_in">export</span> \</span><br><span class="line"> --connect jdbc:mysql://127.0.0.1:3306/niit \</span><br><span class="line"> --table export_test \</span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> --export-dir /user/hive/warehouse/niitbd3.db/export_test \</span><br><span class="line"> --m 1 \</span><br><span class="line"> --driver com.mysql.jdbc.Driver \</span><br><span class="line"> --input-fields-terminated-by <span class="string">&#x27;,&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop <span class="built_in">export</span> --connect \</span><br><span class="line"></span><br><span class="line">jdbc:mysql://127.0.0.1:3306/niit \<span class="comment"># 要 export 到的 MySQL 的数据库名</span></span><br><span class="line"></span><br><span class="line"> --table export_test \</span><br><span class="line"> </span><br><span class="line"> --username root --password 123456 \<span class="comment"># MySQL 用户名和密码</span></span><br><span class="line"> </span><br><span class="line"> --export-dir /user/hive/warehouse/niitbd3.db/export_test \</span><br><span class="line"> <span class="comment"># /user/hive/warehouse/要export的Hive的数据库名.db/要export的Hive的表名</span></span><br><span class="line"> <span class="comment"># /user/hive/warehouse 不能动, 这是 MapReduce 的文件下的目录</span></span><br><span class="line"> <span class="comment"># .db 也是同理, MapReduce 中的数据库文件后缀就是 .db</span></span><br><span class="line"> </span><br><span class="line"> --m 1 \</span><br><span class="line"> </span><br><span class="line"> --driver com.mysql.jdbc.Driver \<span class="comment"># 驱动器</span></span><br><span class="line"> </span><br><span class="line"> --input-fields-terminated-by <span class="string">&#x27;,&#x27;</span><span class="comment"># 分隔符</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230223170759444.png" alt="Sqoop 中执行成功"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230223170833414.png" alt="MySQL 中检查成功"></p><h2 id="4-2-Export-data-to-Windows-MySQL"><a href="#4-2-Export-data-to-Windows-MySQL" class="headerlink" title="4.2 Export data to Windows MySQL"></a>4.2 Export data to Windows MySQL</h2><blockquote><p>将 Linux 中 HDFS 的数据转到 Windows 中的 MySQL</p></blockquote><p>先在 MySQL 中键入以下语句</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">USE mysql; # 这个表是 mysql 自带的, 里面是用户信息之类的, 不用自己创建, 直接 use 进去就好</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;192.168.1.130&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;dcef1396dnf&#x27;</span> ;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;192.168.1.130&#x27;</span>;</span><br><span class="line">FLUSH PRIVILEGES; # 授予全部权限</span><br></pre></td></tr></table></figure><p>上面语句的解释</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">USE mysql;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;Linux 的 IP 地址&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;Windows 中 mysql 的密码&#x27;</span> ;</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;Linux 的 IP 地址&#x27;</span>;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><p>在 Hive 中创建表并插入数据</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use niitbd3;</span><br><span class="line">create table export_test (name string, age int, city string);</span><br></pre></td></tr></table></figure><p>在 MySQL 中创建表，格式要跟 Hive 中要 export 出来的表一样</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database test;</span><br><span class="line">use test;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> stu(name <span class="type">varchar</span>(<span class="number">64</span>), age <span class="type">int</span>, city <span class="type">varchar</span>(<span class="number">64</span>));</span><br></pre></td></tr></table></figure><p>在 Hadoop 中执行 sqoop 指令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop <span class="built_in">export</span> \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --table stu \</span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> --export-dir /user/hive/warehouse/niitbd3.db/export_test \</span><br><span class="line"> --m 1 \</span><br><span class="line"> --driver com.mysql.jdbc.Driver \</span><br><span class="line"> --input-fields-terminated-by <span class="string">&#x27;,&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop <span class="built_in">export</span> \</span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> <span class="comment"># jdbc:mysql://192.168.1.1:Windows_MySQL_端口号/Windows_MySQL_数据库名</span></span><br><span class="line"> <span class="comment"># 我自己的 MySQL8.0 端口用的是 3305, 3306是 5.7</span></span><br><span class="line"> <span class="comment"># 这个 Windows_MySQL_端口号 必定是 192.168._.1, 最后一个位只能是 1</span></span><br><span class="line"></span><br><span class="line"> --table stu \<span class="comment">#  Windows 中 MySQL 的表名</span></span><br><span class="line"> </span><br><span class="line"> --username root --password 123456 \<span class="comment"># Windows 中 MySQL 的密码</span></span><br><span class="line"> </span><br><span class="line"> --export-dir /user/hive/warehouse/niitbd3.db/export_test \</span><br><span class="line"> <span class="comment">#  /user/hive/warehouse/Linux_Hive_数据库.db/Linux_Hive_表名</span></span><br><span class="line"> </span><br><span class="line"> --m 1 \<span class="comment"># 启动几个 MapReduce</span></span><br><span class="line"> </span><br><span class="line"> --driver com.mysql.jdbc.Driver \<span class="comment"># 驱动器</span></span><br><span class="line"> </span><br><span class="line"> --input-fields-terminated-by <span class="string">&#x27;,&#x27;</span><span class="comment"># Hive 中的逗号分隔符</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230301103508065.png" alt="sqoop 执行成功"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230301103630536.png" alt="MySQL中export成功"></p><h2 id="4-3-Simple-Export-from-HDFS-txt-to-MySQL-table"><a href="#4-3-Simple-Export-from-HDFS-txt-to-MySQL-table" class="headerlink" title="4.3 Simple Export from HDFS txt to MySQL table"></a>4.3 Simple Export from HDFS txt to MySQL table</h2><blockquote><p>将 HDFS 中的 <code>.txt</code> 文件 <code>export</code> 到 MySQL 中</p></blockquote><p>先来建两个 <code>.txt</code> 文件, 然后 copy 到虚拟机里</p><p><code>cust1.txt</code></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cust001,Sumit Kumar,sumit@hotmail.com,+91-1111122222,Patna,BR</span><br><span class="line">cust002,Debopam Mitra,dev@hotmail.com,+91-9999988888,Siliguri,WB</span><br><span class="line">cust003,Neha Ladia,neha@hotmail.com,+91-8777799999,Siliguri,WB</span><br></pre></td></tr></table></figure><p><code>cust2.txt</code></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cust004,Madhuri Achanala,madhuri@hotmail.com,+91-1234123412,Bengaluru,KA</span><br><span class="line">cust005,Anjana Sharma,anjana@hotmail.com,+91-8989898989,Bengaluru,KA</span><br><span class="line">cust006,Rohit Shankla,rohit@hotmail.com,+91-3232325454,Jaipur,RJ</span><br><span class="line">cust007,Pradeep Patidar,pradeep@hotmail.com,+91-1200120000,Indore,MP</span><br></pre></td></tr></table></figure><p>在 MySQL 中建表, 数据类型要与 <code>.txt</code> 文件中的类型相同</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tbl_export_customers(</span><br><span class="line">    customerid <span class="type">varchar</span>(<span class="number">50</span>),</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">50</span>),</span><br><span class="line">    email <span class="type">varchar</span>(<span class="number">50</span>),</span><br><span class="line">    phoneno <span class="type">varchar</span>(<span class="number">50</span>),</span><br><span class="line">    city <span class="type">varchar</span>(<span class="number">50</span>),</span><br><span class="line">    state <span class="type">varchar</span>(<span class="number">50</span>),</span><br><span class="line">    <span class="keyword">Primary</span> Key(customerid)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>然后在 HDFS 中创建目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hdfs dfs -<span class="built_in">mkdir</span> /sqoop</span><br><span class="line">$ hdfs dfs -<span class="built_in">mkdir</span> /sqoop/data</span><br></pre></td></tr></table></figure><p>把 Linux 中的 <code>.txt</code> 文件 copy 进 HDFS</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hdfs dfs -put /tools/sqoop_export_test/cust1.txt /sqoop/data</span><br><span class="line">$ hdfs dfs -put /tools/sqoop_export_test/cust2.txt /sqoop/data</span><br></pre></td></tr></table></figure><p>sqoop <code>export</code> 指令</p><blockquote><p>这个指令没有另外两个参数, 但是可能会导致 export 之后的表中的数据属性对应不上</p><p>原因是因为 .txt 文件不是二进制文件, 而用来处理的 mapper 文件是二进制文件, 就可能会导致这个错误</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-export \</span><br><span class="line">--connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line">--username root --password 123456 \</span><br><span class="line">--table tbl_export_customers \</span><br><span class="line">--export-dir /sqoop/data \</span><br><span class="line">--m 1</span><br></pre></td></tr></table></figure><blockquote><p>加上 <code>--columns</code> 参数, 这样就可以把属性分开, 不会出现上面的错误</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-export \</span><br><span class="line">--connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line">--username root --password 123456 \</span><br><span class="line">--table tbl_export_customers \</span><br><span class="line">--export-dir /sqoop/data \</span><br><span class="line">--m 1 \</span><br><span class="line">--columns <span class="string">&#x27;customerid,name,email,phoneno,city,state&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><p><code>--validate</code> 参数会在执行完指令之后的最后一行返回 <code>data successfully validated</code>, 这样就不用再特意去 MySQL 中验证了</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-export \</span><br><span class="line">--connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line">--username root --password 123456 \</span><br><span class="line">--table tbl_export_customers \</span><br><span class="line">--export-dir /sqoop/data \</span><br><span class="line">--m 1 \</span><br><span class="line">--columns <span class="string">&#x27;customerid,name,email,phoneno,city,state&#x27;</span> \</span><br><span class="line">-–validate</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-export \<span class="comment"># export</span></span><br><span class="line">--connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line">--username root --password 123456 \</span><br><span class="line">--table tbl_export_customers \</span><br><span class="line">--export-dir /sqoop/data \</span><br><span class="line"><span class="comment"># 这里不能写 /sqoop/data/cust1.txt, 因为 --export-dir 接收的是一个 directory, 不是一个 file</span></span><br><span class="line"><span class="comment"># 所以就只能把这个目录下所有的文件全都 export 了, 现在都是默认有主键, 没有主键还搞什么大数据</span></span><br><span class="line">--m 1 \<span class="comment"># 一个 mapper</span></span><br><span class="line">--columns <span class="string">&#x27;customerid,name,email,phoneno,city,state&#x27;</span> \<span class="comment"># 分隔属性</span></span><br><span class="line">-–validate<span class="comment"># 验证</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230329090510784.png" alt="运行成功"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230329090532646.png" alt="mysql 中查询"></p><h2 id="4-4-Export-from-HDFS-txt-to-MySQL-table-after-updateion-in-txt-file-on-HDFS-On-Linux"><a href="#4-4-Export-from-HDFS-txt-to-MySQL-table-after-updateion-in-txt-file-on-HDFS-On-Linux" class="headerlink" title="4.4 Export from HDFS txt to MySQL table after updateion in txt file on HDFS On Linux"></a>4.4 Export from HDFS txt to MySQL table after updateion in txt file on HDFS On Linux</h2><blockquote><p>将 HDFS 中的文件更新后 <code>export</code> 到 MySQL 中</p></blockquote><p>我们不能通过以下指令直接更新 HDFS 中的 <code>.txt</code> 文件, 只能通过更新操作来修改</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hdfs dfs -vi /sqoop/cust1.txt</span><br></pre></td></tr></table></figure><p>把 Linux 中的 <code>.txt</code> 文件修改一下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /tools/sqoop_export_test/cust1.txt</span><br></pre></td></tr></table></figure><p>在 HDFS 中创建目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hdfs dfs -<span class="built_in">mkdir</span> /sqoop_updated</span><br></pre></td></tr></table></figure><p>将修改后的 <code>.txt</code> 文件 <code>put</code> 进 HDFS 的新建文件夹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hdfs dfs -put /tools/cust1.txt /sqoop_updated</span><br></pre></td></tr></table></figure><p>执行 sqoop 指令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-export \</span><br><span class="line">--connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line">--username root \</span><br><span class="line">--password 123456 \</span><br><span class="line">--table tbl_export_customers \</span><br><span class="line">--export-dir /sqoop_updated \</span><br><span class="line">--update-key customerid \</span><br><span class="line">--m 1 \</span><br><span class="line">--update-mode alowinsert \</span><br><span class="line">--columns <span class="string">&#x27;customerid,name,email,phoneno,city,state&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-export \</span><br><span class="line"></span><br><span class="line">--connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"></span><br><span class="line">--username root \</span><br><span class="line"></span><br><span class="line">--password 123456 \</span><br><span class="line"></span><br><span class="line">--table tbl_export_customers \<span class="comment"># 要更新 MySQL 中的哪个表</span></span><br><span class="line"></span><br><span class="line">--export-dir /sqoop_updated \<span class="comment"># 文件所在的 HDFS 目录</span></span><br><span class="line"></span><br><span class="line">--update-key customerid \<span class="comment"># 确定更新主键, 这样就只会把新的主键的数据更新进来了, 不会碰原来主键的数据</span></span><br><span class="line"></span><br><span class="line">--m 1 \</span><br><span class="line"></span><br><span class="line">--update-mode alowinsert \<span class="comment"># 告诉 MySQL 同意插入</span></span><br><span class="line"></span><br><span class="line">--columns <span class="string">&#x27;customerid,name,email,phoneno,city,state&#x27;</span><span class="comment"># 分列</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230329091335894.png" alt="执行成功"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230329091353046.png" alt="更新完成"></p><h2 id="4-5-Exporting-data-Call-Mode-On-Mysql"><a href="#4-5-Exporting-data-Call-Mode-On-Mysql" class="headerlink" title="4.5 Exporting data Call Mode On Mysql"></a>4.5 Exporting data Call Mode On Mysql</h2><blockquote><p>通过调用 (过程) 模式进行 <code>export</code></p></blockquote><p>先将这两个 jar 包放入这个路径</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230329091709694.png" alt="两个 jar 包"></p><p>在 MySQL 中建两个表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span>(id <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>, name <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,<span class="keyword">PRIMARY</span> KEY(id));</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> goods (id <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,name <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,price <span class="type">int</span>,<span class="keyword">PRIMARY</span> KEY(id));</span><br></pre></td></tr></table></figure><p>在 MySQL 中新建一个过程</p><blockquote><p>这个过程就相当于一个函数, 想干啥直接调用函数就行了</p><p>我还纳闷用 sqoop 指令怎么执行这么复杂的东西, 原来如此</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">delimiter $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> insert_tables (</span><br><span class="line">  <span class="keyword">IN</span> c1 <span class="type">INT</span>(<span class="number">11</span>),</span><br><span class="line">  <span class="keyword">IN</span> c2 <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">  <span class="keyword">IN</span> c3 <span class="type">INT</span>(<span class="number">11</span>),</span><br><span class="line">  <span class="keyword">IN</span> c4 <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">  <span class="keyword">IN</span> c5 <span class="type">INT</span>(<span class="number">11</span>)</span><br><span class="line">)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">user</span>(id, name) <span class="keyword">VALUES</span>(c1, c2)</span><br><span class="line">    <span class="keyword">ON</span> DUPLICATE KEY <span class="keyword">UPDATE</span> name<span class="operator">=</span><span class="keyword">VALUES</span>(name);</span><br><span class="line">  <span class="keyword">INSERT</span> <span class="keyword">INTO</span> goods(id, name,price) <span class="keyword">VALUES</span>(c3, c4, c5)</span><br><span class="line">    <span class="keyword">ON</span> DUPLICATE KEY <span class="keyword">UPDATE</span> name<span class="operator">=</span><span class="keyword">VALUES</span>(name),price<span class="operator">=</span><span class="keyword">VALUES</span>(price);</span><br><span class="line"><span class="keyword">END</span>$$</span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230329091955224.png" alt="可以在这个位置找到过程"></p><p>建个 <code>order.txt</code> 文件</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">10001|Tom|1023|ITEM23|23</span><br><span class="line">10002|Jerry|1023|ITEM23|23</span><br><span class="line">10002|Jerry|1024|ITEM24|24</span><br><span class="line">10003|Spike|1023|ITEM23|23</span><br><span class="line">10003|Spike|1024|ITEM24|24</span><br><span class="line">10003|Spike|1025|ITEM25|25</span><br></pre></td></tr></table></figure><p>然后 copy 进 HDFS</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hdfs dfs -put /tools/sqoop_export_test/order.txt /sqoop</span><br></pre></td></tr></table></figure><p>执行 sqoop 指令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-export --connect jdbc:mysql://192.168.1.1:3305/test --username root --password dcef1396dnf --call insert_tables --export-dir /sqoop --fields-terminated-by <span class="string">&#x27;|&#x27;</span></span><br><span class="line"></span><br><span class="line">$ sqoop-export --connect jdbc:mysql://192.168.1.1:3305/test --username root --password dcef1396dnf --call insert_tables --export-dir /sqoop --fields-terminated-by <span class="string">&#x27;|&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="4-6-Other-Export"><a href="#4-6-Other-Export" class="headerlink" title="4.6 Other Export"></a>4.6 Other Export</h2><h3 id="4-6-1-Exporting-files-under-HDFS-directory-to-a-table"><a href="#4-6-1-Exporting-files-under-HDFS-directory-to-a-table" class="headerlink" title="4.6.1 Exporting files under HDFS directory to a table"></a>4.6.1 Exporting files under HDFS directory to a table</h3><blockquote><p>导出 HDFS 目录下的文件到表中</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop <span class="built_in">export</span> \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> --table cities \</span><br><span class="line"> --export-dir cities</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop <span class="built_in">export</span> \</span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> </span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> </span><br><span class="line"> --table cities \</span><br><span class="line"> </span><br><span class="line"> --export-dir cities</span><br></pre></td></tr></table></figure><h3 id="4-6-2-Batch-Inserts-Export"><a href="#4-6-2-Batch-Inserts-Export" class="headerlink" title="4.6.2 Batch Inserts Export"></a>4.6.2 Batch Inserts Export</h3><blockquote><p>批量插入导出</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop <span class="built_in">export</span> \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> --table cities \</span><br><span class="line"> --export-dir cities \</span><br><span class="line"> --batch</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop <span class="built_in">export</span> \</span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> </span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> </span><br><span class="line"> --table cities \</span><br><span class="line"> </span><br><span class="line"> --export-dir cities \</span><br><span class="line"> </span><br><span class="line"> --batch</span><br></pre></td></tr></table></figure><h3 id="4-6-3-Updating-existing-Data-set"><a href="#4-6-3-Updating-existing-Data-set" class="headerlink" title="4.6.3 Updating existing Data set"></a>4.6.3 Updating existing Data set</h3><blockquote><p>更新已有数据集</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop <span class="built_in">export</span> \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> --table cities \</span><br><span class="line"> --update-key <span class="built_in">id</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop <span class="built_in">export</span> \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> </span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> </span><br><span class="line"> --table cities \</span><br><span class="line"> </span><br><span class="line"> --update-key <span class="built_in">id</span></span><br></pre></td></tr></table></figure><h3 id="4-6-4-Upsert-Export"><a href="#4-6-4-Upsert-Export" class="headerlink" title="4.6.4 Upsert Export"></a>4.6.4 Upsert Export</h3><blockquote><p>翻转导出</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop <span class="built_in">export</span> \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> --table cities \</span><br><span class="line"> --update-key <span class="built_in">id</span> \</span><br><span class="line"> --update-mode allowinsert</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop <span class="built_in">export</span> \</span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> </span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> </span><br><span class="line"> --table cities \</span><br><span class="line"> </span><br><span class="line"> --update-key <span class="built_in">id</span> \</span><br><span class="line"> </span><br><span class="line"> --update-mode allowinsert</span><br></pre></td></tr></table></figure><h3 id="4-6-5-Column-Export"><a href="#4-6-5-Column-Export" class="headerlink" title="4.6.5 Column Export"></a>4.6.5 Column Export</h3><blockquote><p>按列导出</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop <span class="built_in">export</span> \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> --table cities \</span><br><span class="line"> --columns country,city</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop <span class="built_in">export</span> \</span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> </span><br><span class="line"> --username root --password 123456 \</span><br><span class="line"> </span><br><span class="line"> --table cities \</span><br><span class="line"> </span><br><span class="line"> --columns country,city</span><br></pre></td></tr></table></figure><h1 id="五、其他-Sqoop-工具"><a href="#五、其他-Sqoop-工具" class="headerlink" title="五、其他 Sqoop 工具"></a>五、其他 Sqoop 工具</h1><h2 id="5-1-Sqoop-Job-Tool"><a href="#5-1-Sqoop-Job-Tool" class="headerlink" title="5.1 Sqoop Job Tool"></a>5.1 Sqoop Job Tool</h2><h3 id="5-1-1-Create-Job-using-the-eval-tool"><a href="#5-1-1-Create-Job-using-the-eval-tool" class="headerlink" title="5.1.1 Create Job using the eval tool"></a>5.1.1 Create Job using the eval tool</h3><blockquote><p>如何创建 <code>job</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop job \</span><br><span class="line"> --create myjob \</span><br><span class="line"> -- import \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password-file file:///tools/.mysql_password.password \</span><br><span class="line"> --table actor \</span><br><span class="line"> --target-dir /sqoopjob1</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop job \</span><br><span class="line"> <span class="comment"># 声明这是 job 工具</span></span><br><span class="line"></span><br><span class="line"> --create myjob \</span><br><span class="line"> <span class="comment"># 创建一个名为 myjob 的job 工具</span></span><br><span class="line"> <span class="comment"># 下面几行全是这个 myjob 的内容</span></span><br><span class="line"> </span><br><span class="line"> <span class="comment"># job 内容是将这个 actor 表导入到 MapReduce 中，路径为 /sqoopjob1</span></span><br><span class="line"> -- import \ <span class="comment"># 注意这里，-- 后面与 import 中间有一个空格</span></span><br><span class="line"> </span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> </span><br><span class="line"> --username root --password-file file:///tools/.mysql_password.password \</span><br><span class="line"> </span><br><span class="line"> --table actor \</span><br><span class="line"> </span><br><span class="line"> --target-dir /sqoopjob1</span><br><span class="line"> <span class="comment"># 记住，没有执行路径的话默认路径是 /user/root</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411173704519.png" alt="运行成功"></p><h3 id="5-1-2-list-all-saved-jobs"><a href="#5-1-2-list-all-saved-jobs" class="headerlink" title="5.1.2 list all saved jobs"></a>5.1.2 list all saved jobs</h3><blockquote><p>展示所有 <code>job</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop job --list</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411173947532.png" alt="展示所有 job"></p><h3 id="5-1-3-inspect-the-configuration-of-a-job-with-the-show-action"><a href="#5-1-3-inspect-the-configuration-of-a-job-with-the-show-action" class="headerlink" title="5.1.3 inspect the configuration of a job with the show action"></a>5.1.3 inspect the configuration of a job with the show action</h3><blockquote><p>使用 <code>--show</code> 参数展示某个 job 的配置</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop job --show myjob</span><br></pre></td></tr></table></figure><p>这里如果没有用密码文件的话在配置里就不会显示密码</p><p>而且每次执行这个 <code>job</code> 的时候都会询问你密码</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411174356293.png" alt="所有配置"></p><h3 id="5-1-4-run-the-job-with-–exec"><a href="#5-1-4-run-the-job-with-–exec" class="headerlink" title="5.1.4 run the job with –exec"></a>5.1.4 run the job with –exec</h3><blockquote><p>使用 <code>--exec</code> 参数执行某个 <code>job</code></p></blockquote><p><code>exec</code> 其实就是 <code>execute（执行）</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop job --<span class="built_in">exec</span> myjob</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411174739704.png" alt="执行成功"></p><h3 id="5-1-5-Check-the-output-on-HDFS-x2F-user-x2F-root-or-specified-target-dir"><a href="#5-1-5-Check-the-output-on-HDFS-x2F-user-x2F-root-or-specified-target-dir" class="headerlink" title="5.1.5 Check the output on HDFS (&#x2F;user&#x2F;root or specified target dir)"></a>5.1.5 Check the output on HDFS (&#x2F;user&#x2F;root or specified target dir)</h3><blockquote><p>查看在 HDFS 中某个路径的输出（在 <code>job</code> 中设置的 <code>--target-dir</code> 或者默认路径）</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hdfs dfs -<span class="built_in">cat</span> /sqoopjob1/part-m-*</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411175001378.png" alt="job 执行成功"></p><h3 id="5-1-6-Create-Job-using-the-eval-tool-for-incremental-update"><a href="#5-1-6-Create-Job-using-the-eval-tool-for-incremental-update" class="headerlink" title="5.1.6 Create Job using the eval tool for incremental update"></a>5.1.6 Create Job using the eval tool for incremental update</h3><blockquote><p>创建增量导入（<code>Incremental Import</code>）的 <code>job</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop job \</span><br><span class="line"> --create actor_append_job \</span><br><span class="line"> -- import \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password-file file:///tools/.mysql_password.password \</span><br><span class="line"> --table actor \</span><br><span class="line"> --target-dir /sqoopjob1_append \</span><br><span class="line"> --incremental append \</span><br><span class="line"> --check-column actor_id \</span><br><span class="line"> --m 1</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230419080100551.png" alt="Job创建成功"></p><h3 id="5-1-7-list-all-saved-jobs"><a href="#5-1-7-list-all-saved-jobs" class="headerlink" title="5.1.7 list all saved jobs"></a>5.1.7 list all saved jobs</h3><blockquote><p>展示所有已经创建的 <code>Job</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop job --list</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230419075615528.png" alt="展示所有Job"></p><h3 id="5-1-8-inspect-the-configuration-of-a-job-with-the-show-action"><a href="#5-1-8-inspect-the-configuration-of-a-job-with-the-show-action" class="headerlink" title="5.1.8 inspect the configuration of a job with the show action"></a>5.1.8 inspect the configuration of a job with the show action</h3><blockquote><p>使用 <code>show</code> 操作查看 <code>Job</code> 的配置</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop job --show actor_append_job</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230419080150659.png" alt="再次查看这个Job的配置"></p><h3 id="5-1-9-run-the-job-with-–exec"><a href="#5-1-9-run-the-job-with-–exec" class="headerlink" title="5.1.9 run the job with –exec"></a>5.1.9 run the job with –exec</h3><blockquote><p>使用 <code>--exec</code> 参数运行 <code>Job</code></p><p><code>--exec</code> 是单词 <code>executive（运行）</code> 的缩写</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop job --<span class="built_in">exec</span> actor_append_job</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230419080636319.png" alt="Job运行成功"></p><h3 id="5-1-10-Check-the-output-on-HDFS-specified-target-dir"><a href="#5-1-10-Check-the-output-on-HDFS-specified-target-dir" class="headerlink" title="5.1.10 Check the output on HDFS (specified target dir)"></a>5.1.10 Check the output on HDFS (specified target dir)</h3><blockquote><p>指定目标路径来在 HDFS 上检查输出</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hdfs dfs -<span class="built_in">cat</span> /sqoopjob1_append/part-m-*</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230419081152910.png" alt="检查成功"></p><h3 id="5-1-11-Add-some-new-records"><a href="#5-1-11-Add-some-new-records" class="headerlink" title="5.1.11 Add some new records"></a>5.1.11 Add some new records</h3><blockquote><p>添加一些新纪录</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-eval \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password-file file:///tools/.mysql_password.password \</span><br><span class="line"> --query <span class="string">&quot;insert into actor(first_name,last_name) value(&#x27;JOE&#x27;,&#x27;SWANK&#x27;),(&#x27;CHRISTION&#x27;,&#x27;GABLE&#x27;),(&#x27;ZERO&#x27;,&#x27;CAGE&#x27;)&quot;</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230419081612506.png" alt="成功添加"></p><h3 id="5-1-12-run-the-job-with-–exec"><a href="#5-1-12-run-the-job-with-–exec" class="headerlink" title="5.1.12 run the job with –exec"></a>5.1.12 run the job with –exec</h3><blockquote><p>使用 <code>--exec</code> 参数来运行 <code>Job</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop job --<span class="built_in">exec</span> actor_append_job</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230419081910607.png" alt="增量导入运行成功"></p><h3 id="5-1-13-Check-the-output-on-HDFS-specified-target-dir"><a href="#5-1-13-Check-the-output-on-HDFS-specified-target-dir" class="headerlink" title="5.1.13 Check the output on HDFS (specified target dir)"></a>5.1.13 Check the output on HDFS (specified target dir)</h3><blockquote><p>指定目标路径来在 HDFS 上检查输出</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hdfs dfs -<span class="built_in">cat</span> /sqoopjob1_append/part-m-*</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230419081953696.png" alt="导入成功"></p><h3 id="5-1-14-Set-the-saved-job-as-a-scheduled-task"><a href="#5-1-14-Set-the-saved-job-as-a-scheduled-task" class="headerlink" title="5.1.14 Set the saved job as a scheduled task"></a>5.1.14 Set the saved job as a scheduled task</h3><blockquote><p>关于 <code>crontab</code></p></blockquote><p>这里解释一下 Linux 中的 <code>crontab</code> 文件</p><p>这个指令是在 Linux 系统中带有的文件，并非 Sqoop 或 Hadoop 专属</p><p>这个指令可以上我们在指定时间（包括哪月哪周哪日哪小时哪分钟）周期性地运行我们预定的指令</p><p><code>crontab</code> 的文件格式</p><p><code>&#123;minute&#125; &#123;hour&#125; &#123;day-of-month&#125; &#123;month&#125; &#123;day-of-week&#125; &#123;full-path-to-shell-script&#125; </code></p><ul><li><code>minute</code> 区间为 0 - 59</li><li><code>hour</code> 区间为 0 - 23</li><li><code>day-of-month</code> 区间为 0 - 31</li><li><code>month </code>区间为 1 - 12</li><li><code>day-of-week</code> 区间为 0 - 7，或者英文单词的前三个字母</li><li><code>full-path-to-shell-script</code> 要运行的完整指令</li></ul><p>修改 <code>crontab</code> 文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ crontab -e</span><br></pre></td></tr></table></figure><p>显示 <code>crontab</code> 文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ crontab -l</span><br></pre></td></tr></table></figure><p>删除 <code>crontab</code> 文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ crontab -r</span><br></pre></td></tr></table></figure><p>删除 <code>crontab</code> 文件，在删除之前提醒用户</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ crontab -ir</span><br></pre></td></tr></table></figure><blockquote><p>将保存的 <code>Job</code> 设置为日常 <code>Job</code></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ crontab -e</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">30 03 * * tue sqoop-job --<span class="built_in">exec</span> actor_append_job</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230419083326867.png" alt="修改crontab文件"></p><blockquote><p>再来看看修改之后的文件</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ crontab -l</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230419083617414.png" alt="查看crontab"></p><blockquote><p>展示 <code>root</code> 用户的 <code>crontab</code> 内容</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ less /etc/crontab</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230419083806729.png" alt="详细信息"></p><h2 id="5-2-Sqoop-Merge-Tool"><a href="#5-2-Sqoop-Merge-Tool" class="headerlink" title="5.2 Sqoop Merge Tool"></a>5.2 Sqoop Merge Tool</h2><blockquote><p><code>merge</code> 工具可以让我们将 MapReduce 中的所选择的&#x2F;所有的 mapper 文件合并为一个 reduce 文件</p></blockquote><h3 id="5-2-1-check-the-files-in-HDFS-path-x2F-sqoopjob2"><a href="#5-2-1-check-the-files-in-HDFS-path-x2F-sqoopjob2" class="headerlink" title="5.2.1 check the files in HDFS path &#x2F;sqoopjob2"></a>5.2.1 check the files in HDFS path &#x2F;sqoopjob2</h3><p>在开始之前，我们得把这个表 <code>import</code> 到 MapReduce</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop import \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password-file file:///tools/.mysql_password.password \</span><br><span class="line"> --table actor \</span><br><span class="line"> --target-dir /sqoopjob2 \</span><br><span class="line"> --m 3</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411170924752.png" alt="导入成功"></p><blockquote><p>然后我们来看看这个 MapReduce 路径下都有啥文件</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hdfs dfs -<span class="built_in">ls</span> /sqoopjob2</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411170951073.png" alt="导入成功"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411170956987.png" alt="导入成功"></p><h3 id="5-2-2-generate-the-corresponding-jar-file"><a href="#5-2-2-generate-the-corresponding-jar-file" class="headerlink" title="5.2.2 generate the corresponding jar file"></a>5.2.2 generate the corresponding jar file</h3><blockquote><p>生成相应的 jar 文件</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-codegen \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password-file file:///tools/.mysql_password.password \</span><br><span class="line"> --table actor \</span><br><span class="line"> --bindir /tools/codegen</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-codegen \</span><br><span class="line"><span class="comment"># codegen 可以生成这个表的 .jar 文件和 .class 文件和 .java 文件</span></span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> </span><br><span class="line"> --username root --password-file file:///tools/.mysql_password.password \</span><br><span class="line"> </span><br><span class="line"> --table actor \</span><br><span class="line"> </span><br><span class="line"> --bindir /tools/codegen<span class="comment"># --bindir 参数指定生成路径</span></span><br><span class="line"> <span class="comment"># 这个路径是自动生成的</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411165340235.png" alt="试运行"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411165358184.png" alt="生成的两个文件"></p><h3 id="5-2-3-generated-code-files-can-be-found-in-x2F-tools-x2F-codegen"><a href="#5-2-3-generated-code-files-can-be-found-in-x2F-tools-x2F-codegen" class="headerlink" title="5.2.3 generated code files can be found in &#x2F;tools&#x2F;codegen"></a>5.2.3 generated code files can be found in &#x2F;tools&#x2F;codegen</h3><blockquote><p>生成的代码文件可以在 &#x2F;tools&#x2F;codegen 中找到</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span> /tools/codegen</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411165625796.png" alt="image-20230411165625796"></p><h3 id="5-2-4-Use-sqoop-merge-tool-to-merge-the-newly-incrementally-imported-file-with-the-old-one"><a href="#5-2-4-Use-sqoop-merge-tool-to-merge-the-newly-incrementally-imported-file-with-the-old-one" class="headerlink" title="5.2.4 Use sqoop-merge tool to merge the newly incrementally imported file with the old one"></a>5.2.4 Use sqoop-merge tool to merge the newly incrementally imported file with the old one</h3><blockquote><p>使用 sqoop-merge 工具将新增量导入的文件与旧文件合并</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-merge \</span><br><span class="line"> --new-data /sqoopjob2/part-m-00001 \</span><br><span class="line"> --onto /sqoopjob2/part-m-00000 \</span><br><span class="line"> --target-dir /sqoopjob2-merged \</span><br><span class="line"> --jar-file /tools/codegen/actor.jar \</span><br><span class="line"> --class-name actor \</span><br><span class="line"> --merge-key actor_id</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-merge \</span><br><span class="line"></span><br><span class="line"> --new-data /sqoopjob2/part-m-00001 \</span><br><span class="line"> <span class="comment"># 将新的这个 map 文件</span></span><br><span class="line"> </span><br><span class="line"> --onto /sqoopjob2/part-m-00000 \</span><br><span class="line"> <span class="comment"># 合并到这个 map 文件中</span></span><br><span class="line"> </span><br><span class="line"> --target-dir /sqoopjob2-merged \</span><br><span class="line"> <span class="comment"># 存储到这个 MapReduce 路径下</span></span><br><span class="line"> </span><br><span class="line"> --jar-file /tools/codegen/actor.jar \</span><br><span class="line"> <span class="comment"># 使用这个路径下的 .jar 文件</span></span><br><span class="line"> <span class="comment"># .jar 文件就是把这个表的整个结构存储到这个文件里，确保这个 .jar 文件是这个表的数据</span></span><br><span class="line"> <span class="comment"># 这里是通过 .jar 文件进行合并</span></span><br><span class="line"> </span><br><span class="line"> --class-name actor \</span><br><span class="line"> <span class="comment"># 类名（.java .class)</span></span><br><span class="line"> </span><br><span class="line"> --merge-key actor_id</span><br><span class="line"> <span class="comment"># 我们需要参照的 merge-key（一般都是主键）</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411171143351.png" alt="执行成功"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411171156371.png" alt="执行成功"></p><h3 id="5-2-5-Verification"><a href="#5-2-5-Verification" class="headerlink" title="5.2.5 Verification"></a>5.2.5 Verification</h3><blockquote><p>检验是否合并成功</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hdfs dfs -<span class="built_in">cat</span> /sqoopjob2-merged/part-r-*</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411171353641.png" alt="合并成功"></p><h2 id="5-3-Sqoop-Eval-Tool"><a href="#5-3-Sqoop-Eval-Tool" class="headerlink" title="5.3 Sqoop Eval Tool"></a>5.3 Sqoop Eval Tool</h2><blockquote><p><code>sqoop-eval</code> 可以让我们再 Sqoop 指令中使用 MySQL语句</p><p>没错，可以使用所有 MySQL 语句，从此摆脱 Navicat（doge）</p></blockquote><h3 id="5-3-1-List-all-databases-using-the-eval-tool"><a href="#5-3-1-List-all-databases-using-the-eval-tool" class="headerlink" title="5.3.1 List all databases using the eval tool"></a>5.3.1 List all databases using the eval tool</h3><blockquote><p>使用 <code>eval</code> 工具展示所有数据库</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-eval \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305 \</span><br><span class="line"> --username root --password-file file:///tools/.mysql_password.password \</span><br><span class="line"> --query <span class="string">&quot;show databases;&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-eval \<span class="comment"># 声明使用 eval 工具</span></span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305 \</span><br><span class="line"> </span><br><span class="line"> --username root --password-file file:///tools/.mysql_password.password \</span><br><span class="line"> </span><br><span class="line"> --query <span class="string">&quot;show databases;&quot;</span><span class="comment"># SQL 语句要用双引号引上</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411163355075.png" alt="展示所有数据库"></p><h3 id="5-3-2-Create-a-table-using-sqoop-eval-tool"><a href="#5-3-2-Create-a-table-using-sqoop-eval-tool" class="headerlink" title="5.3.2 Create a table using sqoop-eval tool"></a>5.3.2 Create a table using sqoop-eval tool</h3><blockquote><p>使用 <code>eval</code> 工具创建表</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-eval \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password-file file:///tools/.mysql_password.password \</span><br><span class="line"> --query <span class="string">&quot;CREATE TABLE actor (actor_id smallint(5) unsigned NOT NULL AUTO_INCREMENT, first_name varchar(45) NOT NULL, last_name varchar(45) NOT NULL, last_update timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,PRIMARY KEY (actor_id)) ENGINE=InnoDB;&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-eval \</span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> </span><br><span class="line"> --username root --password-file file:///tools/.mysql_password.password \</span><br><span class="line"> </span><br><span class="line"> --query <span class="string">&quot;CREATE TABLE actor (actor_id smallint(5) unsigned NOT NULL AUTO_INCREMENT, first_name varchar(45) NOT NULL, last_name varchar(45) NOT NULL, last_update timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,PRIMARY KEY (actor_id)) ENGINE=InnoDB;&quot;</span><span class="comment"># MySQL 建表语句</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411164140193.png" alt="试运行"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411164239109.png" alt="创建成功"></p><h3 id="5-3-3-Insert-data-into-the-database-using-the-sqoop-eval-tool"><a href="#5-3-3-Insert-data-into-the-database-using-the-sqoop-eval-tool" class="headerlink" title="5.3.3 Insert data into the database using the sqoop-eval tool"></a>5.3.3 Insert data into the database using the sqoop-eval tool</h3><blockquote><p>使用 <code>eval</code> 工具在表中插入数据</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-eval \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password-file file:///tools/.mysql_password.password \</span><br><span class="line"> --query <span class="string">&quot;INSERT INTO actor(first_name,last_name) VALUES (&#x27;PENELOPE&#x27;, &#x27;GUINESS&#x27;), (&#x27;NICK&#x27;, &#x27;WAHLBERG&#x27;), (&#x27;ED&#x27;, &#x27;CHASE&#x27;)&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-eval \</span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> </span><br><span class="line"> --username root --password-file file:///tools/.mysql_password.password \</span><br><span class="line"> </span><br><span class="line"> --query <span class="string">&quot;INSERT INTO actor(first_name,last_name) VALUES (&#x27;PENELOPE&#x27;, &#x27;GUINESS&#x27;), (&#x27;NICK&#x27;, &#x27;WAHLBERG&#x27;), (&#x27;ED&#x27;, &#x27;CHASE&#x27;)&quot;</span><span class="comment"># 插入数据</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411164317895.png" alt="试运行"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411164457092.png" alt="插入成功"></p><h3 id="5-3-4-Query-data-using-the-sqoop-eval-tool"><a href="#5-3-4-Query-data-using-the-sqoop-eval-tool" class="headerlink" title="5.3.4 Query data using the sqoop-eval tool"></a>5.3.4 Query data using the sqoop-eval tool</h3><blockquote><p>使用 <code>eval</code> 工具展示表中数据</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-eval \</span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> --username root --password-file file:///tools/.mysql_password.password \</span><br><span class="line"> --query <span class="string">&quot;SELECT * FROM actor;&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sqoop-eval \</span><br><span class="line"></span><br><span class="line"> --connect jdbc:mysql://192.168.1.1:3305/test \</span><br><span class="line"> </span><br><span class="line"> --username root --password-file file:///tools/.mysql_password.password \</span><br><span class="line"> </span><br><span class="line"> --query <span class="string">&quot;SELECT * FROM actor;&quot;</span><span class="comment"># SQL 语句</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230411164457092.png" alt="展示成功"></p>]]></content>
      
      
      <categories>
          
          <category> 数据科学与大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Sqoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据库系统概论学习笔记</title>
      <link href="/2023/02/27/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2023/02/27/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="（一）–-绪论"><a href="#（一）–-绪论" class="headerlink" title="（一）– 绪论"></a>（一）– 绪论</h1><h1 id="一、数据库系统概述"><a href="#一、数据库系统概述" class="headerlink" title="一、数据库系统概述"></a>一、数据库系统概述</h1><h2 id="1-1-数据库的-4-个基本概念"><a href="#1-1-数据库的-4-个基本概念" class="headerlink" title="1.1 数据库的 4 个基本概念"></a>1.1 数据库的 4 个基本概念</h2><ol><li><p>数据：描述事物的符号记录</p></li><li><p>数据库</p><p><strong>概括</strong>地讲：数据库具有<strong>永久存储</strong>、<strong>有组织</strong>、<strong>可共享</strong>三个基本特点</p><p><strong>严格</strong>地讲：数据库是长期存储在计算机内、有组织的、可共享的大量数据的集合。数据库中的数据按一定的数据模型组织、描述和储存，具有较小的冗余度、较高的数据独立性和易扩展性，并可为各种用户共享。</p></li><li><p>数据库管理系统：是帷与用户和操作系统之间的一层<strong>数据管理软件</strong>，和操作系统一样是计算机的<strong>基础软件</strong></p><p>主要功能：</p><ol><li>数据定义功能</li><li>数据组织、存储和管理</li><li>数据操纵功能</li><li>数据库的事务管理和运行管理</li><li>数据库的建立和维护功能</li><li>其他功能（通信功能，数据转换功能，互访和互操作功能）</li></ol></li><li><p>数据库系统：是由数据库、数据库管理工具（及其应用开发工具）、应用程序和数据库管理员（DBA）组成的存储、管理、处理和维护数据的系统</p></li></ol><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230227142502036.png" alt="数据库系统"></p><h2 id="1-2、数据库管理技术的产生和发展"><a href="#1-2、数据库管理技术的产生和发展" class="headerlink" title="1.2、数据库管理技术的产生和发展"></a>1.2、数据库管理技术的产生和发展</h2><ol><li>人工管理阶段：数据不保存、不共享、不具有独立性</li><li>文件系统阶段：可保存，但共享性差，冗余度大，独立性差</li><li>数据库管理系统：数据库系统的出现使信息系统从以 加工数据的程序为中心 转向围绕 共享的数据 为中心的新阶段</li></ol><h2 id="1-3-数据库系统的特点"><a href="#1-3-数据库系统的特点" class="headerlink" title="1.3 数据库系统的特点"></a>1.3 数据库系统的特点</h2><ul><li>实现整体数据的结构化</li><li>数据的共享性高、冗余度低且易扩充：数据共享可以大大减少数据冗余，节约存储空间</li><li>数据独立性高：<ul><li>物理独立性高：指用户的<strong>应用程序与数据库中数据的物理存储</strong>是相互独立的</li><li>逻辑独立性：指用户的<strong>应用程序与数据库的逻辑结构</strong>是相互独立的</li></ul></li><li>数据库由数据库管理系统统一管理和控制</li></ul><h1 id="二、数据模型"><a href="#二、数据模型" class="headerlink" title="二、数据模型"></a>二、数据模型</h1><h2 id="2-1-两类数据模型"><a href="#2-1-两类数据模型" class="headerlink" title="2.1 两类数据模型"></a>2.1 两类数据模型</h2><ul><li>概念模型</li><li>逻辑模型和物理模型</li></ul><p>人们首先将现实世界抽象为信息世界，然后将信息世界转还为机器世界</p><h2 id="2-2-概念模型"><a href="#2-2-概念模型" class="headerlink" title="2.2 概念模型"></a>2.2 概念模型</h2><blockquote><p>也称为信息模型，她是按用户观点来对数据和信息建模，主要用于数据库设计</p></blockquote><ul><li>实体：客观存在并可相互区别的事物，如：人</li><li>属性：实体所具有的的某一特性，如：人的鼻子、嘴巴</li><li>码：唯一标识实体的属性，如：身份证号</li><li>实体型：用实体名及其属性集合来抽象和刻画同类实体，如：含有鼻子和嘴巴的人</li><li>实体集：统一类型实体的集合，如：学校</li><li>联系：实体之间的联系通常是指不通实体集之间的联系，实体之间的联系有 一对一、一对多和多对多等多种联系</li></ul><p>概念模型的一种表示方法：实体 - 联系方法。用 E-R 图来描述显示世界的概念模型，E-R 方法也称为 E-R 模型</p><p>E-R 图分为实体、属性、关系三个核心部分、长方形表示实体，椭圆形表示属性，菱形表示关系</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230227145044492.png" alt="E-R图"></p><ul><li>逻辑模型（高级语言）：它是按<strong>计算机系统的观点</strong>对数据建模，主要用于数据库管理系统的实现</li><li>物理模型（二进制）：是对数据<strong>最底层的抽象</strong>，它描述数据在系统内部的表示方法和存取方法，或在磁带或磁盘上的存储方式和存取方法，是面向计算机系统的</li></ul><p>联系：</p><ol><li><strong>实体之间的联系</strong>通常是指<strong>不同实体集</strong>之间的联系，实体之间的联系有 一对一、一对多、多对多 等多种联系</li><li><strong>实体内部的联系</strong>通常是指<strong>实体各属性</strong>之间的联系</li></ol><h2 id="2-3-数据模型的组成要素"><a href="#2-3-数据模型的组成要素" class="headerlink" title="2.3 数据模型的组成要素"></a>2.3 数据模型的组成要素</h2><ul><li>数据结构</li><li>数据操作</li><li>数据的完整性约束</li></ul><h2 id="2-4-常用的数据模型"><a href="#2-4-常用的数据模型" class="headerlink" title="2.4 常用的数据模型"></a>2.4 常用的数据模型</h2><ul><li>层次模型</li><li>网状模型</li><li>关系模型</li><li>面向对象数据模型</li><li>对象关系数据模型</li><li>半结构化数据模型</li></ul><h2 id="2-5-层次模型"><a href="#2-5-层次模型" class="headerlink" title="2.5 层次模型"></a>2.5 层次模型</h2><ol><li>有且只有一个结点没有双亲结点，这个结点成为根结点</li><li>根结点以外的其他结点有且只有一个双亲结点</li></ol><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230227145847839.png" alt="层次模型"></p><h2 id="2-6-网状模型"><a href="#2-6-网状模型" class="headerlink" title="2.6 网状模型"></a>2.6 网状模型</h2><ol><li>允许一个以上的结点没有双亲结点</li><li>一个结点可以有一个以上的双亲结点</li></ol><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230227150010704.png" alt="网状模型"></p><h2 id="2-7-关系模型"><a href="#2-7-关系模型" class="headerlink" title="2.7 关系模型"></a>2.7 关系模型</h2><p>通常对应的就是一张表</p><ul><li>关系：一个关系对应通常说的一张表</li><li>元组：表中的一行</li><li>属性：表中的一列</li><li>码（主键）：也称码键，表中的某个属性组</li><li>域：一组具有相同数据类型的值的集合</li><li>分量：元组中的一个属性</li></ul><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230227150046696.png" alt="关系模型"></p><h1 id="三、数据库系统的结构"><a href="#三、数据库系统的结构" class="headerlink" title="三、数据库系统的结构"></a>三、数据库系统的结构</h1><h2 id="3-1-数据库系统模式的概念"><a href="#3-1-数据库系统模式的概念" class="headerlink" title="3.1 数据库系统模式的概念"></a>3.1 数据库系统模式的概念</h2><p>模式数据库中<strong>全体数据的逻辑结构和特征描述</strong>，它仅仅设计型的描述，不涉及具体的值，其中一个具体的值称为模式的一个实例</p><p>模式是<strong>相对稳定</strong>的，实例是<strong>相对变动</strong>的</p><h2 id="3-2-数据系统的三级模式结构"><a href="#3-2-数据系统的三级模式结构" class="headerlink" title="3.2 数据系统的三级模式结构"></a>3.2 数据系统的三级模式结构</h2><ul><li><p>外模式</p><p>也称子模式或用户模式，它是数据库用户（包括应用程序员和最终用户）能够看见和使用的局部数据的逻辑结构和特征的描述，是数据库用户的<strong>数据视图</strong>，是与某一应用有关的数据的逻辑表示</p></li><li><p>模式</p><p>也称为逻辑模式，是数据库中<strong>全体数据的逻辑结构和特征</strong>的描述，是所有用户的<strong>公共数据视图</strong></p></li><li><p>内模式</p><p>也称存储模式，一个数据库只有一个内模式，它是<strong>数据物理结构和存储方式</strong>的描述，是数据在数据库内部的组织方式</p></li></ul><h2 id="3-3-数据库系统的二级映像功能与数据独立性"><a href="#3-3-数据库系统的二级映像功能与数据独立性" class="headerlink" title="3.3 数据库系统的二级映像功能与数据独立性"></a>3.3 数据库系统的二级映像功能与数据独立性</h2><p>二级映像：</p><ul><li><p>外模式&#x2F;模式映像</p><p>当<strong>模式</strong>改变时，由数据库管理员对各个 外模式&#x2F;模式映像 作相应改变，可以使外模式保持不变，应用程序不必修改，保证了数据与程序的逻辑独立性</p></li><li><p>模式&#x2F;内模式映像</p><p>当<strong>数据库的存储结构</strong>改变时，有数据库管理员对 模式&#x2F;内模式映像 作相应改变，可以使模式保持不变，从而应用程序也不用改变，保证了数据与程序的物理独立性</p></li></ul><p>数据独立性：</p><p>数据与程序之间的独立性使得数据的定义和描述可以从应用程序中分离出去。另外，由于数据的存取有数据库管理系统管理，从而简化了应用程序的编制，大大减少了应用程序的维护和修改</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230227151742838.png" alt="数据库系统结构"></p><h1 id="四、数据库系统的组成"><a href="#四、数据库系统的组成" class="headerlink" title="四、数据库系统的组成"></a>四、数据库系统的组成</h1><ol><li><p>硬件平台及数据库</p><p>足够大的内存、磁盘或磁盘阵列的设备，较高的通道能力以提高数据的传送率</p></li><li><p>软件</p><p>数据库管理系统，支持数据库管理系统运行的操作系统，具有与数据库结构的高级语言及其编译系统，以数据库管理系统为核心的应用开发工具，为特定应用环境开发的数据库应用系统</p></li><li><p>人员</p><p>开发、管理和使用数据库的人员主要包括数据库系统管理员、系统分析员和数据设计人员、应用程序员和最终用户</p></li></ol><h1 id="（二）–-关系数据库"><a href="#（二）–-关系数据库" class="headerlink" title="（二）– 关系数据库"></a>（二）– 关系数据库</h1><h1 id="一、关系数据结构及形式化定义"><a href="#一、关系数据结构及形式化定义" class="headerlink" title="一、关系数据结构及形式化定义"></a>一、关系数据结构及形式化定义</h1><h2 id="1-1-关系"><a href="#1-1-关系" class="headerlink" title="1.1 关系"></a>1.1 关系</h2><blockquote><p>一张二维表</p></blockquote><h2 id="1-2-关系模式"><a href="#1-2-关系模式" class="headerlink" title="1.2 关系模式"></a>1.2 关系模式</h2><blockquote><p>对关系的描述</p></blockquote><p>需要描述的关系的部分：</p><ol><li>关系中有哪些属性</li><li>属性来自哪些域（来自那一行的哪个字段）</li><li>属性与域的映射关系</li></ol><p>可以形象地表示为<br>R（U, D, DOM, F）<br>R：关系名<br>U：所有属性名<br>D：属性来自哪些域<br>DOM：属性和域的映射<br>F：属性间的依赖关系</p><h2 id="1-3-关系数据库"><a href="#1-3-关系数据库" class="headerlink" title="1.3 关系数据库"></a>1.3 关系数据库</h2><p>关系数据库也有关系数据库模式</p><h2 id="1-4-关系模式的存储类型"><a href="#1-4-关系模式的存储类型" class="headerlink" title="1.4 关系模式的存储类型"></a>1.4 关系模式的存储类型</h2><h1 id="二、关系操作"><a href="#二、关系操作" class="headerlink" title="二、关系操作"></a>二、关系操作</h1><h2 id="2-1-基本的关系操作"><a href="#2-1-基本的关系操作" class="headerlink" title="2.1 基本的关系操作"></a>2.1 基本的关系操作</h2><p>关系操作：</p><ul><li>插入</li><li>查询</li><li>删除</li><li>修改</li></ul><p>查询操作：</p><ul><li>选择</li><li>投影</li><li>连接</li><li>除法</li><li>并</li><li>差</li><li>交</li><li>笛卡尔积</li></ul><p>查询操作的基本操作:</p><ul><li>选择</li><li>投影</li><li>并</li><li>差</li><li>笛卡尔积</li></ul><h2 id="2-2-关系数据语言的分类"><a href="#2-2-关系数据语言的分类" class="headerlink" title="2.2 关系数据语言的分类"></a>2.2 关系数据语言的分类</h2><ul><li>关系代数语言（重点中的重点）</li><li>SQL 语言（重点）</li><li>关系演算语言（不太重要）</li></ul><h1 id="三、关系的完整性"><a href="#三、关系的完整性" class="headerlink" title="三、关系的完整性"></a>三、关系的完整性</h1><h2 id="3-1-实体完整性"><a href="#3-1-实体完整性" class="headerlink" title="3.1 实体完整性"></a>3.1 实体完整性</h2><blockquote><p>主码（主键）唯一且非空</p></blockquote><h2 id="3-2-参照完整性"><a href="#3-2-参照完整性" class="headerlink" title="3.2 参照完整性"></a>3.2 参照完整性</h2><blockquote><p>外码要么为空， 要么对应另一个表的主码（要么外键是另一个表的主键，要么没有外键）</p></blockquote><h2 id="3-3-用户定义的完整性"><a href="#3-3-用户定义的完整性" class="headerlink" title="3.3 用户定义的完整性"></a>3.3 用户定义的完整性</h2><blockquote><p>自己写的表的属性要写完整</p></blockquote><h1 id="四、关系代数"><a href="#四、关系代数" class="headerlink" title="四、关系代数"></a>四、关系代数</h1><blockquote><p>关系代数是一种抽象的查询语言，它用对关系的运算来表达查询</p></blockquote><p>三大要素：</p><ol><li>运算对象（关系）</li><li>运算符（集合运算符和专门的关系运算符）</li><li>运算结果（关系）</li></ol><p>关系代数运算：（前五种是 5 种基本运算）</p><ul><li>并</li><li>差</li><li>笛卡尔积</li><li>选择</li><li>投影</li><li>交</li><li>连接</li><li>除</li></ul><h2 id="4-1-传统的集合运算"><a href="#4-1-传统的集合运算" class="headerlink" title="4.1 传统的集合运算"></a>4.1 传统的集合运算</h2><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230228102536298.png" alt="集合运算"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230228103123270.png" alt="交"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230228103158454.png" alt="并"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230228103203886.png" alt="差"></p><p>笛卡尔积表示行与行之间交错</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230228103559186.png" alt="笛卡尔积（表f）"></p><h2 id="4-2-专门的关系运算"><a href="#4-2-专门的关系运算" class="headerlink" title="4.2 专门的关系运算"></a>4.2 专门的关系运算</h2><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230228102547127.png" alt="关系运算"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230228103837749.png" alt="选择语句的条件运算符"></p><p>选择相当于 SQL 语句中的 <code>where</code></p><p>将要查询的条件写在选择符号的右下角，要查询的字段写在后面的括号里</p><p>以下语句等同于 <code>select * from Student where Sdept = ”IS“;</code></p><p>其中的 <code>=</code> 可以换成上图的那一堆条件运算符</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230228103949888.png" alt="选择"></p><p>投影相当于筛选字段，只要求 <code>select</code> 出指定列</p><p>将要筛选出的字段写在选择符号的右下角，要查询的字段写在后面的括号里</p><p>以下语句等同于 <code>select Sname, Sdept from Student;</code></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230228104520427.png" alt="投影"></p><p>以下语句等同于 <code>select Cno from SC where Sno = &quot;95001&quot;;</code></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230228104738661.png" alt="选择与投影的结合"></p><p>连接相当于 SQL 中的 <code>join</code></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230228105235781.png" alt="连接"></p><p>自然连接相当于 SQL 中普通的 <code>join</code></p><p>下面的语句等同于 <code>R join S</code></p><ul><li><p>悬浮元祖（Dangling tuple）</p><p>两个关系 R 和 S 在做自然连接时，关系 R 中某些元组有可能在 S 中不存在公共属性上值相等的元组，从而造成 R 中这些元组在操作时被舍弃了，这些被舍弃的元组称为悬浮元组</p></li></ul><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230228105448882.png" alt="自然连接"></p><ul><li><p>外连接（Outer join）</p><p>如果把悬浮元组也保存在结果关系中，而在其他属性上补上空值 NULL，就叫做外连接</p></li><li><p>左外连接（Left outer join 或 Left join）</p><p>只保留左边关系 R 中的悬浮元祖</p></li><li><p>右外连接（Right outer join 或 Right join）</p><p>只保留右边关系 S 中的悬浮元组</p></li></ul><p>除：保留 R 中满足 S 的列，而且要去掉 S 中的属性，然后去重</p><p>下图就表示除了 <code>数据库</code>，<code>网络</code> 这两个值，还要把 <code>选修课程</code> 这个属性也要去掉</p><p>​</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230228201237800.png" alt="除"></p><p>如果是有多行的话就要同时满足</p><p>像下图这样，即使第六行的 a2 满足 b2 c3，但是第二行的 a2 并不满足 S，那也要舍去，所以最后只能剩下 a1</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230228201403859.png" alt="除"></p><h1 id="（三）–-关系数据库标准语言-SQL"><a href="#（三）–-关系数据库标准语言-SQL" class="headerlink" title="（三）– 关系数据库标准语言 SQL"></a>（三）– 关系数据库标准语言 SQL</h1><h1 id="一、SQL-概述"><a href="#一、SQL-概述" class="headerlink" title="一、SQL 概述"></a>一、SQL 概述</h1><h2 id="1-1-SQL-的产生与发展"><a href="#1-1-SQL-的产生与发展" class="headerlink" title="1.1 SQL 的产生与发展"></a>1.1 SQL 的产生与发展</h2><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230301205015131.png" alt="关系型，放在表里面"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230301205035108.png" alt="非关系型，放在文档里面"></p><h2 id="1-2-SQL-的特点"><a href="#1-2-SQL-的特点" class="headerlink" title="1.2 SQL 的特点"></a>1.2 SQL 的特点</h2><ol><li><p>综合统一</p><p>独立完成数据库生命周期中的全部活动，包括定义关系模式、录入数据、建立数据库、查询、更新、维护、数据库重构、数据库安全性控制等一系列操作</p></li><li><p>高度非过程化</p><p>用户只需提出 “做什么”，而不必指明 “怎么做”。</p></li><li><p>面向集合的操作方式</p><p>SQL 采用集合操作方式</p></li><li><p>以同一种语法结构提供两种使用方式</p><p>SQL 既是自含式语言，又是嵌入式语言。SQL 语句能够嵌入到高级语言程序中</p></li><li><p>语言简洁，易学易用</p><p>SQL 语言语法简单，接近英语口语，因此容易学习，也容易使用。</p></li></ol><h2 id="1-3-SQL-的基本概念"><a href="#1-3-SQL-的基本概念" class="headerlink" title="1.3 SQL 的基本概念"></a>1.3 SQL 的基本概念</h2><blockquote><p>SQL 是 Structured Query Language 的缩写 ，意思是结构化查询语言, 是一种在数据库管理系统中查询或对数据库里面的数据进行更改的语言</p></blockquote><p>顾名思义，查最重要</p><ol><li><p>数据定义语言 DDL (Data Definition Language)</p><p>SQL数据定义语言主要用来定义逻辑结构，包括定义基表，视图和索引。以及删除表 定义表 修改表</p></li><li><p>数据查询语言 DQL (Data Query Language)</p><p>SQL 的数据查询语言主要用来对数据库中的各种数据对象进行查询。</p></li><li><p>数据操纵语言 DML (Data Manipulation Language)</p><p>SQL 的数据操纵语言，用于改变数据库中的数据，包括插入，删除，修改</p></li><li><p>四、数据控制功能 DCL (Data Control Language)<br>SQL 的数据控制语言，对表和视图的授权，完整性规则的描述以及事务开始和结束等控制语句。</p></li></ol><h1 id="二、学生-课程数据库"><a href="#二、学生-课程数据库" class="headerlink" title="二、学生 - 课程数据库"></a>二、学生 - 课程数据库</h1><h1 id="三、数据定义"><a href="#三、数据定义" class="headerlink" title="三、数据定义"></a>三、数据定义</h1><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230301210315093.png" alt="数据类型"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230301210336540.png" alt="数据类型"></p><h2 id="3-1-模式的定义与删除"><a href="#3-1-模式的定义与删除" class="headerlink" title="3.1 模式的定义与删除"></a>3.1 模式的定义与删除</h2><p>模式定义</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">create</span> schema 模式名 <span class="keyword">authorization</span> 用户名;</span><br><span class="line"><span class="keyword">create</span> schema &quot;Review&quot; <span class="keyword">authorization</span> lgf;</span><br></pre></td></tr></table></figure><p>模式定义 + 对应模式视图</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">create</span> schema 模式名 <span class="keyword">authorization</span> 用户名 [表定义子句 或 视图定义子句 或 授权定义子句]</span><br><span class="line"><span class="keyword">create</span> schema &quot;Review&quot; <span class="keyword">authorization</span> lgf <span class="keyword">create</span> <span class="keyword">table</span> stu (id <span class="type">int</span> <span class="keyword">primary</span> key, age <span class="type">int</span>, name <span class="type">varchar</span>(<span class="number">64</span>));</span><br></pre></td></tr></table></figure><p>模式删除</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">drop</span> schema 模式名 <span class="operator">&lt;</span>cascade 或 restrict<span class="operator">&gt;</span>;</span><br><span class="line"><span class="keyword">drop</span> schema &quot;Review&quot; cascade;</span><br><span class="line"># cascade (全删) 与 restrict (有子目录就拒绝删) 必须二选一</span><br><span class="line"># cascade, 级联删除, 删除模式的同时也罢该模式的所有数据库对象删除</span><br><span class="line"># restrict, 限制删除, 如果该模式下游下属对象, 比如 表 或 视图, 就拒绝这个删除语句的执行</span><br></pre></td></tr></table></figure><h2 id="3-2-基本表的定义、删除与修改"><a href="#3-2-基本表的定义、删除与修改" class="headerlink" title="3.2 基本表的定义、删除与修改"></a>3.2 基本表的定义、删除与修改</h2><p>表的定义</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">create</span> <span class="keyword">table</span> 表名 (</span><br><span class="line"># 字段名 类型 字段约束, </span><br><span class="line"># 字段名 类型 字段约束, </span><br><span class="line"># 字段名 类型 字段约束,</span><br><span class="line"># ...</span><br><span class="line"># );</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">user</span> (</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">64</span>),</span><br><span class="line">    age <span class="type">int</span>,</span><br><span class="line">    sex <span class="type">char</span>(<span class="number">64</span>)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>表的删除</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">drop</span> <span class="keyword">table</span> 表名 [cascade 或 restrict];</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> Student cascade;</span><br><span class="line"></span><br><span class="line"># cascade, 级联删除, 如果有 外键<span class="operator">/</span>视图<span class="operator">/</span>触发器 也会强制删除</span><br><span class="line"># restrict, 限制删除, 如果有 外键<span class="operator">/</span>视图<span class="operator">/</span>触发器 会拒绝执行删除指令</span><br></pre></td></tr></table></figure><p>表的修改</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">alter</span> <span class="keyword">table</span> 表名 [<span class="keyword">Add</span> 新列名 数据类型 [完整性约束]] [<span class="keyword">Add</span> 表级完整性约束];</span><br><span class="line">#    [<span class="keyword">alter</span> <span class="keyword">column</span> 列名 修改位哪种类型]</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> S_entrance <span class="type">date</span>;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">alter</span> <span class="keyword">column</span> Sage <span class="type">int</span>;</span><br></pre></td></tr></table></figure><h2 id="3-3-索引的建立与删除"><a href="#3-3-索引的建立与删除" class="headerlink" title="3.3 索引的建立与删除"></a>3.3 索引的建立与删除</h2><blockquote><p>数据量比较大的时候, 查询消耗时间会比较长, 建立索引可以有效减少消耗时间</p></blockquote><blockquote><p>索引可以建立在 一列 或者 多个列 上</p></blockquote><p>索引的建立</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">create</span> [<span class="keyword">unique</span>] [cluster] index 索引名 <span class="keyword">on</span> 表名 (列名 [次序], 列名 [次序],...);</span><br><span class="line"># <span class="keyword">unique</span>: 唯一索引</span><br><span class="line"># cluster: 聚簇索引, 物理顺序与索引的逻辑顺序相同, 比如买书</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index Stusno <span class="keyword">on</span> Student(Sno);</span><br></pre></td></tr></table></figure><p>索引的修改</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">alter</span> index 旧索引名 rename <span class="keyword">to</span> 新索引名;</span><br><span class="line"><span class="keyword">alter</span> index SCno rename <span class="keyword">to</span> SCSno;</span><br></pre></td></tr></table></figure><p>索引的删除</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">drop</span> index 索引名;</span><br><span class="line"><span class="keyword">drop</span> index Stusname;</span><br></pre></td></tr></table></figure><h2 id="3-4-数据字典"><a href="#3-4-数据字典" class="headerlink" title="3.4 数据字典"></a>3.4 数据字典</h2><h1 id="四、数据查询"><a href="#四、数据查询" class="headerlink" title="四、数据查询"></a>四、数据查询</h1><h2 id="4-1-单表查询"><a href="#4-1-单表查询" class="headerlink" title="4.1 单表查询"></a>4.1 单表查询</h2><blockquote><p>查询所有列</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表名;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> Student;</span><br></pre></td></tr></table></figure><blockquote><p>查询中给列起别名, 查询后显示的视图上此列也显示的是别名</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">select</span> 列名 [<span class="keyword">as</span>] 别名 <span class="keyword">from</span> 表名;</span><br><span class="line"><span class="keyword">select</span> username [<span class="keyword">as</span>] 姓名 <span class="keyword">from</span> <span class="keyword">User</span>;</span><br></pre></td></tr></table></figure><blockquote><p>查询中给表起别名</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">select</span> 列名 <span class="keyword">from</span> 表名 [<span class="keyword">as</span>] 别名;</span><br><span class="line"><span class="keyword">select</span> username <span class="keyword">from</span> <span class="keyword">User</span> a;</span><br></pre></td></tr></table></figure><blockquote><p>查询结果去重</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">select</span> [<span class="keyword">distinct</span>] 列名 <span class="keyword">from</span> 表名;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> title <span class="keyword">from</span> edu_course;</span><br></pre></td></tr></table></figure><blockquote><p>条件查询</p></blockquote><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230302151605200.png" alt="条件查询"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> edu_course <span class="keyword">where</span> price <span class="operator">&gt;</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> edu_course <span class="keyword">where</span> price <span class="keyword">between</span> <span class="number">21</span> <span class="keyword">and</span> <span class="number">50</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> edu_course <span class="keyword">where</span> teacher_id <span class="keyword">in</span> (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"># <span class="operator">&lt;&gt;</span> 表示不等</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> edu_course <span class="keyword">where</span> title <span class="keyword">like</span> <span class="string">&#x27;%速成&#x27;</span>; # <span class="operator">%</span> 可以代替多个字符</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> edu_course <span class="keyword">where</span> title <span class="keyword">like</span> <span class="string">&#x27;_速成&#x27;</span>; # _ 可以代替一个字符</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> edu_course <span class="keyword">where</span> (prifce <span class="operator">&gt;=</span> <span class="number">2</span> <span class="keyword">and</span> teacher_id <span class="operator">=</span> <span class="number">1</span>) <span class="keyword">or</span> (title <span class="operator">=</span> <span class="string">&#x27;mysql速成&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> Cno, <span class="keyword">Create</span> <span class="keyword">from</span> Course <span class="keyword">where</span> Cname <span class="keyword">like</span> <span class="string">&#x27;DB \_Design&#x27;</span> <span class="keyword">escape</span> <span class="string">&#x27;\&#x27;</span>;</span><br><span class="line"># 如果要查询的字符串本身就含有 <span class="string">&#x27;%&#x27;</span> 或 <span class="string">&#x27;_&#x27;</span>, 就需要使用 <span class="keyword">escape</span> 指定换码字符 (转义字符)</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> edu_course <span class="keyword">order</span> <span class="keyword">by</span> lesson_num;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> edu_course <span class="keyword">order</span> <span class="keyword">by</span> lesson_num <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure><blockquote><p>聚集函数 (加上 distinct 是去除列里面重复的值来计算)</p></blockquote><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230302154148073.png" alt="image-20230302154148073"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(title) <span class="keyword">from</span> edu_course;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> title) <span class="keyword">from</span> edu_course;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(price) <span class="keyword">from</span> edu_course;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(price) <span class="keyword">from</span> edu_course;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(price) <span class="keyword">from</span> edu_course;</span><br></pre></td></tr></table></figure><blockquote><p>分组查询 (通过 group by 进行分组, 如果要在含有 group by 的语句中进行筛选需要用 having)</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> title <span class="keyword">from</span> edu_course <span class="keyword">group</span> <span class="keyword">by</span> title;</span><br><span class="line"><span class="keyword">select</span> title <span class="keyword">from</span> edu_course <span class="keyword">group</span> <span class="keyword">by</span> title <span class="keyword">having</span> title <span class="operator">=</span> <span class="string">&#x27;SSM速成&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="4-2-连接查询"><a href="#4-2-连接查询" class="headerlink" title="4.2 连接查询"></a>4.2 连接查询</h2><blockquote><p>等值、非等值连接, 以 where 为关键词, 没有 join</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.<span class="operator">*</span>, b.<span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> edu_teacher a, edu_course b </span><br><span class="line"><span class="keyword">where</span> a.id <span class="operator">=</span> b.teacher_id;</span><br></pre></td></tr></table></figure><blockquote><p>自身连接, 一个表自身连接, 为本身这个表起两个别名, 然后进行连接操作</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> a.version, b.view_count </span><br><span class="line">form edu_course a, edu_course b </span><br><span class="line"><span class="keyword">where</span> a.version <span class="operator">=</span> b.view_count;</span><br></pre></td></tr></table></figure><blockquote><p>外连接, outer join, 把被舍弃的值也保留在结果视图中, 但是要加 null</p></blockquote><blockquote><p>左外连接, left [outer] join, 列出左边关系的所有元组, 右边没有匹配的就加 null</p></blockquote><blockquote><p>右外连接, right [outer] join, 列出右边关系的所有元组, 左边没有匹配的就加 null</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> Student.Sno, Sname, Ssex, Sage, Sdept, Cno, Grade </span><br><span class="line"><span class="keyword">from</span> Student </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> SC </span><br><span class="line"><span class="keyword">on</span> (</span><br><span class="line">    Student.Sno <span class="operator">=</span> SC.Sno</span><br><span class="line">);</span><br></pre></td></tr></table></figure><blockquote><p>多表查询, where, 两个及以上表的连接</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> c.id ID, c.title 课程名, cp.title 章节, cd.description 课程描述 </span><br><span class="line"><span class="keyword">from</span> edu_course c, edu_chapter cp, edu_course_description cd </span><br><span class="line"><span class="keyword">where</span> c.id <span class="operator">=</span> cp.course_id </span><br><span class="line"><span class="keyword">and</span> c.id <span class="operator">=</span> cd.id;</span><br></pre></td></tr></table></figure><h2 id="4-3-嵌套查询"><a href="#4-3-嵌套查询" class="headerlink" title="4.3 嵌套查询"></a>4.3 嵌套查询</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> c.title 课程名, c.price 价格 </span><br><span class="line"><span class="keyword">from</span> edu_course c </span><br><span class="line"><span class="keyword">where</span> c.title </span><br><span class="line"><span class="keyword">in</span> (</span><br><span class="line">    <span class="keyword">select</span> c2.title </span><br><span class="line">    <span class="keyword">from</span> edu_course c2 </span><br><span class="line">    <span class="keyword">where</span> c2.title <span class="operator">=</span> &quot;mysql速成&quot;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><blockquote><p>带有 <code>any</code> <code>all</code> 的子查询</p></blockquote><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230303150523047.png" alt="any all"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select c.title 课程名, c.price 价格 </span><br><span class="line">from edu_course c </span><br><span class="line">where c.price &gt; all (</span><br><span class="line">select c2.price</span><br><span class="line">from edu_course c2</span><br><span class="line">where c2.price between 1 and 20</span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select c.title 课程名, c.price 价格</span><br><span class="line">from edu_course c</span><br><span class="line">where c.price &gt; any (</span><br><span class="line">select c2.price</span><br><span class="line">from edu_course c2</span><br><span class="line">where c2.price between 22 and 24</span><br><span class="line">);</span><br></pre></td></tr></table></figure><blockquote><p>带 <code>exists</code> 的子查询</p></blockquote><blockquote><p><code>not exists</code> 如果后面的子查询没有值, 返回 1, 否则返回 0</p><p><code>exists</code> 如果后面的子查询有值, 返回 1, 否则返回 0</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">select Sname</span><br><span class="line">from Student</span><br><span class="line">where not exists (</span><br><span class="line">select *</span><br><span class="line">from Course</span><br><span class="line">where not exists (</span><br><span class="line">    select * </span><br><span class="line">    from SC</span><br><span class="line">    where Sno = Student.Sno</span><br><span class="line">    and Cno = Course.Cno</span><br><span class="line">    )</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="4-4-集合查询"><a href="#4-4-集合查询" class="headerlink" title="4.4 集合查询"></a>4.4 集合查询</h2><blockquote><p>并, <code>union</code>, 相当于 <code>or</code></p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select *</span><br><span class="line">from Student</span><br><span class="line">where Sdept = &#x27;CS&#x27;</span><br><span class="line">union</span><br><span class="line">select *</span><br><span class="line">from Student</span><br><span class="line">where Sage &lt;= 19;</span><br></pre></td></tr></table></figure><blockquote><p>交, <code>intersect</code>, 相当于 <code>and</code></p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> Student</span><br><span class="line"><span class="keyword">where</span> Sdept <span class="operator">=</span> <span class="string">&#x27;CS&#x27;</span></span><br><span class="line"><span class="keyword">intersect</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> Student</span><br><span class="line"><span class="keyword">where</span> Sage <span class="operator">&lt;=</span> <span class="number">19</span>;</span><br></pre></td></tr></table></figure><blockquote><p>差, <code>except</code>, 从第一个查询中减去第二个查询</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> Student</span><br><span class="line"><span class="keyword">where</span> Sdept <span class="operator">=</span> <span class="string">&#x27;CS&#x27;</span></span><br><span class="line"><span class="keyword">except</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> Student</span><br><span class="line"><span class="keyword">where</span> Sage <span class="operator">&lt;=</span><span class="number">19</span>;</span><br></pre></td></tr></table></figure><h2 id="4-5-基于派生表的查询"><a href="#4-5-基于派生表的查询" class="headerlink" title="4.5 基于派生表的查询"></a>4.5 基于派生表的查询</h2><h2 id="4-6-SELECT-语句的一般格式"><a href="#4-6-SELECT-语句的一般格式" class="headerlink" title="4.6 SELECT 语句的一般格式"></a>4.6 SELECT 语句的一般格式</h2><h1 id="五、数据更新"><a href="#五、数据更新" class="headerlink" title="五、数据更新"></a>五、数据更新</h1><h2 id="5-1-插入数据"><a href="#5-1-插入数据" class="headerlink" title="5.1 插入数据"></a>5.1 插入数据</h2><blockquote><p>插入, <code>insert</code></p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">insert</span> <span class="keyword">into</span> 表名 [(字段, 字段, 字段...)] <span class="keyword">values</span> (值, 值, 值...);</span><br><span class="line"></span><br><span class="line"># 标准添加 (指定所有字段, 指定所有值)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stu(id, name, age, sex, classid) <span class="keyword">values</span>(<span class="number">1</span>, <span class="string">&#x27;zhangsan&#x27;</span>, <span class="number">20</span>, <span class="string">&#x27;m&#x27;</span>, <span class="string">&#x27;lamp138&#x27;</span>);</span><br><span class="line"></span><br><span class="line"># 指定 部分字段 添加值</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stu(name, classid) <span class="keyword">values</span>(<span class="string">&#x27;lisi&#x27;</span>, <span class="string">&#x27;lamp138&#x27;</span>);</span><br><span class="line"></span><br><span class="line"># 不指定字段添加值</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stu <span class="keyword">value</span>(<span class="keyword">null</span>, <span class="string">&#x27;wangwu&#x27;</span>, <span class="number">21</span>, <span class="string">&#x27;w&#x27;</span>, <span class="string">&#x27;lamp143&#x27;</span>);</span><br><span class="line"></span><br><span class="line"># 批量添加值 (以这种形式添加必须添加所有属性, 不然报错)</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stu <span class="keyword">values</span></span><br><span class="line">(<span class="keyword">null</span>, <span class="string">&#x27;zhangliu&#x27;</span>, <span class="number">23</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;fsadf&#x27;</span>),</span><br><span class="line">(<span class="keyword">null</span>, <span class="string">&#x27;zhangliu&#x27;</span>, <span class="number">23</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;fsadf&#x27;</span>),</span><br><span class="line">(<span class="keyword">null</span>, <span class="string">&#x27;zhangliu&#x27;</span>, <span class="number">23</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;fsadf&#x27;</span>),</span><br><span class="line">(<span class="keyword">null</span>, <span class="string">&#x27;zhangliu&#x27;</span>, <span class="number">23</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;fsadf&#x27;</span>),</span><br><span class="line">(<span class="keyword">null</span>, <span class="string">&#x27;zhangliu&#x27;</span>, <span class="number">23</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;fsadf&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="5-2-修改数据"><a href="#5-2-修改数据" class="headerlink" title="5.2 修改数据"></a>5.2 修改数据</h2><blockquote><p>修改, <code>update</code></p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段 <span class="operator">=</span> 值, 字段 <span class="operator">=</span> 值... <span class="keyword">where</span> 条件</span><br><span class="line"><span class="keyword">update</span> stu <span class="keyword">set</span> age <span class="operator">=</span> <span class="number">35</span>, sex <span class="operator">=</span> <span class="string">&#x27;m&#x27;</span>, <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">11</span>;</span><br></pre></td></tr></table></figure><h2 id="5-3-删除数据"><a href="#5-3-删除数据" class="headerlink" title="5.3 删除数据"></a>5.3 删除数据</h2><blockquote><p>删除, <code>delete</code></p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">delete</span> <span class="keyword">from</span> 表名 [<span class="keyword">where</span>]</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> stu <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">100</span>;</span><br></pre></td></tr></table></figure><h1 id="六、空值的处理"><a href="#六、空值的处理" class="headerlink" title="六、空值的处理"></a>六、空值的处理</h1><h1 id="七、视图"><a href="#七、视图" class="headerlink" title="七、视图"></a>七、视图</h1><blockquote><p>视图 (view), 也被称为虚表, 即虚拟的表, 是一组数据的逻辑表示, 其本质是对应于一条 select 语句的结果集被赋予的名字, 即视图的名字</p></blockquote><blockquote><p>视图本身并不包含任何数据, 它只包含映射到基表的一个查询语句, 当基表数据发生变化时, 视图的数据也会发生变化</p></blockquote><blockquote><p>目的: 方便, 简化数据操作</p></blockquote><blockquote><p>当我们业务需求要求查出多张表的数据, 这是我们可能会关联多张表进行查询</p><p>如果这个 SQL 语句复杂的话也会影响查询效率</p><p>这个时候我们就可以创建视图, 查询时只要 <code>select * from view</code> 即可</p></blockquote><h2 id="7-1-定义视图"><a href="#7-1-定义视图" class="headerlink" title="7.1 定义视图"></a>7.1 定义视图</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">create</span> <span class="keyword">view</span> 视图名 [(列名, 列名..)] <span class="keyword">as</span> 子查询 [<span class="keyword">with</span> <span class="keyword">check</span> option];</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> IS_Student</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> Sno, Sname, Sage</span><br><span class="line"><span class="keyword">from</span> Student</span><br><span class="line"><span class="keyword">where</span> Sdept <span class="operator">=</span> <span class="string">&#x27;IS&#x27;</span></span><br><span class="line"><span class="keyword">with</span> <span class="keyword">check</span> option;</span><br><span class="line"># <span class="keyword">with</span> <span class="keyword">check</span> option 表示以后对视图进行行插入<span class="operator">/</span>修改<span class="operator">/</span>删除操作时, 关系数据管理系统对自动加上 Sdept <span class="operator">=</span> <span class="string">&#x27;IS&#x27;</span> 的条件</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">drop</span> <span class="keyword">view</span> 视图名 [cascade];</span><br><span class="line"># 视图删除后视图的定义将从数据字典中删除, 如果该视图上还导出了其他视图, 则使用 cascade 级联删除把该视图和由他导出的视图一并删除</span><br></pre></td></tr></table></figure><h2 id="7-2-查询视图"><a href="#7-2-查询视图" class="headerlink" title="7.2 查询视图"></a>7.2 查询视图</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 和普通查询一样, 就是表名要写视图名</span><br><span class="line"><span class="keyword">select</span> Sno, Sage</span><br><span class="line"><span class="keyword">from</span> IS_Student</span><br><span class="line"><span class="keyword">where</span> Sage <span class="operator">&lt;</span> <span class="number">20</span>;</span><br></pre></td></tr></table></figure><h2 id="7-3-更新视图"><a href="#7-3-更新视图" class="headerlink" title="7.3 更新视图"></a>7.3 更新视图</h2><blockquote><p>视图是不存在的数据, 所以我们对视图进行的操作最终会反映到基本表上</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> IS_Student</span><br><span class="line"><span class="keyword">set</span> Sname <span class="operator">=</span> <span class="string">&#x27;刘晨&#x27;</span></span><br><span class="line"><span class="keyword">where</span> Sno <span class="operator">=</span> <span class="string">&#x27;20203101010&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 上面语句相当于</span><br><span class="line"></span><br><span class="line"><span class="keyword">update</span> Student # 这是基本表</span><br><span class="line"><span class="keyword">set</span> Sname <span class="operator">=</span> <span class="string">&#x27;刘晨&#x27;</span></span><br><span class="line"><span class="keyword">where</span> Sno <span class="operator">=</span> <span class="string">&#x27;20203101010&#x27;</span> <span class="keyword">and</span> Sdept <span class="operator">=</span> <span class="string">&#x27;IS&#x27;</span> # 记得这个 <span class="keyword">with</span> <span class="keyword">check</span> option</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> IS_Student</span><br><span class="line"><span class="keyword">values</span>(<span class="string">&#x27;20203202020&#x27;</span>, <span class="string">&#x27;张毅&#x27;</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"># 上面语句相当于</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> Student(Sno, Sname, Sage, Sdept) # 注意这里的属性要与视图的属性相匹配</span><br><span class="line"><span class="keyword">values</span>(<span class="string">&#x27;20203202020&#x27;</span>, <span class="string">&#x27;张毅&#x27;</span>, <span class="number">20</span>, <span class="string">&#x27;IS&#x27;</span>); # 还是要记得 <span class="keyword">with</span> <span class="keyword">check</span> option</span><br></pre></td></tr></table></figure><h2 id="7-4-视图的作用"><a href="#7-4-视图的作用" class="headerlink" title="7.4 视图的作用"></a>7.4 视图的作用</h2><h1 id="（四）–-数据库安全性"><a href="#（四）–-数据库安全性" class="headerlink" title="（四）– 数据库安全性"></a>（四）– 数据库安全性</h1><h1 id="一、数据库安全性概述"><a href="#一、数据库安全性概述" class="headerlink" title="一、数据库安全性概述"></a>一、数据库安全性概述</h1><h2 id="1-1-数据库的不安全因素"><a href="#1-1-数据库的不安全因素" class="headerlink" title="1.1 数据库的不安全因素"></a>1.1 数据库的不安全因素</h2><ol><li>非授权对数据库的恶意存取和破坏</li><li>数据库中重要的数据泄露</li><li>安全环境的脆弱性</li></ol><h2 id="1-2-安全标准简介"><a href="#1-2-安全标准简介" class="headerlink" title="1.2 安全标准简介"></a>1.2 安全标准简介</h2><h1 id="二、数据库安全性控制"><a href="#二、数据库安全性控制" class="headerlink" title="二、数据库安全性控制"></a>二、数据库安全性控制</h1><h2 id="2-1-用户身份鉴别"><a href="#2-1-用户身份鉴别" class="headerlink" title="2.1 用户身份鉴别"></a>2.1 用户身份鉴别</h2><ul><li>静态口令鉴别</li><li>动态口令鉴别</li><li>生物特征鉴别</li><li>智能卡鉴别</li></ul><h2 id="2-2-存取控制"><a href="#2-2-存取控制" class="headerlink" title="2.2 存取控制"></a>2.2 存取控制</h2><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230303160331835.png" alt="主要存取权限"></p><p>reference 权限代表是否允许创建外键</p><h2 id="2-3-自主存取控制方法"><a href="#2-3-自主存取控制方法" class="headerlink" title="2.3 自主存取控制方法"></a>2.3 自主存取控制方法</h2><blockquote><p>用户可以自定义和分配其他用户的操作</p><p>主要通过 grant, revoke 进行控制</p><p>有两个主要元素构成: 数据库对象 和 操作权限</p><p>授权: 我们定义用户的存取权限</p></blockquote><ul><li><p>grant</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">-</span> <span class="keyword">grant</span> 权限 <span class="keyword">on</span> <span class="keyword">table</span> 表名 <span class="keyword">to</span> 用户</span><br></pre></td></tr></table></figure></li><li><p>revoke</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">revoke</span> 权限 <span class="keyword">on</span> <span class="keyword">table</span> 表名 <span class="keyword">from</span> 用户</span><br></pre></td></tr></table></figure></li></ul><h2 id="2-4-授权：授予与收回"><a href="#2-4-授权：授予与收回" class="headerlink" title="2.4 授权：授予与收回"></a>2.4 授权：授予与收回</h2><blockquote><p>授权</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">grant</span> 权限 <span class="keyword">on</span> 表名 [(列名)] <span class="keyword">to</span> 用户 <span class="keyword">with</span> <span class="keyword">grant</span> option;</span><br><span class="line"># 授权命令是由数据库管理员使用的, 若给用户分配权限时带 <span class="keyword">with</span> <span class="keyword">grant</span> option 子句, 则普通用户获权后, 可把自己的权限授予给其他用户</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span> <span class="keyword">on</span> Student <span class="keyword">to</span> user1 <span class="keyword">with</span> <span class="keyword">grant</span> option;</span><br></pre></td></tr></table></figure><blockquote><p>收回</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">revoke</span> 权限 <span class="keyword">on</span> 数据对象 <span class="keyword">from</span> 用户名 cascade;</span><br><span class="line"><span class="keyword">revoke</span> <span class="keyword">select</span> <span class="keyword">on</span> student <span class="keyword">from</span> user1;</span><br></pre></td></tr></table></figure><h2 id="2-5-数据库角色"><a href="#2-5-数据库角色" class="headerlink" title="2.5 数据库角色"></a>2.5 数据库角色</h2><blockquote><p>角色是指一类人, 可以给角色授予权限</p></blockquote><blockquote><p>角色创建</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">create</span> role 角色名</span><br><span class="line"><span class="keyword">create</span> role CEO;</span><br></pre></td></tr></table></figure><blockquote><p>角色授权</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">grant</span> 权限 <span class="keyword">on</span> 对象类型 对象名 <span class="keyword">to</span> 角色<span class="number">1</span>, 角色<span class="number">2</span>;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span> <span class="keyword">on</span> Student <span class="keyword">to</span> CEO;</span><br></pre></td></tr></table></figure><blockquote><p>把角色授权给其他用户或角色</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">grant</span> 角色 <span class="keyword">to</span> <span class="operator">&lt;</span>角色名 或 用户名<span class="operator">&gt;</span> [<span class="keyword">with</span> admin option]</span><br><span class="line"><span class="keyword">grant</span> CEO <span class="keyword">to</span> lihua;</span><br><span class="line"># 如果加上 <span class="keyword">with</span> admin option 表示这个用户还可以把这个权限授予给其他角色或用户</span><br></pre></td></tr></table></figure><blockquote><p>角色权限的收回</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">revoke</span> 权限 <span class="keyword">on</span> 对象名 <span class="keyword">from</span> 角色名字</span><br><span class="line"><span class="keyword">revoke</span> <span class="keyword">select</span> <span class="keyword">on</span> Student <span class="keyword">from</span> CEO;</span><br></pre></td></tr></table></figure><h2 id="2-6-强制存取控制方法"><a href="#2-6-强制存取控制方法" class="headerlink" title="2.6 强制存取控制方法"></a>2.6 强制存取控制方法</h2><h1 id="三、视图机制"><a href="#三、视图机制" class="headerlink" title="三、视图机制"></a>三、视图机制</h1><blockquote><p>为不同的用户定义不同的视图, 把不需要的数据给隐藏起来, 这样用户就不会进行误操作了</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 建立计算机系学生的属兔, 把对该视图的 <span class="keyword">select</span> 权限授予王平, 把该视图上的所有操作权限授予王平</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> CS_Student</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> Student </span><br><span class="line"><span class="keyword">where</span> Sdept <span class="operator">=</span> <span class="string">&#x27;IS&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span> <span class="keyword">on</span> CS_Student <span class="keyword">to</span> 王平;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> privileges <span class="keyword">on</span> CS_Student <span class="keyword">to</span> 王平;</span><br></pre></td></tr></table></figure><h1 id="四、审计"><a href="#四、审计" class="headerlink" title="四、审计"></a>四、审计</h1><blockquote><p>把对数据库的所有操作都记录到审计日志中, 然后就可以通过日志审查是否有进行非法操作</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 对修改 SC 的操作进行审计</span><br><span class="line">audit <span class="keyword">update</span> <span class="keyword">on</span> SC;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 取消对 SC 表的一切审计</span><br><span class="line">noaudit <span class="keyword">update</span> <span class="keyword">on</span> SC;</span><br></pre></td></tr></table></figure><h1 id="五、数据加密"><a href="#五、数据加密" class="headerlink" title="五、数据加密"></a>五、数据加密</h1><blockquote><p>通过一些加密算法, 把明文变成密文, 这样别人就无法查看了</p></blockquote><h1 id="六、其他安全性保护"><a href="#六、其他安全性保护" class="headerlink" title="六、其他安全性保护"></a>六、其他安全性保护</h1><h1 id="（五）–-数据库完整性"><a href="#（五）–-数据库完整性" class="headerlink" title="（五）– 数据库完整性"></a>（五）– 数据库完整性</h1><blockquote><p>正确性: 符合现实世界的描述</p></blockquote><blockquote><p>相容性: 同一对象在不同表里面是符合逻辑的, 比如年龄、地址, 在各个表里都应该一致</p></blockquote><blockquote><p>维护完整性:</p><ol><li>提供定义完整性约束条件的机制</li><li>提供完整性检查的方法</li><li>进行违约处理</li></ol></blockquote><p>三大完整性:</p><ol><li>实体完整性</li><li>参照完整性</li><li>用户定义完整性</li></ol><h1 id="一、实体完整性"><a href="#一、实体完整性" class="headerlink" title="一、实体完整性"></a>一、实体完整性</h1><blockquote><p>实体完整性</p></blockquote><h2 id="1-1-定义实体完整性"><a href="#1-1-定义实体完整性" class="headerlink" title="1.1 定义实体完整性"></a>1.1 定义实体完整性</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> course(id <span class="keyword">not</span> <span class="keyword">null</span>, <span class="type">time</span> <span class="type">varchar</span>(<span class="number">255</span>), <span class="keyword">primary</span> key(id));</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> course(id <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key, <span class="type">time</span> <span class="type">varchar</span>(<span class="number">255</span>));</span><br></pre></td></tr></table></figure><h2 id="1-2-实体完整性检查和违约处理"><a href="#1-2-实体完整性检查和违约处理" class="headerlink" title="1.2 实体完整性检查和违约处理"></a>1.2 实体完整性检查和违约处理</h2><h1 id="二、参照完整性"><a href="#二、参照完整性" class="headerlink" title="二、参照完整性"></a>二、参照完整性</h1><blockquote><p>外码要么没有, 要么只有一个</p></blockquote><h2 id="2-1-定义参照完整性"><a href="#2-1-定义参照完整性" class="headerlink" title="2.1 定义参照完整性"></a>2.1 定义参照完整性</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> course(</span><br><span class="line">id <span class="type">int</span>,</span><br><span class="line"><span class="type">time</span> <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">title <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">teacher_id <span class="type">int</span>,</span><br><span class="line"><span class="keyword">primary</span> key(id),</span><br><span class="line">    <span class="keyword">foreign</span> key(id) refer人测试 course_description(course_id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="2-2-参照完整性检查和违约处理"><a href="#2-2-参照完整性检查和违约处理" class="headerlink" title="2.2 参照完整性检查和违约处理"></a>2.2 参照完整性检查和违约处理</h2><h1 id="三、用户定义的完整性"><a href="#三、用户定义的完整性" class="headerlink" title="三、用户定义的完整性"></a>三、用户定义的完整性</h1><h2 id="3-1-属性上的约束条件"><a href="#3-1-属性上的约束条件" class="headerlink" title="3.1 属性上的约束条件"></a>3.1 属性上的约束条件</h2><blockquote><p>非空</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(</span><br><span class="line">id <span class="type">char</span>(<span class="number">9</span>) <span class="keyword">primary</span> key,</span><br><span class="line">age <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><blockquote><p>列值为一</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(</span><br><span class="line">id <span class="type">char</span>(<span class="number">9</span>) <span class="keyword">primary</span> key,</span><br><span class="line">age <span class="type">int</span> <span class="keyword">unique</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="3-2-元组上的约束条件"><a href="#3-2-元组上的约束条件" class="headerlink" title="3.2 元组上的约束条件"></a>3.2 元组上的约束条件</h2><blockquote><p>满足某一个条件表达式, 用 <code>check</code> 来写</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(</span><br><span class="line">id <span class="type">char</span>(<span class="number">9</span>) <span class="keyword">primary</span> key,</span><br><span class="line">sex <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">check</span>(sex <span class="keyword">in</span> (<span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;女&#x27;</span>)),</span><br><span class="line">age <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h1 id="四、完整性约束命名子句"><a href="#四、完整性约束命名子句" class="headerlink" title="四、完整性约束命名子句"></a>四、完整性约束命名子句</h1><h1 id="五、域中完整性的限制-选学"><a href="#五、域中完整性的限制-选学" class="headerlink" title="五、域中完整性的限制 (选学)"></a>五、域中完整性的限制 (选学)</h1><h1 id="六、断言"><a href="#六、断言" class="headerlink" title="六、断言"></a>六、断言</h1><blockquote><p>创建断言</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">create</span> assertion 断言名 <span class="keyword">check</span>子句</span><br><span class="line"># 这里的 <span class="keyword">check</span> 子句与 <span class="keyword">where</span> 作用类似, 都是用来添加约束</span><br><span class="line"></span><br><span class="line"># 限制没一门课程最多 <span class="number">60</span> 名学生选修</span><br><span class="line"><span class="keyword">create</span> assertion asse_SC_CNUMI </span><br><span class="line"><span class="keyword">check</span> (<span class="number">60</span> <span class="operator">&gt;=</span> <span class="keyword">all</span> (<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line">                 <span class="keyword">from</span> SC</span><br><span class="line">                 <span class="keyword">group</span> <span class="keyword">by</span> cno)</span><br><span class="line">      );</span><br></pre></td></tr></table></figure><blockquote><p>删除断言</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">drop</span> assertion 断言名</span><br></pre></td></tr></table></figure><h1 id="七、触发器"><a href="#七、触发器" class="headerlink" title="七、触发器"></a>七、触发器</h1><blockquote><p>触发器也叫做 事件 -&gt; 条件 -&gt; 动作 规则</p></blockquote><blockquote><p>当对一个表 增&#x2F;删&#x2F;改 的时候, 对触发器里面的条件进行检查</p><p>如果成立, 就执行触发器里面的动作, 否则不执行里面的动作</p></blockquote><h2 id="7-1-定义触发器"><a href="#7-1-定义触发器" class="headerlink" title="7.1 定义触发器"></a>7.1 定义触发器</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> 触发器名# 每当触发事件发生时, 该触发器被激活</span><br><span class="line">before或after 触发事件 <span class="keyword">on</span> 表名  # 致命触发器激活的事件是在执行触发事件的前或后</span><br><span class="line"><span class="keyword">referencing</span> <span class="keyword">new</span>或<span class="keyword">old</span> <span class="type">row</span> <span class="keyword">as</span> 变量    # <span class="keyword">referencing</span> 之处引用的变量</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span>或statement   # 定义触发器的类型, 指明动作体执行的频率</span><br><span class="line">[<span class="keyword">when</span> 触发条件] 触发动作体 # 仅当触发条件为真时才执行触发动作体</span><br></pre></td></tr></table></figure><h2 id="7-2-激活触发器"><a href="#7-2-激活触发器" class="headerlink" title="7.2 激活触发器"></a>7.2 激活触发器</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">当对表 SC 的 Grade 属性进行修改时, 若分数增加了 10%, 则将此次操作记录到另一个表 SC_U (Sno、Cno、Oldgrade、Newgrade)中,其中 Oldgrade 是修改前的分数, Newgrade 是修改后的分数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> SC_T# SC_T 是触发器的名字</span><br><span class="line">after <span class="keyword">update</span> <span class="keyword">of</span> Grade <span class="keyword">on</span> SC# <span class="keyword">update</span> <span class="keyword">of</span> Grade <span class="keyword">on</span> SC 是触发事件</span><br><span class="line"># after 是触发的时机, 表示当时 SC 的 Grade 属性修改完成后再触发下面的规则</span><br><span class="line"><span class="keyword">referencing</span></span><br><span class="line">oldrow <span class="keyword">as</span> OldTuple</span><br><span class="line">newrow <span class="keyword">as</span> NewTuple</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span># 行级触发器, 即每执行一次 Grade 的更新, 下面的规则就执行一次</span><br><span class="line"><span class="keyword">when</span> (NewTuple.Grade <span class="operator">&gt;=</span> <span class="number">1.1</span> <span class="operator">*</span> OldTuple.Grade)# 触发条件, 只有该条件为真时才执行</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> SC_U(Sno, Cno, OldGrade, NewGrade)# 触发后执行下面的 <span class="keyword">insert</span> 操作</span><br><span class="line"><span class="keyword">values</span>(OldTuple.Sno, OldTuple.Cno, OldTuple.Grade, NewTuple.Grade)</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">将每次对表 Student 的插入操作所增加的学生个数记录到表 StudentInsertLog 中</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> Student_Count</span><br><span class="line">aafter <span class="keyword">insert</span> <span class="keyword">on</span> Studnet# 指明触发器激活的时间是在执行 <span class="keyword">insert</span> 后</span><br><span class="line"><span class="keyword">referencing</span></span><br><span class="line"><span class="keyword">new</span> <span class="keyword">table</span> delta</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> statement# 语句执行触发器, 即执行完 <span class="keyword">insert</span> 语句后下面的触发动作体才执行一次</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> StudnetInsertLog (Numbers) </span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> delta</span><br></pre></td></tr></table></figure><h2 id="7-3-删除触发器"><a href="#7-3-删除触发器" class="headerlink" title="7.3 删除触发器"></a>7.3 删除触发器</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">drop</span> <span class="keyword">trigger</span> 触发器名 <span class="keyword">on</span> 表名</span><br></pre></td></tr></table></figure><h1 id="（六）–-关系数据理论"><a href="#（六）–-关系数据理论" class="headerlink" title="（六）– 关系数据理论"></a>（六）– 关系数据理论</h1><h1 id="一、问题的提出"><a href="#一、问题的提出" class="headerlink" title="一、问题的提出"></a>一、问题的提出</h1><p>为什么引入范式？</p><ol><li>数据冗余</li><li>更新异常</li><li>插入异常</li><li>删除异常</li></ol><p>范式分类</p><p>设计关系数据库时，遵从不同的规范要求，这些不同的规范要求被称为不同的范式，<br>各种范式呈递次规范，越高的范式数据库冗余越小。<br>目前关系数据库有六种范式: </p><ul><li>第一范式 (1NF)</li><li>第二范式 (2NF) </li><li>第三范式 (3NF)</li><li>巴斯-科德范式 (BCNF)</li><li>第四范式 (4NF) </li><li>第五范式 (5NF，又称完美范式)。</li></ul><p>一般来说，数据库只需满足第三范式 (3NF) 就行了。</p><h1 id="二、规范化"><a href="#二、规范化" class="headerlink" title="二、规范化"></a>二、规范化</h1><h2 id="2-1-函数依赖"><a href="#2-1-函数依赖" class="headerlink" title="2.1 函数依赖"></a>2.1 函数依赖</h2><blockquote><p>X -&gt; Y 是非平凡的函数依赖</p></blockquote><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304145206693.png" alt="非平凡函数依赖"></p><blockquote><p>X -&gt; Y 是平凡的函数依赖</p></blockquote><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304153305340.png" alt="平凡函数依赖"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304153342181.png" alt="完全函数依赖"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304153405981.png" alt="部分函数依赖"></p><h2 id="2-2-码"><a href="#2-2-码" class="headerlink" title="2.2 码"></a>2.2 码</h2><blockquote><p>候选码: 可以推出所有属性</p></blockquote><p>如何选出候选码?</p><ol><li><p>只出现在左边的一定是候选码</p></li><li><p>只出现在右边的一定不是候选码</p></li><li><p>左右都出现的不一定是候选码</p></li><li><p>左右都不出现的一定是候选码</p></li><li><p>再求确定的候选码的闭包, 如果可以推出全部, 那么当前确定的就是候选码,</p><p>否则, 要把每一个可能的值放进当前确定的候选码里面求闭包</p></li></ol><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">R&lt;U, F&gt;, U(A, B, C, D, E, F, G), F = &#123;AB --&gt; C, CD --&gt; E, E --&gt; A, A --&gt; G&#125;, 求候选码:</span><br><span class="line"></span><br><span class="line">B 一定是候选码, D 一定是候选码</span><br><span class="line">G 一定不是候选码</span><br><span class="line">A, C, E 不一定是候选码</span><br><span class="line">BD --&gt; 推不出来, 所以要把每一个可能的求闭包</span><br><span class="line">(BDA) += 可推出 C, E, A, G 所以可以推出 ABCDEFG</span><br><span class="line">(BDC) += 可推出 E, A, G 所以可以推出 ABCDEFG</span><br><span class="line">(BDE) += A, G, C 可以推出 ABCDEG</span><br><span class="line"></span><br><span class="line">那么候选码最终是 &#123;(BDA), (BDC), (BDE)&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>超码: 能表示出所有属性的集合, 比如 (BDA), (BDC), (BDE), BDCA, BDEA, ABCDE</p><p>候选码是最小的超码</p></blockquote><blockquote><p>主码: 从候选码里面任意挑出一个作为主码</p></blockquote><blockquote><p>主属性: 包含在所有候选码里的属性, 比如: ABCDE</p></blockquote><blockquote><p>非主属性: 不包含在候选码中的属性, 上题为 G</p></blockquote><blockquote><p>全码: 所有的属性都是主码</p></blockquote><h2 id="2-3-范式"><a href="#2-3-范式" class="headerlink" title="2.3 范式"></a>2.3 范式</h2><blockquote><p>1 NF: 所有字段值都是不可分解的原子值</p></blockquote><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304154601415.png" alt="1 NF"></p><p>比如某些数据库系统中需要用到 “地址” 这个属性，本来直接将 “地址” 属性设计成一个数据库表<br>但是如果系统经常会访问 “地址” 属性中的 “城市” 部分，<br>那么就非要将 “地址” 这个属性重新拆分为省份、城市、详细地址等多个部分进行存储，<br>这样在对地址中某一部分操作的时候将非常方便</p><h2 id="2-4-2NF"><a href="#2-4-2NF" class="headerlink" title="2.4 2NF"></a>2.4 2NF</h2><blockquote><p>不包含非主属性对码的部分函数依赖, 一个表中只能保存一种数据, 不可以把多种数据保存在同一张数据库表中</p></blockquote><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304154710223.png" alt="订单信息表"></p><p>一个表中只能保存一种数据，不可以把多种数据保存在同一张数据库表中<br>该表中商品名称、单位、商品价格等信息不与该表的主键相关，<br>而仅仅是与商品编号相关。所以在这里违反了第二范式的设计原则</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304154758821.png" alt="2 NF"></p><h2 id="2-5-3NF"><a href="#2-5-3NF" class="headerlink" title="2.5 3NF"></a>2.5 3NF</h2><blockquote><p>不包含非主属性对码的传递函数依赖, 确保数据表中的每一列数据都和主键直接相关, 而不能间接相关</p></blockquote><p>比如在设计一个订单数据表的时候，可以将客户编号作为一个外键和订单表建立相应的关系。<br>而不可以在订单表中添加关于客户其它信息 (比如姓名、所属公司等) 的字段</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304154837438.png" alt="3 NF"></p><h2 id="2-6-BCNF"><a href="#2-6-BCNF" class="headerlink" title="2.6 BCNF"></a>2.6 BCNF</h2><blockquote><p>消除每一属性对候选键的依赖传递, BCNF 是修正的第三范式</p></blockquote><p>下表存在关系:</p><ul><li>书号 -&gt; 书名</li><li>(书名、作者) -&gt; 书号</li></ul><p>下图关系存在传递依赖, 不能是 BCNF</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304154904427.png" alt="不满足 BCNF"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304155007498.png" alt="BCNF"></p><h2 id="2-7-多值依赖"><a href="#2-7-多值依赖" class="headerlink" title="2.7 多值依赖"></a>2.7 多值依赖</h2><blockquote><p>依赖: 指关系中一个或一组属性的值可以决定其他属性的值 A -&gt; B 就是一个依赖</p></blockquote><p>如何求最小依赖集 ?</p><ol><li><p>拆右边为多个元素的, A -&gt; BC 拆为 A -&gt; B 和 A -&gt; C</p></li><li><p>除去当前元素, 求它的闭包, 把集合里面所有元素都弄完</p></li><li><p>左边最小化 (通过遮住元素来看能不能推出其他元素)</p><p>比如 BCD, 遮住 B 能否推出 CD ? 遮住 C 能否推出 BD ? 遮住 D 能否推出 BC ?</p></li></ol><h2 id="2-8-4NF"><a href="#2-8-4NF" class="headerlink" title="2.8 4NF"></a>2.8 4NF</h2><h1 id="三、数据依赖的公理系统"><a href="#三、数据依赖的公理系统" class="headerlink" title="三、数据依赖的公理系统"></a>三、数据依赖的公理系统</h1><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304155033455.png" alt="公理系统"></p><h1 id="四、模式的分解（选学）"><a href="#四、模式的分解（选学）" class="headerlink" title="四、模式的分解（选学）"></a>四、模式的分解（选学）</h1><blockquote><p>准则: 无损连接, 保持函数依赖</p></blockquote><blockquote><p>无损: 分解后再次连接, 和分解之前一样</p></blockquote><blockquote><p>依赖: 依赖不变</p></blockquote><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304155900677.png" alt="依赖表"></p><p>上表依赖: 科系 -&gt; 系主任, 学号 -&gt; 科系</p><blockquote><p>例题</p><p>已知 R (ABCDEGH), F &#x3D; {A -&gt; D, E -&gt; D, D -&gt; B, BC -&gt; D, DC -&gt; A}, 求保持函数依赖的 3NF 的分解</p></blockquote><ol><li>求出最小函数依赖</li><li>把不在 F 里面的属性都找出来, 单独分为一类</li><li>把每一个依赖左边相同的分成一类, 没有一样的, 就把 A -&gt; D 改为 {AD}, 如果一样 {A -&gt; B, A -&gt; C}, 那么就改为 {ABC}</li><li>如果候选码没出现在分离里面, 就把任意一个候选码作为一类</li></ol><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304160321342.png" alt="题解"></p><h1 id="（七）–-数据库设计"><a href="#（七）–-数据库设计" class="headerlink" title="（七）– 数据库设计"></a>（七）– 数据库设计</h1><h1 id="一、数据库设计概述"><a href="#一、数据库设计概述" class="headerlink" title="一、数据库设计概述"></a>一、数据库设计概述</h1><h2 id="1-1-数据库设计的特点"><a href="#1-1-数据库设计的特点" class="headerlink" title="1.1 数据库设计的特点"></a>1.1 数据库设计的特点</h2><h2 id="1-2-数据库设计方法"><a href="#1-2-数据库设计方法" class="headerlink" title="1.2 数据库设计方法"></a>1.2 数据库设计方法</h2><h2 id="1-3-数据库设计的基本步骤"><a href="#1-3-数据库设计的基本步骤" class="headerlink" title="1.3 数据库设计的基本步骤"></a>1.3 数据库设计的基本步骤</h2><ol><li>需求分析</li><li>概念结构设计: E-R 图 或 设计数据字典</li><li>逻辑结构设计: 把 E-R 图转为 逻辑模型</li><li>物理结构设计: 把 逻辑模型 转为 物理模型</li><li>数据库实施: 写 SQL 代码</li><li>数据库运行维护: 性能检测</li></ol><h2 id="1-4-数据库设计过程中的各级模式"><a href="#1-4-数据库设计过程中的各级模式" class="headerlink" title="1.4 数据库设计过程中的各级模式"></a>1.4 数据库设计过程中的各级模式</h2><h1 id="二、需求分析"><a href="#二、需求分析" class="headerlink" title="二、需求分析"></a>二、需求分析</h1><h2 id="2-1-需求分析的任务"><a href="#2-1-需求分析的任务" class="headerlink" title="2.1 需求分析的任务"></a>2.1 需求分析的任务</h2><h2 id="2-2-需求分析的方法"><a href="#2-2-需求分析的方法" class="headerlink" title="2.2 需求分析的方法"></a>2.2 需求分析的方法</h2><h2 id="2-3-数据字典"><a href="#2-3-数据字典" class="headerlink" title="2.3 数据字典"></a>2.3 数据字典</h2><h1 id="三、概念结构设计"><a href="#三、概念结构设计" class="headerlink" title="三、概念结构设计"></a>三、概念结构设计</h1><h2 id="3-1-概念模型"><a href="#3-1-概念模型" class="headerlink" title="3.1 概念模型"></a>3.1 概念模型</h2><h2 id="3-2-E-R-模型"><a href="#3-2-E-R-模型" class="headerlink" title="3.2 E-R 模型"></a>3.2 E-R 模型</h2><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304161116250.png" alt="E-R 图"></p><ul><li><p>长方形 - 实体</p></li><li><p>椭圆 - 属性</p></li><li><p>关系 - 菱形</p></li><li><p>一对一 (1 : 1)</p><p>一对一关系是指对于实体集 A 与实体集 B, A 中的每一个实体至多与 B 中的一个实体有关系, 反之, 在实体集 B 中的每个实体至多与实体集 A 中的一个实体有关系</p></li><li><p>一对多 (1 : N)</p><p>一对多关系是指实体集 A 与实体集 B 中至少有 N (N &gt; 0) 个实体有关系, 并且实体集 B 中每一个实体至多与实体集 A 中一个实体有关系</p></li><li><p>多对多 (M : N)</p><p>多对多关系是指实体集 A 中的每一个实体与实体集 B 中至少有 M (M &gt; 0) 个实体有关系, 并且实体集 B 中的每一个实体与实体集 A 中的至少 N (N &gt; 0) 个实体有关系</p></li></ul><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304171147053.png" alt="一对一"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304171157812.png" alt="一对多"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304171209214.png" alt="多对多"></p><h2 id="3-3-扩展的-E-R-模型-选学"><a href="#3-3-扩展的-E-R-模型-选学" class="headerlink" title="3.3 扩展的 E-R 模型 (选学)"></a>3.3 扩展的 E-R 模型 (选学)</h2><h2 id="3-4-UML-选学"><a href="#3-4-UML-选学" class="headerlink" title="3.4 UML (选学)"></a>3.4 UML (选学)</h2><h2 id="3-5-概念结构设计"><a href="#3-5-概念结构设计" class="headerlink" title="3.5 概念结构设计"></a>3.5 概念结构设计</h2><h1 id="四、逻辑结构设计"><a href="#四、逻辑结构设计" class="headerlink" title="四、逻辑结构设计"></a>四、逻辑结构设计</h1><h2 id="4-1-E-R-图像关系模型的转换"><a href="#4-1-E-R-图像关系模型的转换" class="headerlink" title="4.1 E-R 图像关系模型的转换"></a>4.1 E-R 图像关系模型的转换</h2><h2 id="4-2-数据模型的优化"><a href="#4-2-数据模型的优化" class="headerlink" title="4.2 数据模型的优化"></a>4.2 数据模型的优化</h2><h2 id="4-3-设计用户子模式"><a href="#4-3-设计用户子模式" class="headerlink" title="4.3 设计用户子模式"></a>4.3 设计用户子模式</h2><h1 id="五、物理结构设计"><a href="#五、物理结构设计" class="headerlink" title="五、物理结构设计"></a>五、物理结构设计</h1><h2 id="5-1-数据库物理设计的内容和方法"><a href="#5-1-数据库物理设计的内容和方法" class="headerlink" title="5.1 数据库物理设计的内容和方法"></a>5.1 数据库物理设计的内容和方法</h2><h2 id="5-2-关系模式存取方法选择"><a href="#5-2-关系模式存取方法选择" class="headerlink" title="5.2 关系模式存取方法选择"></a>5.2 关系模式存取方法选择</h2><h2 id="5-3-确定数据库的存储结构"><a href="#5-3-确定数据库的存储结构" class="headerlink" title="5.3 确定数据库的存储结构"></a>5.3 确定数据库的存储结构</h2><h2 id="5-4-评价物理结构"><a href="#5-4-评价物理结构" class="headerlink" title="5.4 评价物理结构"></a>5.4 评价物理结构</h2><h1 id="六、数据库的实施和维护"><a href="#六、数据库的实施和维护" class="headerlink" title="六、数据库的实施和维护"></a>六、数据库的实施和维护</h1><h2 id="6-1-数据的载入和应用程序的调试"><a href="#6-1-数据的载入和应用程序的调试" class="headerlink" title="6.1 数据的载入和应用程序的调试"></a>6.1 数据的载入和应用程序的调试</h2><h2 id="6-2-数据库的试运行"><a href="#6-2-数据库的试运行" class="headerlink" title="6.2 数据库的试运行"></a>6.2 数据库的试运行</h2><h2 id="6-3-数据库的运行和维护"><a href="#6-3-数据库的运行和维护" class="headerlink" title="6.3 数据库的运行和维护"></a>6.3 数据库的运行和维护</h2><h1 id="（八）–-数据库编程"><a href="#（八）–-数据库编程" class="headerlink" title="（八）– 数据库编程"></a>（八）– 数据库编程</h1><h1 id="一、嵌入式-SQL"><a href="#一、嵌入式-SQL" class="headerlink" title="一、嵌入式 SQL"></a>一、嵌入式 SQL</h1><blockquote><p>就是把 SQL 语句嵌入到其他编程语言里面, 比如: Java</p></blockquote><h2 id="1-1-嵌入式-SQL-的处理过程"><a href="#1-1-嵌入式-SQL-的处理过程" class="headerlink" title="1.1 嵌入式 SQL 的处理过程"></a>1.1 嵌入式 SQL 的处理过程</h2><ol><li>预编译转换为函数调用</li><li>主语言编译</li><li>变成主语言所编译的类型</li></ol><h2 id="1-2-嵌入式-SQL-语句与主语言之间的通信"><a href="#1-2-嵌入式-SQL-语句与主语言之间的通信" class="headerlink" title="1.2 嵌入式 SQL 语句与主语言之间的通信"></a>1.2 嵌入式 SQL 语句与主语言之间的通信</h2><ul><li>SQL 给主语言传递状态</li><li>主语言给 SQL 提供参数</li><li>SQL 把查询结果交给主语言处理 (游标 和 主变量实现)</li></ul><h2 id="1-3-不用游标的-SQL-语句"><a href="#1-3-不用游标的-SQL-语句" class="headerlink" title="1.3 不用游标的 SQL 语句"></a>1.3 不用游标的 SQL 语句</h2><h2 id="1-4-使用游标的-SQL-语句"><a href="#1-4-使用游标的-SQL-语句" class="headerlink" title="1.4 使用游标的 SQL 语句"></a>1.4 使用游标的 SQL 语句</h2><h2 id="1-5-动态-SQL"><a href="#1-5-动态-SQL" class="headerlink" title="1.5 动态 SQL"></a>1.5 动态 SQL</h2><h1 id="二-、过程化-SQL"><a href="#二-、过程化-SQL" class="headerlink" title="二 、过程化 SQL"></a>二 、过程化 SQL</h1><h2 id="2-1-过程化-SQL-的块结构"><a href="#2-1-过程化-SQL-的块结构" class="headerlink" title="2.1 过程化 SQL 的块结构"></a>2.1 过程化 SQL 的块结构</h2><h2 id="2-2-变量和常量的定义"><a href="#2-2-变量和常量的定义" class="headerlink" title="2.2 变量和常量的定义"></a>2.2 变量和常量的定义</h2><h2 id="2-3-流程控制"><a href="#2-3-流程控制" class="headerlink" title="2.3 流程控制"></a>2.3 流程控制</h2><h1 id="三、存储过程和函数"><a href="#三、存储过程和函数" class="headerlink" title="三、存储过程和函数"></a>三、存储过程和函数</h1><h2 id="3-1-存储过程"><a href="#3-1-存储过程" class="headerlink" title="3.1 存储过程"></a>3.1 存储过程</h2><h2 id="3-2-函数"><a href="#3-2-函数" class="headerlink" title="3.2 函数"></a>3.2 函数</h2><h2 id="3-3-过程化-SQL-中的游标"><a href="#3-3-过程化-SQL-中的游标" class="headerlink" title="3.3 过程化 SQL 中的游标"></a>3.3 过程化 SQL 中的游标</h2><h1 id="四、ODBC-编程"><a href="#四、ODBC-编程" class="headerlink" title="四、ODBC 编程"></a>四、ODBC 编程</h1><h2 id="4-1-ODBC-概述"><a href="#4-1-ODBC-概述" class="headerlink" title="4.1  ODBC 概述"></a>4.1  ODBC 概述</h2><h2 id="4-2-ODBC-工作原理概述"><a href="#4-2-ODBC-工作原理概述" class="headerlink" title="4.2 ODBC 工作原理概述"></a>4.2 ODBC 工作原理概述</h2><h2 id="4-3-ODBC-API-基础"><a href="#4-3-ODBC-API-基础" class="headerlink" title="4.3 ODBC API 基础"></a>4.3 ODBC API 基础</h2><h2 id="4-4-ODBC-的工作流程"><a href="#4-4-ODBC-的工作流程" class="headerlink" title="4.4 ODBC 的工作流程"></a>4.4 ODBC 的工作流程</h2><h1 id="五、OLE-DB（选学）"><a href="#五、OLE-DB（选学）" class="headerlink" title="五、OLE DB（选学）"></a>五、OLE DB（选学）</h1><h1 id="六、JDBC-编程（选学）"><a href="#六、JDBC-编程（选学）" class="headerlink" title="六、JDBC 编程（选学）"></a>六、JDBC 编程（选学）</h1><h1 id="（九）–-关系查询处理和查询优化"><a href="#（九）–-关系查询处理和查询优化" class="headerlink" title="（九）– 关系查询处理和查询优化"></a>（九）– 关系查询处理和查询优化</h1><h1 id="一、关系数据库系统的查询处理"><a href="#一、关系数据库系统的查询处理" class="headerlink" title="一、关系数据库系统的查询处理"></a>一、关系数据库系统的查询处理</h1><h2 id="1-1-查询处理步骤"><a href="#1-1-查询处理步骤" class="headerlink" title="1.1 查询处理步骤"></a>1.1 查询处理步骤</h2><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304172322631.png" alt="查询过程"></p><h2 id="1-2-实现查询操作的算法示例"><a href="#1-2-实现查询操作的算法示例" class="headerlink" title="1.2 实现查询操作的算法示例"></a>1.2 实现查询操作的算法示例</h2><h1 id="二、关系数据库系统的查询优化"><a href="#二、关系数据库系统的查询优化" class="headerlink" title="二、关系数据库系统的查询优化"></a>二、关系数据库系统的查询优化</h1><h2 id="2-1-查询优化概述"><a href="#2-1-查询优化概述" class="headerlink" title="2.1 查询优化概述"></a>2.1 查询优化概述</h2><p>查询优化的四个阶段：</p><ol><li>查询分析</li><li>查询检查</li><li>查询优化<ul><li>代数优化</li><li>物理优化</li></ul></li><li>查询执行</li></ol><h2 id="2-2-一个实例"><a href="#2-2-一个实例" class="headerlink" title="2.2 一个实例"></a>2.2 一个实例</h2><h1 id="三、代数优化"><a href="#三、代数优化" class="headerlink" title="三、代数优化"></a>三、代数优化</h1><h2 id="3-1-关系代数表达式等价变换规则"><a href="#3-1-关系代数表达式等价变换规则" class="headerlink" title="3.1 关系代数表达式等价变换规则"></a>3.1 关系代数表达式等价变换规则</h2><ul><li>选择运算尽量先做</li><li>把投影运算和选择运算同时执行</li><li>把投影同它前后的双目运算符连接起来</li></ul><h2 id="3-2-查询树的启发式优化"><a href="#3-2-查询树的启发式优化" class="headerlink" title="3.2 查询树的启发式优化"></a>3.2 查询树的启发式优化</h2><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304172443512.png" alt="查询树"></p><h1 id="四、物理优化"><a href="#四、物理优化" class="headerlink" title="四、物理优化"></a>四、物理优化</h1><h2 id="4-1-基于启发式规则的存取路径选择优化"><a href="#4-1-基于启发式规则的存取路径选择优化" class="headerlink" title="4.1 基于启发式规则的存取路径选择优化"></a>4.1 基于启发式规则的存取路径选择优化</h2><h2 id="4-2-基于代价估算的优化"><a href="#4-2-基于代价估算的优化" class="headerlink" title="4.2 基于代价估算的优化"></a>4.2 基于代价估算的优化</h2><h1 id="五、查询计划的执行（选学）"><a href="#五、查询计划的执行（选学）" class="headerlink" title="五、查询计划的执行（选学）"></a>五、查询计划的执行（选学）</h1><h1 id="（十）–-数据恢复技术"><a href="#（十）–-数据恢复技术" class="headerlink" title="（十）– 数据恢复技术"></a>（十）– 数据恢复技术</h1><h1 id="一、事务的基本概念"><a href="#一、事务的基本概念" class="headerlink" title="一、事务的基本概念"></a>一、事务的基本概念</h1><blockquote><p>事务的四大特性: ACID</p></blockquote><ul><li><p>A: 原子性, autom</p><p>要么全做, 要么不做</p></li><li><p>C: 一致性, consistent</p><p>一致性与原子性密切相关, 要么全做要么全不做, 否则就回造成数据不一致, 比如: 银行汇款</p></li><li><p>I: 隔离性, isolate</p><p>一个事务的执行不能被其他事务所干扰</p></li><li><p>D: 持久性, duration</p><p>数据库的改变是永久的, 比如: 存储到磁盘</p></li></ul><h1 id="二、数据库恢复概述"><a href="#二、数据库恢复概述" class="headerlink" title="二、数据库恢复概述"></a>二、数据库恢复概述</h1><h1 id="三、故障的种类"><a href="#三、故障的种类" class="headerlink" title="三、故障的种类"></a>三、故障的种类</h1><ol><li><p>事务内部故障</p><p>采取 REDO 重做 和 UNDO 撤销 技术</p></li><li><p>系统故障 DBMS</p><p>系统突然停转, 系统要重启</p></li><li><p>介质故障</p><p>硬件损坏</p></li><li><p>计算机病毒</p></li></ol><h1 id="四、恢复的实现技术"><a href="#四、恢复的实现技术" class="headerlink" title="四、恢复的实现技术"></a>四、恢复的实现技术</h1><h2 id="4-1-数据转储"><a href="#4-1-数据转储" class="headerlink" title="4.1 数据转储"></a>4.1 数据转储</h2><blockquote><p>对失败的事务重新执行</p></blockquote><h2 id="4-2-登记日志文件"><a href="#4-2-登记日志文件" class="headerlink" title="4.2 登记日志文件"></a>4.2 登记日志文件</h2><blockquote><p>记录事务对数据的更新操作文件</p></blockquote><h1 id="五、恢复策略"><a href="#五、恢复策略" class="headerlink" title="五、恢复策略"></a>五、恢复策略</h1><h2 id="5-1-事务故障的恢复"><a href="#5-1-事务故障的恢复" class="headerlink" title="5.1 事务故障的恢复"></a>5.1 事务故障的恢复</h2><blockquote><p>事务异常终止, 那么就撤销之前的所有操作</p></blockquote><h2 id="5-2-系统故障的恢复"><a href="#5-2-系统故障的恢复" class="headerlink" title="5.2 系统故障的恢复"></a>5.2 系统故障的恢复</h2><blockquote><p>还没执行完的事务 UNDO, 丢失的事务 REDO</p></blockquote><h2 id="5-3-介质故障的恢复"><a href="#5-3-介质故障的恢复" class="headerlink" title="5.3 介质故障的恢复"></a>5.3 介质故障的恢复</h2><blockquote><p>重装数据库, 重做已经完成的事务</p></blockquote><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304173313169.png" alt="恢复子系统才去的不同策略"></p><h1 id="六、具有检查点的恢复技术"><a href="#六、具有检查点的恢复技术" class="headerlink" title="六、具有检查点的恢复技术"></a>六、具有检查点的恢复技术</h1><h1 id="七、数据库镜像"><a href="#七、数据库镜像" class="headerlink" title="七、数据库镜像"></a>七、数据库镜像</h1><h1 id="（十一）–-并发控制（※）"><a href="#（十一）–-并发控制（※）" class="headerlink" title="（十一）– 并发控制（※）"></a>（十一）– 并发控制（※）</h1><h1 id="一、并发控制概述"><a href="#一、并发控制概述" class="headerlink" title="一、并发控制概述"></a>一、并发控制概述</h1><p>并发带来的问题：</p><ol><li><p>丢失修改</p><p>我修改的东西没生效， 比如：把票价改成 99 元，结果还是原来的 299 元</p></li><li><p>读脏数据</p><p>如果要读取数据库中的字段 A, 字段 B, 读取时恰巧有其他用户正在更新这两个字段, 而且 , 如果那个用户更新一半就读去了, 也就是说更新了 A, 正打算要更新 B, 但尚未更新, 就读去了</p></li><li><p>不可重复读取</p><p>一个事务中, 连续两次读取到的数据不一样</p></li></ol><p>解决方法:</p><ol><li>排它锁: 写锁, X 锁</li><li>共享锁: 读锁, S 锁</li></ol><h1 id="二、封锁"><a href="#二、封锁" class="headerlink" title="二、封锁"></a>二、封锁</h1><h1 id="三、封锁协议"><a href="#三、封锁协议" class="headerlink" title="三、封锁协议"></a>三、封锁协议</h1><ol><li><p>一级封锁协议: 解决丢失修改问题</p><p>修改时, 必须加 X 锁, 直到结束</p></li><li><p>二级封锁协议: 解决读脏数据问题</p><p>读的时候, 加 S 锁, 用完就放</p></li><li><p>三级封锁协议: 解决不可重复读问题</p><p>读的时候, 加 S 锁, 直到结束</p></li></ol><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230304174755250.png" alt="封锁协议"></p><h1 id="四、活锁和死锁"><a href="#四、活锁和死锁" class="headerlink" title="四、活锁和死锁"></a>四、活锁和死锁</h1><h1 id="五、并发调度的可串行性"><a href="#五、并发调度的可串行性" class="headerlink" title="五、并发调度的可串行性"></a>五、并发调度的可串行性</h1><p>假设多种情况都可以, 然后获得结果, </p><p>如果并发执行的结果跟上面的结果里面任意一个一样就可以</p><p>事务 T1: 读取 B, A &#x3D; B + 1, 写回 A</p><p>事务 T2: 读取 A, B &#x3D; A + 1, 写回 B</p><p>假设先 T1, 再 T2, 则 A &#x3D; 4, B &#x3D; 3</p><p>假设先 T2, 再 T1, 则 A &#x3D; 3, B &#x3D; 4</p><h1 id="六、两段锁协议"><a href="#六、两段锁协议" class="headerlink" title="六、两段锁协议"></a>六、两段锁协议</h1><h1 id="七、封锁的粒度"><a href="#七、封锁的粒度" class="headerlink" title="七、封锁的粒度"></a>七、封锁的粒度</h1><h1 id="八、其他并发控制机制（选学）"><a href="#八、其他并发控制机制（选学）" class="headerlink" title="八、其他并发控制机制（选学）"></a>八、其他并发控制机制（选学）</h1>]]></content>
      
      
      <categories>
          
          <category> 数据科学与大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库系统概论 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sqoop 检查 MySQL 指令报错</title>
      <link href="/2023/02/22/Sqoop%20%E6%A3%80%E6%9F%A5%20MySQL%20%E6%8C%87%E4%BB%A4%E6%8A%A5%E9%94%99/"/>
      <url>/2023/02/22/Sqoop%20%E6%A3%80%E6%9F%A5%20MySQL%20%E6%8C%87%E4%BB%A4%E6%8A%A5%E9%94%99/</url>
      
        <content type="html"><![CDATA[<h1 id="Sqoop-检查-MySQL-指令报错-Caused-by-java-sql-SQLException-Access-denied-for-user-‘root‘-’bd’-using-password-YES"><a href="#Sqoop-检查-MySQL-指令报错-Caused-by-java-sql-SQLException-Access-denied-for-user-‘root‘-’bd’-using-password-YES" class="headerlink" title="Sqoop 检查 MySQL 指令报错 Caused by: java.sql.SQLException: Access denied for user ‘root‘@’bd’ (using password: YES)"></a>Sqoop 检查 MySQL 指令报错 Caused by: java.sql.SQLException: Access denied for user ‘root‘@’bd’ (using password: YES)</h1><p>输入 Sqoop 检查 MySQL 指令报错</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqoop list-databases --connect jdbc:mysql://<span class="number">192</span>.<span class="number">168</span>.<span class="number">242</span>.<span class="number">1</span>:<span class="number">3306</span> --username root --password <span class="number">123456</span></span><br></pre></td></tr></table></figure><p>报错信息</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Caused by: java.sql.SQLException: Access denied <span class="keyword">for</span> user &#x27;root&#x27;@&#x27;bd&#x27; (using password: YES)</span><br></pre></td></tr></table></figure><p>下图为报错信息</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230222094433763.png" alt="报错信息"></p><p>我们需要在 MySQL 中创建一个 <code>&#39;root&#39;@&#39;bd&#39;</code> 这一个用户</p><p>MySQL 创建用户指令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create user &#x27;root&#x27;@&#x27;bd&#x27; identified by &#x27;MySQL密码&#x27;;</span><br></pre></td></tr></table></figure><p>接下来输入以下指令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant all on *.* to &#x27;root&#x27;@&#x27;bd&#x27;;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p>最后在重新使用 Sqoop 检查指令</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqoop list-databases --connect jdbc:mysql://<span class="number">192</span>.<span class="number">168</span>.<span class="number">242</span>.<span class="number">1</span>:<span class="number">3306</span> --username root --password <span class="number">123456</span></span><br></pre></td></tr></table></figure><p>成功解决</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230222094630716.png" alt="解决之后的输出"></p>]]></content>
      
      
      <categories>
          
          <category> 数据科学与大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Sqoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java 项目 -- 学以致用</title>
      <link href="/2023/02/14/Java%20%E9%A1%B9%E7%9B%AE%20--%20%E5%AD%A6%E4%BB%A5%E8%87%B4%E7%94%A8/"/>
      <url>/2023/02/14/Java%20%E9%A1%B9%E7%9B%AE%20--%20%E5%AD%A6%E4%BB%A5%E8%87%B4%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="Java-项目-–-学以致用"><a href="#Java-项目-–-学以致用" class="headerlink" title="Java 项目 – 学以致用"></a>Java 项目 – 学以致用</h1><h1 id="一、零钱通"><a href="#一、零钱通" class="headerlink" title="一、零钱通"></a>一、零钱通</h1><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230214183412502.png" alt="功能要求"></p><h2 id="1-1-面向过程编程"><a href="#1-1-面向过程编程" class="headerlink" title="1.1 面向过程编程"></a>1.1 面向过程编程</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.smallchange;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SmallChangeSys</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//化繁为简</span></span><br><span class="line">    <span class="comment">//1. 先完成显示菜单，并可以选择菜单，给出对应提示</span></span><br><span class="line">    <span class="comment">//2. 完成零钱通明细</span></span><br><span class="line">    <span class="comment">//3. 完成收益入账</span></span><br><span class="line">    <span class="comment">//4. 消费</span></span><br><span class="line">    <span class="comment">//5. 退出</span></span><br><span class="line">    <span class="comment">//6. 用户输入4退出时，给出提示&quot;你确定要退出吗? y/n&quot;，必须输入正确的y/n ，否则循环输入指令，直到输入y 或者 n</span></span><br><span class="line">    <span class="comment">//7. 在收益入账和消费时，判断金额是否合理，并给出相应的提示</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//定义相关的变量</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">loop</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 完成零钱通明细</span></span><br><span class="line">        <span class="comment">//老韩思路, (1) 可以把收益入账和消费，保存到数组 (2) 可以使用对象 (3) 简单的话可以使用String拼接</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">details</span> <span class="operator">=</span> <span class="string">&quot;-----------------零钱通明细------------------&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 完成收益入账  完成功能驱动程序员增加新的变化和代码</span></span><br><span class="line">        <span class="comment">//老韩思路, 定义新的变量</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">money</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">double</span> <span class="variable">balance</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="literal">null</span>; <span class="comment">// date 是 java.util.Date 类型，表示日期</span></span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm&quot;</span>); <span class="comment">//可以用于日期格式化的</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. 消费</span></span><br><span class="line">        <span class="comment">//定义新变量，保存消费的原因</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">note</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;\n================零钱通菜单===============&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;\t\t\t1 零钱通明细&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;\t\t\t2 收益入账&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;\t\t\t3 消费&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;\t\t\t4 退     出&quot;</span>);</span><br><span class="line"></span><br><span class="line">            System.out.print(<span class="string">&quot;请选择(1-4): &quot;</span>);</span><br><span class="line">            key = scanner.next();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//使用switch 分支控制</span></span><br><span class="line">            <span class="keyword">switch</span> (key) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;1&quot;</span>:</span><br><span class="line">                    System.out.println(details);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;2&quot;</span>:</span><br><span class="line">                    System.out.print(<span class="string">&quot;收益入账金额:&quot;</span>);</span><br><span class="line">                    money = scanner.nextDouble();</span><br><span class="line">                    <span class="comment">//money 的值范围应该校验 -》 一会在完善</span></span><br><span class="line">                    <span class="comment">//老师思路, 编程思想</span></span><br><span class="line">                    <span class="comment">//找出不正确的金额条件，然后给出提示, 就直接break</span></span><br><span class="line">                    <span class="keyword">if</span>(money &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;收益入账金额 需要 大于 0&quot;</span>);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//找出正确金额的条件</span></span><br><span class="line">                    balance += money;</span><br><span class="line">                    <span class="comment">//拼接收益入账信息到 details</span></span><br><span class="line">                    date = <span class="keyword">new</span> <span class="title class_">Date</span>(); <span class="comment">//获取当前日期</span></span><br><span class="line">                    details += <span class="string">&quot;\n收益入账\t+&quot;</span> + money + <span class="string">&quot;\t&quot;</span> + sdf.format(date) + <span class="string">&quot;\t&quot;</span> + balance;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;3&quot;</span>:</span><br><span class="line">                    System.out.print(<span class="string">&quot;消费金额:&quot;</span>);</span><br><span class="line">                    money = scanner.nextDouble();</span><br><span class="line">                    <span class="comment">//money 的值范围应该校验 -》 一会在完善</span></span><br><span class="line">                    <span class="comment">//找出金额不正确的情况</span></span><br><span class="line">                    <span class="comment">//过关斩将 校验方式.</span></span><br><span class="line">                    <span class="keyword">if</span>(money &lt;= <span class="number">0</span> || money &gt; balance) &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;你的消费金额 应该在 0-&quot;</span> + balance);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.print(<span class="string">&quot;消费说明:&quot;</span>);</span><br><span class="line">                    note = scanner.next();</span><br><span class="line">                    balance -= money;</span><br><span class="line">                    <span class="comment">//拼接消费信息到 details</span></span><br><span class="line">                    date = <span class="keyword">new</span> <span class="title class_">Date</span>(); <span class="comment">//获取当前日期</span></span><br><span class="line">                    details += <span class="string">&quot;\n&quot;</span> + note + <span class="string">&quot;\t-&quot;</span> + money + <span class="string">&quot;\t&quot;</span> + sdf.format(date) + <span class="string">&quot;\t&quot;</span> + balance;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;4&quot;</span>:</span><br><span class="line">                    <span class="comment">//用户输入4退出时，给出提示&quot;你确定要退出吗? y/n&quot;，必须输入正确的y/n ，</span></span><br><span class="line">                    <span class="comment">// 否则循环输入指令，直到输入y 或者 n</span></span><br><span class="line">                    <span class="comment">// 老韩思路分析</span></span><br><span class="line">                    <span class="comment">// (1) 定义一个变量 choice, 接收用户的输入</span></span><br><span class="line">                    <span class="comment">// (2) 使用 while + break, 来处理接收到的输入时 y 或者 n</span></span><br><span class="line">                    <span class="comment">// (3) 退出while后，再判断choice是y还是n ,就可以决定是否退出</span></span><br><span class="line">                    <span class="comment">// (4) 建议一段代码，完成一个小功能，尽量不要混在一起</span></span><br><span class="line">                    <span class="type">String</span> <span class="variable">choice</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">                    <span class="keyword">while</span> (<span class="literal">true</span>) &#123; <span class="comment">//要求用户必须输入y/n ,否则就一直循环</span></span><br><span class="line">                        System.out.println(<span class="string">&quot;你确定要退出吗? y/n&quot;</span>);</span><br><span class="line">                        choice = scanner.next();</span><br><span class="line">                        <span class="keyword">if</span> (<span class="string">&quot;y&quot;</span>.equals(choice) || <span class="string">&quot;n&quot;</span>.equals(choice)) &#123;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">//第二个方案</span></span><br><span class="line"><span class="comment">//                        if(&quot;y&quot;.equals(choice)) &#123;</span></span><br><span class="line"><span class="comment">//                            loop = false;</span></span><br><span class="line"><span class="comment">//                            break;</span></span><br><span class="line"><span class="comment">//                        &#125; else if (&quot;n&quot;.equals(choice)) &#123;</span></span><br><span class="line"><span class="comment">//                            break;</span></span><br><span class="line"><span class="comment">//                        &#125;</span></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">//当用户退出while ,进行判断</span></span><br><span class="line">                    <span class="keyword">if</span> (choice.equals(<span class="string">&quot;y&quot;</span>)) &#123;</span><br><span class="line">                        loop = <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    System.out.println(<span class="string">&quot;选择有误，请重新选择&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">while</span> (loop);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;-----退出了零钱通项目-----&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="1-2-面向对象编程"><a href="#1-2-面向对象编程" class="headerlink" title="1.2 面向对象编程"></a>1.2 面向对象编程</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.smallchange.oop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 该类是完成零钱通的各个功能的类</span></span><br><span class="line"><span class="comment"> * 使用OOP(面向对象编程)</span></span><br><span class="line"><span class="comment"> * 将各个功能对应一个方法.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SmallChangeSysOOP</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//属性..</span></span><br><span class="line">    <span class="comment">//定义相关的变量</span></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">loop</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">    <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. 完成零钱通明细</span></span><br><span class="line">    <span class="comment">//老韩思路, (1) 可以把收益入账和消费，保存到数组 (2) 可以使用对象 (3) 简单的话可以使用String拼接</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">details</span> <span class="operator">=</span> <span class="string">&quot;-----------------零钱通明细------------------&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. 完成收益入账  完成功能驱动程序员增加新的变化和代码</span></span><br><span class="line">    <span class="comment">//老韩思路, 定义新的变量</span></span><br><span class="line">    <span class="type">double</span> <span class="variable">money</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">double</span> <span class="variable">balance</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="literal">null</span>; <span class="comment">// date 是 java.util.Date 类型，表示日期</span></span><br><span class="line">    <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm&quot;</span>); <span class="comment">//可以用于日期格式化的</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//4. 消费</span></span><br><span class="line">    <span class="comment">//定义新变量，保存消费的原因</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">note</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//先完成显示菜单，并可以选择</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">mainMenu</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;\n================零钱通菜单(OOP)===============&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;\t\t\t1 零钱通明细&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;\t\t\t2 收益入账&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;\t\t\t3 消费&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;\t\t\t4 退     出&quot;</span>);</span><br><span class="line"></span><br><span class="line">            System.out.print(<span class="string">&quot;请选择(1-4): &quot;</span>);</span><br><span class="line">            key = scanner.next();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//使用switch 分支控制</span></span><br><span class="line">            <span class="keyword">switch</span> (key) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;1&quot;</span>:</span><br><span class="line">                    <span class="built_in">this</span>.detail();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;2&quot;</span>:</span><br><span class="line">                    <span class="built_in">this</span>.income();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;3&quot;</span>:</span><br><span class="line">                    <span class="built_in">this</span>.pay();</span><br><span class="line">                   <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">&quot;4&quot;</span>:</span><br><span class="line">                    <span class="built_in">this</span>.exit();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    System.out.println(<span class="string">&quot;选择有误，请重新选择&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">while</span> (loop);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//完成零钱通明细</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">detail</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(details);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//完成收益入账</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">income</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;收益入账金额:&quot;</span>);</span><br><span class="line">        money = scanner.nextDouble();</span><br><span class="line">        <span class="comment">//money 的值范围应该校验 -》 一会在完善</span></span><br><span class="line">        <span class="comment">//老师思路, 编程思想</span></span><br><span class="line">        <span class="comment">//找出不正确的金额条件，然后给出提示, 就直接return</span></span><br><span class="line">        <span class="keyword">if</span>(money &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;收益入账金额 需要 大于 0&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>; <span class="comment">//退出方法，不在执行后面的代码。</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//找出正确金额的条件</span></span><br><span class="line">        balance += money;</span><br><span class="line">        <span class="comment">//拼接收益入账信息到 details</span></span><br><span class="line">        date = <span class="keyword">new</span> <span class="title class_">Date</span>(); <span class="comment">//获取当前日期</span></span><br><span class="line">        details += <span class="string">&quot;\n收益入账\t+&quot;</span> + money + <span class="string">&quot;\t&quot;</span> + sdf.format(date) + <span class="string">&quot;\t&quot;</span> + balance;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//消费</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;消费金额:&quot;</span>);</span><br><span class="line">        money = scanner.nextDouble();</span><br><span class="line">        <span class="comment">//money 的值范围应该校验 -》 一会在完善</span></span><br><span class="line">        <span class="comment">//找出金额不正确的情况</span></span><br><span class="line">        <span class="comment">//过关斩将 校验方式.</span></span><br><span class="line">        <span class="keyword">if</span>(money &lt;= <span class="number">0</span> || money &gt; balance) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;你的消费金额 应该在 0-&quot;</span> + balance);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.print(<span class="string">&quot;消费说明:&quot;</span>);</span><br><span class="line">        note = scanner.next();</span><br><span class="line">        balance -= money;</span><br><span class="line">        <span class="comment">//拼接消费信息到 details</span></span><br><span class="line">        date = <span class="keyword">new</span> <span class="title class_">Date</span>(); <span class="comment">//获取当前日期</span></span><br><span class="line">        details += <span class="string">&quot;\n&quot;</span> + note + <span class="string">&quot;\t-&quot;</span> + money + <span class="string">&quot;\t&quot;</span> + sdf.format(date) + <span class="string">&quot;\t&quot;</span> + balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//退出</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">exit</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//用户输入4退出时，给出提示&quot;你确定要退出吗? y/n&quot;，必须输入正确的y/n ，</span></span><br><span class="line">        <span class="comment">// 否则循环输入指令，直到输入y 或者 n</span></span><br><span class="line">        <span class="comment">// 老韩思路分析</span></span><br><span class="line">        <span class="comment">// (1) 定义一个变量 choice, 接收用户的输入</span></span><br><span class="line">        <span class="comment">// (2) 使用 while + break, 来处理接收到的输入时 y 或者 n</span></span><br><span class="line">        <span class="comment">// (3) 退出while后，再判断choice是y还是n ,就可以决定是否退出</span></span><br><span class="line">        <span class="comment">// (4) 建议一段代码，完成一个小功能，尽量不要混在一起</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">choice</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123; <span class="comment">//要求用户必须输入y/n ,否则就一直循环</span></span><br><span class="line">            System.out.println(<span class="string">&quot;你确定要退出吗? y/n&quot;</span>);</span><br><span class="line">            choice = scanner.next();</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;y&quot;</span>.equals(choice) || <span class="string">&quot;n&quot;</span>.equals(choice)) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//第二个方案</span></span><br><span class="line"><span class="comment">//                        if(&quot;y&quot;.equals(choice)) &#123;</span></span><br><span class="line"><span class="comment">//                            loop = false;</span></span><br><span class="line"><span class="comment">//                            break;</span></span><br><span class="line"><span class="comment">//                        &#125; else if (&quot;n&quot;.equals(choice)) &#123;</span></span><br><span class="line"><span class="comment">//                            break;</span></span><br><span class="line"><span class="comment">//                        &#125;</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//当用户退出while ,进行判断</span></span><br><span class="line">        <span class="keyword">if</span> (choice.equals(<span class="string">&quot;y&quot;</span>)) &#123;</span><br><span class="line">            loop = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.smallchange.oop;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这里我们直接调用SmallChangeSysOOP 对象，显示主菜单即可</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SmallChangeSysApp</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;====hello公司====&quot;</span>);</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">SmallChangeSysOOP</span>().mainMenu();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="二、房屋出租系统"><a href="#二、房屋出租系统" class="headerlink" title="二、房屋出租系统"></a>二、房屋出租系统</h1><hr><h1 id="三、迷宫问题"><a href="#三、迷宫问题" class="headerlink" title="三、迷宫问题"></a>三、迷宫问题</h1><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230214183539726.png" alt="功能要求"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MiGong</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//思路</span></span><br><span class="line"><span class="comment">//1. 先创建迷宫，用二维数组表示 int[][] map = new int[8][7];</span></span><br><span class="line"><span class="comment">//2. 先规定 map 数组的元素值: 0 表示可以走 1 表示障碍物 </span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[][] map = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">8</span>][<span class="number">7</span>];</span><br><span class="line"><span class="comment">//3. 将最上面的一行和最下面的一行，全部设置为1</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line">map[<span class="number">0</span>][i] = <span class="number">1</span>;</span><br><span class="line">map[<span class="number">7</span>][i] = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//4.将最右面的一列和最左面的一列，全部设置为1</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">map[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">map[i][<span class="number">6</span>] = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">map[<span class="number">3</span>][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">map[<span class="number">3</span>][<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">map[<span class="number">2</span>][<span class="number">2</span>] = <span class="number">1</span>; <span class="comment">//测试回溯 </span></span><br><span class="line"><span class="comment">// map[2][1] = 1;</span></span><br><span class="line"><span class="comment">// map[2][2] = 1;</span></span><br><span class="line"><span class="comment">// map[1][2] = 1;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//输出当前的地图</span></span><br><span class="line">System.out.println(<span class="string">&quot;=====当前地图情况======&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; map.length; i++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; map[i].length; j++) &#123;</span><br><span class="line">System.out.print(map[i][j] + <span class="string">&quot; &quot;</span>);<span class="comment">//输出一行</span></span><br><span class="line">&#125;</span><br><span class="line">System.out.println();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用findWay给老鼠找路</span></span><br><span class="line"><span class="type">T</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">T</span>();</span><br><span class="line"><span class="comment">//下右上左</span></span><br><span class="line">t1.findWay(map, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;\n====找路的情况如下=====&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; map.length; i++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; map[i].length; j++) &#123;</span><br><span class="line">System.out.print(map[i][j] + <span class="string">&quot; &quot;</span>);<span class="comment">//输出一行</span></span><br><span class="line">&#125;</span><br><span class="line">System.out.println();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">T</span>  &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用递归回溯的思想来解决老鼠出迷宫</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//老韩解读</span></span><br><span class="line"><span class="comment">//1. findWay方法就是专门来找出迷宫的路径</span></span><br><span class="line"><span class="comment">//2. 如果找到，就返回 true ,否则返回false</span></span><br><span class="line"><span class="comment">//3. map 就是二维数组，即表示迷宫</span></span><br><span class="line"><span class="comment">//4. i,j 就是老鼠的位置，初始化的位置为(1,1)</span></span><br><span class="line"><span class="comment">//5. 因为我们是递归的找路，所以我先规定 map数组的各个值的含义</span></span><br><span class="line"><span class="comment">//   0 表示可以走 1 表示障碍物 2 表示可以走 3 表示走过，但是走不通是死路</span></span><br><span class="line"><span class="comment">//6. 当map[6][5] =2 就说明找到通路,就可以结束，否则就继续找.</span></span><br><span class="line"><span class="comment">//7. 先确定老鼠找路策略 下-&gt;右-&gt;上-&gt;左</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">findWay</span><span class="params">(<span class="type">int</span>[][] map , <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(map[<span class="number">6</span>][<span class="number">5</span>] == <span class="number">2</span>) &#123;<span class="comment">//说明已经找到</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(map[i][j] == <span class="number">0</span>) &#123;<span class="comment">//当前这个位置0,说明表示可以走</span></span><br><span class="line"><span class="comment">//我们假定可以走通</span></span><br><span class="line">map[i][j] = <span class="number">2</span>;</span><br><span class="line"><span class="comment">//使用找路策略，来确定该位置是否真的可以走通</span></span><br><span class="line"><span class="comment">//下-&gt;右-&gt;上-&gt;左</span></span><br><span class="line"><span class="keyword">if</span>(findWay(map, i + <span class="number">1</span>, j)) &#123;<span class="comment">//先走下</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(findWay(map, i, j + <span class="number">1</span>))&#123;<span class="comment">//右</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(findWay(map, i-<span class="number">1</span>, j)) &#123;<span class="comment">//上</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(findWay(map, i, j-<span class="number">1</span>))&#123;<span class="comment">//左</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">map[i][j] = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">//map[i][j] = 1 , 2, 3</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改找路策略，看看路径是否有变化</span></span><br><span class="line"><span class="comment">//下-&gt;右-&gt;上-&gt;左 ==&gt; 上-&gt;右-&gt;下-&gt;左</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">findWay2</span><span class="params">(<span class="type">int</span>[][] map , <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(map[<span class="number">6</span>][<span class="number">5</span>] == <span class="number">2</span>) &#123;<span class="comment">//说明已经找到</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(map[i][j] == <span class="number">0</span>) &#123;<span class="comment">//当前这个位置0,说明表示可以走</span></span><br><span class="line"><span class="comment">//我们假定可以走通</span></span><br><span class="line">map[i][j] = <span class="number">2</span>;</span><br><span class="line"><span class="comment">//使用找路策略，来确定该位置是否真的可以走通</span></span><br><span class="line"><span class="comment">//上-&gt;右-&gt;下-&gt;左</span></span><br><span class="line"><span class="keyword">if</span>(findWay2(map, i - <span class="number">1</span>, j)) &#123;<span class="comment">//先走上</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(findWay2(map, i, j + <span class="number">1</span>))&#123;<span class="comment">//右</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(findWay2(map, i+<span class="number">1</span>, j)) &#123;<span class="comment">//下</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(findWay2(map, i, j-<span class="number">1</span>))&#123;<span class="comment">//左</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">map[i][j] = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">//map[i][j] = 1 , 2, 3</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="四、八皇后问题"><a href="#四、八皇后问题" class="headerlink" title="四、八皇后问题"></a>四、八皇后问题</h1>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于策略模式的支付平台选择系统</title>
      <link href="/2023/02/14/%E5%9F%BA%E4%BA%8E%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%94%AF%E4%BB%98%E5%B9%B3%E5%8F%B0%E9%80%89%E6%8B%A9%E7%B3%BB%E7%BB%9F/"/>
      <url>/2023/02/14/%E5%9F%BA%E4%BA%8E%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%94%AF%E4%BB%98%E5%B9%B3%E5%8F%B0%E9%80%89%E6%8B%A9%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="基于策略模式的支付平台选择系统"><a href="#基于策略模式的支付平台选择系统" class="headerlink" title="基于策略模式的支付平台选择系统"></a>基于策略模式的支付平台选择系统</h1><p><strong>摘要：</strong></p><p>基于策略模式的支付平台选择系统可以帮助用户根据不同的需求选择最适合的支付平台，从而提高支付效率和用户体验。该系统使用了策略模式，将支付平台的选择和具体支付实现解耦，使得系统更加灵活和可扩展。通过抽象策略类、具体策略类、上下文类和客户端类的设计，该系统可以轻松支持不同的支付平台，且具有较好的可读性和可维护性。在测试和运行中，该系统表现出良好的性能和稳定性，可以满足大多数用户的支付需求。未来，随着支付技术的不断发展，该系统可以进一步扩展和优化，以适应更多的支付场景和用户需求。</p><p><strong>关键字：</strong></p><p>策略模式，支付平台选择系统</p><h1 id="一、系统论述"><a href="#一、系统论述" class="headerlink" title="一、系统论述"></a>一、系统论述</h1><p>支付平台选择系统是一种常见的电子商务和移动支付系统，它可以通过选择不同的支付平台来实现支付操作。在这种系统中，我们通常会选择一些常见的支付平台，如支付宝、微信支付、银联支付等，并根据用户的需求和系统的实际情况选择合适的支付平台，从而提高支付的效率和安全性。</p><p>基于策略模式的支付平台选择系统是一种常见的实现方式，它将支付平台的选择和具体的支付操作分离开来，通过定义不同的支付策略来实现不同的支付方式。在这种实现方式中，我们通常会定义一个环境类 <code>Context</code>，用于保存当前的支付策略，并提供相应的支付接口，以便在实际的支付操作中使用。同时，我们还会定义一个抽象策略类 <code>PaymentStrategy</code>，用于定义支付的基本操作，并在具体的支付策略中实现具体的支付方式。</p><p>对于支付平台选择系统，我们通常需要考虑以下几个方面：</p><ol><li><p>支付平台的选择：在实际的应用中，我们需要根据不同的用户和场景选择不同的支付平台。比如，对于一些个人用户来说，支付宝和微信支付可能更加方便和快捷；而对于一些企业用户来说，银联支付可能更加安全和可靠。因此，在实际的应用中，我们需要根据具体的需求和系统的实际情况选择合适的支付平台。</p></li><li><p>支付的效率和安全性：在支付平台选择系统中，我们需要考虑支付的效率和安全性。一方面，我们需要选择一个支付平台，能够提供快速、方便、稳定的支付服务，从而保证用户的支付体验；另一方面，我们还需要考虑支付的安全性，采取一些必要的措施，如加密、身份验证、防欺诈等，来保证支付的安全性。</p></li><li><p>系统的可扩展性和可维护性：在实际的应用中，我们需要考虑支付平台选择系统的可扩展性和可维护性。一方面，我们需要支持多个支付平台，并能够方便地切换支付平台，从而满足不同用户和场景的需求；另一方面，我们还需要保证系统的可维护性，采用一些合适的设计模式和工具，如策略模式等，来方便系统的开发、测试和维护。</p></li></ol><h1 id="二、分析"><a href="#二、分析" class="headerlink" title="二、分析"></a>二、分析</h1><p>构建基于策略模式的支付平台选择系统可以帮助我们解决在支付时选择支付平台的问题。策略模式是一种行为设计模式，其目的是在运行时根据情况选择不同的算法或策略。在支付平台选择系统中，我们可以通过策略模式来选择不同的支付平台，以便满足不同的支付需求。</p><p>首先，我们需要定义一个抽象的策略接口，用于定义不同的支付平台策略。该接口应该包含一些方法，例如支付、退款和查询等，这些方法可以用来实现具体的支付逻辑。然后，我们需要创建一个或多个具体的策略类，实现策略接口并提供具体的支付逻辑。例如，我们可以创建一个支付宝支付策略类、一个微信支付策略类和一个银联支付策略类。</p><p>接下来，我们需要定义一个环境类来管理不同的支付策略。该类应该包含一个成员变量，用于存储当前选定的支付策略。它应该还提供一些方法，例如设置支付策略、获取当前支付策略和执行支付等，这些方法可以用来与具体的支付策略类交互。</p><p>最后，我们可以创建一个客户端类来测试和使用支付平台选择系统。客户端可以通过环境类选择不同的支付策略，并执行支付操作。客户端还可以在运行时更改支付策略，以便在不同的支付需求下选择不同的支付平台。</p><p>基于策略模式的支付平台选择系统可以使我们的代码更加灵活和可扩展。我们可以在不影响其他代码的情况下添加新的支付策略，并在运行时根据不同的需求选择不同的支付平台。此外，该系统还可以使我们的代码更加简洁和易于维护，因为每个支付平台的实现都被封装在单独的策略类中。如果我们需要对某个支付平台进行修改或更新，我们只需要修改相应的策略类，而不需要修改整个系统。</p><p>基于策略模式的支付平台选择系统可以实现在运行时动态选择支付平台的能力，以适应不同的支付场景。这个系统可以包括以下角色和组件：</p><ol><li><p>抽象策略（PaymentStrategy ）：定义支付平台接口，包含支付和退款方法等。</p></li><li><p>具体策略（ConcreteStrategy）：实现不同的支付平台，如支付宝、微信、银联等。</p></li><li><p>支付环境（PaymentContext ）：维护一个对策略对象的引用，以便在需要时调用支付或退款方法。</p></li><li><p>客户端（PaymentClient）：创建环境对象并设置所需的支付策略。</p></li></ol><p>在这个系统中，客户端可以根据实际需要选择不同的支付平台策略，而不必关心支付平台的具体实现。同时，策略模式还可以方便地扩展和替换支付平台策略，以适应不断变化的支付市场和客户需求。</p><h1 id="三、设计"><a href="#三、设计" class="headerlink" title="三、设计"></a>三、设计</h1><ol><li>定义策略接口</li></ol><p>首先，我们需要定义一个策略接口，用于描述所有支付平台策略的通用行为。在 Java 中，可以使用接口来定义策略。以下是支付策略接口的代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PaymentStrategy</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">(<span class="type">double</span> amount)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">refund</span><span class="params">(<span class="type">double</span> amount)</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">query</span><span class="params">(String orderId)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>该接口包含两个方法，用于支付和退款。具体的支付策略类将实现该接口并提供其自己的实现逻辑。</p><ol start="2"><li>实现具体的策略类</li></ol><p>我们需要创建一个或多个具体的策略类，实现支付策略接口并提供具体的支付逻辑。以下是两个具体的策略类代码，分别代表支付宝、微信支付和银联支付：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliPayStrategy</span> <span class="keyword">implements</span> <span class="title class_">PaymentStrategy</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用支付宝进行支付</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">refund</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用支付宝进行退款</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WeChatPayStrategy</span> <span class="keyword">implements</span> <span class="title class_">PaymentStrategy</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用微信支付进行支付</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">refund</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用微信支付进行退款</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UnionPayStrategy</span> <span class="keyword">implements</span> <span class="title class_">PaymentStrategy</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用银联进行支付</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">refund</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用银联进行退款</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>每个具体的策略类都实现了支付策略接口，并提供了自己的实现逻辑。例如，<code>AliPayStrategy</code> 实现了 <code>pay()</code> 方法以使用支付宝进行支付、<code>refund()</code> 方法以使用支付宝进行退款。</p><ol start="3"><li>定义环境类</li></ol><p>我们需要定义一个环境类，用于管理不同的支付策略。以下是代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PaymentContext</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> PaymentStrategy paymentStrategy;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPaymentStrategy</span><span class="params">(PaymentStrategy paymentStrategy)</span> &#123;</span><br><span class="line"></span><br><span class="line">​    <span class="built_in">this</span>.paymentStrategy = paymentStrategy;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> PaymentStrategy <span class="title function_">getPaymentStrategy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">​    <span class="keyword">return</span> paymentStrategy;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line"></span><br><span class="line">​    paymentStrategy.pay(amount);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">refund</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line"></span><br><span class="line">​    paymentStrategy.refund(amount);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">query</span><span class="params">(String orderId)</span> &#123;</span><br><span class="line"></span><br><span class="line">​    paymentStrategy.query(orderId);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>环境类包含一个成员变量 <code>paymentStrategy</code>，用于存储当前选定的支付策略。它还提供了一些方法，例如 <code>setPaymentStrategy()</code> 方法用于设置当前支付</p><h1 id="四、模式实现"><a href="#四、模式实现" class="headerlink" title="四、模式实现"></a>四、模式实现</h1><p>以下是基于策略模式的支付平台选择系统中的 <code>PaymentStrategy</code> 接口的 Java 代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PaymentStrategy</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">(<span class="type">double</span> amount)</span>; <span class="comment">// 支付方法</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">refund</span><span class="params">(<span class="type">double</span> amount)</span>; <span class="comment">// 退款方法</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的代码中，我们定义了一个名为 <code>PaymentStrategy</code> 的接口，它包含了两个抽象方法 <code>pay</code> 和 <code>refund</code>，分别用于实现支付和退款的操作。在具体的支付策略类中，我们将会实现这两个方法，以实现具体的支付和退款操作。</p><p>需要注意的是，这里的 <code>amount</code> 参数表示支付或退款的金额，具体的实现可能需要根据实际情况进行调整。此外，还可以在接口中添加其他必要的方法，以实现更加丰富的支付策略。</p><p>以下是基于策略模式的支付平台选择系统中的具体策略类的Java代码，使用支付宝作为支付平台：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AlipayStrategy</span> <span class="keyword">implements</span> <span class="title class_">PaymentStrategy</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> String account; <span class="comment">// 支付宝账号</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> String password; <span class="comment">// 支付宝密码</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">AlipayStrategy</span><span class="params">(String account, String password)</span> &#123;</span><br><span class="line"></span><br><span class="line">​    <span class="built_in">this</span>.account = account;</span><br><span class="line"></span><br><span class="line">​    <span class="built_in">this</span>.password = password;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line"></span><br><span class="line">​    <span class="comment">// 调用支付宝支付接口实现支付操作</span></span><br><span class="line"></span><br><span class="line">​    System.out.println(<span class="string">&quot;使用支付宝支付：&quot;</span> + amount + <span class="string">&quot;元&quot;</span>);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">refund</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line"></span><br><span class="line">​    <span class="comment">// 调用支付宝退款接口实现退款操作</span></span><br><span class="line"></span><br><span class="line">​    System.out.println(<span class="string">&quot;使用支付宝退款：&quot;</span> + amount + <span class="string">&quot;元&quot;</span>);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的代码中，我们定义了一个名为 <code>AlipayStrategy</code> 的类，它实现了 <code>PaymentStrategy</code> 接口，并覆盖了 <code>pay</code> 和 <code>refund</code> 方法，以实现支付宝支付和退款的具体操作。在构造函数中，我们传入了支付宝账号和密码等必要参数，以便在实际的支付和退款操作中使用。</p><p>需要注意的是，具体的支付宝支付和退款操作并没有在这里实现，我们只是通过 <code>println</code> 方法输出了一段提示信息。实际的支付和退款操作可能涉及到支付宝的 API 调用和网络通信等细节，需要根据实际情况进行实现。</p><p>以下是基于策略模式的支付平台选择系统中的具体策略类的 Java 代码，使用微信支付作为支付平台：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WechatPayStrategy</span> <span class="keyword">implements</span> <span class="title class_">PaymentStrategy</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> String appId; <span class="comment">// 微信支付应用ID</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> String appKey; <span class="comment">// 微信支付应用密钥</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">WechatPayStrategy</span><span class="params">(String appId, String appKey)</span> &#123;</span><br><span class="line"></span><br><span class="line">​    <span class="built_in">this</span>.appId = appId;</span><br><span class="line"></span><br><span class="line">​    <span class="built_in">this</span>.appKey = appKey;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line"></span><br><span class="line">​    <span class="comment">// 调用微信支付接口实现支付操作</span></span><br><span class="line"></span><br><span class="line">​    System.out.println(<span class="string">&quot;使用微信支付：&quot;</span> + amount + <span class="string">&quot;元&quot;</span>);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">refund</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line"></span><br><span class="line">​    <span class="comment">// 调用微信退款接口实现退款操作</span></span><br><span class="line"></span><br><span class="line">​    System.out.println(<span class="string">&quot;使用微信退款：&quot;</span> + amount + <span class="string">&quot;元&quot;</span>);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的代码中，我们定义了一个名为 <code>WechatPayStrategy</code> 的类，它实现了 <code>PaymentStrategy</code> 接口，并覆盖了 <code>pay</code> 和 <code>refund</code> 方法，以实现微信支付和退款的具体操作。在构造函数中，我们传入了微信支付应用ID和应用密钥等必要参数，以便在实际的支付和退款操作中使用。</p><p>需要注意的是，具体的微信支付和退款操作并没有在这里实现，我们只是通过 <code>println</code> 方法输出了一段提示信息。实际的支付和退款操作可能涉及到微信支付的 API 调用和网络通信等细节，需要根据实际情况进行实现。</p><p>以下是基于策略模式的支付平台选择系统中的具体策略类的Java代码，使用银联作为支付平台：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UnionPayStrategy</span> <span class="keyword">implements</span> <span class="title class_">PaymentStrategy</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> String merId; <span class="comment">// 银联商户号</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> String merKey; <span class="comment">// 银联商户密钥</span></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">UnionPayStrategy</span><span class="params">(String merId, String merKey)</span> &#123;</span><br><span class="line"></span><br><span class="line">​    <span class="built_in">this</span>.merId = merId;</span><br><span class="line"></span><br><span class="line">​    <span class="built_in">this</span>.merKey = merKey;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line"></span><br><span class="line">​    <span class="comment">// 调用银联支付接口实现支付操作</span></span><br><span class="line"></span><br><span class="line">​    System.out.println(<span class="string">&quot;使用银联支付：&quot;</span> + amount + <span class="string">&quot;元&quot;</span>);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">refund</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line"></span><br><span class="line">​    <span class="comment">// 调用银联退款接口实现退款操作</span></span><br><span class="line"></span><br><span class="line">​    System.out.println(<span class="string">&quot;使用银联退款：&quot;</span> + amount + <span class="string">&quot;元&quot;</span>);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的代码中，我们定义了一个名为 <code>UnionPayStrategy</code> 的类，它实现了 <code>PaymentStrategy</code> 接口，并覆盖了 <code>pay</code> 和 <code>refund</code> 方法，以实现银联支付和退款的具体操作。在构造函数中，我们传入了银联商户号和商户密钥等必要参数，以便在实际的支付和退款操作中使用。</p><p>需要注意的是，具体的银联支付和退款操作并没有在这里实现，我们只是通过 <code>println</code> 方法输出了一段提示信息。实际的支付和退款操作可能涉及到银联支付的 API 调用和网络通信等细节，需要根据实际情况进行实现。</p><p>以下是基于策略模式的支付平台选择系统中的 <code>PaymentContext</code> 类的 Java 代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PaymentContext</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> PaymentStrategy paymentStrategy;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">PaymentContext</span><span class="params">(PaymentStrategy paymentStrategy)</span> &#123;</span><br><span class="line"></span><br><span class="line">​    <span class="built_in">this</span>.paymentStrategy = paymentStrategy;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPaymentStrategy</span><span class="params">(PaymentStrategy paymentStrategy)</span> &#123;</span><br><span class="line"></span><br><span class="line">​    <span class="built_in">this</span>.paymentStrategy = paymentStrategy;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pay</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line"></span><br><span class="line">​    paymentStrategy.pay(amount);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">refund</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line"></span><br><span class="line">​    paymentStrategy.refund(amount);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的代码中，我们定义了一个名为 <code>PaymentContext</code> 的类，它包含了一个私有成员变量 <code>paymentStrategy</code>，用于保存当前的支付策略。在构造函数中，我们传入一个初始的支付策略，以便在实际的支付操作中使用。同时，我们还定义了 <code>setPaymentStrategy</code> 方法，可以动态地切换支付策略。</p><p>在 <code>pay</code> 和 <code>refund</code> 方法中，我们通过调用当前支付策略的 <code>pay</code> 和 <code>refund</code> 方法实现具体的支付和退款操作。这样，我们就实现了一个基于策略模式的支付平台选择系统的环境类，它可以通过不同的支付策略来实现不同的支付操作。</p><p>以下是基于策略模式的支付平台选择系统中的 <code>Client</code> 类的 Java 代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PaymentClient</span> &#123;</span><br><span class="line"></span><br><span class="line">​<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">​<span class="comment">// 选择支付宝支付策略</span></span><br><span class="line"></span><br><span class="line">​<span class="type">PaymentContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PaymentContext</span>(<span class="keyword">new</span> <span class="title class_">AlipayStrategy</span>(<span class="string">&quot;lgf&quot;</span>, <span class="string">&quot;123456&quot;</span>));</span><br><span class="line"></span><br><span class="line">​context.pay(<span class="number">100.0</span>);</span><br><span class="line"></span><br><span class="line">​context.refund(<span class="number">50.0</span>);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">​<span class="comment">// 切换为微信支付策略</span></span><br><span class="line"></span><br><span class="line">​context.setPaymentStrategy(<span class="keyword">new</span> <span class="title class_">WechatPayStrategy</span>(<span class="string">&quot;lgf&quot;</span>, <span class="string">&quot;123456&quot;</span>));</span><br><span class="line"></span><br><span class="line">​context.pay(<span class="number">200.0</span>);</span><br><span class="line"></span><br><span class="line">​context.refund(<span class="number">100.0</span>);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">​<span class="comment">// 切换为银联支付策略</span></span><br><span class="line"></span><br><span class="line">​context.setPaymentStrategy(<span class="keyword">new</span> <span class="title class_">UnionPayStrategy</span>(<span class="string">&quot;lgf&quot;</span>, <span class="string">&quot;123456&quot;</span>));</span><br><span class="line"></span><br><span class="line">​context.pay(<span class="number">300.0</span>);</span><br><span class="line"></span><br><span class="line">​context.refund(<span class="number">150.0</span>);</span><br><span class="line"></span><br><span class="line">​&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的代码中，我们定义了一个名为 <code>PaymentClient</code> 的类，它包含了一个 <code>main</code> 方法，用于演示基于策略模式的支付平台选择系统的使用。</p><p>在 <code>main</code> 方法中，我们首先创建了一个 <code>PaymentContext</code> 对象，并选择了支付宝支付策略。然后，我们调用 <code>pay</code> 和 <code>refund</code> 方法，分别进行支付和退款操作。</p><p>接着，我们使用 <code>setPaymentStrategy</code> 方法切换为微信支付策略，并再次调用 <code>pay</code> 和 <code>refund</code> 方法。最后，我们再次使用 <code>setPaymentStrategy</code> 方法切换为银联支付策略，并再次调用 <code>pay</code> 和 <code>refund</code> 方法。</p><p>通过上面的代码，我们可以看到，基于策略模式的支付平台选择系统可以通过不同的支付策略来实现不同的支付和退款操作，从而实现了更加灵活和可扩展的支付系统。</p><h1 id="五、测试与运行"><a href="#五、测试与运行" class="headerlink" title="五、测试与运行"></a>五、测试与运行</h1><p>为了测试和运行基于策略模式的支付平台选择系统，我们可以编写一个简单的客户端程序。下面是代码程序，用于测试基于策略模式的支付平台选择系统：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PaymentClient</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">​    <span class="comment">// 创建支付平台选择系统环境</span></span><br><span class="line"></span><br><span class="line">​    <span class="type">PaymentContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PaymentContext</span>();</span><br><span class="line"></span><br><span class="line">​    </span><br><span class="line"></span><br><span class="line">​    <span class="comment">// 设置支付平台选择策略</span></span><br><span class="line"></span><br><span class="line">​    context.setPaymentStrategy(<span class="keyword">new</span> <span class="title class_">AlipayStrategy</span>());</span><br><span class="line"></span><br><span class="line">​    </span><br><span class="line"></span><br><span class="line">​    <span class="comment">// 进行支付</span></span><br><span class="line"></span><br><span class="line">​    context.pay(<span class="number">100.0</span>);</span><br><span class="line"></span><br><span class="line">​    </span><br><span class="line"></span><br><span class="line">​    <span class="comment">// 修改支付平台选择策略</span></span><br><span class="line"></span><br><span class="line">​    context.setPaymentStrategy(<span class="keyword">new</span> <span class="title class_">WechatPayStrategy</span>());</span><br><span class="line"></span><br><span class="line">​    </span><br><span class="line"></span><br><span class="line">​    <span class="comment">// 进行支付</span></span><br><span class="line"></span><br><span class="line">​    context.pay(<span class="number">200.0</span>);</span><br><span class="line"></span><br><span class="line">​    </span><br><span class="line"></span><br><span class="line">​    <span class="comment">// 修改支付平台选择策略</span></span><br><span class="line"></span><br><span class="line">​    context.setPaymentStrategy(<span class="keyword">new</span> <span class="title class_">UnionPayStrategy</span>());</span><br><span class="line"></span><br><span class="line">​    </span><br><span class="line"></span><br><span class="line">​    <span class="comment">// 进行支付</span></span><br><span class="line"></span><br><span class="line">​    context.pay(<span class="number">300.0</span>);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上面的程序中，我们首先创建了一个支付平台选择系统环境对象。然后，我们设置支付平台选择策略为支付宝策略，进行了一次支付。接下来，我们修改支付平台选择策略为微信支付策略，进行了第二次支付。最后，我们又修改了支付平台选择策略为银联支付策略，并进行了第三次支付。</p><p>运行上面的程序，我们可以看到以下输出：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">选择了支付宝作为支付平台。</span><br><span class="line"></span><br><span class="line">支付了100.0元。</span><br><span class="line"></span><br><span class="line">选择了微信支付作为支付平台。</span><br><span class="line"></span><br><span class="line">支付了200.0元。</span><br><span class="line"></span><br><span class="line">选择了银联支付作为支付平台。</span><br><span class="line"></span><br><span class="line">支付了300.0元。</span><br></pre></td></tr></table></figure><p>这表明基于策略模式的支付平台选择系统已经成功地工作了。我们可以看到，环境对象根据不同的策略选择了不同的支付平台，而且我们可以通过修改策略来动态地改变选择的支付平台。同时，我们可以方便地添加新的支付平台，只需要创建新的支付平台策略类并实现支付方法即可。</p><p>总之，基于策略模式的支付平台选择系统是一种非常实用和灵活的设计模式。它将选择支付平台的逻辑和支付平台的具体实现分离开来，使得系统更易于扩展和维护。同时，它还可以帮助我们避免在代码中使用过多的条件语句，提高代码的可读性和可维护性。</p><h1 id="六、效果分析"><a href="#六、效果分析" class="headerlink" title="六、效果分析"></a>六、效果分析</h1><p>基于策略模式的支付平台选择系统可以带来多方面的好处：</p><p>基于策略模式的支付平台选择系统可以带来多方面的好处：</p><ol><li><p>灵活性</p><p>由于基于策略模式的支付平台选择系统将支付平台选择的逻辑和具体的支付平台实现解耦，因此系统更加灵活。通过更换策略对象，系统可以轻松地选择不同的支付平台，而不需要修改任何其他的代码。这使得系统更加易于扩展和维护，同时也更加适应不同的业务场景。</p></li><li><p>可扩展性</p><p>基于策略模式的支付平台选择系统也非常易于扩展。通过添加新的策略类，我们可以轻松地添加新的支付平台，而不需要修改任何其他的代码。这使得系统更加适应变化和发展，也能够帮助我们更好地应对业务需求的变化。</p></li><li><p>可读性</p><p>使用基于策略模式的支付平台选择系统可以使代码更加易于理解和阅读。通过将不同的支付平台实现分离成不同的策略类，我们可以将不同的逻辑分开，减少代码的复杂性。这使得代码更加易于理解和维护，也提高了代码的可读性。</p></li><li><p>代码复用</p><p>通过基于策略模式的支付平台选择系统，我们可以将支付平台的选择逻辑和具体的支付平台实现分离开来，从而使得支付平台的选择逻辑可以被复用。这种代码复用可以减少重复的代码，提高代码的效率和可维护性。</p></li></ol><p>总之，基于策略模式的支付平台选择系统是一种非常实用的设计模式，它可以带来多方面的好处。通过将不同的支付平台实现分离开来，我们可以使系统更加灵活、可扩展、易于理解和维护。这种设计模式可以帮助我们更好地应对业务需求的变化，提高代码的效率和可读性。</p><h1 id="七、课程总结"><a href="#七、课程总结" class="headerlink" title="七、课程总结"></a>七、课程总结</h1><p>在设计模式课程中，我们学习了一些经典的设计模式，这些设计模式可以帮助我们解决各种软件开发中的问题：</p><ol><li><p>创建型模式</p><p>创建型模式是解决对象创建问题的一组设计模式。这些模式可以帮助我们灵活地创建对象，而不需要硬编码它们。在这些模式中，工厂模式是最常用的模式之一，它包括简单工厂模式、工厂方法模式和抽象工厂模式。</p></li><li><p>结构型模式</p><p>结构型模式是解决对象组合问题的一组设计模式。这些模式可以帮助我们将对象组合成更大的结构，并提供更高级别的接口。在这些模式中，适配器模式是最常用的模式之一，它可以将一个类的接口转换成另一个客户端所期望的接口。</p></li><li><p>行为型模式</p><p>行为型模式是解决对象间通信问题的一组设计模式。这些模式可以帮助我们实现对象间的松耦合，并允许我们在运行时动态地改变对象间的行为。在这些模式中，观察者模式和策略模式是最常用的模式之一。观察者模式允许对象之间的松耦合，并在对象之间建立订阅&#x2F;发布的关系。策略模式允许我们定义一系列算法，并将它们封装成一个策略对象，从而可以在运行时动态地改变算法。</p></li></ol><p>在学习设计模式的过程中，我们也学习了一些设计原则。这些原则可以帮助我们写出更好的代码，并避免一些常见的问题。其中最重要的设计原则包括单一职责原则、开闭原则、里氏替换原则、接口隔离原则和依赖倒置原则。</p><p>总的来说，设计模式是一种可以帮助我们解决软件开发中各种问题的工具。通过学习这些模式，我们可以写出更灵活、可扩展、可维护和易于理解的代码。同时，设计模式也可以帮助我们遵循一些重要的设计原则，从而提高我们的代码质量。</p><h1 id="八、相关技术或者产品的发展"><a href="#八、相关技术或者产品的发展" class="headerlink" title="八、相关技术或者产品的发展"></a>八、相关技术或者产品的发展</h1><p>支付平台选择系统是与支付技术和产品密切相关的领域，随着支付技术和市场的不断发展，支付平台选择系统也不断演进和改进。下面是一些与支付平台选择系统相关的技术或产品：</p><p>支付平台选择系统是与支付技术和产品密切相关的领域，随着支付技术和市场的不断发展，支付平台选择系统也不断演进和改进。下面是一些与支付平台选择系统相关的技术或产品：</p><ol><li><p>移动支付：移动支付是指利用移动设备进行支付的一种支付方式，如手机支付、二维码支付等。随着移动设备的普及和移动支付技术的成熟，越来越多的用户使用移动支付进行支付，支付平台选择系统也需要支持移动支付平台的接入和选择。</p></li><li><p>电子钱包：电子钱包是一种电子支付工具，用户可以将钱存储在其中，随时使用。电子钱包可以方便用户进行小额支付和快速结算，同时也有一定的安全性保障。支付平台选择系统需要支持电子钱包的接入和选择。</p></li><li><p>区块链支付：区块链技术在支付领域的应用越来越广泛，区块链支付是指利用区块链技术进行支付的一种支付方式。由于区块链技术的去中心化、安全等特性，区块链支付具有更高的安全性和信任度，但同时也存在着一些技术难题和不足之处。支付平台选择系统需要支持区块链支付平台的接入和选择。</p></li><li><p>第三方支付：第三方支付是指独立于银行、支付机构之外的第三方支付服务机构，如支付宝、微信支付等。第三方支付具有支付便捷、安全等优势，已经成为了目前支付市场的主流。支付平台选择系统需要支持第三方支付平台的接入和选择。</p></li><li><p>人工智能：人工智能技术在支付领域的应用也越来越广泛，如风控、欺诈检测、智能客服等。支付平台选择系统可以通过引入人工智能技术，提高支付的效率和安全性。同时，人工智能技术也可以用来分析用户支付的行为数据，为支付平台选择提供更准确的数据支持。</p></li></ol><h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>刘伟. (2014). Java设计模式 (第2版). 人民邮电出版社.</p>]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>设计模式 -- 策略模式</title>
      <link href="/2023/02/14/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%20--%20%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/"/>
      <url>/2023/02/14/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%20--%20%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="设计模式-–-策略模式"><a href="#设计模式-–-策略模式" class="headerlink" title="设计模式 – 策略模式"></a>设计模式 – 策略模式</h1><h1 id="一、问题引出"><a href="#一、问题引出" class="headerlink" title="一、问题引出"></a>一、问题引出</h1><p>现在我们有这样一个需求</p><ol><li>有各种鸭子 (比如 野鸭、北京鸭、水鸭等， 鸭子有各种行为，比如 叫、飞行等)</li><li>显示鸭子的信息</li></ol><p>传统的方法是使用继承实现</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230214092907516.png" alt="使用继承解决鸭子问题"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.strategy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Duck</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Duck</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span>;<span class="comment">//显示鸭子信息</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">quack</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;鸭子嘎嘎叫~~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">swim</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;鸭子会游泳~~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fly</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;鸭子会飞翔~~~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.strategy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PekingDuck</span> <span class="keyword">extends</span> <span class="title class_">Duck</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">System.out.println(<span class="string">&quot;~~北京鸭~~~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//因为北京鸭不能飞翔，因此需要重写fly</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fly</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">System.out.println(<span class="string">&quot;北京鸭不能飞翔&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.strategy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ToyDuck</span> <span class="keyword">extends</span> <span class="title class_">Duck</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">System.out.println(<span class="string">&quot;玩具鸭&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//需要重写父类的所有方法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">quack</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;玩具鸭不能叫~~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">swim</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;玩具鸭不会游泳~~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fly</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;玩具鸭不会飞翔~~~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.strategy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WildDuck</span> <span class="keyword">extends</span> <span class="title class_">Duck</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">System.out.println(<span class="string">&quot; 这是野鸭 &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.strategy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="comment">//测试</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>但是使用继承时我们会产生一些问题</p><ol><li><p>其它鸭子，都继承了 Duck 类，所以 fly 让所有子类都会飞了，这是不正确的</p></li><li><p>上面说的 1 的问题，其实是继承带来的问题：对类的局部改动，尤其超类的局部改动，会影响其他部分。会有溢出效应</p></li><li><p>为了改进 1 问题，我们可以通过覆盖 fly 方法来解决 &#x3D;&gt; 覆盖解决</p></li><li><p>问题又来了，如果我们有一个玩具鸭子 ToyDuck,  </p><p>这样就需要 ToyDuck 去覆盖 Duck 的所有实现的方法 &#x3D;&gt; 解决思路 -》 策略模式 (strategy pattern)</p></li></ol><p>所以继承的时候会导致有的子类不得不重写全部父类方法的问题, 这样会大大增加代码耦合性</p><p>策略模式要做的就是将代码解耦</p><h1 id="二、策略模式基本介绍"><a href="#二、策略模式基本介绍" class="headerlink" title="二、策略模式基本介绍"></a>二、策略模式基本介绍</h1><ol><li><p>策略模式（Strategy Pattern）中，定义<strong>算法族（策略组）</strong>，分别封装起来，让他们之间可以互相替换，</p><p>此模式让<strong>算法的变化</strong>独立于使用<strong>算法的客户</strong></p></li><li><p>这算法体现了几个设计原则，</p><p>第一、把变化的代码从不变的代码中分离出来；</p><p>第二、针对接口编程而不是具体类（定义了策略接口) ；</p><p>第三、多用组合&#x2F;聚合，少用继承（客户通过组合方式使用策略）</p></li></ol><p>从下图可以看到，客户 context 有成员变量 strategy 或者其他的策略接口</p><p>需要使用到哪个接口我们可以在每个接口类的构造器中指定</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230214093810983.png" alt="策略模式原理类图"></p><h1 id="三、策略模式解决鸭子问题"><a href="#三、策略模式解决鸭子问题" class="headerlink" title="三、策略模式解决鸭子问题"></a>三、策略模式解决鸭子问题</h1><p>分别封装<strong>行为接口</strong>，实现<strong>算法族</strong>，超类里放<strong>行为接口对象</strong>，在子类里<strong>具体设定行为对象</strong>。</p><p>原则就是：<br>分离变化部分，封装接口，基于接口编程各种功能。此模式让行为的变化独立于算法的使用者</p><ol><li><p>在最开始的父类中要定义接口属性</p></li><li><p>在下面的每个具体对象子类中通过构造器初始化父类的接口属性</p></li><li><p>接口及其具体子类要与对象类分离, 这样可以实现解耦</p></li><li><p>接口的子类分别设定接口的具体行为对象</p></li><li><p>在每个对象子类的构造器中将接口子类对象赋值给接口属性</p></li><li><p>以上步骤形成完整的策略模式, 成功将代码进行接口, 使每个对象子类得到自己想要的方法, </p><p>如需新增则直接在接口子类中添加新类即可, 此为可扩展性</p></li></ol><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230214094935368.png" alt="策略模式解决鸭子问题类图"></p><p>对象类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.strategy.improve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Duck</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//属性, 策略接口</span></span><br><span class="line">FlyBehavior flyBehavior;</span><br><span class="line"><span class="comment">//其它属性 &lt;-&gt; 策略接口</span></span><br><span class="line">QuackBehavior quackBehavior;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Duck</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span>;<span class="comment">//显示鸭子信息</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">quack</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;鸭子嘎嘎叫~~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">swim</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;鸭子会游泳~~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fly</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//改进</span></span><br><span class="line"><span class="keyword">if</span>(flyBehavior != <span class="literal">null</span>) &#123;</span><br><span class="line">flyBehavior.fly();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFlyBehavior</span><span class="params">(FlyBehavior flyBehavior)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.flyBehavior = flyBehavior;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setQuackBehavior</span><span class="params">(QuackBehavior quackBehavior)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.quackBehavior = quackBehavior;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.strategy.improve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PekingDuck</span> <span class="keyword">extends</span> <span class="title class_">Duck</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//构造器，传入FlyBehavor 的对象</span></span><br><span class="line"><span class="comment">//假如北京鸭可以飞翔，但是飞翔技术一般</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">PekingDuck</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">flyBehavior = <span class="keyword">new</span> <span class="title class_">BadFlyBehavior</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">System.out.println(<span class="string">&quot;~~北京鸭~~~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.strategy.improve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ToyDuck</span> <span class="keyword">extends</span> <span class="title class_">Duck</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//构造器，传入FlyBehavor 的对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ToyDuck</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">flyBehavior = <span class="keyword">new</span> <span class="title class_">NoFlyBehavior</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">System.out.println(<span class="string">&quot;玩具鸭&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//需要重写父类的所有方法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">quack</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;玩具鸭不能叫~~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">swim</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;玩具鸭不会游泳~~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.strategy.improve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WildDuck</span> <span class="keyword">extends</span> <span class="title class_">Duck</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//构造器，传入FlyBehavor 的对象</span></span><br><span class="line"><span class="keyword">public</span>  <span class="title function_">WildDuck</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">flyBehavior = <span class="keyword">new</span> <span class="title class_">GoodFlyBehavior</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">System.out.println(<span class="string">&quot; 这是野鸭 &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>接口类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.strategy.improve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">FlyBehavior</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">fly</span><span class="params">()</span>; <span class="comment">// 子类具体实现</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.strategy.improve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BadFlyBehavior</span> <span class="keyword">implements</span> <span class="title class_">FlyBehavior</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fly</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">System.out.println(<span class="string">&quot; 飞翔技术一般 &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.strategy.improve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GoodFlyBehavior</span> <span class="keyword">implements</span> <span class="title class_">FlyBehavior</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fly</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">System.out.println(<span class="string">&quot; 飞翔技术高超 ~~~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.strategy.improve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NoFlyBehavior</span> <span class="keyword">implements</span> <span class="title class_">FlyBehavior</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fly</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">System.out.println(<span class="string">&quot; 不会飞翔  &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.strategy.improve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">QuackBehavior</span> &#123;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">quack</span><span class="params">()</span>;<span class="comment">//子类实现</span></span><br><span class="line">    <span class="comment">// 有时间自己写, 与飞行方法类似</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>调用类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.strategy.improve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="type">WildDuck</span> <span class="variable">wildDuck</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">WildDuck</span>();</span><br><span class="line">wildDuck.fly();<span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="type">ToyDuck</span> <span class="variable">toyDuck</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ToyDuck</span>();</span><br><span class="line">toyDuck.fly();</span><br><span class="line"></span><br><span class="line"><span class="type">PekingDuck</span> <span class="variable">pekingDuck</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PekingDuck</span>();</span><br><span class="line">pekingDuck.fly();</span><br><span class="line"></span><br><span class="line"><span class="comment">//动态改变某个对象的行为, 北京鸭 不能飞</span></span><br><span class="line">pekingDuck.setFlyBehavior(<span class="keyword">new</span> <span class="title class_">NoFlyBehavior</span>());</span><br><span class="line">System.out.println(<span class="string">&quot;北京鸭的实际飞翔能力&quot;</span>);</span><br><span class="line">pekingDuck.fly();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="四、策略模式在-JDK-Arrays-应用的源码分析"><a href="#四、策略模式在-JDK-Arrays-应用的源码分析" class="headerlink" title="四、策略模式在 JDK-Arrays 应用的源码分析"></a>四、策略模式在 JDK-Arrays 应用的源码分析</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.jdk;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Strategy</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="comment">//数组</span></span><br><span class="line">Integer[] data = &#123; <span class="number">9</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">3</span> &#125;;</span><br><span class="line"><span class="comment">// 实现降序排序，返回-1 放左边，1 放右边，0 保持不变</span></span><br><span class="line"><span class="comment">// 说明</span></span><br><span class="line"><span class="comment">// 1. 实现了 Comparator 接口（策略接口） , 匿名类 对象 new Comparator&lt;Integer&gt;()&#123;..&#125;</span></span><br><span class="line"><span class="comment">// 2. 对象 new Comparator&lt;Integer&gt;()&#123;..&#125; 就是实现了 策略接口 的对象</span></span><br><span class="line"><span class="comment">// 3. public int compare(Integer o1, Integer o2)&#123;&#125; 指定具体的处理方式</span></span><br><span class="line">Comparator&lt;Integer&gt; comparator = <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Integer&gt;() &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Integer o1, Integer o2)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (o1 &gt; o2) &#123;</span><br><span class="line"><span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 说明</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* public static &lt;T&gt; void sort(T[] a, Comparator&lt;? super T&gt; c) &#123;</span></span><br><span class="line"><span class="comment">            if (c == null) &#123;</span></span><br><span class="line"><span class="comment">            sort(a); //默认方法</span></span><br><span class="line"><span class="comment">            &#125; else &#123;</span></span><br><span class="line"><span class="comment">                if (LegacyMergeSort.userRequested)</span></span><br><span class="line"><span class="comment">                legacyMergeSort(a, c); //使用策略对象 c</span></span><br><span class="line"><span class="comment">                else</span></span><br><span class="line"><span class="comment">                // 使用策略对象 c</span></span><br><span class="line"><span class="comment">                TimSort.sort(a, 0, a.length, c, null, 0, 0);</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//方式 1</span></span><br><span class="line">Arrays.sort(data, comparator);</span><br><span class="line">System.out.println(Arrays.toString(data)); <span class="comment">// 降序排序</span></span><br><span class="line"><span class="comment">//方式 2- 同时 lambda 表达式实现 策略模式</span></span><br><span class="line">Integer[] data2 = &#123; <span class="number">19</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">18</span>, <span class="number">14</span>, <span class="number">13</span> &#125;;</span><br><span class="line">Arrays.sort(data2, (var1, var2) -&gt; &#123;</span><br><span class="line"><span class="keyword">if</span>(var1.compareTo(var2) &gt; <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">System.out.println(<span class="string">&quot;data2=&quot;</span> + Arrays.toString(data2));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="五、细节"><a href="#五、细节" class="headerlink" title="五、细节"></a>五、细节</h1><ol><li>策略模式的关键是：分析项目中变化部分与不变部分</li><li>策略模式的核心思想是：多用组合&#x2F;聚合 少用继承；用行为类组合，而不是行为的继承。更有弹性</li><li>体现了 “对修改关闭，对扩展开放” 原则，客户端增加行为不用修改原有代码，只要添加一种策略（或者行为）即可，避免了使用多重转移语句（if..else if..else）</li><li>提供了可以替换继承关系的办法： 策略模式将算法封装在独立的 Strategy 类中使得你可以独立于其 Context 改变它，使它易于切换、易于理解、易于扩展</li><li>需要注意的是：每添加一个策略就要增加一个类，当策略过多是会导致类数目庞大</li></ol>]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java学习（三）-- 面向对象中级</title>
      <link href="/2023/02/03/Java%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%89%EF%BC%89--%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%AD%E7%BA%A7/"/>
      <url>/2023/02/03/Java%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%89%EF%BC%89--%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%AD%E7%BA%A7/</url>
      
        <content type="html"><![CDATA[<h1 id="Java学习（三）–-面向对象中级"><a href="#Java学习（三）–-面向对象中级" class="headerlink" title="Java学习（三）– 面向对象中级"></a>Java学习（三）– 面向对象中级</h1><blockquote><p><a href="https://www.bilibili.com/video/BV1fh411y7R8/?spm_id_from=333.999.0.0&amp;vd_source=594d36a0860080a36fe599e0b84e5fb2">https://www.bilibili.com/video/BV1fh411y7R8/?spm_id_from=333.999.0.0&amp;vd_source=594d36a0860080a36fe599e0b84e5fb2</a></p></blockquote><blockquote><p>由于从这里开始学习了继承, </p><p>为了避免多种多样的类混在一起影响复习效率</p><p>现在规定每一段演示代码会分成好几个代码块, 如果没有特殊标明, 连续的几个代码块表示一段演示</p><p>特殊标明: 像练习一, 练习二这种明确标志, 就是为了给不同的演示做分割</p></blockquote><blockquote><p>连续代码块的顺序为: 父类 -&gt; 子类 -&gt; 入口类</p><p>所以每段演示的题目 (要求) 一般都在 入口类 中, 这一点要特别注意</p><p>以免在复习的时候不知道自己在看啥</p></blockquote><h1 id="一、包"><a href="#一、包" class="headerlink" title="一、包"></a>一、包</h1><h2 id="1-1-作用"><a href="#1-1-作用" class="headerlink" title="1.1 作用"></a>1.1 作用</h2><ol><li>区分相同名字的类</li><li>当类很多时可以很方便地管理类 (比如 Java API 文档)</li><li>控制访问范围</li></ol><h2 id="1-2-基本语法"><a href="#1-2-基本语法" class="headerlink" title="1.2 基本语法"></a>1.2 基本语法</h2><p><code>package 包名</code></p><p>package 表示关键字打包</p><h2 id="1-3-包的本质"><a href="#1-3-包的本质" class="headerlink" title="1.3 包的本质"></a>1.3 包的本质</h2><p>本质就是创建不同的 文件夹&#x2F;目录 保存类文件</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230203155832202.png" alt="包的本质"></p><h2 id="1-4-包的命名规则"><a href="#1-4-包的命名规则" class="headerlink" title="1.4 包的命名规则"></a>1.4 包的命名规则</h2><ul><li>只能包含字母, 数字, 下划线, 小圆点</li><li>数字不能用作开头</li><li>不能是关键字或者保留字</li><li>一般是小写字母 + 小圆点</li></ul><p><code>com.公司名.项目名.业务模块名</code></p><h2 id="1-5-常用包"><a href="#1-5-常用包" class="headerlink" title="1.5 常用包"></a>1.5 常用包</h2><ol><li><p>java.lang.*  &#x2F;&#x2F;lang 包是基本包，默认引入，不需要再引入. </p></li><li><p>java.util.*  &#x2F;&#x2F;util 包，系统提供的工具包, 工具类，使用 Scanner</p></li><li><p>java.net.*  &#x2F;&#x2F;网络包，网络开发</p></li><li><p>java.awt.* &#x2F;&#x2F;是做 java 的界面开发，GUI</p></li></ol><h2 id="1-6-导入包"><a href="#1-6-导入包" class="headerlink" title="1.6 导入包"></a>1.6 导入包</h2><p><code>import 包名</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.pkg;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">//注意:</span></span><br><span class="line"><span class="comment">//老韩建议：我们需要使用到哪个类，就导入哪个类即可，不建议使用 *导入</span></span><br><span class="line"><span class="comment">//import java.util.Scanner; //表示只会引入java.util 包下的 Scanner</span></span><br><span class="line"><span class="comment">//import java.util.*;//表示将java.util 包下的所有类都引入(导入)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Import01</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用系统提供 Arrays 完成 数组排序</span></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;-<span class="number">1</span>, <span class="number">20</span>, <span class="number">2</span>, <span class="number">13</span>, <span class="number">3</span>&#125;;</span><br><span class="line">        <span class="comment">//比如对其进行排序</span></span><br><span class="line">        <span class="comment">//传统方法是，自己编写排序(冒泡)</span></span><br><span class="line">        <span class="comment">//系统是提供了相关的类，可以方便完成 Arrays</span></span><br><span class="line">        Arrays.sort(arr);</span><br><span class="line">        <span class="comment">//输出排序结果</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length ; i++) &#123;</span><br><span class="line">            System.out.print(arr[i] + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="1-7-使用细节"><a href="#1-7-使用细节" class="headerlink" title="1.7 使用细节"></a>1.7 使用细节</h2><ol><li>package 的作用是声明当前类所在的包, 需要放在类的最上面, 一个类中最多只有一个 package</li><li>import 指令放在 package 的下面, 在类定义的前面, 可以有很多句, 没有顺序要求</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//package的作用是声明当前类所在的包，需要放在类(或者文件)的最上面，</span></span><br><span class="line"><span class="comment">// 一个类中最多只有一句package</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.hspedu.pkg;</span><br><span class="line"></span><br><span class="line"><span class="comment">//import指令 位置放在package的下面，在类定义前面,可以有多句且没有顺序要求</span></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//类定义</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PkgDetail</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">0</span>, -<span class="number">1</span>, <span class="number">1</span>&#125;;</span><br><span class="line">        Arrays.sort(args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="二、访问修饰符"><a href="#二、访问修饰符" class="headerlink" title="二、访问修饰符"></a>二、访问修饰符</h1><ol><li><p>公开级别: 用 <code>public</code> 修饰, 对外公开</p></li><li><p>受保护级别: 用 <code>protected</code> 修饰, 对子类和同一个包中的类公开</p></li><li><p>默认级别: 没有修饰符号, 向同一个包的类公开. </p></li><li><p>私有级别: 用 <code>private</code> 修饰, 只有类本身可以访问,不对外公开.</p></li></ol><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230203163824836.png" alt="背下来"></p><ol><li>修饰符可以用来修饰类中的属性, 成员方法, 类</li><li>只有 默认和 <code>public</code> 才可以修饰类, 并遵循上述访问权限的特点</li><li>成员方法的访问规则和属性完全一样</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.hspedu.modifier;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//四个属性,分别使用不同的访问修饰符来修饰</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="variable">n2</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n3</span> <span class="operator">=</span> <span class="number">300</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">n4</span> <span class="operator">=</span> <span class="number">400</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">m1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//在同一类中，可以访问public protected 默认 private 修饰属性和方法</span></span><br><span class="line">        System.out.println(<span class="string">&quot;n1=&quot;</span> + n1 + <span class="string">&quot; n2=&quot;</span> + n2 + <span class="string">&quot; n3=&quot;</span> + n3 + <span class="string">&quot; n4=&quot;</span> + n4);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">m2</span><span class="params">()</span> &#123; &#125;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">m3</span><span class="params">()</span> &#123; &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">m4</span><span class="params">()</span> &#123; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hi</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//在同一类中，可以访问public protected 默认 private 修饰属性和方法</span></span><br><span class="line">        m1();</span><br><span class="line">        m2();</span><br><span class="line">        m3();</span><br><span class="line">        m4();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.hspedu.modifier;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">say</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">        <span class="comment">//在同一个包下，可以访问 public , protected 和 默认修饰属性或方法,不能访问private 属性或方法</span></span><br><span class="line">        System.out.println(<span class="string">&quot;n1=&quot;</span> + a.n1 + <span class="string">&quot; n2=&quot;</span> + a.n2 +  <span class="string">&quot; n3=&quot;</span> + a.n3 );</span><br><span class="line"></span><br><span class="line">        a.m1();</span><br><span class="line">        a.m2();</span><br><span class="line">        a.m3();</span><br><span class="line">        <span class="comment">//a.m4(); 错误的</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.modifier;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span> ();</span><br><span class="line">        a.m1();</span><br><span class="line">        <span class="type">B</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">B</span>();</span><br><span class="line">        b.say();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//只有 默认和public 可以修饰类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tiger</span>&#123; &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="三、封装"><a href="#三、封装" class="headerlink" title="三、封装"></a>三、封装</h1><h2 id="3-1-介绍"><a href="#3-1-介绍" class="headerlink" title="3.1 介绍"></a>3.1 介绍</h2><p>封装 (encapsulation) 就是把抽象出的数据 <strong>[属性]</strong> 和对数据的操作 <strong>[方法]</strong> 封装在一起，数据被保护在内部，程序的其它部分只有通过被授权的操作 <strong>[方法]</strong> , 才能对数据进行操作。</p><h2 id="3-2-好处"><a href="#3-2-好处" class="headerlink" title="3.2 好处"></a>3.2 好处</h2><ol><li>可以隐藏实现细节</li><li>可以对数据进行验证, 保证安全合理</li></ol><h2 id="3-3-如何实现"><a href="#3-3-如何实现" class="headerlink" title="3.3 如何实现"></a>3.3 如何实现</h2><ol><li>将属性进行私有化 <code>private</code> (不能直接修改属性)</li><li>提供一个公共的 (public) <code>set</code> 方法, 用来对属性判断赋值 <code>setter</code></li><li>提供一个公共的 (public) <code>get</code> 方法, 用来获取属性的值 <code>getter</code></li><li>还可以将 <code>setter</code> 与构造器结合, 每次调用构造器的时候里面全都是 <code>setter</code> 方法</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.encap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Encapsulation01</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//如果要使用快捷键alt+r, 需要先配置主类</span></span><br><span class="line">        <span class="comment">//第一次，我们使用鼠标点击形式运算程序，后面就可以用</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">        person.setName(<span class="string">&quot;韩顺平&quot;</span>);</span><br><span class="line">        person.setAge(<span class="number">30</span>);</span><br><span class="line">        person.setSalary(<span class="number">30000</span>);</span><br><span class="line">        System.out.println(person.info());</span><br><span class="line">        System.out.println(person.getSalary());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果我们自己使用构造器指定属性</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">smith</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;smith&quot;</span>, <span class="number">80</span>, <span class="number">50000</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;====smith的信息======&quot;</span>);</span><br><span class="line">        System.out.println(smith.info());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">那么在java中如何实现这种类似的控制呢?</span></span><br><span class="line"><span class="comment">请大家看一个小程序(com.hspedu.encap: Encapsulation01.java),</span></span><br><span class="line"><span class="comment">不能随便查看人的年龄,工资等隐私，并对设置的年龄进行合理的验证。年龄合理就设置，否则给默认</span></span><br><span class="line"><span class="comment">年龄, 必须在 1-120, 年龄， 工资不能直接查看 ， name的长度在 2-6字符 之间</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">public</span>  String name; <span class="comment">//名字公开</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age; <span class="comment">//age 私有化</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> salary; <span class="comment">//..</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">say</span><span class="params">(<span class="type">int</span> n,String name)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//构造器 alt+insert</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//有三个属性的构造器</span></span><br><span class="line">    <span class="comment">// 将 setter 与 构造器 相结合</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age, <span class="type">double</span> salary)</span> &#123;</span><br><span class="line"><span class="comment">//        this.name = name;</span></span><br><span class="line"><span class="comment">//        this.age = age;</span></span><br><span class="line"><span class="comment">//        this.salary = salary;</span></span><br><span class="line">        <span class="comment">//我们可以将set方法写在构造器中，这样仍然可以验证</span></span><br><span class="line">        setName(name);</span><br><span class="line">        setAge(age);</span><br><span class="line">        setSalary(salary);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//自己写setXxx 和 getXxx 太慢，我们使用快捷键</span></span><br><span class="line">    <span class="comment">//然后根据要求来完善我们的代码.</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="comment">//加入对数据的校验,相当于增加了业务逻辑</span></span><br><span class="line">        <span class="keyword">if</span>(name.length() &gt;= <span class="number">2</span> &amp;&amp; name.length() &lt;=<span class="number">6</span> ) &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;名字的长度不对，需要(2-6)个字符，默认名字&quot;</span>);</span><br><span class="line">            <span class="built_in">this</span>.name = <span class="string">&quot;无名人&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="comment">//判断</span></span><br><span class="line">        <span class="keyword">if</span>(age &gt;= <span class="number">1</span> &amp;&amp; age &lt;= <span class="number">120</span>) &#123;<span class="comment">//如果是合理范围</span></span><br><span class="line">            <span class="built_in">this</span>.age = age;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;你设置年龄不对，需要在 (1-120), 给默认年龄18 &quot;</span>);</span><br><span class="line">            <span class="built_in">this</span>.age = <span class="number">18</span>;<span class="comment">//给一个默认年龄</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getSalary</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//可以这里增加对当前对象的权限判断</span></span><br><span class="line">        <span class="keyword">return</span> salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSalary</span><span class="params">(<span class="type">double</span> salary)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.salary = salary;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//写一个方法，返回属性信息</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">info</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;信息为 name=&quot;</span> + name  + <span class="string">&quot; age=&quot;</span> + age + <span class="string">&quot; 薪水=&quot;</span> + salary;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="3-4-练习"><a href="#3-4-练习" class="headerlink" title="3.4 练习"></a>3.4 练习</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.encap;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建程序,在其中定义两个类：Account和AccountTest类体会Java的封装性。</span></span><br><span class="line"><span class="comment"> * Account类要求具有属性：姓名（长度为2位3位或4位）、余额(必须&gt;20)、</span></span><br><span class="line"><span class="comment"> * 密码（必须是六位）, 如果不满足，则给出提示信息，并给默认值(程序员自己定)</span></span><br><span class="line"><span class="comment"> * 通过setXxx的方法给Account 的属性赋值。</span></span><br><span class="line"><span class="comment"> * 在AccountTest中测试</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> &#123;</span><br><span class="line">    <span class="comment">//为了封装，将3个属性设置为private</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> balance;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//提供两个构造器</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Account</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Account</span><span class="params">(String name, <span class="type">double</span> balance, String pwd)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.setName(name);</span><br><span class="line">        <span class="built_in">this</span>.setBalance(balance);</span><br><span class="line">        <span class="built_in">this</span>.setPwd(pwd);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//姓名（长度为2位3位或4位）</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (name.length() &gt;= <span class="number">2</span> &amp;&amp; name.length() &lt;= <span class="number">4</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;姓名要求（长度为2位3位或4位），默认值 无名&quot;</span>);</span><br><span class="line">            <span class="built_in">this</span>.name = <span class="string">&quot;无名&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getBalance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//余额(必须&gt;20)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBalance</span><span class="params">(<span class="type">double</span> balance)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (balance &gt; <span class="number">20</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.balance = balance;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;余额(必须&gt;20) 默认为0&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPwd</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//密码（必须是六位）</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPwd</span><span class="params">(String pwd)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (pwd.length() == <span class="number">6</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.pwd = pwd;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;密码（必须是六位）默认密码为 000000&quot;</span>);</span><br><span class="line">            <span class="built_in">this</span>.pwd = <span class="string">&quot;000000&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//显示账号信息</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//可以增加权限的校验</span></span><br><span class="line">        System.out.println(<span class="string">&quot;账号信息 name=&quot;</span> + name + <span class="string">&quot; 余额=&quot;</span> + balance + <span class="string">&quot; 密码&quot;</span> + pwd);</span><br><span class="line"><span class="comment">//        if() &#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;账号信息 name=&quot; + name + &quot; 余额=&quot; + balance + &quot; 密码&quot;);</span></span><br><span class="line"><span class="comment">//        &#125;else&#123;</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;你无权查看...&quot;);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.encap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestAccount</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建Account</span></span><br><span class="line">        <span class="type">Account</span> <span class="variable">account</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Account</span>();</span><br><span class="line">        account.setName(<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">        account.setBalance(<span class="number">60</span>);</span><br><span class="line">        account.setPwd(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line"></span><br><span class="line">        account.showInfo();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="四、继承"><a href="#四、继承" class="headerlink" title="四、继承"></a>四、继承</h1><p>继承可以解决代码复用, 让我们的编程更加靠近人类思维. 当多个类存在相同的属性 (变量) 和 方法 时, 可以从这些类中抽象出父类, 在父类中定义这些相同的 属性 和 方法，所有的子类不需要重新定义这些属性和方法，只需要通过 <code>extends</code> 来声明继承父类即可。</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230203165001293.png" alt="继承"></p><h2 id="4-2-继承的基本语法"><a href="#4-2-继承的基本语法" class="headerlink" title="4.2 继承的基本语法"></a>4.2 继承的基本语法</h2><blockquote><p>class 子类 extends 父类 {</p><p>}</p></blockquote><ol><li>子类会自动拥有父类定义的属性和方法</li><li>父类又叫 超类, 基类</li><li>子类又叫 派生类</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.extend_.improve_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hspedu.extend_.Graduate;</span><br><span class="line"><span class="keyword">import</span> com.hspedu.extend_.Pupil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Extends01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        com.hspedu.extend_.<span class="type">Pupil</span> <span class="variable">pupil</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Pupil</span>();</span><br><span class="line">        pupil.name = <span class="string">&quot;银角大王~&quot;</span>;</span><br><span class="line">        pupil.age = <span class="number">11</span>;</span><br><span class="line">        pupil.testing();</span><br><span class="line">        pupil.setScore(<span class="number">50</span>);</span><br><span class="line">        pupil.showInfo();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;=======&quot;</span>);</span><br><span class="line">        com.hspedu.extend_.<span class="type">Graduate</span> <span class="variable">graduate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Graduate</span>();</span><br><span class="line">        graduate.name = <span class="string">&quot;金角大王~&quot;</span>;</span><br><span class="line">        graduate.age = <span class="number">23</span>;</span><br><span class="line">        graduate.testing();</span><br><span class="line">        graduate.setScore(<span class="number">80</span>);</span><br><span class="line">        graduate.showInfo();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.extend_.improve_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Graduate</span> <span class="keyword">extends</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testing</span><span class="params">()</span> &#123;<span class="comment">//和Pupil不一样</span></span><br><span class="line">        System.out.println(<span class="string">&quot;大学生 &quot;</span> + name + <span class="string">&quot; 正在考大学数学..&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.extend_.improve_;</span><br><span class="line"></span><br><span class="line"><span class="comment">//让Pupil 继承 Student类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pupil</span> <span class="keyword">extends</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testing</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;小学生 &quot;</span> + name + <span class="string">&quot;  正在考小学数学..&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.extend_.improve_;</span><br><span class="line"></span><br><span class="line"><span class="comment">//父类,是Pupil 和 Graduate的父类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="comment">//共有属性</span></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> score;<span class="comment">//成绩</span></span><br><span class="line">    <span class="comment">//共有的方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setScore</span><span class="params">(<span class="type">double</span> score)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;学生名 &quot;</span> + name + <span class="string">&quot; 年龄 &quot;</span> + age + <span class="string">&quot; 成绩 &quot;</span> + score);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4-3-好处"><a href="#4-3-好处" class="headerlink" title="4.3 好处"></a>4.3 好处</h2><ol><li>代码复用性提高</li><li>代码的扩展性和维护性提高</li></ol><h2 id="4-4-使用细节"><a href="#4-4-使用细节" class="headerlink" title="4.4 使用细节"></a>4.4 使用细节</h2><ol><li><p>子类继承了所有的属性和方法，非私有的属性和方法可以在子类直接访问,  但是私有属性和方法不能在子类直接访问，要通过父类提供公共的方法去访问</p></li><li><p>子类必须调用父类的构造器， 完成父类的初始化 <code>super</code></p></li><li><p>当创建子类对象时，不管使用子类的哪个构造器，默认情况下总会去调用父类的无参构造器，如果父类没有提供无参构造器，则必须在子类的构造器中用 super 去指定使用父类的哪个构造器完成对父类的初始化工作，否则，编译不会通过(怎么理解。) [举例说明]</p></li><li><p>如果希望指定去调用父类的某个构造器，则显式的调用一下 : <code>super (参数列表)</code></p></li><li><p><code>super</code> 在使用时，必须放在构造器第一行 (super 只能在构造器中使用)</p></li><li><p><code>super()</code> 和 <code>this()</code> 都只能放在构造器第一行，因此这两个方法不能共存在一个构造器</p><blockquote><p>注意 不管怎么样子类都会通过某一个方法调用 super 的</p></blockquote></li><li><p>java 所有类都是 Object 类的子类, Object 是所有类的基类. </p></li><li><p>父类构造器的调用不限于直接父类！将一直往上追溯直到 Object 类 (顶级父类)</p></li><li><p>子类最多只能继承一个父类 (指直接继承)，即 java 中是单继承机制。思考：如何让 A 类继承 B 类和 C 类？ 【A 继承 B， B 继承 C】</p></li><li><p>不能滥用继承，子类和父类之间必须满足 is-a 的逻辑关系</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.extend_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExtendsDetail</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//        System.out.println(&quot;===第1个对象====&quot;);</span></span><br><span class="line"><span class="comment">//        Sub sub = new Sub(); //创建了子类对象 sub</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;===第2个对象====&quot;);</span></span><br><span class="line"><span class="comment">//        Sub sub2 = new Sub(&quot;jack&quot;); //创建了子类对象 sub2</span></span><br><span class="line">        System.out.println(<span class="string">&quot;===第3对象====&quot;</span>);</span><br><span class="line">        <span class="type">Sub</span> <span class="variable">sub3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Sub</span>(<span class="string">&quot;king&quot;</span>, <span class="number">10</span>); <span class="comment">//创建了子类对象 sub2</span></span><br><span class="line">        <span class="comment">//sub.sayOk();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.extend_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TopBase</span> &#123; <span class="comment">//父类是Object</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TopBase</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//super(); Object的无参构造器</span></span><br><span class="line">        System.out.println(<span class="string">&quot;构造器TopBase() 被调用...&quot;</span>);<span class="comment">//1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.extend_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Base</span> <span class="keyword">extends</span> <span class="title class_">TopBase</span> &#123; <span class="comment">//父类</span></span><br><span class="line">    <span class="comment">//4个属性</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="variable">n2</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n3</span> <span class="operator">=</span> <span class="number">300</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">n4</span> <span class="operator">=</span> <span class="number">400</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Base</span><span class="params">()</span> &#123; <span class="comment">//无参构造器</span></span><br><span class="line">        System.out.println(<span class="string">&quot;父类Base()构造器被调用....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Base</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;<span class="comment">//有参构造器</span></span><br><span class="line">        <span class="comment">//默认super()</span></span><br><span class="line">        System.out.println(<span class="string">&quot;父类Base(String name, int age)构造器被调用....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Base</span><span class="params">(String name)</span> &#123;<span class="comment">//有参构造器</span></span><br><span class="line">        System.out.println(<span class="string">&quot;父类Base(String name)构造器被调用....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//父类提供一个public的方法,返回了n4</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getN4</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> n4;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test100</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;test100&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">test200</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;test200&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">test300</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;test300&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">test400</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;test400&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//call</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">callTest400</span><span class="params">()</span> &#123;</span><br><span class="line">        test400();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.extend_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">//输入ctrl + H 可以看到类的继承关系</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Sub</span> <span class="keyword">extends</span> <span class="title class_">Base</span> &#123; <span class="comment">//子类</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Sub</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="comment">//1. 老师要调用父类的无参构造器, 如下或者 什么都不写,默认就是调用super()</span></span><br><span class="line">        <span class="comment">//super();//父类的无参构造器</span></span><br><span class="line">        <span class="comment">//2. 老师要调用父类的 Base(String name) 构造器</span></span><br><span class="line">        <span class="comment">//super(&quot;hsp&quot;);</span></span><br><span class="line">        <span class="comment">//3. 老师要调用父类的 Base(String name, int age) 构造器</span></span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&quot;king&quot;</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//细节： super在使用时，必须放在构造器第一行</span></span><br><span class="line">        <span class="comment">//细节: super() 和 this() 都只能放在构造器第一行，因此这两个方法不能共存在一个构造器</span></span><br><span class="line">        <span class="comment">//this() 不能再使用了</span></span><br><span class="line">        System.out.println(<span class="string">&quot;子类Sub(String name, int age)构造器被调用....&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Sub</span><span class="params">()</span> &#123;<span class="comment">//无参构造器</span></span><br><span class="line">        <span class="comment">//super(); //默认调用父类的无参构造器</span></span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&quot;smith&quot;</span>, <span class="number">10</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;子类Sub()构造器被调用....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//当创建子类对象时，不管使用子类的哪个构造器，默认情况下总会去调用父类的无参构造器</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Sub</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&quot;tom&quot;</span>, <span class="number">30</span>);</span><br><span class="line">        <span class="comment">//do nothing...</span></span><br><span class="line">        System.out.println(<span class="string">&quot;子类Sub(String name)构造器被调用....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sayOk</span><span class="params">()</span> &#123;<span class="comment">//子类方法</span></span><br><span class="line">        <span class="comment">//非私有的属性和方法可以在子类直接访问</span></span><br><span class="line">        <span class="comment">//但是私有属性和方法不能在子类直接访问</span></span><br><span class="line">        System.out.println(n1 + <span class="string">&quot; &quot;</span> + n2 + <span class="string">&quot; &quot;</span> + n3);</span><br><span class="line">        test100();</span><br><span class="line">        test200();</span><br><span class="line">        test300();</span><br><span class="line">        <span class="comment">//test400();错误</span></span><br><span class="line">        <span class="comment">//要通过父类提供公共的方法去访问</span></span><br><span class="line">        System.out.println(<span class="string">&quot;n4=&quot;</span> + getN4());</span><br><span class="line">        callTest400();<span class="comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4-5-继承的本质-※"><a href="#4-5-继承的本质-※" class="headerlink" title="4.5 继承的本质 (※)"></a>4.5 继承的本质 (※)</h2><ol><li>现在方法区中加载类, 并识别类之间的继承关系</li><li>然后先从 最顶级的父类开始加载 <code>Object -&gt; GrandPa -&gt; Father -&gt; Son</code> , 将他们的属性及方法加载出来</li><li>先加载 GrandPa 类的两个属性, 再加载 Father 类的两个属性, 再加载 Son 类的属性</li><li>调用属性时遵循就近原则, 如果子类没有就向上找, 没有就一直向上找, 如果没有或者无访问权限就报错</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.hspedu.extend_;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 讲解继承的本质</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExtendsTheory</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Son</span> <span class="variable">son</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Son</span>();<span class="comment">//内存的布局</span></span><br><span class="line">        <span class="comment">//?-&gt; 这时请大家注意，要按照查找关系来返回信息</span></span><br><span class="line">        <span class="comment">//(1) 首先看子类是否有该属性</span></span><br><span class="line">        <span class="comment">//(2) 如果子类有这个属性，并且可以访问，则返回信息</span></span><br><span class="line">        <span class="comment">//(3) 如果子类没有这个属性，就看父类有没有这个属性(如果父类有该属性，并且可以访问，就返回信息..)</span></span><br><span class="line">        <span class="comment">//(4) 如果父类没有就按照(3)的规则，继续找上级父类，直到Object...</span></span><br><span class="line">        System.out.println(son.name);<span class="comment">//返回就是大头儿子</span></span><br><span class="line">        <span class="comment">//System.out.println(son.age);//返回的就是39</span></span><br><span class="line">        <span class="comment">//System.out.println(son.getAge());//返回的就是39</span></span><br><span class="line">        System.out.println(son.hobby);<span class="comment">//返回的就是旅游</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GrandPa</span> &#123; <span class="comment">//爷类</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;大头爷爷&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">hobby</span> <span class="operator">=</span> <span class="string">&quot;旅游&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> <span class="keyword">extends</span> <span class="title class_">GrandPa</span> &#123;<span class="comment">//父类</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;大头爸爸&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">39</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_">Father</span> &#123; <span class="comment">//子类</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;大头儿子&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230203171622067.png" alt="继承的本质"></p><h2 id="4-6-练习"><a href="#4-6-练习" class="headerlink" title="4.6 练习"></a>4.6 练习</h2><ul><li>练习一</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.extend_.exercise;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExtendsExercise02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">C</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">C</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;<span class="comment">//A类</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">A</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;我是A类&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_">A</span> &#123; <span class="comment">//B类,继承A类//main方法中： C c =new C(); 输出么内容? 3min</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">B</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;我是B类的无参构造&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">B</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        System.out.println(name + <span class="string">&quot;我是B类的有参构造&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> <span class="keyword">extends</span> <span class="title class_">B</span> &#123;   <span class="comment">//C类，继承 B类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">C</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;我是c类的无参构造&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">C</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&quot;hahah&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;我是c类的有参构造&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>练习二</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.extend_.exercise;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExtendsExercise03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">PC</span> <span class="variable">pc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PC</span>(<span class="string">&quot;intel&quot;</span>, <span class="number">16</span>, <span class="number">500</span>, <span class="string">&quot;IBM&quot;</span>);</span><br><span class="line">        pc.printInfo();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">编写Computer类，包含CPU、内存、硬盘等属性，getDetails方法用于返回Computer的详细信息</span></span><br><span class="line"><span class="comment">编写PC子类，继承Computer类，添加特有属性【品牌brand】</span></span><br><span class="line"><span class="comment">编写NotePad子类，继承Computer类，添加特有属性【color】//同学们自己写。</span></span><br><span class="line"><span class="comment">编写Test类，在main方法中创建PC和NotePad对象，分别给对象中特有的属性赋值，</span></span><br><span class="line"><span class="comment">以及从Computer类继承的属性赋值，并使用方法并打印输出信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.extend_.exercise;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编写PC子类，继承Computer类，添加特有属性【品牌brand】</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PC</span> <span class="keyword">extends</span> <span class="title class_">Computer</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String brand;</span><br><span class="line">    <span class="comment">//这里IDEA 根据继承的规则，自动把构造器的调用写好</span></span><br><span class="line">    <span class="comment">//这里也体现： 继承设计的基本思想，父类的构造器完成父类属性初始化</span></span><br><span class="line">    <span class="comment">//子类的构造器完成子类属性初始化</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PC</span><span class="params">(String cpu, <span class="type">int</span> memory, <span class="type">int</span> disk, String brand)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(cpu, memory, disk);</span><br><span class="line">        <span class="built_in">this</span>.brand = brand;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getBrand</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> brand;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBrand</span><span class="params">(String brand)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.brand = brand;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;PC信息=&quot;</span>);</span><br><span class="line"><span class="comment">//        System.out.println(getCpu() + getMemory() + getDisk());</span></span><br><span class="line">        <span class="comment">//调用父类的getDetails方法，得到相关属性信息..</span></span><br><span class="line">        System.out.println(getDetails() + <span class="string">&quot; brand=&quot;</span> + brand);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.extend_.exercise;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编写Computer类，包含CPU、内存、硬盘等属性，getDetails方法用于返回Computer的详细信息</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Computer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String cpu;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> memory;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> disk;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Computer</span><span class="params">(String cpu, <span class="type">int</span> memory, <span class="type">int</span> disk)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.cpu = cpu;</span><br><span class="line">        <span class="built_in">this</span>.memory = memory;</span><br><span class="line">        <span class="built_in">this</span>.disk = disk;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//返回Computer信息</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDetails</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;cpu=&quot;</span> + cpu + <span class="string">&quot; memory=&quot;</span> + memory + <span class="string">&quot; disk=&quot;</span> + disk;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCpu</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cpu;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCpu</span><span class="params">(String cpu)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.cpu = cpu;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getMemory</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> memory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMemory</span><span class="params">(<span class="type">int</span> memory)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.memory = memory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getDisk</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> disk;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDisk</span><span class="params">(<span class="type">int</span> disk)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.disk = disk;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="五、super"><a href="#五、super" class="headerlink" title="五、super"></a>五、super</h1><blockquote><p>super 代表父类的引用，用于<strong>访问父类的属性、方法、构造</strong>器</p></blockquote><h2 id="5-1-基本语法"><a href="#5-1-基本语法" class="headerlink" title="5.1 基本语法"></a>5.1 基本语法</h2><ol><li>访问父类的属性 (不能访问父类的 private 属性) <code>super.属性名</code></li><li>访问父类的方法 (不能访问父类的 private 方法) <code>super.方法名(参数列表)</code></li><li>访问父类的构造器 <code>super(参数列表);</code> 只能放在构造器的第一句l,只能出现一句</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.super_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Super01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">B</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">B</span>();<span class="comment">//子类对象</span></span><br><span class="line">        <span class="comment">//b.sum();</span></span><br><span class="line">        b.test();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.super_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Base</span> &#123; <span class="comment">//父类是Object</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">999</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">111</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cal</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Base类的cal() 方法...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Base类的eat().....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.super_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A</span> <span class="keyword">extends</span> <span class="title class_">Base</span>&#123;</span><br><span class="line">    <span class="comment">//4个属性</span></span><br><span class="line">    <span class="comment">//public int n1 = 100;</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> <span class="variable">n2</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n3</span> <span class="operator">=</span> <span class="number">300</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">n4</span> <span class="operator">=</span> <span class="number">400</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">A</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">A</span><span class="params">(String name)</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">A</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    public void cal() &#123;</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;A类的cal() 方法...&quot;);</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test100</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">test200</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">test300</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">test400</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.super_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_">A</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">888</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//编写测试方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//super的访问不限于直接父类，如果爷爷类和本类中有同名的成员，也可以使用super去访问爷爷类的成员；</span></span><br><span class="line">        <span class="comment">// 如果多个基类(上级类)中都有同名的成员，使用super访问遵循就近原则。A-&gt;B-&gt;C</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;super.n1=&quot;</span> + <span class="built_in">super</span>.n1);</span><br><span class="line">        <span class="built_in">super</span>.cal();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//访问父类的属性 , 但不能访问父类的private属性 [案例]super.属性名</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hi</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="built_in">super</span>.n1 + <span class="string">&quot; &quot;</span> + <span class="built_in">super</span>.n2 + <span class="string">&quot; &quot;</span> + <span class="built_in">super</span>.n3 );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cal</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;B类的cal() 方法...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sum</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;B类的sum()&quot;</span>);</span><br><span class="line">        <span class="comment">//希望调用父类-A 的cal方法</span></span><br><span class="line">        <span class="comment">//这时，因为子类B没有cal方法，因此我可以使用下面三种方式</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//找cal方法时(cal() 和 this.cal())，顺序是:</span></span><br><span class="line">        <span class="comment">// (1)先找本类，如果有，则调用</span></span><br><span class="line">        <span class="comment">// (2)如果没有，则找父类(如果有，并可以调用，则调用)</span></span><br><span class="line">        <span class="comment">// (3)如果父类没有，则继续找父类的父类,整个规则，就是一样的,直到 Object类</span></span><br><span class="line">        <span class="comment">// 提示：如果查找方法的过程中，找到了，但是不能访问， 则报错, cannot access</span></span><br><span class="line">        <span class="comment">//      如果查找方法的过程中，没有找到，则提示方法不存在</span></span><br><span class="line">        <span class="comment">//cal();</span></span><br><span class="line">        <span class="built_in">this</span>.cal(); <span class="comment">//等价 cal</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//找cal方法(super.call()) 的顺序是直接查找父类，其他的规则一样</span></span><br><span class="line">        <span class="comment">//super.cal();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//演示访问属性的规则</span></span><br><span class="line">        <span class="comment">//n1 和 this.n1 查找的规则是</span></span><br><span class="line">        <span class="comment">//(1) 先找本类，如果有，则调用</span></span><br><span class="line">        <span class="comment">//(2) 如果没有，则找父类(如果有，并可以调用，则调用)</span></span><br><span class="line">        <span class="comment">//(3) 如果父类没有，则继续找父类的父类,整个规则，就是一样的,直到 Object类</span></span><br><span class="line">        <span class="comment">// 提示：如果查找属性的过程中，找到了，但是不能访问， 则报错, cannot access</span></span><br><span class="line">        <span class="comment">//      如果查找属性的过程中，没有找到，则提示属性不存在</span></span><br><span class="line">        System.out.println(n1);</span><br><span class="line">        System.out.println(<span class="built_in">this</span>.n1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//找n1 (super.n1) 的顺序是直接查找父类属性，其他的规则一样</span></span><br><span class="line">        System.out.println(<span class="built_in">super</span>.n1);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//访问父类的方法，不能访问父类的private方法 super.方法名(参数列表);</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ok</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.test100();</span><br><span class="line">        <span class="built_in">super</span>.test200();</span><br><span class="line">        <span class="built_in">super</span>.test300();</span><br><span class="line">        <span class="comment">//super.test400();//不能访问父类private方法</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//访问父类的构造器(这点前面用过)：super(参数列表);只能放在构造器的第一句，只能出现一句！</span></span><br><span class="line">    <span class="keyword">public</span>  <span class="title function_">B</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//super();</span></span><br><span class="line">        <span class="comment">//super(&quot;jack&quot;, 10);</span></span><br><span class="line">        <span class="built_in">super</span>(<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="5-2-好处"><a href="#5-2-好处" class="headerlink" title="5.2 好处"></a>5.2 好处</h2><ol><li><p>调用父类构造器, 分工明确, 父类属性由父类构造器初始化, 子类属性由子类构造器初始化</p></li><li><p>当子类中有和父类中的成员 (属性 或 方法) 重名时, 为了访问父类的成员, 必须通过 super</p><p>如果没有重名, 使用 super, this, 啥都不用 效果一样</p></li><li><p>super 的访问不限于直接父类, 如果爷爷类和本类中有同名的成员, 也可以使用 super 去访问爷爷类的成员, 如果多个基类 (上级类) 中都有同名的成员, 使用 super 访问遵循就近原则, 也遵守访问权限相关规则</p></li></ol><h2 id="5-3-super-amp-this"><a href="#5-3-super-amp-this" class="headerlink" title="5.3 super &amp; this"></a>5.3 super &amp; this</h2><p>super 跟 this 很像, 就是找属性或方法时直接跳过本类找父类</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230203172951786.png" alt="super 和 this 的比较"></p><hr><h1 id="六、方法重写-覆盖"><a href="#六、方法重写-覆盖" class="headerlink" title="六、方法重写 (覆盖)"></a>六、方法重写 (覆盖)</h1><blockquote><p>子类和父类的某个<strong>方法</strong>名称, 返回类型, 参数一样, 那么就说子类的这个方法重写 (覆盖) 了父类的方法 (属性没有重写一说)</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.override_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cry</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;动物叫唤..&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">m1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">m2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> AAA <span class="title function_">m3</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.override_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Animal</span>&#123;</span><br><span class="line">    <span class="comment">//老韩解读</span></span><br><span class="line">    <span class="comment">//1. 因为Dog 是 Animal子类</span></span><br><span class="line">    <span class="comment">//2. Dog的 cry方法和 Animal的 cry定义形式一样(名称、返回类型、参数)</span></span><br><span class="line">    <span class="comment">//3. 这时我们就说 Dog的cry方法，重写了Animal的cry方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cry</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;小狗汪汪叫..&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//细节: 子类方法的返回类型和父类方法返回类型一样，</span></span><br><span class="line">    <span class="comment">//      或者是父类返回类型的子类比如 父类 返回类型是 Object ,</span></span><br><span class="line">    <span class="comment">//      子类方法返回类型是String</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">m1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//这里Object 不是 String的子类，因此编译错误</span></span><br><span class="line"><span class="comment">//    public Object m2() &#123;</span></span><br><span class="line"><span class="comment">//        return null;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//    public BBB m3() &#123;</span></span><br><span class="line"><span class="comment">//        return null;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">    <span class="comment">//细节: 子类方法不能缩小父类方法的访问权限 【演示】</span></span><br><span class="line">    <span class="comment">//public &gt; protected &gt; 默认&gt;private</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AAA</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BBB</span> <span class="keyword">extends</span> <span class="title class_">AAA</span>  &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.override_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Override01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//演示方法重写的情况</span></span><br><span class="line">        <span class="type">Dog</span> <span class="variable">dog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line">        dog.cry();<span class="comment">//ctrl+b</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="6-1-使用细节"><a href="#6-1-使用细节" class="headerlink" title="6.1 使用细节"></a>6.1 使用细节</h2><ol><li><p>子类方法的<strong>形参列表, 方法名称</strong>, 要和父类方法的<strong>形参列表, 方法名称</strong>完全一样</p></li><li><p>子类方法的返回类型和父类方法的返回类型一样, 或者是父类返回类型的子类</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230203173543441.png" alt="返回类型要一样"></p></li><li><p>子类方法不能缩小父类方法的访问权限 (可以一样或扩大)</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230203173622653.png" alt="不可以缩小"></p></li></ol><h2 id="6-2-重写-amp-重载"><a href="#6-2-重写-amp-重载" class="headerlink" title="6.2 重写 &amp; 重载"></a>6.2 重写 &amp; 重载</h2><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230203173706487.png" alt="重写 &amp; 重载"></p><h2 id="6-3-练习"><a href="#6-3-练习" class="headerlink" title="6.3 练习"></a>6.3 练习</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.override_;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个Person类，包括属性/private（name、age），构造器、方法say(返回自我介绍的字符串）</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">say</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;name=&quot;</span> + name + <span class="string">&quot; age=&quot;</span> + age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.override_;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个Student类，继承Person类，增加id、score属性/private，以及构造器，定义say方法(返回自我介绍的信息)。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> score;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, <span class="type">int</span> id, <span class="type">double</span> score)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name, age);<span class="comment">//这里会调用父类构造器</span></span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//say</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">say</span><span class="params">()</span> &#123; <span class="comment">//这里体现super的一个好处，代码复用.</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.say() + <span class="string">&quot; id=&quot;</span> + id + <span class="string">&quot; score=&quot;</span> + score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getScore</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> score;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setScore</span><span class="params">(<span class="type">double</span> score)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.override_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OverrideExercise</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//在main中,分别创建Person和Student对象，调用say方法输出自我介绍</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">jack</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;jack&quot;</span>, <span class="number">10</span>);</span><br><span class="line">        System.out.println(jack.say());</span><br><span class="line"></span><br><span class="line">        <span class="type">Student</span> <span class="variable">smith</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;smith&quot;</span>, <span class="number">20</span>, <span class="number">123456</span>, <span class="number">99.8</span>);</span><br><span class="line">        System.out.println(smith.say());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="七、多态"><a href="#七、多态" class="headerlink" title="七、多态"></a>七、多态</h1><blockquote><p>方法或对象具有多种形态</p></blockquote><h2 id="7-1-问题引出"><a href="#7-1-问题引出" class="headerlink" title="7.1 问题引出"></a>7.1 问题引出</h2><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230203175003372.png" alt="问题引出"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Animal</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Cat</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Dog</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pig</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Pig</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Food</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Food</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bone</span> <span class="keyword">extends</span> <span class="title class_">Food</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Bone</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Fish</span> <span class="keyword">extends</span> <span class="title class_">Food</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Fish</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Rice</span> <span class="keyword">extends</span> <span class="title class_">Food</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Rice</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Master</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Master</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用多态机制，可以统一的管理主人喂食的问题</span></span><br><span class="line">    <span class="comment">//animal 编译类型是Animal,可以指向(接收) Animal子类的对象</span></span><br><span class="line">    <span class="comment">//food 编译类型是Food ,可以指向(接收) Food子类的对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">feed</span><span class="params">(Animal animal, Food food)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;主人 &quot;</span> + name + <span class="string">&quot; 给 &quot;</span> + animal.getName() + <span class="string">&quot; 吃 &quot;</span> + food.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//主人给小狗 喂食 骨头</span></span><br><span class="line"><span class="comment">//    public void feed(Dog dog, Bone bone) &#123;</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;主人 &quot; + name + &quot; 给 &quot; + dog.getName() + &quot; 吃 &quot; + bone.getName());</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//    //主人给 小猫喂 黄花鱼</span></span><br><span class="line"><span class="comment">//    public void feed(Cat cat, Fish fish) &#123;</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;主人 &quot; + name + &quot; 给 &quot; + cat.getName() + &quot; 吃 &quot; + fish.getName());</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//如果动物很多，食物很多</span></span><br><span class="line">    <span class="comment">//===&gt; feed 方法很多，不利于管理和维护</span></span><br><span class="line">    <span class="comment">//Pig --&gt; Rice</span></span><br><span class="line">    <span class="comment">//Tiger ---&gt; meat ...</span></span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>使用多态机制解决这个问题</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Poly01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Master</span> <span class="variable">tom</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Master</span>(<span class="string">&quot;汤姆&quot;</span>);</span><br><span class="line">        <span class="type">Dog</span> <span class="variable">dog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;大黄~&quot;</span>);</span><br><span class="line">        <span class="type">Bone</span> <span class="variable">bone</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bone</span>(<span class="string">&quot;大棒骨~&quot;</span>);</span><br><span class="line">        tom.feed(dog, bone);</span><br><span class="line"></span><br><span class="line">        <span class="type">Cat</span> <span class="variable">cat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>(<span class="string">&quot;小花猫~&quot;</span>);</span><br><span class="line">        <span class="type">Fish</span> <span class="variable">fish</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Fish</span>(<span class="string">&quot;黄花鱼~&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;===========-------&quot;</span>);</span><br><span class="line">        tom.feed(cat, fish);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//添加 给小猪为米饭</span></span><br><span class="line">        <span class="type">Pig</span> <span class="variable">pig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Pig</span>(<span class="string">&quot;小花猪&quot;</span>);</span><br><span class="line">        <span class="type">Rice</span> <span class="variable">rice</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Rice</span>(<span class="string">&quot;米饭&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;===================&quot;</span>);</span><br><span class="line">        tom.feed(pig, rice);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="7-2-方法的多态"><a href="#7-2-方法的多态" class="headerlink" title="7.2 方法的多态"></a>7.2 方法的多态</h2><p>重写 和 重载就体现了多态</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PloyMethod</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//方法重载体现多态</span></span><br><span class="line">        <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">        <span class="comment">//这里我们传入不同的参数，就会调用不同sum方法，就体现多态</span></span><br><span class="line">        System.out.println(a.sum(<span class="number">10</span>, <span class="number">20</span>));</span><br><span class="line">        System.out.println(a.sum(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//方法重写体现多态</span></span><br><span class="line">        <span class="type">B</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">B</span>();</span><br><span class="line">        a.say();</span><br><span class="line">        b.say();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123; <span class="comment">//父类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">say</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;B say() 方法被调用...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> <span class="keyword">extends</span> <span class="title class_">B</span> &#123;<span class="comment">//子类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span> n1, <span class="type">int</span> n2)</span>&#123;<span class="comment">//和下面sum 构成重载</span></span><br><span class="line">        <span class="keyword">return</span> n1 + n2;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span> n1, <span class="type">int</span> n2, <span class="type">int</span> n3)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> n1 + n2 + n3;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">say</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;A say() 方法被调用...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="7-3-对象的多态-※"><a href="#7-3-对象的多态-※" class="headerlink" title="7.3 对象的多态 (※)"></a>7.3 对象的多态 (※)</h2><ol><li>一个对象的百年一类型和运行类型可以不一致</li><li>编译类型在定义对象时就确定了, 不能改变</li><li>运行类型是可变的</li><li>编译类型看定义时 <code>=</code> 左边, 运行类型看 <code>=</code> 右边</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_.objectpoly_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span>  <span class="title function_">cry</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Animal cry() 动物在叫....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_.objectpoly_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cry</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Cat cry() 小猫喵喵叫...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_.objectpoly_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cry</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Dog cry() 小狗汪汪叫...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_.objectpoly_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PolyObject</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//体验对象多态特点</span></span><br><span class="line">        <span class="comment">//animal 编译类型就是 Animal , 运行类型 Dog</span></span><br><span class="line">        <span class="type">Animal</span> <span class="variable">animal</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line">        <span class="comment">//因为运行时 , 执行到改行时，animal运行类型是Dog,所以cry就是Dog的cry</span></span><br><span class="line">        animal.cry(); <span class="comment">//小狗汪汪叫</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//animal 编译类型 Animal,运行类型就是 Cat</span></span><br><span class="line">        animal = <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">        animal.cry(); <span class="comment">//小猫喵喵叫</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="7-4-注意事项"><a href="#7-4-注意事项" class="headerlink" title="7.4 注意事项"></a>7.4 注意事项</h2><ul><li>多态的前提是: 两个对象 (类) 之间存在着继承关系</li></ul><h3 id="7-4-1-向上转型"><a href="#7-4-1-向上转型" class="headerlink" title="7.4.1 向上转型"></a>7.4.1 向上转型</h3><ol><li><p>本质: 父类的引用指向了子类的对象 (子类向上转型成了父类)</p></li><li><p>语法: 父类类型 引用名 &#x3D; new 子类类型();</p></li><li><p>特点: </p><ul><li><p>编译类型看左边, 运行类型看右边</p></li><li><p>可以调用父类中的所有成员 (要遵守访问权限)</p></li><li><p>不能调用子类中的特有成员</p></li><li><p>最终运行效果要看子类的具体实现</p><blockquote><p>子类和父类可能具有相同的方法, 此时进行向上转型</p><p>编译的指令是 <code>javac</code>, 编译通过的是父类的方法, 但是此时子类有与父类同名的方法 (重写)</p><p>运行的指令是 <code>java</code>, 与编译的指令无关, 哪个方法通过编译, 哪个方法就可以运行</p><p>则此时运行的方法其实是子类重写过后的与父类同名的方法</p></blockquote></li></ul></li></ol><h3 id="7-4-2-向下转型"><a href="#7-4-2-向下转型" class="headerlink" title="7.4.2 向下转型"></a>7.4.2 向下转型</h3><ol><li><p>语法: 子类类型 引用名 &#x3D; (子类类型) 父类引用; (父类向下转型成了子类)</p></li><li><p>只能强转父类的引用, 不能强转父类的对象 (对象创建出来是啥就是啥, 不能强转)</p></li><li><p>要求父类的引用必须指向的是当前目标类型的对象</p><blockquote><p>就是在这里要对父类的引用进行向下转型时, 要向下转型的这个子类姑且设为 A</p><p>而这个要向下转型的父类在向上转型时, 它当时指向的对象必须是 A 类的对象</p><p>否则不可以被向下转型</p><p>相当于一上一下转回来了, 目的就是使用子类的特有方法</p></blockquote></li><li><p>当向下转型后, 可以调用子类类型中的所有成员</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_.detail_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;动物&quot;</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sleep</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;睡&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;跑&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;吃&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">show</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;hello,你好&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_.detail_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span>&#123;<span class="comment">//方法重写</span></span><br><span class="line">        System.out.println(<span class="string">&quot;猫吃鱼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">catchMouse</span><span class="params">()</span>&#123;<span class="comment">//Cat特有方法</span></span><br><span class="line">        System.out.println(<span class="string">&quot;猫抓老鼠&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_.detail_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_">Animal</span> &#123;<span class="comment">//Dog是Animal的子类</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_.detail_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PolyDetail</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//向上转型: 父类的引用指向了子类的对象</span></span><br><span class="line">        <span class="comment">//语法：父类类型引用名 = new 子类类型();</span></span><br><span class="line">        <span class="type">Animal</span> <span class="variable">animal</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();<span class="comment">//可以吗? 可以 Object 也是 Cat的父类</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//向上转型调用方法的规则如下:</span></span><br><span class="line">        <span class="comment">//(1)可以调用父类中的所有成员(需遵守访问权限)</span></span><br><span class="line">        <span class="comment">//(2)但是不能调用子类的特有的成员</span></span><br><span class="line">        <span class="comment">//(#)因为在编译阶段，能调用哪些成员,是由编译类型来决定的</span></span><br><span class="line">        <span class="comment">//animal.catchMouse();错误</span></span><br><span class="line">        <span class="comment">//(4)最终运行效果看子类(运行类型)的具体实现, 即调用方法时，按照从子类(运行类型)开始查找方法</span></span><br><span class="line">        <span class="comment">//，然后调用，规则我前面我们讲的方法调用规则一致。</span></span><br><span class="line">        animal.eat();<span class="comment">//猫吃鱼..</span></span><br><span class="line">        animal.run();<span class="comment">//跑</span></span><br><span class="line">        animal.show();<span class="comment">//hello,你好</span></span><br><span class="line">        animal.sleep();<span class="comment">//睡</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//老师希望，可以调用Cat的 catchMouse方法</span></span><br><span class="line">        <span class="comment">//多态的向下转型</span></span><br><span class="line">        <span class="comment">//(1)语法：子类类型 引用名 =（子类类型）父类引用;</span></span><br><span class="line">        <span class="comment">//问一个问题? cat 的编译类型 Cat,运行类型是 Cat</span></span><br><span class="line">        <span class="type">Cat</span> <span class="variable">cat</span> <span class="operator">=</span> (Cat) animal;</span><br><span class="line">        cat.catchMouse();<span class="comment">//猫抓老鼠</span></span><br><span class="line">        <span class="comment">//(2)要求父类的引用必须指向的是当前目标类型的对象</span></span><br><span class="line">        <span class="type">Dog</span> <span class="variable">dog</span> <span class="operator">=</span> (Dog) animal; <span class="comment">//报错</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;ok~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>属性没有重写这一说, 属性的值要看编译类型</li></ul><p>编译的时候, 属性就已经确定了, 这跟向上转型思想差不多 (忘了就看看我在上面的分析笔记)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_.detail_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PolyDetail02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//属性没有重写之说！属性的值看编译类型</span></span><br><span class="line">        <span class="type">Base</span> <span class="variable">base</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Sub</span>();<span class="comment">//向上转型</span></span><br><span class="line">        System.out.println(base.count);<span class="comment">// ？ 看编译类型 10</span></span><br><span class="line">        <span class="type">Sub</span> <span class="variable">sub</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Sub</span>();</span><br><span class="line">        System.out.println(sub.count);<span class="comment">//?  20</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123; <span class="comment">//父类</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">10</span>;<span class="comment">//属性</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sub</span> <span class="keyword">extends</span> <span class="title class_">Base</span> &#123;<span class="comment">//子类</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">20</span>;<span class="comment">//属性</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><code>instanceOf</code> 比较操作符，用于判断对象的<strong>运行类型</strong><code>是否为 XX 类型或 XX 类型的子类型</code></li></ul><p><code>A instanceof B</code>, A 是不是 B 的….</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_.detail_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PolyDetail03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">BB</span> <span class="variable">bb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BB</span>();</span><br><span class="line">        System.out.println(bb <span class="keyword">instanceof</span>  BB);<span class="comment">// true</span></span><br><span class="line">        System.out.println(bb <span class="keyword">instanceof</span>  AA);<span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//aa 编译类型 AA, 运行类型是BB</span></span><br><span class="line">        <span class="comment">//BB是AA子类</span></span><br><span class="line">        <span class="type">AA</span> <span class="variable">aa</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BB</span>();</span><br><span class="line">        System.out.println(aa <span class="keyword">instanceof</span> AA);</span><br><span class="line">        System.out.println(aa <span class="keyword">instanceof</span> BB);</span><br><span class="line"></span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">        System.out.println(obj <span class="keyword">instanceof</span> AA);<span class="comment">//false</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">        <span class="comment">//System.out.println(str instanceof AA);</span></span><br><span class="line">        System.out.println(str <span class="keyword">instanceof</span> Object);<span class="comment">//true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AA</span> &#123;&#125; <span class="comment">//父类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BB</span> <span class="keyword">extends</span> <span class="title class_">AA</span> &#123;&#125;<span class="comment">//子类</span></span><br></pre></td></tr></table></figure><h2 id="7-5-动态绑定机制"><a href="#7-5-动态绑定机制" class="headerlink" title="7.5 动态绑定机制"></a>7.5 动态绑定机制</h2><ol><li><p>当调用对象<strong>方法</strong>时, 该方法会和该对象的<strong>内存地址&#x2F;运行类型</strong>绑定</p><blockquote><p>就是先在子类找方法, 没有的话就向上找, 在父类的方法里找, 一直到 Object, 没有的话报错</p><p>对比 继承 那部分的内存图</p></blockquote></li><li><p>当调用对象<strong>属性</strong>时, <strong>没有动态绑定机制</strong>, 哪里声明, 哪里使用</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_.dynamic_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DynamicBinding</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//a 的编译类型 A, 运行类型 B</span></span><br><span class="line">        <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">B</span>();<span class="comment">//向上转型</span></span><br><span class="line">        <span class="comment">// 将子类的 sum() 注释掉</span></span><br><span class="line">        System.out.println(a.sum());<span class="comment">//? 20 + 20 -&gt; 20 + 10</span></span><br><span class="line">        <span class="comment">// 将子类的 sum1() 注释掉</span></span><br><span class="line">        System.out.println(a.sum1());<span class="comment">//? 20 + 10 -&gt; 10 + 10</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;<span class="comment">//父类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="comment">//动态绑定机制:</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sum</span><span class="params">()</span> &#123;<span class="comment">//父类sum()</span></span><br><span class="line">        <span class="comment">// 这个 getI() 是使用的子类的方法, 只要有同名的就用子类的, 动态转</span></span><br><span class="line">        <span class="keyword">return</span> getI() + <span class="number">10</span>;<span class="comment">//20 + 10</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sum1</span><span class="params">()</span> &#123;<span class="comment">//父类sum1()</span></span><br><span class="line">        <span class="comment">// 属性没有动态绑定机制,在 A 类中声明的, 就用 A 类的</span></span><br><span class="line">        <span class="keyword">return</span> i + <span class="number">10</span>;<span class="comment">//10 + 10</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getI</span><span class="params">()</span> &#123;<span class="comment">//父类getI</span></span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_">A</span> &#123;<span class="comment">//子类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    public int sum() &#123;</span></span><br><span class="line"><span class="comment">//        return i + 20;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getI</span><span class="params">()</span> &#123;<span class="comment">//子类getI()</span></span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    public int sum1() &#123;</span></span><br><span class="line"><span class="comment">//        return i + 10;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="7-6-多态数组"><a href="#7-6-多态数组" class="headerlink" title="7.6 多态数组"></a>7.6 多态数组</h2><blockquote><p>数组的定义类型为父类类型，里面保存的实际元素类型为子类类型</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_.polyarr_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;<span class="comment">//父类</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">say</span><span class="params">()</span> &#123;<span class="comment">//返回名字和年龄</span></span><br><span class="line">        <span class="keyword">return</span> name + <span class="string">&quot;\t&quot;</span> + age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_.polyarr_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> score;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, <span class="type">double</span> score)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name, age);</span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getScore</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> score;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setScore</span><span class="params">(<span class="type">double</span> score)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//重写父类say</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">say</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;学生 &quot;</span> + <span class="built_in">super</span>.say() + <span class="string">&quot; score=&quot;</span> + score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//特有的方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">study</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;学生 &quot;</span> + getName() + <span class="string">&quot; 正在学java...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_.polyarr_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Teacher</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> salary;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Teacher</span><span class="params">(String name, <span class="type">int</span> age, <span class="type">double</span> salary)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name, age);</span><br><span class="line">        <span class="built_in">this</span>.salary = salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getSalary</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSalary</span><span class="params">(<span class="type">double</span> salary)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.salary = salary;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//写重写父类的say方法</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">say</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;老师 &quot;</span> + <span class="built_in">super</span>.say() + <span class="string">&quot; salary=&quot;</span> + salary;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//特有方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">teach</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;老师 &quot;</span> + getName() + <span class="string">&quot; 正在讲java课程...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_.polyarr_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PloyArray</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//应用实例:现有一个继承结构如下：要求创建1个Person对象、</span></span><br><span class="line">        <span class="comment">// 2个Student 对象和2个Teacher对象, 统一放在数组中，并调用每个对象say方法</span></span><br><span class="line"></span><br><span class="line">        Person[] persons = <span class="keyword">new</span> <span class="title class_">Person</span>[<span class="number">5</span>];</span><br><span class="line">        persons[<span class="number">0</span>] = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;jack&quot;</span>, <span class="number">20</span>);</span><br><span class="line">        persons[<span class="number">1</span>] = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;mary&quot;</span>, <span class="number">18</span>, <span class="number">100</span>);</span><br><span class="line">        persons[<span class="number">2</span>] = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;smith&quot;</span>, <span class="number">19</span>, <span class="number">30.1</span>);</span><br><span class="line">        persons[<span class="number">3</span>] = <span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">&quot;scott&quot;</span>, <span class="number">30</span>, <span class="number">20000</span>);</span><br><span class="line">        persons[<span class="number">4</span>] = <span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">&quot;king&quot;</span>, <span class="number">50</span>, <span class="number">25000</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//循环遍历多态数组，调用say</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; persons.length; i++) &#123;</span><br><span class="line">            <span class="comment">//老师提示: person[i] 编译类型是 Person ,运行类型是是根据实际情况有JVM来判断</span></span><br><span class="line">            System.out.println(persons[i].say());<span class="comment">//动态绑定机制</span></span><br><span class="line">            <span class="comment">//这里大家聪明. 使用 类型判断 + 向下转型.</span></span><br><span class="line">            <span class="keyword">if</span>(persons[i]  <span class="keyword">instanceof</span>  Student) &#123;<span class="comment">//判断person[i] 的运行类型是不是Student</span></span><br><span class="line">                <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student)persons[i];<span class="comment">//向下转型</span></span><br><span class="line">                student.study();</span><br><span class="line">                <span class="comment">//小伙伴也可以使用一条语句 ((Student)persons[i]).study();</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(persons[i] <span class="keyword">instanceof</span>  Teacher) &#123;</span><br><span class="line">                <span class="type">Teacher</span> <span class="variable">teacher</span> <span class="operator">=</span> (Teacher)persons[i];</span><br><span class="line">                teacher.teach();</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(persons[i] <span class="keyword">instanceof</span>  Person)&#123;</span><br><span class="line">                <span class="comment">//System.out.println(&quot;你的类型有误, 请自己检查...&quot;);</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;你的类型有误, 请自己检查...&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="7-7-多态参数"><a href="#7-7-多态参数" class="headerlink" title="7.7 多态参数"></a>7.7 多态参数</h2><blockquote><p>方法定义的形参类型为父类类型，实参类型允许为子类类型</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_.polyparameter_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> salary;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">(String name, <span class="type">double</span> salary)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.salary = salary;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//得到年工资的方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getAnnual</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">12</span> * salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getSalary</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSalary</span><span class="params">(<span class="type">double</span> salary)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.salary = salary;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_.polyparameter_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Manager</span> <span class="keyword">extends</span> <span class="title class_">Employee</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> bonus;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Manager</span><span class="params">(String name, <span class="type">double</span> salary, <span class="type">double</span> bonus)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name, salary);</span><br><span class="line">        <span class="built_in">this</span>.bonus = bonus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getBonus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bonus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBonus</span><span class="params">(<span class="type">double</span> bonus)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bonus = bonus;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">manage</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;经理 &quot;</span> + getName() + <span class="string">&quot; is managing&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//重写获取年薪方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getAnnual</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.getAnnual() + bonus;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_.polyparameter_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Worker</span> <span class="keyword">extends</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Worker</span><span class="params">(String name, <span class="type">double</span> salary)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name, salary);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">work</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;普通员工 &quot;</span> + getName() + <span class="string">&quot; is working&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getAnnual</span><span class="params">()</span> &#123; <span class="comment">//因为普通员工没有其它收入，则直接调用父类方法</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.getAnnual();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.poly_.polyparameter_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PloyParameter</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Worker</span> <span class="variable">tom</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Worker</span>(<span class="string">&quot;tom&quot;</span>, <span class="number">2500</span>);</span><br><span class="line">        <span class="type">Manager</span> <span class="variable">milan</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Manager</span>(<span class="string">&quot;milan&quot;</span>, <span class="number">5000</span>, <span class="number">200000</span>);</span><br><span class="line">        <span class="type">PloyParameter</span> <span class="variable">ployParameter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PloyParameter</span>();</span><br><span class="line">        ployParameter.showEmpAnnual(tom);</span><br><span class="line">        ployParameter.showEmpAnnual(milan);</span><br><span class="line"></span><br><span class="line">        ployParameter.testWork(tom);</span><br><span class="line">        ployParameter.testWork(milan);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//showEmpAnnual(Employee e)</span></span><br><span class="line">    <span class="comment">//实现获取任何员工对象的年工资,并在main方法中调用该方法 [e.getAnnual()]</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">showEmpAnnual</span><span class="params">(Employee e)</span> &#123;</span><br><span class="line">        System.out.println(e.getAnnual());<span class="comment">//动态绑定机制.</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//添加一个方法，testWork,如果是普通员工，则调用work方法，如果是经理，则调用manage方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testWork</span><span class="params">(Employee e)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(e <span class="keyword">instanceof</span>  Worker) &#123;</span><br><span class="line">            ((Worker) e).work();<span class="comment">//有向下转型操作</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(e <span class="keyword">instanceof</span> Manager) &#123;</span><br><span class="line">            ((Manager) e).manage();<span class="comment">//有向下转型操作</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;不做处理...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="八、Object-类详解"><a href="#八、Object-类详解" class="headerlink" title="八、Object 类详解"></a>八、Object 类详解</h1><h2 id="8-1-equals-方法"><a href="#8-1-equals-方法" class="headerlink" title="8.1 equals 方法"></a>8.1 equals 方法</h2><h3 id="8-1-1-和-equals-的对比-面试"><a href="#8-1-1-和-equals-的对比-面试" class="headerlink" title="8.1.1 == 和 equals 的对比 (面试)"></a>8.1.1 <code>==</code> 和 <code>equals</code> 的对比 (面试)</h3><p><code>==</code></p><ol><li>既可以判断基本类型, 又可以判断引用类型</li><li>如果判断基本类型, 判断的是值是否相等</li><li>如果判断引用类型, 判断的是地址是否相等, 即判定是不是一个对象</li></ol><p><code>equals</code></p><ol><li><p>是 Object 类中的方法, 只能判断引用类型 (使用前记得查看 jdk 源码)</p></li><li><p>默认判断的是地址是否相等, 子类中往往重写该方法, 用于判断内容是否相等</p><p>比如 Integer, String (看源码)</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.object_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Equals01</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">        <span class="type">A</span> <span class="variable">b</span> <span class="operator">=</span> a;</span><br><span class="line">        <span class="type">A</span> <span class="variable">c</span> <span class="operator">=</span> b;</span><br><span class="line">        System.out.println(a == c);<span class="comment">//true</span></span><br><span class="line">        System.out.println(b == c);<span class="comment">//true</span></span><br><span class="line">        <span class="type">B</span> <span class="variable">bObj</span> <span class="operator">=</span> a;</span><br><span class="line">        System.out.println(bObj == c);<span class="comment">//true</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">        <span class="type">double</span> <span class="variable">num2</span> <span class="operator">=</span> <span class="number">10.0</span>;</span><br><span class="line">        System.out.println(num1 == num2);<span class="comment">//基本数据类型，判断值是否相等</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//equals 方法，源码怎么查看.</span></span><br><span class="line">        <span class="comment">//把光标放在equals方法，直接输入ctrl+b</span></span><br><span class="line">        <span class="comment">//如果你使用不了. 自己配置. 即可使用.</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        //带大家看看Jdk的源码 String类的 equals方法</span></span><br><span class="line"><span class="comment">        //把Object的equals方法重写了,变成了比较两个字符串值是否相同</span></span><br><span class="line"><span class="comment">        public boolean equals(Object anObject) &#123;</span></span><br><span class="line"><span class="comment">        if (this == anObject) &#123;//如果是同一个对象</span></span><br><span class="line"><span class="comment">            return true;//返回true</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        if (anObject instanceof String) &#123;//判断类型</span></span><br><span class="line"><span class="comment">            String anotherString = (String)anObject;//向下转型</span></span><br><span class="line"><span class="comment">            int n = value.length;</span></span><br><span class="line"><span class="comment">            if (n == anotherString.value.length) &#123;//如果长度相同</span></span><br><span class="line"><span class="comment">                char v1[] = value;</span></span><br><span class="line"><span class="comment">                char v2[] = anotherString.value;</span></span><br><span class="line"><span class="comment">                int i = 0;</span></span><br><span class="line"><span class="comment">                while (n-- != 0) &#123;//然后一个一个的比较字符</span></span><br><span class="line"><span class="comment">                    if (v1[i] != v2[i])</span></span><br><span class="line"><span class="comment">                        return false;</span></span><br><span class="line"><span class="comment">                    i++;</span></span><br><span class="line"><span class="comment">                &#125;</span></span><br><span class="line"><span class="comment">                return true;//如果两个字符串的所有字符都相等，则返回true</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        return false;//如果比较的不是字符串，则直接返回false</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;hello&quot;</span>.equals(<span class="string">&quot;abc&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//看看Object类的 equals 是</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        //即Object 的equals 方法默认就是比较对象地址是否相同</span></span><br><span class="line"><span class="comment">        //也就是判断两个对象是不是同一个对象.</span></span><br><span class="line"><span class="comment">         public boolean equals(Object obj) &#123;</span></span><br><span class="line"><span class="comment">            return (this == obj);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        //从源码可以看到 Integer 也重写了Object的equals方法,</span></span><br><span class="line"><span class="comment">        //变成了判断两个值是否相同</span></span><br><span class="line"><span class="comment">        public boolean equals(Object obj) &#123;</span></span><br><span class="line"><span class="comment">            if (obj instanceof Integer) &#123;</span></span><br><span class="line"><span class="comment">                return value == ((Integer)obj).intValue();</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">            return false;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">integer1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">1000</span>);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">integer2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">1000</span>);</span><br><span class="line">        System.out.println(integer1 == integer2);<span class="comment">//false</span></span><br><span class="line">        System.out.println(integer1.equals(integer2));<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;hspedu&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;hspedu&quot;</span>);</span><br><span class="line">        System.out.println(str1 == str2);<span class="comment">//false</span></span><br><span class="line">        System.out.println(str1.equals(str2));<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> <span class="keyword">extends</span> <span class="title class_">B</span> &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="8-1-2-如何重写-equals-方法"><a href="#8-1-2-如何重写-equals-方法" class="headerlink" title="8.1.2 如何重写 equals 方法"></a>8.1.2 如何重写 equals 方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.object_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EqualsExercise01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">person1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;jack&quot;</span>, <span class="number">10</span>, <span class="string">&#x27;男&#x27;</span>);</span><br><span class="line">        <span class="type">Person</span> <span class="variable">person2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;jack&quot;</span>, <span class="number">20</span>, <span class="string">&#x27;男&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(person1.equals(person2));<span class="comment">//假</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//判断两个Person对象的内容是否相等，</span></span><br><span class="line"><span class="comment">//如果两个Person对象的各个属性值都一样，则返回true，反之false</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123; <span class="comment">//extends Object</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">char</span> gender;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重写Object 的 equals方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">        <span class="comment">//判断如果比较的两个对象是同一个对象，则直接返回true</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">this</span> == obj) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//类型判断</span></span><br><span class="line">        <span class="keyword">if</span>(obj <span class="keyword">instanceof</span>  Person) &#123;<span class="comment">//是Person，我们才比较</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//进行 向下转型, 因为我需要得到obj的 各个属性</span></span><br><span class="line">            <span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> (Person)obj;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.name.equals(p.name) &amp;&amp; <span class="built_in">this</span>.age == p.age &amp;&amp; <span class="built_in">this</span>.gender == p.gender;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//如果不是Person ，则直接返回false</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age, <span class="type">char</span> gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">char</span> <span class="title function_">getGender</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(<span class="type">char</span> gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="8-1-3-练习"><a href="#8-1-3-练习" class="headerlink" title="8.1.3 练习"></a>8.1.3 练习</h3><ul><li>练习一</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.object_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EqualsExercise02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Person_</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person_</span>();</span><br><span class="line">        p1.name = <span class="string">&quot;hspedu&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">Person_</span> <span class="variable">p2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person_</span>();</span><br><span class="line">        p2.name = <span class="string">&quot;hspedu&quot;</span>;</span><br><span class="line"></span><br><span class="line">        System.out.println(p1==p2); <span class="comment">//False</span></span><br><span class="line">        System.out.println(p1.name .equals( p2.name));<span class="comment">//T</span></span><br><span class="line">        System.out.println(p1.equals(p2));<span class="comment">//False</span></span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;asdf&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;asdf&quot;</span>);</span><br><span class="line">        System.out.println(s1.equals(s2));<span class="comment">//T</span></span><br><span class="line">        System.out.println(s1==s2); <span class="comment">//F</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person_</span>&#123;<span class="comment">//类</span></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>练习二</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//代码如下 EqualsExercise03.java 2min</span></span><br><span class="line"><span class="type">int</span> <span class="variable">it</span> <span class="operator">=</span> <span class="number">65</span>;</span><br><span class="line"><span class="type">float</span> <span class="variable">fl</span> <span class="operator">=</span> <span class="number">65.0f</span>;</span><br><span class="line">System.out.println(“<span class="number">65</span> 和 <span class="number">65.0f</span> 是否相等？” + (it == fl));<span class="comment">//T</span></span><br><span class="line"><span class="type">char</span> <span class="variable">ch1</span> <span class="operator">=</span> ‘A’; <span class="type">char</span> <span class="variable">ch2</span> <span class="operator">=</span> <span class="number">12</span>;</span><br><span class="line">System.out.println(“<span class="number">65</span> 和‘A’是否相等？” + (it == ch1));<span class="comment">//T</span></span><br><span class="line">System.out.println(“<span class="number">12</span> 和 ch2 是否相等？” + (<span class="number">12</span> == ch2));<span class="comment">//T</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;str1 和 str2 是否相等？&quot;</span>+ (str1 == str2)); <span class="comment">//F</span></span><br><span class="line">System.out.println(“str1 是否 equals str2？”+(str1.equals(str2)));<span class="comment">//T</span></span><br><span class="line">System.out.println(“hello” == <span class="keyword">new</span> <span class="title class_">java</span>.sql.Date());</span><br></pre></td></tr></table></figure><h2 id="8-2-hashCode方法"><a href="#8-2-hashCode方法" class="headerlink" title="8.2 hashCode方法"></a>8.2 hashCode方法</h2><ol><li><p>提高具有哈希结构的容器的效率！</p></li><li><p>两个引用，如果指向的是同一个对象，则哈希值肯定是一样的！</p></li><li><p>两个引用，如果指向的是不同对象，则哈希值是不一样的</p></li><li><p>哈希值主要根据地址号来的， 不能完全将哈希值等价于地址。</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.object_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashCode_</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">AA</span> <span class="variable">aa</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AA</span>();</span><br><span class="line">        <span class="type">AA</span> <span class="variable">aa2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AA</span>();</span><br><span class="line">        <span class="type">AA</span> <span class="variable">aa3</span> <span class="operator">=</span> aa;</span><br><span class="line">        System.out.println(<span class="string">&quot;aa.hashCode()=&quot;</span> + aa.hashCode());</span><br><span class="line">        System.out.println(<span class="string">&quot;aa2.hashCode()=&quot;</span> + aa2.hashCode());</span><br><span class="line">        System.out.println(<span class="string">&quot;aa3.hashCode()=&quot;</span> + aa3.hashCode());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AA</span> &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="8-3-toString-方法"><a href="#8-3-toString-方法" class="headerlink" title="8.3 toString 方法"></a>8.3 toString 方法</h2><ol><li><p>基本介绍</p><p>默认返回：全类名+@+哈希值的十六进制，【查看 Object 的 toString 方法】</p><p>子类往往重写 toString 方法，用于返回对象的属性信息</p></li><li><p>重写 toString 方法，打印对象或拼接对象时，都会自动调用该对象的 toString 形式. </p></li><li><p>当直接输出一个对象时，toString 方法会被默认的调用, 比如 <code>System.out.println(monster)；</code> 就会默认调用 <code>monster.toString()</code></p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.object_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ToString_</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        Object的toString() 源码</span></span><br><span class="line"><span class="comment">        (1)getClass().getName() 类的全类名(包名+类名 )</span></span><br><span class="line"><span class="comment">        (2)Integer.toHexString(hashCode()) 将对象的hashCode值转成16进制字符串</span></span><br><span class="line"><span class="comment">        public String toString() &#123;</span></span><br><span class="line"><span class="comment">            return getClass().getName() + &quot;@&quot; + Integer.toHexString(hashCode());</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Monster</span> <span class="variable">monster</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Monster</span>(<span class="string">&quot;小妖怪&quot;</span>, <span class="string">&quot;巡山的&quot;</span>, <span class="number">1000</span>);</span><br><span class="line">        System.out.println(monster.toString() + <span class="string">&quot; hashcode=&quot;</span> + monster.hashCode());</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;==当直接输出一个对象时，toString 方法会被默认的调用==&quot;</span>);</span><br><span class="line">        System.out.println(monster); <span class="comment">//等价 monster.toString()</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Monster</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String job;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> sal;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Monster</span><span class="params">(String name, String job, <span class="type">double</span> sal)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.job = job;</span><br><span class="line">        <span class="built_in">this</span>.sal = sal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重写toString方法, 输出对象的属性</span></span><br><span class="line">    <span class="comment">//使用快捷键即可 alt+insert -&gt; toString</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123; <span class="comment">//重写后，一般是把对象的属性值输出，当然程序员也可以自己定制</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Monster&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, job=&#x27;&quot;</span> + job + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, sal=&quot;</span> + sal +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">finalize</span><span class="params">()</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;fin..&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="8-4-finalize-方法"><a href="#8-4-finalize-方法" class="headerlink" title="8.4 finalize 方法"></a>8.4 finalize 方法</h2><ol><li><p>当对象被回收时，系统自动调用该对象的 <code>finalize 方法</code>。子类可以重写该方法，做一些释放资源的操作</p></li><li><p>什么时候被回收：当某个对象没有任何引用时，则 jvm 就认为这个对象是一个垃圾对象，就会使用垃圾回收机制来销毁该对象，在销毁该对象前，会先调用 <code>finalize</code> 方法。</p></li><li><p>垃圾回收机制的调用，是由系统来决定 (即有自己的 GC 算法), 也可以通过 <code>System.gc()</code> 主动触发垃圾回收机制</p></li><li><p>在实际开发中，几乎不会运用 finalize , 所以更多就是为了应付面试.</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.object_;</span><br><span class="line"></span><br><span class="line"><span class="comment">//演示 Finalize的用法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Finalize_</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Car</span> <span class="variable">bmw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="string">&quot;宝马&quot;</span>);</span><br><span class="line">        <span class="comment">//这时 car对象就是一个垃圾,垃圾回收器就会回收(销毁)对象, 在销毁对象前，会调用该对象的finalize方法</span></span><br><span class="line">        <span class="comment">//,程序员就可以在 finalize中，写自己的业务逻辑代码(比如释放资源：数据库连接,或者打开文件..)</span></span><br><span class="line">        <span class="comment">//,如果程序员不重写 finalize,那么就会调用 Object类的 finalize, 即默认处理</span></span><br><span class="line">        <span class="comment">//,如果程序员重写了finalize, 就可以实现自己的逻辑</span></span><br><span class="line">        bmw = <span class="literal">null</span>;</span><br><span class="line">        System.gc();<span class="comment">//主动调用垃圾回收器</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;程序退出了....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">//属性, 资源。。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//重写finalize</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">finalize</span><span class="params">()</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;我们销毁 汽车&quot;</span> + name );</span><br><span class="line">        System.out.println(<span class="string">&quot;释放了某些资源...&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="九、断点调试"><a href="#九、断点调试" class="headerlink" title="九、断点调试"></a>九、断点调试</h1><blockquote><p>在断点调试过程中, 是运行状态, 是以对象的 运行类型 来执行的</p></blockquote><h2 id="9-1-介绍"><a href="#9-1-介绍" class="headerlink" title="9.1 介绍"></a>9.1 介绍</h2><ol><li>断点调试是指在程序的某一行设置- 个断点，调试时，程序运行到这一行就会停住，然后你可以一步-步往下调试，调试过程中可以看各个变量当前的值，出错的话，调试到出错的代码行即显示错误，停下。进行分析从而找到这个Bug</li><li>断点调试是程序员必须掌握的技能。</li><li>断点调试也能帮助我们查看java底层源代码的执行过程，提高程序员的Java水平。</li></ol><h2 id="9-2-快捷键"><a href="#9-2-快捷键" class="headerlink" title="9.2 快捷键"></a>9.2 快捷键</h2><ul><li>F7( 跳入)  跳入方法内</li><li>F8 (跳过)  逐行执行代码. </li><li>shift+F8 (跳出)  跳出方法</li><li>F9 (resume,执行到下一个断点)</li></ul><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230203194507651.png" alt="断点调试快捷键"></p><h2 id="9-3-应用案例"><a href="#9-3-应用案例" class="headerlink" title="9.3 应用案例"></a>9.3 应用案例</h2><ul><li>查看变量的变化情况</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.debug_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Debug01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//演示逐行执行代码</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            sum += i;</span><br><span class="line">            System.out.println(<span class="string">&quot;i=&quot;</span> + i);</span><br><span class="line">            System.out.println(<span class="string">&quot;sum=&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;退出for....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>检查数组越界的异常</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.debug_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Debug02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">1</span>, <span class="number">10</span>, -<span class="number">1</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt;= arr.length; i++) &#123;</span><br><span class="line">            System.out.println(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;退出for&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>追溯源码</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.debug_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Debug03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">1</span>, -<span class="number">1</span>, <span class="number">10</span>, -<span class="number">20</span> , <span class="number">100</span>&#125;;</span><br><span class="line">        <span class="comment">//我们看看Arrays.sort方法底层实现.-&gt;Debug</span></span><br><span class="line">        Arrays.sort(arr);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.print(arr[i] + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>直接执行到下一个断点</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.debug_;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">//演示执行到下一个断点，同时支持动态的下断点.</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Debug04</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">1</span>, -<span class="number">1</span>, <span class="number">10</span>, -<span class="number">20</span> , <span class="number">100</span>&#125;;</span><br><span class="line">        <span class="comment">//我们看看Arrays.sort方法底层实现.-&gt;Debug</span></span><br><span class="line">        Arrays.sort(arr);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.print(arr[i] + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;hello100&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;hello200&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;hello300&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;hello400&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;hello500&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;hello600&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;hello700&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>对象创建过程</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.debug_;</span><br><span class="line"></span><br><span class="line"><span class="comment">//debug对象创建的过程，加深对调试的理解</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DebugExercise</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//创建对象的流程</span></span><br><span class="line">        <span class="comment">//(1) 加载 Person类信息</span></span><br><span class="line">        <span class="comment">//(2) 初始化 2.1默认初始化, 2.2 显式初始化 2.3 构造器初始化</span></span><br><span class="line">        <span class="comment">//(3) 返回对象的地址</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">jack</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;jack&quot;</span>, <span class="number">20</span>);</span><br><span class="line">        System.out.println(jack);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Person&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>还可以根据上一章的代码熟悉 动态绑定机制</li></ul><hr><h1 id="十、练习"><a href="#十、练习" class="headerlink" title="十、练习"></a>十、练习</h1><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230214181143298.png" alt="练习一"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework01</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//初始化Person 对象数组，有3个person对象</span></span><br><span class="line">        Person[] persons = <span class="keyword">new</span> <span class="title class_">Person</span>[<span class="number">3</span>];</span><br><span class="line">        persons[<span class="number">0</span>] = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;mary&quot;</span>,<span class="number">30</span>, <span class="string">&quot;PHP工程师&quot;</span>);</span><br><span class="line">        persons[<span class="number">1</span>] = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;tom&quot;</span>,<span class="number">50</span>, <span class="string">&quot;大数据工程师&quot;</span>);</span><br><span class="line">        persons[<span class="number">2</span>] = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;smith&quot;</span>,<span class="number">10</span>, <span class="string">&quot;JavaEE工程师&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//输出当前对象数组</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; persons.length; i++) &#123;</span><br><span class="line">            System.out.println(persons[i]);<span class="comment">//默认对象的.toString()</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用冒泡排序</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">tmp</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">//临时变量，用于交换</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; persons.length -<span class="number">1</span> ;i++) &#123;<span class="comment">//外层循环</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; persons.length -<span class="number">1</span> - i; j++) &#123;<span class="comment">//内层循环</span></span><br><span class="line">                <span class="comment">//并按照 age 从 大到 小进行排序, 如果前面的人的age &lt; 后面人的年龄，就交换</span></span><br><span class="line">                <span class="comment">//要求按照名字的长度从小到大 if(persons[i].getName().length() &gt; persons[i+1].getName().length())</span></span><br><span class="line">                <span class="keyword">if</span>(persons[j].getAge() &gt; persons[j+<span class="number">1</span>].getAge()) &#123;</span><br><span class="line">                    tmp = persons[j];</span><br><span class="line">                    persons[j] = persons[j+<span class="number">1</span>];</span><br><span class="line">                    persons[j+<span class="number">1</span>]= tmp;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;排序后的效果&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; persons.length; i++) &#123;</span><br><span class="line">            System.out.println(persons[i]);<span class="comment">//默认对象的.toString()</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    定义一个Person类 &#123;name, age, job&#125;, 初始化Person 对象数组，有3个person对象，</span></span><br><span class="line"><span class="comment">    并按照 age 从 大到 小进行排序, 提示，使用冒泡排序</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String job;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age, String job)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.job = job;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getJob</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> job;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setJob</span><span class="params">(String job)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.job = job;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Person&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, job=&#x27;&quot;</span> + job + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230214181215265.png" alt="练习二"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">(1) 要求有属性“姓名name”，“年龄age”，“职称post”，“基本工资salary”</span></span><br><span class="line"><span class="comment">(2) 编写业务方法， introduce（），实现输出一个教师的信息。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Teacher</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String post;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> salary;</span><br><span class="line">    <span class="comment">//这里我们在增加一个工资级别</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> grade;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Teacher</span><span class="params">(String name, <span class="type">int</span> age, String post, <span class="type">double</span> salary, <span class="type">double</span> grade)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.post = post;</span><br><span class="line">        <span class="built_in">this</span>.salary = salary;</span><br><span class="line">        <span class="built_in">this</span>.grade = grade;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPost</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> post;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPost</span><span class="params">(String post)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.post = post;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getSalary</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSalary</span><span class="params">(<span class="type">double</span> salary)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.salary = salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getGrade</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> grade;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGrade</span><span class="params">(<span class="type">double</span> grade)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.grade = grade;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">introduce</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;name: &quot;</span> + name + <span class="string">&quot; age: &quot;</span> + age</span><br><span class="line">                + <span class="string">&quot; post: &quot;</span> + post + <span class="string">&quot; salary:&quot;</span> + salary + <span class="string">&quot; grade:&quot;</span> + grade);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework;</span><br><span class="line"></span><br><span class="line"><span class="comment">//子类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Professor</span> <span class="keyword">extends</span> <span class="title class_">Teacher</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//特有属性...</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Professor</span><span class="params">(String name, <span class="type">int</span> age, String post, <span class="type">double</span> salary, <span class="type">double</span> grade)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name, age, post, salary, grade);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">introduce</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot; 这是教授的信息 &quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.introduce();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework03</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Professor</span> <span class="variable">professor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Professor</span>(<span class="string">&quot;贾宝玉&quot;</span>, <span class="number">30</span>, <span class="string">&quot;高级职称&quot;</span>, <span class="number">30000</span>, <span class="number">1.3</span>);</span><br><span class="line">        professor.introduce();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230214181503515.png" alt="练习三"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.SQLOutput;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//属性</span></span><br><span class="line">    <span class="comment">//员工属性：姓名，单日工资，工作天数</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> daySal;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> workDays;</span><br><span class="line">    <span class="comment">//分析出还有一个属性等级</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> grade;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//方法[构造器，getter 和 setter]</span></span><br><span class="line">    <span class="comment">//打印工资方法</span></span><br><span class="line">    <span class="comment">//方法 void printSal() &#123;&#125;</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printSal</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(name + <span class="string">&quot; 工资=&quot;</span> + daySal * workDays * grade);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">(String name, <span class="type">double</span> daySal, <span class="type">int</span> workDays, <span class="type">double</span> grade)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.daySal = daySal;</span><br><span class="line">        <span class="built_in">this</span>.workDays = workDays;</span><br><span class="line">        <span class="built_in">this</span>.grade = grade;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getDaySal</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> daySal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDaySal</span><span class="params">(<span class="type">double</span> daySal)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.daySal = daySal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getWorkDays</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> workDays;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWorkDays</span><span class="params">(<span class="type">int</span> workDays)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.workDays = workDays;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getGrade</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> grade;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGrade</span><span class="params">(<span class="type">double</span> grade)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.grade = grade;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Worker</span> <span class="keyword">extends</span> <span class="title class_">Employee</span>&#123;</span><br><span class="line">    <span class="comment">//分析普通员工没有特有的属性</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Worker</span><span class="params">(String name, <span class="type">double</span> daySal, <span class="type">int</span> workDays, <span class="type">double</span> grade)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name, daySal, workDays, grade);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重写printSal</span></span><br><span class="line">    <span class="comment">//因为普通员工和Employee输出工资情况一下，所以直接调用父类的printSal()</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printSal</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;普通员工 &quot;</span>);<span class="comment">//自己的输出信息</span></span><br><span class="line">        <span class="built_in">super</span>.printSal();<span class="comment">//调用父类的方法，复用代码</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Manager</span> <span class="keyword">extends</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">    <span class="comment">//特有属性</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> bonus;</span><br><span class="line">    <span class="comment">//创建Manager对象时，奖金是多少并不是确定的，因为老师在构造器中，不给bonus</span></span><br><span class="line">    <span class="comment">//,可以通过setBonus</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Manager</span><span class="params">(String name, <span class="type">double</span> daySal, <span class="type">int</span> workDays, <span class="type">double</span> grade)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name, daySal, workDays, grade);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//方法:重写父类的 printSal</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printSal</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//因为经理的工资计算方式和Employee不一样，所以我们重写</span></span><br><span class="line">        System.out.println(<span class="string">&quot;经理 &quot;</span> + getName() + <span class="string">&quot; 工资是=&quot;</span></span><br><span class="line">                + (bonus + getDaySal() * getWorkDays() * getGrade()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getBonus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bonus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBonus</span><span class="params">(<span class="type">double</span> bonus)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bonus = bonus;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework04</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Manager</span> <span class="variable">manage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Manager</span>(<span class="string">&quot;刘备&quot;</span>, <span class="number">100</span>, <span class="number">20</span>, <span class="number">1.2</span>);</span><br><span class="line">        <span class="comment">//设置奖金</span></span><br><span class="line">        manage.setBonus(<span class="number">3000</span>);</span><br><span class="line">        <span class="comment">//打印经理的工资情况</span></span><br><span class="line">        manage.printSal();</span><br><span class="line"></span><br><span class="line">        <span class="type">Worker</span> <span class="variable">worker</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Worker</span>(<span class="string">&quot;关羽&quot;</span>,<span class="number">50</span>, <span class="number">10</span>, <span class="number">1.0</span>);</span><br><span class="line">        worker.printSal();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230214181608906.png" alt="练习四"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework.homework5;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123; <span class="comment">//父类</span></span><br><span class="line">    <span class="comment">//属性</span></span><br><span class="line">    <span class="comment">//分析有一个带薪的月份 13 , 15, 12</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> sal;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">salMonth</span> <span class="operator">=</span> <span class="number">12</span>;</span><br><span class="line">    <span class="comment">//方法</span></span><br><span class="line">    <span class="comment">//打印全年工资</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printSal</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(name + <span class="string">&quot; 年工资是: &quot;</span> + (sal * salMonth));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">(String name, <span class="type">double</span> sal)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.sal = sal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getSal</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSal</span><span class="params">(<span class="type">double</span> sal)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sal = sal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSalMonth</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> salMonth;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSalMonth</span><span class="params">(<span class="type">int</span> salMonth)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.salMonth = salMonth;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework.homework5;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Peasant</span> <span class="keyword">extends</span> <span class="title class_">Employee</span> &#123;<span class="comment">//子类</span></span><br><span class="line">    <span class="comment">//属性</span></span><br><span class="line">    <span class="comment">//农民,服务生只有基本工资 sal</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Peasant</span><span class="params">(String name, <span class="type">double</span> sal)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name, sal);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//年工资</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printSal</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;农民 &quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.printSal();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework.homework5;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Scientist</span> <span class="keyword">extends</span> <span class="title class_">Employee</span>&#123; <span class="comment">//子类</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//特有属性</span></span><br><span class="line">    <span class="comment">//年终奖 bonus</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> bonus;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Scientist</span><span class="params">(String name, <span class="type">double</span> sal)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name, sal);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//重写年工资打印</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printSal</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;科学家 &quot;</span>);</span><br><span class="line">        System.out.println(getName() + <span class="string">&quot; 年工资是: &quot;</span> + (getSal() * getSalMonth() + bonus));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getBonus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bonus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBonus</span><span class="params">(<span class="type">double</span> bonus)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bonus = bonus;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework.homework5;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Teacher</span> <span class="keyword">extends</span> <span class="title class_">Employee</span>&#123;<span class="comment">//子类</span></span><br><span class="line">    <span class="comment">//特有属性</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> classDays; <span class="comment">//一年上课次数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> classSal; <span class="comment">//课时费</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Teacher</span><span class="params">(String name, <span class="type">double</span> sal)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name, sal);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//方法-重写printSal</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printSal</span><span class="params">()</span> &#123; <span class="comment">//老师不能使用super.printSal()</span></span><br><span class="line">        System.out.print(<span class="string">&quot;老师 &quot;</span>);</span><br><span class="line">        System.out.println(getName() + <span class="string">&quot; 年工资是: &quot;</span></span><br><span class="line">                + (getSal() * getSalMonth() + classDays * classSal ));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getClassDays</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> classDays;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setClassDays</span><span class="params">(<span class="type">int</span> classDays)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.classDays = classDays;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getClassSal</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> classSal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setClassSal</span><span class="params">(<span class="type">double</span> classSal)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.classSal = classSal;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework.homework5;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Worker</span> <span class="keyword">extends</span> <span class="title class_">Employee</span>&#123; <span class="comment">//子类</span></span><br><span class="line">    <span class="comment">//属性</span></span><br><span class="line">    <span class="comment">//工人,农民,服务生只有基本工资 sal</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Worker</span><span class="params">(String name, <span class="type">double</span> sal)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name, sal);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printSal</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;工人 &quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.printSal();<span class="comment">//使用父类的printSal()</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework.homework5;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework05</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Worker</span> <span class="variable">jack</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Worker</span>(<span class="string">&quot;jack&quot;</span>, <span class="number">10000</span>);</span><br><span class="line">        jack.setSalMonth(<span class="number">15</span>);<span class="comment">//灵活额修改带薪月份</span></span><br><span class="line">        jack.printSal();</span><br><span class="line"></span><br><span class="line">        <span class="type">Peasant</span> <span class="variable">smith</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Peasant</span>(<span class="string">&quot;smith&quot;</span>, <span class="number">20000</span>);</span><br><span class="line">        smith.printSal();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//老师测试</span></span><br><span class="line">        <span class="type">Teacher</span> <span class="variable">teacher</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">&quot;顺平&quot;</span>, <span class="number">2000</span>);</span><br><span class="line">        <span class="comment">//老师有课时费</span></span><br><span class="line">        teacher.setClassDays(<span class="number">360</span>);</span><br><span class="line">        teacher.setClassSal(<span class="number">1000</span>);</span><br><span class="line">        teacher.printSal();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//科学家</span></span><br><span class="line">        <span class="type">Scientist</span> <span class="variable">scientist</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scientist</span>(<span class="string">&quot;钟南山&quot;</span>, <span class="number">20000</span>);</span><br><span class="line">        scientist.setBonus(<span class="number">2000000</span>);</span><br><span class="line">        scientist.printSal();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230214181814287.png" alt="练习五"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework07</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span>&#123; <span class="comment">//父类</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;Rose&quot;</span>;</span><br><span class="line">    Test()&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Test&quot;</span>);<span class="comment">//(1)</span></span><br><span class="line">    &#125;</span><br><span class="line">    Test(String name)&#123;<span class="comment">//name john</span></span><br><span class="line">        <span class="built_in">this</span>.name = name;<span class="comment">//这里把父类的 name 修改 john</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo</span> <span class="keyword">extends</span> <span class="title class_">Test</span>&#123;<span class="comment">//子类</span></span><br><span class="line">    String name=<span class="string">&quot;Jack&quot;</span>;</span><br><span class="line">    Demo()&#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        System.out.println(<span class="string">&quot;Demo&quot;</span>);<span class="comment">//(2)</span></span><br><span class="line">    &#125;</span><br><span class="line">    Demo(String s)&#123;</span><br><span class="line">        <span class="built_in">super</span>(s);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="built_in">super</span>.name);<span class="comment">//(3) Rose (5) john</span></span><br><span class="line">        System.out.println(<span class="built_in">this</span>.name);<span class="comment">//(4) Jack (6) Jack</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="comment">//老韩分析</span></span><br><span class="line">        <span class="comment">//1. new Demo()</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Demo</span>().test(); <span class="comment">//匿名对象</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Demo</span>(<span class="string">&quot;john&quot;</span>).test();<span class="comment">//匿名</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230214181859524.png" alt="练习六"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BankAccount</span> &#123;<span class="comment">//父类</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> balance ;<span class="comment">//余额</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BankAccount</span><span class="params">(<span class="type">double</span> initialBalance)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.balance = initialBalance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//存款</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deposit</span><span class="params">(<span class="type">double</span> amount)</span>  &#123;</span><br><span class="line">        balance += amount;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//取款</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">withdraw</span><span class="params">(<span class="type">double</span> amount)</span>  &#123;</span><br><span class="line">        balance -= amount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getBalance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBalance</span><span class="params">(<span class="type">double</span> balance)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.balance = balance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">在上面类的基础上扩展 新类CheckingAccount对每次存款和取款都收取1美元的手续费</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CheckingAccount</span> <span class="keyword">extends</span> <span class="title class_">BankAccount</span>&#123;<span class="comment">//新的账号</span></span><br><span class="line">    <span class="comment">//属性</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CheckingAccount</span><span class="params">(<span class="type">double</span> initialBalance)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(initialBalance);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deposit</span><span class="params">(<span class="type">double</span> amount)</span> &#123;<span class="comment">//存款</span></span><br><span class="line">        <span class="built_in">super</span>.deposit(amount - <span class="number">1</span>);<span class="comment">//巧妙的使用了父类的 deposit</span></span><br><span class="line">        <span class="comment">//1 块钱转入银行的账号</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">withdraw</span><span class="params">(<span class="type">double</span> amount)</span> &#123;<span class="comment">//取款</span></span><br><span class="line">        <span class="built_in">super</span>.withdraw(amount + <span class="number">1</span>);</span><br><span class="line">        <span class="comment">//1 块钱转入银行的账号</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">扩展前一个练习的BankAccount类，</span></span><br><span class="line"><span class="comment">新类SavingsAccount每个月都有利息产生(earnMonthlyInterest方法被调用)，</span></span><br><span class="line"><span class="comment">并且有每月三次免手续费的存款或取款。在earnMonthlyInterest方法中重置交易计数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SavingsAccount</span> <span class="keyword">extends</span> <span class="title class_">BankAccount</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//老韩分析</span></span><br><span class="line">    <span class="comment">//新增加属性</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> <span class="variable">rate</span> <span class="operator">=</span> <span class="number">0.01</span>;<span class="comment">//利率</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">earnMonthlyInterest</span><span class="params">()</span> &#123;<span class="comment">//每个月初，我们统计上个月的利息，同时将count=3</span></span><br><span class="line">        count = <span class="number">3</span>;<span class="comment">//</span></span><br><span class="line">        <span class="built_in">super</span>.deposit(getBalance() * rate);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deposit</span><span class="params">(<span class="type">double</span> amount)</span> &#123;</span><br><span class="line">        <span class="comment">//判断是否还可以免手续费</span></span><br><span class="line">        <span class="keyword">if</span>(count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">super</span>.deposit(amount);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>.deposit(amount - <span class="number">1</span>);<span class="comment">//1 块转入银行</span></span><br><span class="line">        &#125;</span><br><span class="line">        count--;<span class="comment">//减去一次</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">withdraw</span><span class="params">(<span class="type">double</span> amount)</span> &#123;<span class="comment">//取款</span></span><br><span class="line">        <span class="comment">//判断是否还可以免手续费</span></span><br><span class="line">        <span class="keyword">if</span>(count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">super</span>.withdraw(amount);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>.withdraw(amount + <span class="number">1</span>);<span class="comment">//1 块转入银行</span></span><br><span class="line">        &#125;</span><br><span class="line">        count--;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SavingsAccount</span><span class="params">(<span class="type">double</span> initialBalance)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(initialBalance);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCount</span><span class="params">(<span class="type">int</span> count)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.count = count;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getRate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> rate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRate</span><span class="params">(<span class="type">double</span> rate)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.rate = rate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework08</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//        CheckingAccount checkingAccount = new CheckingAccount(1000);</span></span><br><span class="line"><span class="comment">//        checkingAccount.deposit(10);// 1010 - 1 = 1009</span></span><br><span class="line"><span class="comment">//        checkingAccount.withdraw(9);//1009 - 9 = 1000 -1= 999</span></span><br><span class="line"><span class="comment">//        System.out.println(checkingAccount.getBalance());</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//测试SavingsAccount</span></span><br><span class="line">        <span class="type">SavingsAccount</span> <span class="variable">savingsAccount</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SavingsAccount</span>(<span class="number">1000</span>);</span><br><span class="line">        savingsAccount.deposit(<span class="number">100</span>);</span><br><span class="line">        savingsAccount.deposit(<span class="number">100</span>);</span><br><span class="line">        savingsAccount.deposit(<span class="number">100</span>);</span><br><span class="line">        System.out.println(savingsAccount.getBalance());<span class="comment">//1300</span></span><br><span class="line">        savingsAccount.deposit(<span class="number">100</span>);</span><br><span class="line">        System.out.println(savingsAccount.getBalance());<span class="comment">//1400-1=1399</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//月初，定时器自动调用一下 earnMonthlyInterest</span></span><br><span class="line">        savingsAccount.earnMonthlyInterest();<span class="comment">//统计利息</span></span><br><span class="line">        System.out.println(savingsAccount.getBalance());<span class="comment">//1399 + 13.99 =1412.99</span></span><br><span class="line">        savingsAccount.withdraw(<span class="number">100</span>);<span class="comment">//免手续</span></span><br><span class="line">        System.out.println(savingsAccount.getBalance());<span class="comment">//1412.99 -100 =1312.99</span></span><br><span class="line">        savingsAccount.withdraw(<span class="number">100</span>);<span class="comment">//免手续</span></span><br><span class="line">        savingsAccount.withdraw(<span class="number">100</span>);<span class="comment">//免手续</span></span><br><span class="line">        System.out.println(savingsAccount.getBalance());<span class="comment">//1412.99 -200 =1112.99</span></span><br><span class="line">        savingsAccount.deposit(<span class="number">100</span>);<span class="comment">//扣手续费</span></span><br><span class="line">        System.out.println(savingsAccount.getBalance());<span class="comment">//1112.99 + 100 = 1212.99 - 1 = 1211.99</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230214182014783.png" alt="练习七"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> y;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Point</span><span class="params">(<span class="type">double</span> x, <span class="type">double</span> y)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.x = x;</span><br><span class="line">        <span class="built_in">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LabeledPoint</span> <span class="keyword">extends</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    <span class="comment">//特有属性</span></span><br><span class="line">    <span class="keyword">private</span> String label;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LabeledPoint</span><span class="params">(String label, <span class="type">double</span> x, <span class="type">double</span> y)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(x, y);</span><br><span class="line">        <span class="built_in">this</span>.label = label;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//方法</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework09</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">LabeledPoint</span>(<span class="string">&quot;Black&quot;</span>,<span class="number">1929</span>,<span class="number">230.07</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230214182140140.png" alt="练习八"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Doctor</span> &#123;</span><br><span class="line">    <span class="comment">//属性</span></span><br><span class="line">    <span class="comment">//&#123;name, age, job, gender, sal&#125;</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String job;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">char</span> gender;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> sal;</span><br><span class="line">    <span class="comment">//5个参数的构造器</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Doctor</span><span class="params">(String name, <span class="type">int</span> age, String job, <span class="type">char</span> gender, <span class="type">double</span> sal)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.job = job;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">        <span class="built_in">this</span>.sal = sal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//方法</span></span><br><span class="line">    <span class="comment">//相应的getter()和setter()方法</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getJob</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> job;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setJob</span><span class="params">(String job)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.job = job;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">char</span> <span class="title function_">getGender</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(<span class="type">char</span> gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getSal</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSal</span><span class="params">(<span class="type">double</span> sal)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sal = sal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重写父类(Object)的equals()方法：public boolean equals(Object obj)，并判断测试类中创建的两个对象是否相等。相等就是判断属性是否相同</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">        <span class="comment">//判断两个比较对象是否相同</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span> == obj) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//判断obj 是否是 Doctor类型或其子类</span></span><br><span class="line">        <span class="comment">//过关斩将 校验方式</span></span><br><span class="line">        <span class="keyword">if</span> (!(obj <span class="keyword">instanceof</span> Doctor)) &#123; <span class="comment">//不是的话</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//向下转型, 因为obj的运行类型是Doctor或者其子类型</span></span><br><span class="line">        <span class="type">Doctor</span> <span class="variable">doctor</span> <span class="operator">=</span> (Doctor)obj;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name.equals(doctor.name) &amp;&amp; <span class="built_in">this</span>.age == doctor.age &amp;&amp;</span><br><span class="line">                <span class="built_in">this</span>.gender == doctor.gender &amp;&amp; <span class="built_in">this</span>.job.equals(doctor.job) &amp;&amp; <span class="built_in">this</span>.sal == doctor.sal;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework10</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//测试</span></span><br><span class="line">        <span class="type">Doctor</span> <span class="variable">doctor1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Doctor</span>(<span class="string">&quot;jack&quot;</span>, <span class="number">20</span>, <span class="string">&quot;牙科医生&quot;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="number">20000</span>);</span><br><span class="line">        <span class="type">Doctor</span> <span class="variable">doctor2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Doctor</span>(<span class="string">&quot;jack&quot;</span>, <span class="number">21</span>, <span class="string">&quot;牙科医生&quot;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="number">20000</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(doctor1.equals(doctor2));<span class="comment">//T</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230214182259698.png" alt="练习九"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230214182501191.png" alt="练习十"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework.homework13;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">抽取一个父类Person类，将共同属性和方法放到Person类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;<span class="comment">//父类</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">char</span> gender;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="comment">//方法</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">char</span> gender, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">char</span> <span class="title function_">getGender</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(<span class="type">char</span> gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//编写一个play 方法, 把共有的输出内容写到父类</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">play</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name + <span class="string">&quot;爱玩&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//返回一个基本信息</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    姓名：张飞</span></span><br><span class="line"><span class="comment">    年龄：30</span></span><br><span class="line"><span class="comment">    性别：男</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">basicInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;姓名: &quot;</span> + name + <span class="string">&quot;\n年龄: &quot;</span> + age + <span class="string">&quot;\n性别: &quot;</span> + gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Person&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, gender=&quot;</span> + gender +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework.homework13;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Student类有名称（name），性别(sex),年龄（age），学号（stu_id），</span></span><br><span class="line"><span class="comment">做合理封装，通过构造器在创建对象时将4个属性赋值。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">学生需要有学习的方法（study），在方法里写生“我承诺，我会好好学习。”</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_">Person</span>&#123; <span class="comment">//</span></span><br><span class="line">    <span class="comment">//属性</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String stu_id;</span><br><span class="line">    <span class="comment">//方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">char</span> gender, <span class="type">int</span> age, String stu_id)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name, gender, age);</span><br><span class="line">        <span class="built_in">this</span>.stu_id = stu_id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getStu_id</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> stu_id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStu_id</span><span class="params">(String stu_id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.stu_id = stu_id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//我承诺，我会好好学习</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">study</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(getName() + <span class="string">&quot;承诺，我会好好学习 老韩讲的 java&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 学生爱玩足球</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">play</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.play() + <span class="string">&quot;足球&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//编写一个输出信息的方法，这样体现封装</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;学生的信息:&quot;</span>);</span><br><span class="line">        System.out.println(<span class="built_in">super</span>.basicInfo());</span><br><span class="line">        System.out.println(<span class="string">&quot;学号: &quot;</span> + stu_id);</span><br><span class="line">        study();<span class="comment">//组合， 变化万千</span></span><br><span class="line">        System.out.println(play());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;stu_id=&#x27;&quot;</span> + stu_id + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span> + <span class="built_in">super</span>.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework.homework13;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">写一个Teacher类，Teacher类有名称（name），性别（sex），年龄（age），工龄（work_age),</span></span><br><span class="line"><span class="comment">做合理封装，通过构造器在创建对象时将4个属性赋值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Teacher</span> <span class="keyword">extends</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="comment">//属性</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> work_age;</span><br><span class="line">    <span class="comment">//方法</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Teacher</span><span class="params">(String name, <span class="type">char</span> gender, <span class="type">int</span> age, <span class="type">int</span> work_age)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name, gender, age);</span><br><span class="line">        <span class="built_in">this</span>.work_age = work_age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getWork_age</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> work_age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWork_age</span><span class="params">(<span class="type">int</span> work_age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.work_age = work_age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//教师需要有教学的方法（teach），在方法里写上“我承诺，我会认真教学。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">teach</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(getName() + <span class="string">&quot;承诺，我会认真教学 java...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 老师爱玩象棋</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">play</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.play() + <span class="string">&quot;象棋&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//输出信息方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;老师的信息：&quot;</span>);</span><br><span class="line">        System.out.println(<span class="built_in">super</span>.basicInfo());</span><br><span class="line">        System.out.println(<span class="string">&quot;工龄: &quot;</span> + work_age);</span><br><span class="line">        teach();</span><br><span class="line">        System.out.println(play());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Teacher&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;work_age=&quot;</span> + work_age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span> + <span class="built_in">super</span>.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework.homework13;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework13</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//测试老师</span></span><br><span class="line">        <span class="type">Teacher</span> <span class="variable">teacher</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">&quot;张飞&quot;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="number">30</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">        teacher.printInfo();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//测试</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;小明&quot;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="number">15</span>, <span class="string">&quot;00023102&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;-----------------------------------&quot;</span>);</span><br><span class="line">        student.printInfo();<span class="comment">//封装</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//定义多态数组，里面保存2个学生和2个教师，要求按年龄从高到低排序</span></span><br><span class="line">        Person[] persons = <span class="keyword">new</span> <span class="title class_">Person</span>[<span class="number">4</span>];</span><br><span class="line">        persons[<span class="number">0</span>] = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;jack&quot;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="number">10</span>, <span class="string">&quot;0001&quot;</span>);</span><br><span class="line">        persons[<span class="number">1</span>] = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;mary&quot;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="number">20</span>, <span class="string">&quot;0002&quot;</span>);</span><br><span class="line">        persons[<span class="number">2</span>] = <span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">&quot;smith&quot;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="number">36</span>, <span class="number">5</span>);</span><br><span class="line">        persons[<span class="number">3</span>] = <span class="keyword">new</span> <span class="title class_">Teacher</span>(<span class="string">&quot;scott&quot;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="number">26</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建对象</span></span><br><span class="line">        <span class="type">Homework13</span> <span class="variable">homework13</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Homework13</span>();</span><br><span class="line">        homework13.bubbleSort(persons);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//输出排序后的数组</span></span><br><span class="line">        System.out.println(<span class="string">&quot;---排序后的数组-----&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; persons.length; i++) &#123;</span><br><span class="line">            System.out.println(persons[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//遍历数组，调用test方法</span></span><br><span class="line">        System.out.println(<span class="string">&quot;=======================&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; persons.length; i++) &#123;<span class="comment">//遍历多态数组</span></span><br><span class="line">            homework13.test(persons[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义方法，形参为Person类型，功能：调用学生的study或教师的teach方法</span></span><br><span class="line">    <span class="comment">//分析这里会使用到向下转型和类型判断</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(Person p)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(p <span class="keyword">instanceof</span> Student) &#123;<span class="comment">//p 的运行类型如果是Student</span></span><br><span class="line">            ((Student) p).study();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(p <span class="keyword">instanceof</span>  Teacher) &#123;</span><br><span class="line">            ((Teacher) p).teach();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;do nothing...&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//方法,完成年龄从高到底排序</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">bubbleSort</span><span class="params">(Person[] persons)</span> &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; persons.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; persons.length - <span class="number">1</span> - i; j++) &#123;</span><br><span class="line">                <span class="comment">//判断条件, 注意这里的条件可以根据需要，变化</span></span><br><span class="line">                <span class="keyword">if</span>(persons[j].getAge() &lt; persons[j+<span class="number">1</span>].getAge()) &#123;</span><br><span class="line">                    temp = persons[j];</span><br><span class="line">                    persons[j] = persons[j + <span class="number">1</span>];</span><br><span class="line">                    persons[j + <span class="number">1</span>] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230214182641025.png" alt="练习十一"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hspedu.homework;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework15</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">AAA</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BBB</span>();<span class="comment">//向上转型</span></span><br><span class="line">        <span class="type">AAA</span> <span class="variable">b1</span> <span class="operator">=</span> obj;</span><br><span class="line">        System.out.println(<span class="string">&quot;obj的运行类型=&quot;</span> + obj.getClass());<span class="comment">//BBB</span></span><br><span class="line">        obj = <span class="keyword">new</span> <span class="title class_">CCC</span>();<span class="comment">//向上转型</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;obj的运行类型=&quot;</span> + obj.getClass());<span class="comment">//CCC</span></span><br><span class="line">        obj = b1;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;obj的运行类型=&quot;</span> + obj.getClass());<span class="comment">//BBB</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AAA</span> &#123;<span class="comment">//超类</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BBB</span> <span class="keyword">extends</span> <span class="title class_">AAA</span> &#123;<span class="comment">//父类</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CCC</span> <span class="keyword">extends</span> <span class="title class_">BBB</span> &#123;<span class="comment">//子类</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java学习（二）-- 面向对象基础</title>
      <link href="/2023/01/30/Java%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89--%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%9F%BA%E7%A1%80/"/>
      <url>/2023/01/30/Java%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89--%20%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="Java学习（二）–-面向对象基础"><a href="#Java学习（二）–-面向对象基础" class="headerlink" title="Java学习（二）– 面向对象基础"></a>Java学习（二）– 面向对象基础</h1><blockquote><p><a href="https://www.bilibili.com/video/BV1fh411y7R8/?spm_id_from=333.999.0.0&amp;vd_source=594d36a0860080a36fe599e0b84e5fb2">https://www.bilibili.com/video/BV1fh411y7R8/?spm_id_from=333.999.0.0&amp;vd_source=594d36a0860080a36fe599e0b84e5fb2</a></p></blockquote><h1 id="一、类与对象"><a href="#一、类与对象" class="headerlink" title="一、类与对象"></a>一、类与对象</h1><h2 id="1-1-问题引出"><a href="#1-1-问题引出" class="headerlink" title="1.1 问题引出"></a>1.1 问题引出</h2><ol><li><p>类是抽象的，概念的，代表一类事物,比如人类,猫类.., 即它是数据类型. </p></li><li><p>对象是具体的，实际的，代表一个具体事物, 即 是实例. </p></li><li><p>类是对象的模板，对象是类的一个个体，对应一个实例</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Object01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">张老太养了两只猫猫:一只名字叫小白,今年3岁,白色。 </span></span><br><span class="line"><span class="comment">还有一只叫小花,今年100岁,花色。请编写一个程序，当用户输入小猫的名字时，</span></span><br><span class="line"><span class="comment">就显示该猫的名字，年龄，颜色。如果用户输入的小猫名错误，</span></span><br><span class="line"><span class="comment">则显示 张老太没有这只猫猫。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//单独变量来解决 =&gt; 不利于数据的管理(你把一只猫的信息拆解)</span></span><br><span class="line"><span class="comment">//第1只猫信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// String cat1Name = &quot;小白&quot;;</span></span><br><span class="line"><span class="comment">// int cat1Age = 3;</span></span><br><span class="line"><span class="comment">// String cat1Color = &quot;白色&quot;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// //第2只猫信息</span></span><br><span class="line"><span class="comment">// String cat2Name = &quot;小花&quot;;</span></span><br><span class="line"><span class="comment">// int cat2Age = 100;</span></span><br><span class="line"><span class="comment">// String cat2Color = &quot;花色&quot;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组 ===&gt;(1)数据类型体现不出来(2) 只能通过[下标]获取信息，造成变量名字和内容</span></span><br><span class="line"><span class="comment">//         的对应关系不明确(3) 不能体现猫的行为</span></span><br><span class="line"><span class="comment">//第1只猫信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// String[] cat1 = &#123;&quot;小白&quot;, &quot;3&quot;, &quot;白色&quot;&#125;; </span></span><br><span class="line"><span class="comment">// String[] cat2 = &#123;&quot;小花&quot;, &quot;100&quot;, &quot;花色&quot;&#125;;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用OOP面向对象解决</span></span><br><span class="line"><span class="comment">//实例化一只猫[创建一只猫对象]</span></span><br><span class="line"><span class="comment">//老韩解读</span></span><br><span class="line"><span class="comment">//1. new Cat() 创建一只猫(猫对象)</span></span><br><span class="line"><span class="comment">//2. Cat cat1 = new Cat(); 把创建的猫赋给 cat1 </span></span><br><span class="line"><span class="comment">//3. cat1 就是一个对象</span></span><br><span class="line"><span class="type">Cat</span> <span class="variable">cat1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">cat1.name = <span class="string">&quot;小白&quot;</span>;</span><br><span class="line">cat1.age = <span class="number">3</span>;</span><br><span class="line">cat1.color = <span class="string">&quot;白色&quot;</span>;</span><br><span class="line">cat1.weight = <span class="number">10</span>;</span><br><span class="line"><span class="comment">//创建了第二只猫，并赋给 cat2</span></span><br><span class="line"><span class="comment">//cat2 也是一个对象(猫对象)</span></span><br><span class="line"><span class="type">Cat</span> <span class="variable">cat2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">cat2.name = <span class="string">&quot;小花&quot;</span>;</span><br><span class="line">cat2.age = <span class="number">100</span>;</span><br><span class="line">cat2.color = <span class="string">&quot;花色&quot;</span>;</span><br><span class="line">cat2.weight = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//怎么访问对象的属性呢</span></span><br><span class="line">System.out.println(<span class="string">&quot;第1只猫信息&quot;</span> + cat1.name </span><br><span class="line">+ <span class="string">&quot; &quot;</span> + cat1.age + <span class="string">&quot; &quot;</span> + cat1.color + <span class="string">&quot; &quot;</span> + cat1.weight);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;第2只猫信息&quot;</span> + cat2.name </span><br><span class="line">+ <span class="string">&quot; &quot;</span> + cat2.age + <span class="string">&quot; &quot;</span> + cat2.color + <span class="string">&quot; &quot;</span> + cat2.weight);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用面向对象的方式来解决养猫问题</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//定义一个猫类 Cat -&gt; 自定义的数据类型</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line"><span class="comment">//属性/成员变量</span></span><br><span class="line">String name; <span class="comment">//名字</span></span><br><span class="line"><span class="type">int</span> age; <span class="comment">//年龄</span></span><br><span class="line">String color; <span class="comment">//颜色</span></span><br><span class="line"><span class="comment">//double weight; //体重</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//行为</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="1-2-对象在内存中的存在形式-※"><a href="#1-2-对象在内存中的存在形式-※" class="headerlink" title="1.2 对象在内存中的存在形式 (※)"></a>1.2 对象在内存中的存在形式 (※)</h2><p>创建一个新的对象的时候相当于在堆区中开辟了一块空间, </p><p>在栈区中的变量名指向这个堆区的地址, </p><p>如果属性是 <code>基本数据类型</code> 则直接存储在堆区中, </p><p>如果是 <code>引用类型</code> 则存储在堆区中的是一个在方法区的地址, 真正的内容存储在方法区中</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230129214755994.png" alt="对象在内存中的存在形式"></p><hr><h2 id="1-3-属性"><a href="#1-3-属性" class="headerlink" title="1.3 属性"></a>1.3 属性</h2><ol><li><p>属性的定义语法同变量，示例：访问修饰符 属性类型 属性名; </p></li><li><p>属性的定义类型可以为任意类型，包含基本类型或引用类型</p></li><li><p>属性如果不赋值，有默认值，规则和数组一致。具体说: </p><p><code>int 0，short 0, byte 0, long 0, float 0.0,double 0.0，char \u0000，boolean false，String null</code></p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PropertiesDetail</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//创建Person对象</span></span><br><span class="line"><span class="comment">//p1 是对象名(对象引用)</span></span><br><span class="line"><span class="comment">//new Person() 创建的对象空间(数据) 才是真正的对象</span></span><br><span class="line"><span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//对象的属性默认值，遵守数组规则:</span></span><br><span class="line"><span class="comment">//int 0，short 0, byte 0, long 0, float 0.0,double 0.0，char \u0000，boolean false，String null</span></span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;\n当前这个人的信息&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;age=&quot;</span> + p1.age + <span class="string">&quot; name=&quot;</span> </span><br><span class="line">+ p1.name + <span class="string">&quot; sal=&quot;</span> + p1.sal + <span class="string">&quot; isPass=&quot;</span> + p1.isPass) ;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="comment">//四个属性</span></span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line">String name;</span><br><span class="line"><span class="type">double</span> sal;</span><br><span class="line"><span class="type">boolean</span> isPass;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-3-1-创建对象"><a href="#1-3-1-创建对象" class="headerlink" title="1.3.1 创建对象"></a>1.3.1 创建对象</h3><ol><li>先声明再创建</li></ol><p>​<code>Cat cat ; //声明对象 cat</code></p><p>​<code>cat = new Cat(); //创建</code></p><ol start="2"><li>直接创建</li></ol><p>​<code>Cat cat = new Cat();</code></p><h3 id="1-3-2-访问属性"><a href="#1-3-2-访问属性" class="headerlink" title="1.3.2 访问属性"></a>1.3.2 访问属性</h3><p>基本语法</p><p>​对象名.属性名;</p><p>案例演示赋值和输出</p><p>​<code>cat.name ;</code></p><p>​<code>cat.age;</code></p><p>​<code>cat.color;</code></p><hr><h2 id="1-4-类和对象内存分配机制-※"><a href="#1-4-类和对象内存分配机制-※" class="headerlink" title="1.4 类和对象内存分配机制 (※)"></a>1.4 类和对象内存分配机制 (※)</h2><ol><li><p>栈： 一般存放基本数据类型 (局部变量)</p></li><li><p>堆： 存放对象 (Cat cat , 数组等)</p></li><li><p>方法区：常量池 (常量，比如字符串)， 类加载信息</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Object03</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">Person p1=<span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">p1.age=<span class="number">10</span>;</span><br><span class="line">p1.name=<span class="string">&quot;小明&quot;</span>;</span><br><span class="line">Person p2=p1; <span class="comment">//把p1 赋给了 p2 ， 让p2指向p1 </span></span><br><span class="line">System.out.println(p2.age); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">String name;</span><br><span class="line"><span class="type">int</span> age; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><p>先加载 Person 类信息 (属性和方法信息, 只会加载一次)</p></li><li><p>在堆中分配空间, 进行默认初始化 (看规则)</p></li><li><p>把地址赋给 p , p 就指向对象</p></li><li><p>进行指定初始化， 比如 <code>p.name =”jack” p.age = 10</code></p></li></ol><p>跟数组的存储机制比较像, 可以类比理解, 不要强行记忆</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230129220303073.png" alt="类和对象内存分配机制"></p><p>如果是 <code>null</code> 的话就什么都不指向</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230129220551830.png" alt="b = null"></p><hr><h1 id="二、成员方法"><a href="#二、成员方法" class="headerlink" title="二、成员方法"></a>二、成员方法</h1><h2 id="2-1-问题引出"><a href="#2-1-问题引出" class="headerlink" title="2.1 问题引出"></a>2.1 问题引出</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Method01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//方法使用</span></span><br><span class="line"><span class="comment">//1. 方法写好后，如果不去调用(使用)，不会输出</span></span><br><span class="line"><span class="comment">//2. 先创建对象 ,然后调用方法即可</span></span><br><span class="line"><span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">p1.speak(); <span class="comment">//调用方法</span></span><br><span class="line">p1.cal01(); <span class="comment">//调用cal01方法</span></span><br><span class="line">p1.cal02(<span class="number">5</span>); <span class="comment">//调用cal02方法，同时给n = 5</span></span><br><span class="line">p1.cal02(<span class="number">10</span>); <span class="comment">//调用cal02方法，同时给n = 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//调用getSum方法，同时num1=10, num2=20</span></span><br><span class="line"><span class="comment">//把 方法 getSum 返回的值，赋给 变量 returnRes</span></span><br><span class="line"><span class="type">int</span> <span class="variable">returnRes</span> <span class="operator">=</span> p1.getSum(<span class="number">10</span>, <span class="number">20</span>); </span><br><span class="line">System.out.println(<span class="string">&quot;getSum方法返回的值=&quot;</span> + returnRes);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"></span><br><span class="line">String name;</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line"><span class="comment">//方法(成员方法)</span></span><br><span class="line"><span class="comment">//添加speak 成员方法,输出 “我是一个好人”</span></span><br><span class="line"><span class="comment">//老韩解读</span></span><br><span class="line"><span class="comment">//1. public 表示方法是公开</span></span><br><span class="line"><span class="comment">//2. void ： 表示方法没有返回值</span></span><br><span class="line"><span class="comment">//3. speak() : speak是方法名， () 形参列表</span></span><br><span class="line"><span class="comment">//4. &#123;&#125; 方法体，可以写我们要执行的代码</span></span><br><span class="line"><span class="comment">//5. System.out.println(&quot;我是一个好人&quot;); 表示我们的方法就是输出一句话</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">speak</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;我是一个好人&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加cal01 成员方法,可以计算从 1+..+1000的结果</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cal01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//循环完成</span></span><br><span class="line"><span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">1000</span>; i++) &#123;</span><br><span class="line">res += i;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;cal01方法 计算结果=&quot;</span> + res);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//添加cal02 成员方法,该方法可以接收一个数n，计算从 1+..+n 的结果</span></span><br><span class="line"><span class="comment">//老韩解读</span></span><br><span class="line"><span class="comment">//1. (int n) 形参列表， 表示当前有一个形参 n, 可以接收用户输入</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cal02</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line"><span class="comment">//循环完成</span></span><br><span class="line"><span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">res += i;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;cal02方法 计算结果=&quot;</span> + res);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加getSum成员方法,可以计算两个数的和</span></span><br><span class="line"><span class="comment">//老韩解读</span></span><br><span class="line"><span class="comment">//1. public 表示方法是公开的</span></span><br><span class="line"><span class="comment">//2. int :表示方法执行后，返回一个 int 值</span></span><br><span class="line"><span class="comment">//3. getSum 方法名</span></span><br><span class="line"><span class="comment">//4. (int num1, int num2) 形参列表，2个形参，可以接收用户传入的两个数</span></span><br><span class="line"><span class="comment">//5. return res; 表示把 res 的值， 返回</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSum</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> num1 + num2;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-2-方法调用机制-※"><a href="#2-2-方法调用机制-※" class="headerlink" title="2.2 方法调用机制 (※)"></a>2.2 方法调用机制 (※)</h2><p>每个方法调用的时候会开辟一个新的栈空间, </p><p>除非使用 <code>return</code> , 否则每个占空间相互独立互不干扰</p><p>一个方法结束后占空间会销毁</p><p>程序结束后 <code>main</code> 栈空间销毁</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230129220851971.png" alt="image-20230129220851971"></p><hr><h2 id="2-3-成员方法的好处及使用"><a href="#2-3-成员方法的好处及使用" class="headerlink" title="2.3 成员方法的好处及使用"></a>2.3 成员方法的好处及使用</h2><h3 id="2-3-1-好处"><a href="#2-3-1-好处" class="headerlink" title="2.3.1 好处"></a>2.3.1 好处</h3><ol><li><p>提高代码的复用性</p></li><li><p>可以将实现的细节封装起来，然后供其他用户来调用即可</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Method02</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//请遍历一个数组 , 输出数组的各个元素值</span></span><br><span class="line"><span class="type">int</span> [][] map =  &#123;&#123;<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>&#125;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用方法完成输出, 创建MyTools对象 </span></span><br><span class="line"><span class="type">MyTools</span> <span class="variable">tool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyTools</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//遍历map数组</span></span><br><span class="line"><span class="comment">//传统的解决方式就是直接遍历</span></span><br><span class="line"><span class="comment">// for(int i = 0; i &lt; map.length; i++) &#123;</span></span><br><span class="line"><span class="comment">// for(int j = 0; j &lt; map[i].length; j++) &#123;</span></span><br><span class="line"><span class="comment">// System.out.print(map[i][j] + &quot;\t&quot;);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// System.out.println();</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">//使用方法</span></span><br><span class="line">tool.printArr(map);</span><br><span class="line"></span><br><span class="line"><span class="comment">//....</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//要求再次遍历map数组</span></span><br><span class="line"><span class="comment">// for(int i = 0; i &lt; map.length; i++) &#123;</span></span><br><span class="line"><span class="comment">// for(int j = 0; j &lt; map[i].length; j++) &#123;</span></span><br><span class="line"><span class="comment">// System.out.print(map[i][j] + &quot;\t&quot;);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// System.out.println();</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line">tool.printArr(map);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//...再次遍历</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// for(int i = 0; i &lt; map.length; i++) &#123;</span></span><br><span class="line"><span class="comment">// for(int j = 0; j &lt; map[i].length; j++) &#123;</span></span><br><span class="line"><span class="comment">// System.out.print(map[i][j] + &quot;\t&quot;);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// System.out.println();</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line">tool.printArr(map);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//把输出的功能，写到一个类的方法中,然后调用该方法即可</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyTools</span> &#123;</span><br><span class="line"><span class="comment">//方法，接收一个二维数组</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printArr</span><span class="params">(<span class="type">int</span>[][] map)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;=======&quot;</span>);</span><br><span class="line"><span class="comment">//对传入的map数组进行遍历输出</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; map.length; i++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; map[i].length; j++) &#123;</span><br><span class="line">System.out.print(map[i][j] + <span class="string">&quot;_&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-2-成员方法的定义"><a href="#2-3-2-成员方法的定义" class="headerlink" title="2.3.2 成员方法的定义"></a>2.3.2 成员方法的定义</h3><p>访问修饰符 返回数据类型 方法名（形参列表..） {&#x2F;&#x2F;方法体</p><p>​语句；</p><p>​return 返回值;</p><p>}</p><ol><li><p>形参列表：表示成员方法输入 <code>cal(int n) ， getSum(int num1, int num2)</code></p></li><li><p>返回数据类型：表示成员方法输出, void 表示没有返回值</p></li><li><p>方法主体：表示为了实现某一功能代码块</p></li><li><p>return 语句不是必须的。</p></li></ol><h3 id="2-3-3-方法使用细节"><a href="#2-3-3-方法使用细节" class="headerlink" title="2.3.3 方法使用细节"></a>2.3.3 方法使用细节</h3><ol><li><p>一个方法最多有一个返回值 [思考，如何返回多个结果 返回数组 ]</p></li><li><p>返回类型可以为任意类型，包含基本类型或引用类型(数组，对象)</p></li><li><p>如果方法要求有返回数据类型，则方法体中最后的执行语句必须为 return 值; </p><p>而且要求返回值类型必须和 return 的值类型一致或兼容</p></li><li><p>如果方法是 void，则方法体中可以没有 return 语句，或者 只写 return ;</p></li><li><p>方法名遵循驼峰命名法，最好见名知义，表达出该功能的意思即可, 比如 得到两个数的和 getSum, 开发中按照规范</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MethodDetail</span> &#123; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">AA</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AA</span>();</span><br><span class="line"><span class="type">int</span>[] res = a.getSumAndSub(<span class="number">1</span>, <span class="number">4</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;和=&quot;</span> + res[<span class="number">0</span>]);</span><br><span class="line">System.out.println(<span class="string">&quot;差=&quot;</span> + res[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//细节: 调用带参数的方法时，一定对应着参数列表传入相同类型或兼容类型 的参数</span></span><br><span class="line"><span class="type">byte</span> <span class="variable">b1</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="type">byte</span> <span class="variable">b2</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">a.getSumAndSub(b1, b2);<span class="comment">//byte -&gt; int </span></span><br><span class="line"><span class="comment">//a.getSumAndSub(1.1, 1.8);//double -&gt;int(×)</span></span><br><span class="line"><span class="comment">//细节: 实参和形参的类型要一致或兼容、个数、顺序必须一致</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//a.getSumAndSub(100);//× 个数不一致</span></span><br><span class="line">a.f3(<span class="string">&quot;tom&quot;</span>, <span class="number">10</span>); <span class="comment">//ok</span></span><br><span class="line"><span class="comment">//a.f3(100, &quot;jack&quot;); // 实际参数和形式参数顺序不对</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AA</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//细节: 方法不能嵌套定义</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">f4</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//错误</span></span><br><span class="line"><span class="comment">// public void f5() &#123;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">f3</span><span class="params">(String str, <span class="type">int</span> n)</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1. 一个方法最多有一个返回值  [思考，如何返回多个结果 返回数组 ]</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] getSumAndSub(<span class="type">int</span> n1, <span class="type">int</span> n2) &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] resArr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>]; <span class="comment">//</span></span><br><span class="line">resArr[<span class="number">0</span>] = n1 + n2;</span><br><span class="line">resArr[<span class="number">1</span>] = n1 - n2;</span><br><span class="line"><span class="keyword">return</span> resArr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2. 返回类型可以为任意类型，包含基本类型或引用类型(数组，对象)</span></span><br><span class="line"><span class="comment">//   具体看 getSumAndSub</span></span><br><span class="line"><span class="comment">//   </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 如果方法要求有返回数据类型，则方法体中最后的执行语句必须为 return 值; </span></span><br><span class="line"><span class="comment">//   而且要求返回值类型必须和return的值类型一致或兼容</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">f1</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">double</span> <span class="variable">d1</span> <span class="operator">=</span> <span class="number">1.1</span> * <span class="number">3</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"><span class="keyword">return</span> n; <span class="comment">// int -&gt;double </span></span><br><span class="line"><span class="comment">//return d1; //ok? double -&gt; int </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果方法是void，则方法体中可以没有return语句，或者 只写 return ; </span></span><br><span class="line"><span class="comment">//老韩提示：在实际工作中，我们的方法都是为了完成某个功能，所以方法名要有一定含义</span></span><br><span class="line"><span class="comment">//，最好是见名知意</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">f2</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;hello1&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;hello1&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;hello1&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="comment">//return ;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-4-方法调用细节"><a href="#2-3-4-方法调用细节" class="headerlink" title="2.3.4 方法调用细节"></a>2.3.4 方法调用细节</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MethodDetail02</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line"><span class="comment">//a.sayOk();</span></span><br><span class="line"></span><br><span class="line">a.m1(); </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="comment">//同一个类中的方法调用：直接调用即可</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;print()方法被调用 n=&quot;</span> + n);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sayOk</span><span class="params">()</span> &#123; <span class="comment">//sayOk调用 print(直接调用即可)</span></span><br><span class="line">print(<span class="number">10</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;继续执行sayOK()~~~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//跨类中的方法A类调用B类方法：需要通过对象名调用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">m1</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//创建B对象, 然后在调用方法即可</span></span><br><span class="line">System.out.println(<span class="string">&quot;m1() 方法被调用&quot;</span>);</span><br><span class="line"><span class="type">B</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">B</span>();</span><br><span class="line">b.hi();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;m1() 继续执行:)&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hi</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;B类中的 hi()被执行&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-4-练习"><a href="#2-4-练习" class="headerlink" title="2.4 练习"></a>2.4 练习</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MethodExercise01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">AA</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AA</span>();</span><br><span class="line"><span class="comment">// if(a.isOdd(2)) &#123;//T , 这样的写法以后会看到很多</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;是奇数&quot;);</span></span><br><span class="line"><span class="comment">// &#125; else &#123;</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;是偶数&quot;);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="comment">// 使用print方法</span></span><br><span class="line">a.print(<span class="number">4</span>, <span class="number">4</span>, <span class="string">&#x27;#&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//编写类AA ，有一个方法：判断一个数是奇数odd还是偶数, 返回boolean</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AA</span> &#123;</span><br><span class="line"><span class="comment">//思路</span></span><br><span class="line"><span class="comment">//1. 方法的返回类型 boolean</span></span><br><span class="line"><span class="comment">//2. 方法的名字 isOdd</span></span><br><span class="line"><span class="comment">//3. 方法的形参 (int num)</span></span><br><span class="line"><span class="comment">//4. 方法体 , 判断</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isOdd</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line"><span class="comment">// if(num % 2 != 0) &#123;</span></span><br><span class="line"><span class="comment">// return true;</span></span><br><span class="line"><span class="comment">// &#125; else &#123;</span></span><br><span class="line"><span class="comment">// return false;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//return num % 2 != 0 ? true; false;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">return</span> num % <span class="number">2</span> != <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据行、列、字符打印 对应行数和列数的字符，</span></span><br><span class="line"><span class="comment">//比如：行：4，列：4，字符#,则打印相应的效果</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">####</span></span><br><span class="line"><span class="comment">####</span></span><br><span class="line"><span class="comment">####</span></span><br><span class="line"><span class="comment">####</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//思路</span></span><br><span class="line"><span class="comment">//1. 方法的返回类型 void</span></span><br><span class="line"><span class="comment">//2. 方法的名字 print</span></span><br><span class="line"><span class="comment">//3. 方法的形参 (int row, int col, char c)</span></span><br><span class="line"><span class="comment">//4. 方法体 , 循环</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(<span class="type">int</span> row, <span class="type">int</span> col, <span class="type">char</span> c)</span> &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; row; i++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; col; j++) &#123;<span class="comment">//输出每一行</span></span><br><span class="line">System.out.print(c);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(); <span class="comment">//换行</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="三、成员方法传参机制-※"><a href="#三、成员方法传参机制-※" class="headerlink" title="三、成员方法传参机制 (※)"></a>三、成员方法传参机制 (※)</h1><h2 id="3-1-基本数据类型传参机制"><a href="#3-1-基本数据类型传参机制" class="headerlink" title="3.1 基本数据类型传参机制"></a>3.1 基本数据类型传参机制</h2><p>基本数据类型，传递的是值 (值拷贝)，形参的任何改变不影响实参</p><p><code>main</code> 方法中的两个数在 main 栈区</p><p><code>swap</code> 方法中的两个数在 swap 栈区</p><p>两个栈区互补干扰, 既然是基本数据类型, 那么数据都存储在栈区中, 没有指向堆区中的地址</p><p>所以在没有 <code>return</code> 的情况下两个栈区互补干扰, 不能做到数据交换的目的</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MethodParameter01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line"><span class="comment">//创建AA对象 名字 obj</span></span><br><span class="line"><span class="type">AA</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AA</span>();</span><br><span class="line">obj.swap(a, b); <span class="comment">//调用swap</span></span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;main方法 a=&quot;</span> + a + <span class="string">&quot; b=&quot;</span> + b);<span class="comment">//a=10 b=20</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AA</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;\na和b交换前的值\na=&quot;</span> + a + <span class="string">&quot;\tb=&quot;</span> + b);<span class="comment">//a=10 b=20</span></span><br><span class="line"><span class="comment">//完成了 a 和 b的交换</span></span><br><span class="line"><span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> a;</span><br><span class="line">a = b;</span><br><span class="line">b = tmp;</span><br><span class="line">System.out.println(<span class="string">&quot;\na和b交换后的值\na=&quot;</span> + a + <span class="string">&quot;\tb=&quot;</span> + b);<span class="comment">//a=20 b=10</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="3-2-引用数据类型传参机制"><a href="#3-2-引用数据类型传参机制" class="headerlink" title="3.2 引用数据类型传参机制"></a>3.2 引用数据类型传参机制</h2><p>引用类型传递的是地址（传递也是值，但是值是地址），可以通过形参影响实参</p><p>引用类型存储在堆区中, 变量存储的是这个堆区的地址</p><p><code>main</code> 方法与 <code>test100</code> 方法的栈区都存储的是堆区的地址, 这个地址指向一个地方, test100 中的修改可以影响 main 的输出</p><p>而在 <code>test200</code> 中, 新建了一个对象, 这就说明现在堆区中有两个对象</p><p>而新建的对象在 test200 的栈区中存储的指向堆区的地址是新建的对象的地址, 不会与原来的地方产生关联, 所以不会影响 main 的输出</p><p><code>p = null</code> 指向为空, 啥都不影响</p><p>直接通过 <code>test200</code> 方法中调用属性 <code>p.age</code> 当然会直接对堆区的对象值进行修改</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MethodParameter02</span> &#123; </span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//测试</span></span><br><span class="line"><span class="type">B</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">B</span>();</span><br><span class="line"> <span class="type">int</span>[] arr = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line"> b.test100(arr);<span class="comment">//调用方法</span></span><br><span class="line"> System.out.println(<span class="string">&quot; main的 arr数组 &quot;</span>);</span><br><span class="line"> <span class="comment">//遍历数组</span></span><br><span class="line"> <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"> System.out.print(arr[i] + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> System.out.println();</span><br><span class="line"></span><br><span class="line"><span class="comment">//测试</span></span><br><span class="line"><span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">p.name = <span class="string">&quot;jack&quot;</span>;</span><br><span class="line">p.age = <span class="number">10</span>;</span><br><span class="line">b.test200(p);</span><br><span class="line"><span class="comment">//测试题, 如果 test200 执行的是 p = null ,下面的结果是 10</span></span><br><span class="line"><span class="comment">//测试题, 如果 test200 执行的是 p = new Person();..., 下面输出的是10</span></span><br><span class="line">System.out.println(<span class="string">&quot;main 的p.age=&quot;</span> + p.age);<span class="comment">//10000 </span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">String name;</span><br><span class="line"><span class="type">int</span> age; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test200</span><span class="params">(Person p)</span> &#123;</span><br><span class="line">        <span class="comment">// 直接通过 test200 方法中调用属性 p.age 当然会直接对堆区的对象值进行修改</span></span><br><span class="line"><span class="comment">//p.age = 10000; //修改对象属性</span></span><br><span class="line"><span class="comment">//思考</span></span><br><span class="line">p = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">p.name = <span class="string">&quot;tom&quot;</span>;</span><br><span class="line">p.age = <span class="number">99</span>;</span><br><span class="line"><span class="comment">//思考</span></span><br><span class="line">        <span class="comment">// p = null 指向为空, 啥都不影响</span></span><br><span class="line"><span class="comment">//p = null; </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//B类中编写一个方法test100，</span></span><br><span class="line"><span class="comment">//可以接收一个数组，在方法中修改该数组，看看原来的数组是否变化</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test100</span><span class="params">(<span class="type">int</span>[] arr)</span> &#123;</span><br><span class="line">arr[<span class="number">0</span>] = <span class="number">200</span>;<span class="comment">//修改元素</span></span><br><span class="line"><span class="comment">//遍历数组</span></span><br><span class="line">System.out.println(<span class="string">&quot; test100的 arr数组 &quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">System.out.print(arr[i] + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="3-3-对象克隆"><a href="#3-3-对象克隆" class="headerlink" title="3.3 对象克隆"></a>3.3 对象克隆</h2><p>有点类似数组的克隆, 可以对比理解, 不要死记硬背</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MethodExercise02</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">p.name = <span class="string">&quot;milan&quot;</span>;</span><br><span class="line">p.age = <span class="number">100</span>;</span><br><span class="line"><span class="comment">//创建tools</span></span><br><span class="line"><span class="type">MyTools</span> <span class="variable">tools</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyTools</span>();</span><br><span class="line"><span class="type">Person</span> <span class="variable">p2</span> <span class="operator">=</span> tools.copyPerson(p);</span><br><span class="line"></span><br><span class="line"><span class="comment">//到此 p 和 p2是Person对象，但是是两个独立的对象，属性相同</span></span><br><span class="line">System.out.println(<span class="string">&quot;p的属性 age=&quot;</span> + p.age  + <span class="string">&quot; 名字=&quot;</span> + p.name);</span><br><span class="line">System.out.println(<span class="string">&quot;p2的属性 age=&quot;</span> + p2.age  + <span class="string">&quot; 名字=&quot;</span> + p2.name);</span><br><span class="line"><span class="comment">//这里老师提示： 可以同 对象比较看看是否为同一个对象</span></span><br><span class="line">System.out.println(p == p2);<span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">String name;</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyTools</span> &#123;</span><br><span class="line"><span class="comment">//编写一个方法copyPerson，可以复制一个Person对象，返回复制的对象。克隆对象， </span></span><br><span class="line"><span class="comment">//注意要求得到新对象和原来的对象是两个独立的对象，只是他们的属性相同</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//编写方法的思路</span></span><br><span class="line"><span class="comment">//1. 方法的返回类型 Person</span></span><br><span class="line"><span class="comment">//2. 方法的名字 copyPerson</span></span><br><span class="line"><span class="comment">//3. 方法的形参 (Person p)</span></span><br><span class="line"><span class="comment">//4. 方法体, 创建一个新对象，并复制属性，返回即可</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> Person <span class="title function_">copyPerson</span><span class="params">(Person p)</span> &#123;</span><br><span class="line"><span class="comment">//创建一个新的对象</span></span><br><span class="line"><span class="type">Person</span> <span class="variable">p2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">p2.name = p.name; <span class="comment">//把原来对象的名字赋给p2.name</span></span><br><span class="line">p2.age = p.age; <span class="comment">//把原来对象的年龄赋给p2.age</span></span><br><span class="line"><span class="keyword">return</span> p2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="3-4-方法递归调用-※"><a href="#3-4-方法递归调用-※" class="headerlink" title="3.4 方法递归调用 (※)"></a>3.4 方法递归调用 (※)</h2><h3 id="3-4-1-问题引出"><a href="#3-4-1-问题引出" class="headerlink" title="3.4.1 问题引出"></a>3.4.1 问题引出</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Recursion01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">T</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">T</span>();</span><br><span class="line">t1.test(<span class="number">4</span>);<span class="comment">//输出什么？ n=2 n=3 n=4</span></span><br><span class="line"><span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> t1.factorial(<span class="number">5</span>); </span><br><span class="line">System.out.println(<span class="string">&quot;5的阶乘 res =&quot;</span> + res);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">T</span> &#123;</span><br><span class="line"><span class="comment">//分析</span></span><br><span class="line"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (n &gt; <span class="number">2</span>) &#123;</span><br><span class="line">test(n - <span class="number">1</span>);</span><br><span class="line">&#125; </span><br><span class="line">System.out.println(<span class="string">&quot;n=&quot;</span> + n);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//factorial 阶乘</span></span><br><span class="line"><span class="keyword">public</span>  <span class="type">int</span> <span class="title function_">factorial</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> factorial(n - <span class="number">1</span>) * n;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-4-2-递归时的内存机制"><a href="#3-4-2-递归时的内存机制" class="headerlink" title="3.4.2 递归时的内存机制"></a>3.4.2 递归时的内存机制</h3><ol><li><p>每次执行一个方法就是创建一个新的受保护的独立栈空间</p></li><li><p>每个方法中, 即每个栈空间中的<strong>局部变量</strong>是独立的, 不会互相影响, 比如下图的 <code>n</code></p></li><li><p>当然如果这些方法中使用的是<strong>引用类型变量 (数组, 对象等)</strong>, 就会共享这个引用类型变量的数据</p></li><li><p>递归时必须向退出递归的条件逼近, 否则就是无限递归</p></li><li><p>当一个方法执行完毕之后, 或者遇到 <code>return</code> 就会返回, 遵守谁调用就返回给谁的原则</p><p>就是说当方法执行完毕或者返回时, 这个方法就完事了, 销毁</p></li></ol><p>递归就像是一个栈, 如下图所示, 从 <code>main</code> 方法开始一直调用 <code>test</code> 方法, 不断开辟栈空间, 然后从最后开辟的栈空间开始逐渐返回, 返回一个销毁一个, 最后回到 <code>main</code></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230130210338861.png" alt="递归时的内存机制"></p><h3 id="3-4-3-斐波那契数列与猴子吃桃"><a href="#3-4-3-斐波那契数列与猴子吃桃" class="headerlink" title="3.4.3 斐波那契数列与猴子吃桃"></a>3.4.3 斐波那契数列与猴子吃桃</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RecursionExercise01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">T</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">T</span>();</span><br><span class="line"> <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">7</span>;</span><br><span class="line"> <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> t1.fibonacci(n);</span><br><span class="line"> <span class="keyword">if</span>(res != -<span class="number">1</span>) &#123;</span><br><span class="line"> System.out.println(<span class="string">&quot;当n=&quot;</span>+ n +<span class="string">&quot; 对应的斐波那契数=&quot;</span> + res);</span><br><span class="line"> &#125;</span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="comment">//桃子问题</span></span><br><span class="line"><span class="type">int</span> <span class="variable">day</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">peachNum</span> <span class="operator">=</span> t1.peach(day);</span><br><span class="line"><span class="keyword">if</span>(peachNum != -<span class="number">1</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;第 &quot;</span> + day + <span class="string">&quot;天有&quot;</span> + peachNum + <span class="string">&quot;个桃子&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">T</span> &#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">请使用递归的方式求出斐波那契数1,1,2,3,5,8,13...给你一个整数n，求出它的值是多</span></span><br><span class="line"><span class="comment">思路分析</span></span><br><span class="line"><span class="comment">1. 当n = 1 斐波那契数 是1</span></span><br><span class="line"><span class="comment">2. 当n = 2 斐波那契数 是1</span></span><br><span class="line"><span class="comment">3. 当n &gt;= 3  斐波那契数 是前两个数的和</span></span><br><span class="line"><span class="comment">4. 这里就是一个递归的思路</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">fibonacci</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>( n &gt;= <span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>( n == <span class="number">1</span> || n == <span class="number">2</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> fibonacci(n-<span class="number">1</span>) + fibonacci(n-<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;要求输入的n&gt;=1的整数&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">猴子吃桃子问题：有一堆桃子，猴子第一天吃了其中的一半，并再多吃了一个！</span></span><br><span class="line"><span class="comment">以后每天猴子都吃其中的一半，然后再多吃一个。当到第10天时，</span></span><br><span class="line"><span class="comment">想再吃时（即还没吃），发现只有1个桃子了。问题：最初共多少个桃子？</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">思路分析 逆推</span></span><br><span class="line"><span class="comment">1. day = 10 时 有 1个桃子</span></span><br><span class="line"><span class="comment">2. day = 9 时  有 (day10 + 1) * 2 = 4</span></span><br><span class="line"><span class="comment">3. day = 8 时  有 (day9 + 1) * 2 = 10</span></span><br><span class="line"><span class="comment">4. 规律就是  前一天的桃子 = (后一天的桃子 + 1) *2//就是我们的能力</span></span><br><span class="line"><span class="comment">5. 递归</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peach</span><span class="params">(<span class="type">int</span> day)</span> &#123; </span><br><span class="line"><span class="keyword">if</span>(day == <span class="number">10</span>) &#123;<span class="comment">//第10天，只有1个桃</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>; </span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> ( day &gt;= <span class="number">1</span> &amp;&amp; day &lt;=<span class="number">9</span> ) &#123;</span><br><span class="line"><span class="keyword">return</span> (peach(day + <span class="number">1</span>) + <span class="number">1</span>) * <span class="number">2</span>;<span class="comment">//规则，自己要想</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;day在1-10&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-4-4-迷宫问题"><a href="#3-4-4-迷宫问题" class="headerlink" title="3.4.4 迷宫问题"></a>3.4.4 迷宫问题</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MiGong</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//思路</span></span><br><span class="line"><span class="comment">//1. 先创建迷宫，用二维数组表示 int[][] map = new int[8][7];</span></span><br><span class="line"><span class="comment">//2. 先规定 map 数组的元素值: 0 表示可以走 1 表示障碍物 </span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[][] map = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">8</span>][<span class="number">7</span>];</span><br><span class="line"><span class="comment">//3. 将最上面的一行和最下面的一行，全部设置为1</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line">map[<span class="number">0</span>][i] = <span class="number">1</span>;</span><br><span class="line">map[<span class="number">7</span>][i] = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//4.将最右面的一列和最左面的一列，全部设置为1</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">map[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">map[i][<span class="number">6</span>] = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">map[<span class="number">3</span>][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">map[<span class="number">3</span>][<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">map[<span class="number">2</span>][<span class="number">2</span>] = <span class="number">1</span>; <span class="comment">//测试回溯 </span></span><br><span class="line"><span class="comment">// map[2][1] = 1;</span></span><br><span class="line"><span class="comment">// map[2][2] = 1;</span></span><br><span class="line"><span class="comment">// map[1][2] = 1;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//输出当前的地图</span></span><br><span class="line">System.out.println(<span class="string">&quot;=====当前地图情况======&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; map.length; i++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; map[i].length; j++) &#123;</span><br><span class="line">System.out.print(map[i][j] + <span class="string">&quot; &quot;</span>);<span class="comment">//输出一行</span></span><br><span class="line">&#125;</span><br><span class="line">System.out.println();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用findWay给老鼠找路</span></span><br><span class="line"><span class="type">T</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">T</span>();</span><br><span class="line"><span class="comment">//下右上左</span></span><br><span class="line">t1.findWay(map, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;\n====找路的情况如下=====&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; map.length; i++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; map[i].length; j++) &#123;</span><br><span class="line">System.out.print(map[i][j] + <span class="string">&quot; &quot;</span>);<span class="comment">//输出一行</span></span><br><span class="line">&#125;</span><br><span class="line">System.out.println();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">T</span>  &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用递归回溯的思想来解决老鼠出迷宫</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//老韩解读</span></span><br><span class="line"><span class="comment">//1. findWay方法就是专门来找出迷宫的路径</span></span><br><span class="line"><span class="comment">//2. 如果找到，就返回 true ,否则返回false</span></span><br><span class="line"><span class="comment">//3. map 就是二维数组，即表示迷宫</span></span><br><span class="line"><span class="comment">//4. i,j 就是老鼠的位置，初始化的位置为(1,1)</span></span><br><span class="line"><span class="comment">//5. 因为我们是递归的找路，所以我先规定 map数组的各个值的含义</span></span><br><span class="line"><span class="comment">//   0 表示可以走 1 表示障碍物 2 表示可以走 3 表示走过，但是走不通是死路</span></span><br><span class="line"><span class="comment">//6. 当map[6][5] =2 就说明找到通路,就可以结束，否则就继续找.</span></span><br><span class="line"><span class="comment">//7. 先确定老鼠找路策略 下-&gt;右-&gt;上-&gt;左</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">findWay</span><span class="params">(<span class="type">int</span>[][] map , <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(map[<span class="number">6</span>][<span class="number">5</span>] == <span class="number">2</span>) &#123;<span class="comment">//说明已经找到</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(map[i][j] == <span class="number">0</span>) &#123;<span class="comment">//当前这个位置0,说明表示可以走</span></span><br><span class="line"><span class="comment">//我们假定可以走通</span></span><br><span class="line">map[i][j] = <span class="number">2</span>;</span><br><span class="line"><span class="comment">//使用找路策略，来确定该位置是否真的可以走通</span></span><br><span class="line"><span class="comment">//下-&gt;右-&gt;上-&gt;左</span></span><br><span class="line"><span class="keyword">if</span>(findWay(map, i + <span class="number">1</span>, j)) &#123;<span class="comment">//先走下</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(findWay(map, i, j + <span class="number">1</span>))&#123;<span class="comment">//右</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(findWay(map, i-<span class="number">1</span>, j)) &#123;<span class="comment">//上</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(findWay(map, i, j-<span class="number">1</span>))&#123;<span class="comment">//左</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">map[i][j] = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">//map[i][j] = 1 , 2, 3</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改找路策略，看看路径是否有变化</span></span><br><span class="line"><span class="comment">//下-&gt;右-&gt;上-&gt;左 ==&gt; 上-&gt;右-&gt;下-&gt;左</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">findWay2</span><span class="params">(<span class="type">int</span>[][] map , <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(map[<span class="number">6</span>][<span class="number">5</span>] == <span class="number">2</span>) &#123;<span class="comment">//说明已经找到</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(map[i][j] == <span class="number">0</span>) &#123;<span class="comment">//当前这个位置0,说明表示可以走</span></span><br><span class="line"><span class="comment">//我们假定可以走通</span></span><br><span class="line">map[i][j] = <span class="number">2</span>;</span><br><span class="line"><span class="comment">//使用找路策略，来确定该位置是否真的可以走通</span></span><br><span class="line"><span class="comment">//上-&gt;右-&gt;下-&gt;左</span></span><br><span class="line"><span class="keyword">if</span>(findWay2(map, i - <span class="number">1</span>, j)) &#123;<span class="comment">//先走上</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(findWay2(map, i, j + <span class="number">1</span>))&#123;<span class="comment">//右</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(findWay2(map, i+<span class="number">1</span>, j)) &#123;<span class="comment">//下</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(findWay2(map, i, j-<span class="number">1</span>))&#123;<span class="comment">//左</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">map[i][j] = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">//map[i][j] = 1 , 2, 3</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-4-5-汉诺塔"><a href="#3-4-5-汉诺塔" class="headerlink" title="3.4.5 汉诺塔"></a>3.4.5 汉诺塔</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HanoiTower</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">Tower</span> <span class="variable">tower</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Tower</span>();</span><br><span class="line">tower.move(<span class="number">64</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tower</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法</span></span><br><span class="line"><span class="comment">//num 表示要移动的个数, a, b, c 分别表示A塔，B 塔, C 塔</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">move</span><span class="params">(<span class="type">int</span> num , <span class="type">char</span> a, <span class="type">char</span> b ,<span class="type">char</span> c)</span> &#123;</span><br><span class="line"><span class="comment">//如果只有一个盘 num = 1</span></span><br><span class="line"><span class="keyword">if</span>(num == <span class="number">1</span>) &#123;</span><br><span class="line">System.out.println(a + <span class="string">&quot;-&gt;&quot;</span> + c);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="comment">//如果有多个盘，可以看成两个 , 最下面的和上面的所有盘(num-1)</span></span><br><span class="line"><span class="comment">//(1)先移动上面所有的盘到 b, 借助 c</span></span><br><span class="line">move(num - <span class="number">1</span> , a, c, b);</span><br><span class="line"><span class="comment">//(2)把最下面的这个盘，移动到 c</span></span><br><span class="line">System.out.println(a + <span class="string">&quot;-&gt;&quot;</span> + c);</span><br><span class="line"><span class="comment">//(3)再把 b塔的所有盘，移动到c ,借助a</span></span><br><span class="line">move(num - <span class="number">1</span>, b, a, c);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="四、方法重载"><a href="#四、方法重载" class="headerlink" title="四、方法重载"></a>四、方法重载</h1><blockquote><p>Java 中允许同一个类中，多个同名方法的存在，但要求 形参列表不一致</p></blockquote><h2 id="4-1-使用细节"><a href="#4-1-使用细节" class="headerlink" title="4.1 使用细节"></a>4.1 使用细节</h2><ul><li>方法名必须相同</li><li>形参列表必须不同 (形参类型, 个数, 顺序, 至少有一个不同, 参数名没有要求)</li><li>返回类型没有要求</li></ul><p>必须要在相同的方法名上做区分, 这样才能判定用哪个方法, 所以形参列表必须想办法不同</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OverLoad01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// System.out.println(100);</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;hello,world&quot;);</span></span><br><span class="line"><span class="comment">// System.out.println(&#x27;h&#x27;);</span></span><br><span class="line"><span class="comment">// System.out.println(1.1);</span></span><br><span class="line"><span class="comment">// System.out.println(true);</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="type">MyCalculator</span> <span class="variable">mc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyCalculator</span>();</span><br><span class="line">System.out.println(mc.calculate(<span class="number">1</span>, <span class="number">2</span>));</span><br><span class="line">System.out.println(mc.calculate(<span class="number">1.1</span>, <span class="number">2</span>));</span><br><span class="line">System.out.println(mc.calculate(<span class="number">1</span>, <span class="number">2.1</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCalculator</span>  &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//下面的四个 calculate方法构成了重载</span></span><br><span class="line"><span class="comment">//两个整数的和</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">calculate</span><span class="params">(<span class="type">int</span> n1, <span class="type">int</span> n2)</span>  &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;calculate(int n1, int n2) 被调用&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> n1 + n2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//没有构成方法重载, 仍然是错误的，因为是方法的重复定义</span></span><br><span class="line"><span class="comment">// public void calculate(int n1, int n2)  &#123;</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;calculate(int n1, int n2) 被调用&quot;);</span></span><br><span class="line"><span class="comment">// int res =  n1 + n2;</span></span><br><span class="line"><span class="comment">// &#125; </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//看看下面是否构成重载, 没有构成，而是方法的重复定义,就错了</span></span><br><span class="line"><span class="comment">// public int calculate(int a1, int a2)  &#123;</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;calculate(int n1, int n2) 被调用&quot;);</span></span><br><span class="line"><span class="comment">// return a1 + a2;</span></span><br><span class="line"><span class="comment">// &#125; </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//一个整数，一个double的和</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">calculate</span><span class="params">(<span class="type">int</span> n1, <span class="type">double</span> n2)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> n1 + n2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//一个double ,一个Int和 </span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">calculate</span><span class="params">(<span class="type">double</span> n1, <span class="type">int</span> n2)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;calculate(double n1, int n2) 被调用..&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> n1 + n2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//三个int的和</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">calculate</span><span class="params">(<span class="type">int</span> n1, <span class="type">int</span> n2,<span class="type">int</span> n3)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> n1 + n2 + n2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="4-2-练习"><a href="#4-2-练习" class="headerlink" title="4.2 练习"></a>4.2 练习</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OverLoadExercise</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//在主类的main ()方法中分别用参数区别调用三个方法</span></span><br><span class="line"><span class="type">Methods</span> <span class="variable">method</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Methods</span>();</span><br><span class="line">method.m(<span class="number">10</span>);<span class="comment">//100</span></span><br><span class="line">method.m(<span class="number">10</span>, <span class="number">20</span>);<span class="comment">//200</span></span><br><span class="line">method.m(<span class="string">&quot;韩顺平教育 hello&quot;</span>);<span class="comment">//字符串信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//测试</span></span><br><span class="line">System.out.println(method.max(<span class="number">10</span>, <span class="number">24</span>)); <span class="comment">// 24</span></span><br><span class="line">System.out.println(method.max(<span class="number">10.0</span>, <span class="number">21.4</span>)); <span class="comment">// 21.4</span></span><br><span class="line">System.out.println(method.max(<span class="number">10.0</span>, <span class="number">1.4</span>, <span class="number">30.0</span>)); <span class="comment">// 30.0</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">编写程序，类Methods中定义三个重载方法并调用。方法名为m。</span></span><br><span class="line"><span class="comment">三个方法分别接收一个int参数、两个int参数、一个字符串参数。分别执行平方运算并输出结果，</span></span><br><span class="line"><span class="comment">相乘并输出结果，输出字符串信息。在主类的main ()方法中分别用参数区别调用三个方法</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">定义三个重载方法max()，第一个方法，返回两个int值中的最大值，</span></span><br><span class="line"><span class="comment">第二个方法，返回两个double值中的最大值，第三个方法，</span></span><br><span class="line"><span class="comment">返回三个double值中的最大值，并分别调用三个方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Methods</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//分析</span></span><br><span class="line"><span class="comment">//1 方法名 max</span></span><br><span class="line"><span class="comment">//2 形参 (int,int) </span></span><br><span class="line"><span class="comment">//3.int</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">max</span><span class="params">(<span class="type">int</span> n1, <span class="type">int</span> n2)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> n1 &gt; n2 ? n1 : n2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//分析</span></span><br><span class="line"><span class="comment">//1 方法名 max</span></span><br><span class="line"><span class="comment">//2 形参 (double,double) </span></span><br><span class="line"><span class="comment">//3.double</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">max</span><span class="params">(<span class="type">double</span> n1, <span class="type">double</span> n2)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> n1 &gt; n2 ? n1 : n2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//分析</span></span><br><span class="line"><span class="comment">//1 方法名 max</span></span><br><span class="line"><span class="comment">//2 形参 (double,double,double) </span></span><br><span class="line"><span class="comment">//3.double</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">max</span><span class="params">(<span class="type">double</span> n1, <span class="type">double</span> n2, <span class="type">double</span> n3)</span> &#123;</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;max(double n1, double n2, double n3)&quot;</span>);</span><br><span class="line"><span class="comment">//求出n1 和  n2的最大值</span></span><br><span class="line"><span class="type">double</span> <span class="variable">max1</span> <span class="operator">=</span> n1 &gt; n2 ? n1 : n2;</span><br><span class="line"><span class="keyword">return</span> max1 &gt; n3 ? max1 : n3;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">max</span><span class="params">(<span class="type">double</span> n1, <span class="type">double</span> n2, <span class="type">int</span> n3)</span> &#123;</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;max(double n1, double n2, int n3)&quot;</span>);</span><br><span class="line"><span class="comment">//求出n1 和  n2的最大值</span></span><br><span class="line"><span class="type">double</span> <span class="variable">max1</span> <span class="operator">=</span> n1 &gt; n2 ? n1 : n2;</span><br><span class="line"><span class="keyword">return</span> max1 &gt; n3 ? max1 : n3;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//分析</span></span><br><span class="line"><span class="comment">//1 方法名 m</span></span><br><span class="line"><span class="comment">//2 形参 (int) </span></span><br><span class="line"><span class="comment">//3.void</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">m</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;平方=&quot;</span> + (n * n));</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">//1 方法名 m</span></span><br><span class="line"><span class="comment">//2 形参 (int, int) </span></span><br><span class="line"><span class="comment">//3.void</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">m</span><span class="params">(<span class="type">int</span> n1, <span class="type">int</span> n2)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;相乘=&quot;</span> + (n1 * n2));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1 方法名 m</span></span><br><span class="line"><span class="comment">//2 形参 (String) </span></span><br><span class="line"><span class="comment">//3.void</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">m</span><span class="params">(String str)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;传入的str=&quot;</span> + str);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="五、可变参数"><a href="#五、可变参数" class="headerlink" title="五、可变参数"></a>五、可变参数</h1><blockquote><p>Java 允许将同一个类中多个<strong>同名同功能</strong>但<strong>参数个数不同</strong>的方法，封装成一个方法</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VarParameter01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">HspMethod</span> <span class="variable">m</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HspMethod</span>();</span><br><span class="line">System.out.println(m.sum(<span class="number">1</span>, <span class="number">5</span>, <span class="number">100</span>)); <span class="comment">//106</span></span><br><span class="line">System.out.println(m.sum(<span class="number">1</span>,<span class="number">19</span>)); <span class="comment">//20</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HspMethod</span> &#123;</span><br><span class="line"><span class="comment">//可以计算 2个数的和，3个数的和 ， 4. 5， 。。</span></span><br><span class="line"><span class="comment">//可以使用方法重载</span></span><br><span class="line"><span class="comment">// public int sum(int n1, int n2) &#123;//2个数的和</span></span><br><span class="line"><span class="comment">// return n1 + n2;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// public int sum(int n1, int n2, int n3) &#123;//3个数的和</span></span><br><span class="line"><span class="comment">// return n1 + n2 + n3;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// public int sum(int n1, int n2, int n3, int n4) &#123;//4个数的和</span></span><br><span class="line"><span class="comment">// return n1 + n2 + n3 + n4;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">//.....</span></span><br><span class="line"><span class="comment">//上面的三个方法名称相同，功能相同, 参数个数不同-&gt; 使用可变参数优化</span></span><br><span class="line"><span class="comment">//老韩解读</span></span><br><span class="line"><span class="comment">//1. int... 表示接受的是可变参数，类型是int ,即可以接收多个int(0-多) </span></span><br><span class="line"><span class="comment">//2. 使用可变参数时，可以当做数组来使用 即 nums 可以当做数组</span></span><br><span class="line"><span class="comment">//3. 遍历 nums 求和即可</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span>... nums)</span> &#123;</span><br><span class="line"><span class="comment">//System.out.println(&quot;接收的参数个数=&quot; + nums.length);</span></span><br><span class="line"><span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">res += nums[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-1-使用细节"><a href="#5-1-使用细节" class="headerlink" title="5.1 使用细节"></a>5.1 使用细节</h2><ol><li>可变参数实参可以为 0 或 任意多个</li><li>可变参数实参可以为数组</li><li>可变参数实参本质就是数组</li><li>可变参数可以和普通类型的参数放在一个形参列表, 但是可变参数必须在后面</li><li>一个形参列表中只能有一个可变参数</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VarParameterDetail</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//细节: 可变参数的实参可以为数组</span></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line"><span class="type">T</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">T</span>();</span><br><span class="line">t1.f1(arr);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">T</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">f1</span><span class="params">(<span class="type">int</span>... nums)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;长度=&quot;</span> + nums.length);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//细节: 可变参数可以和普通类型的参数一起放在形参列表，但必须保证可变参数在最后</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">f2</span><span class="params">(String str, <span class="type">double</span>... nums)</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//细节: 一个形参列表中只能出现一个可变参数</span></span><br><span class="line"><span class="comment">//下面的写法是错的.</span></span><br><span class="line"><span class="comment">// public void f3(int... nums1, double... nums2) &#123;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="5-2-练习"><a href="#5-2-练习" class="headerlink" title="5.2 练习"></a>5.2 练习</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VarParameterExercise</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">HspMethod</span> <span class="variable">hm</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HspMethod</span>();</span><br><span class="line">System.out.println(hm.showScore(<span class="string">&quot;milan&quot;</span> , <span class="number">90.1</span>, <span class="number">80.0</span> ));</span><br><span class="line">System.out.println(hm.showScore(<span class="string">&quot;terry&quot;</span> , <span class="number">90.1</span>, <span class="number">80.0</span>,<span class="number">10</span>,<span class="number">30.5</span>,<span class="number">70</span> ));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HspMethod</span>  &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">有三个方法，分别实现返回姓名和两门课成绩(总分)，</span></span><br><span class="line"><span class="comment">返回姓名和三门课成绩(总分)，返回姓名和五门课成绩（总分）。</span></span><br><span class="line"><span class="comment">封装成一个可变参数的方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//分析1. 方法名 showScore  2. 形参(String ,double... ) 3. 返回String</span></span><br><span class="line"><span class="comment">//听课小伙伴，老师要求必须自己动手写</span></span><br><span class="line"><span class="keyword">public</span> String  <span class="title function_">showScore</span><span class="params">(String name ,<span class="type">double</span>... scores )</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">double</span> <span class="variable">totalScore</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; scores.length; i++) &#123;</span><br><span class="line">totalScore += scores[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> name + <span class="string">&quot; 有 &quot;</span> +scores.length + <span class="string">&quot;门课的成绩总分为=&quot;</span> + totalScore;</span><br><span class="line">&#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><hr><h1 id="六、作用域"><a href="#六、作用域" class="headerlink" title="六、作用域"></a>六、作用域</h1><ol><li>在java编程中， 主要的变量就是属性 (成员变量) 和局部变量。</li><li>我们说的局部变量一般是指在成员方法中定义的变量。 [举例Cat类: cry]</li><li>java中作用域的分类<br>全局变量:也就是<strong>属性</strong>，作用域为整个类体Cat类: cry eat等方法使用属性<br>局部变量:也就是除了属性之外的其他变量，作用域为定义它的代码块中</li><li>全局变量 (属性) 可以不赋值，直接使用，因为有默认值 (与数组默认值一样)，局部变量必须赋值后才能使用，因为没有默认值</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VarScope</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line"><span class="comment">//全局变量：也就是属性，作用域为整个类体 Cat类：cry eat 等方法使用属性</span></span><br><span class="line"><span class="comment">//属性在定义时，可以直接赋值</span></span><br><span class="line"><span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">10</span>; <span class="comment">//指定的值是 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//全局变量(属性)可以不赋值，直接使用，因为有默认值，</span></span><br><span class="line"><span class="type">double</span> weight;  <span class="comment">//默认值是0.0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hi</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//局部变量必须赋值后，才能使用，因为没有默认值</span></span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">address</span> <span class="operator">=</span> <span class="string">&quot;北京的猫&quot;</span>;</span><br><span class="line">System.out.println(<span class="string">&quot;num=&quot;</span> + num);</span><br><span class="line">System.out.println(<span class="string">&quot;address=&quot;</span> + address);</span><br><span class="line">System.out.println(<span class="string">&quot;weight=&quot;</span> + weight);<span class="comment">//属性</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cry</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//1. 局部变量一般是指在成员方法中定义的变量</span></span><br><span class="line"><span class="comment">//2. n 和  name 就是局部变量</span></span><br><span class="line"><span class="comment">//3. n 和 name的作用域在 cry方法中</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;jack&quot;</span>;</span><br><span class="line">System.out.println(<span class="string">&quot;在cry中使用属性 age=&quot;</span> + age);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">eat</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;在eat中使用属性 age=&quot;</span> + age);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//System.out.println(&quot;在eat中使用 cry的变量 name=&quot; + name);//错误</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><p>属性和局部变量可以重名，访问时遵循就近原则。</p></li><li><p>在同一个作用域中，比如在同一个成员方法中，两个局部变量，不能重名</p></li><li><p>属性生命周期较长，伴随着对象的创建而创建，伴随着对象的销毁而销毁。</p><p>局部变量，生命周期较短，伴随着它的代码块的执行而创建，伴随着代码块的结束而销毁。即在一次方法调用过程中。</p></li><li><p>作用域范围不同<br>全局变量&#x2F;属性:可以被本类使用，或其他类使用(通过对象调用)<br>局部变量:只能在本类中对应的方法中使用</p></li><li><p>修饰符不同<br>全局变量&#x2F;属性可以加修饰符<br>局部变量不可以加修饰符</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VarScopeDetail</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">属性生命周期较长，伴随着对象的创建而创建，伴随着对象的销毁而销毁。</span></span><br><span class="line"><span class="comment">局部变量，生命周期较短，伴随着它的代码块的执行而创建，</span></span><br><span class="line"><span class="comment">伴随着代码块的结束而销毁。即在一次方法调用过程中</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//p1.say();//当执行say方法时，say方法的局部变量比如name,会创建，当say执行完毕后</span></span><br><span class="line"><span class="comment">//name局部变量就销毁,但是属性(全局变量)仍然可以使用</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="type">T</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">T</span>();</span><br><span class="line">t1.test(); <span class="comment">//第1种跨类访问对象属性的方式</span></span><br><span class="line"></span><br><span class="line">t1.test2(p1);<span class="comment">//第2种跨类访问对象属性的方式</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">T</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//全局变量/属性：可以被本类使用，或其他类使用（通过对象调用)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">System.out.println(p1.name);<span class="comment">//jack</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">(Person p)</span> &#123;</span><br><span class="line">System.out.println(p.name);<span class="comment">//jack</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="comment">//细节: 属性可以加修饰符(public protected private..)</span></span><br><span class="line"><span class="comment">//      局部变量不能加修饰符</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;jack&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">say</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//细节 属性和局部变量可以重名，访问时遵循就近原则</span></span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;king&quot;</span>;</span><br><span class="line">System.out.println(<span class="string">&quot;say() name=&quot;</span> + name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hi</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">address</span> <span class="operator">=</span> <span class="string">&quot;北京&quot;</span>;</span><br><span class="line"><span class="comment">//String address = &quot;上海&quot;;//错误,重复定义变量</span></span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;hsp&quot;</span>;<span class="comment">//可以</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="七、构造器"><a href="#七、构造器" class="headerlink" title="七、构造器"></a>七、构造器</h1><p>基本语法：</p><p>​[修饰符] 方法名(形参列表){</p><p>​方法体;</p><p>​}</p><ol><li><p>构造器的修饰符可以默认， 也可以是 public protected private</p></li><li><p>构造器没有返回值</p></li><li><p>方法名 和类名字必须一样</p></li><li><p>参数列表 和 成员方法一样的规则</p></li><li><p>构造器的调用, 由系统完成</p></li></ol><p>构造方法又叫构造器(constructor)，是类的一种特殊的方法，它的主要作用是完成对新对象的初始化。它有几个特点：</p><ol><li><p>方法名和类名相同</p></li><li><p>没有返回值</p></li><li><p>在创建对象时，系统会自动的调用该类的构造器完成对象的初始化。</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Constructor01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//当我们new 一个对象时，直接通过构造器指定名字和年龄</span></span><br><span class="line"><span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;smith&quot;</span>, <span class="number">80</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;p1的信息如下&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;p1对象name=&quot;</span> + p1.name);<span class="comment">//smith</span></span><br><span class="line">System.out.println(<span class="string">&quot;p1对象age=&quot;</span> + p1.age);<span class="comment">//80</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//在创建人类的对象时，就直接指定这个对象的年龄和姓名</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">String name;</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line"><span class="comment">//构造器</span></span><br><span class="line"><span class="comment">//老韩解读</span></span><br><span class="line"><span class="comment">//1. 构造器没有返回值, 也不能写void</span></span><br><span class="line"><span class="comment">//2. 构造器的名称和类Person一样</span></span><br><span class="line"><span class="comment">//3. (String pName, int pAge) 是构造器形参列表，规则和成员方法一样</span></span><br><span class="line"><span class="keyword">public</span>  <span class="title function_">Person</span><span class="params">(String pName, <span class="type">int</span> pAge)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;构造器被调用~~ 完成对象的属性初始化&quot;</span>);</span><br><span class="line">name = pName;</span><br><span class="line">age = pAge;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="7-1-使用细节"><a href="#7-1-使用细节" class="headerlink" title="7.1 使用细节"></a>7.1 使用细节</h2><ol><li>一个类可以定义多个不同的构造器，即构造器重载<br>比如: 我们可以再给Person类定义个构造器用来创建对象的时候，只指定人名，不需要指定年龄</li><li>构造器名和类名要相同</li><li>构造器没有返回值</li><li>构造器是完成对象的初始化，并不是创建对象</li><li>在创建对象时,系统自动的调用该类的构造方法</li><li>如果程序员没有定义构造器，系统会自动给类生成一个默认无参构造器(也叫默认构造器)，比如Dog (){},使用javap指令反编译看看</li><li>一旦定义了自己的构造器，默认的构造器就覆盖了，就不能再使用默认的无参构造器，除非显式的定义一下</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConstructorDetail</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;king&quot;</span>, <span class="number">40</span>);<span class="comment">//第1个构造器</span></span><br><span class="line"><span class="type">Person</span> <span class="variable">p2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;tom&quot;</span>);<span class="comment">//第2个构造器</span></span><br><span class="line"></span><br><span class="line"><span class="type">Dog</span> <span class="variable">dog1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>();<span class="comment">//使用的是默认的无参构造器</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line"><span class="comment">//如果程序员没有定义构造器，系统会自动给类生成一个默认无参构造器(也叫默认构造器)</span></span><br><span class="line"><span class="comment">//使用javap指令 反编译看看</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">默认构造器</span></span><br><span class="line"><span class="comment">Dog() &#123;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//一旦定义了自己的构造器,默认的构造器就覆盖了，就不能再使用默认的无参构造器，</span></span><br><span class="line"><span class="comment">//除非显式的定义一下,即:  Dog()&#123;&#125;  写 (这点很重要)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Dog</span><span class="params">(String dName)</span> &#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line">Dog() &#123; <span class="comment">//显式的定义一下 无参构造器</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">String name;</span><br><span class="line"><span class="type">int</span> age;<span class="comment">//默认0</span></span><br><span class="line"><span class="comment">//第1个构造器</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String pName, <span class="type">int</span> pAge)</span> &#123;</span><br><span class="line">name = pName;</span><br><span class="line">age = pAge;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//第2个构造器, 只指定人名，不需要指定年龄</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String pName)</span> &#123;</span><br><span class="line">name = pName;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="7-2-练习"><a href="#7-2-练习" class="headerlink" title="7.2 练习"></a>7.2 练习</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConstructorExercise</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();<span class="comment">//无参构造器</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//下面输出 name = null, age = 18</span></span><br><span class="line">System.out.println(<span class="string">&quot;p1的信息 name=&quot;</span> + p1.name + <span class="string">&quot; age=&quot;</span> + p1.age);</span><br><span class="line"></span><br><span class="line"><span class="type">Person</span> <span class="variable">p2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;scott&quot;</span>, <span class="number">50</span>);</span><br><span class="line"><span class="comment">//下面输出 name = scott, age = 50</span></span><br><span class="line">System.out.println(<span class="string">&quot;p2的信息 name=&quot;</span> + p2.name + <span class="string">&quot; age=&quot;</span> + p2.age);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 在前面定义的Person类中添加两个构造器:</span></span><br><span class="line"><span class="comment"> * 第一个无参构造器：利用构造器设置所有人的age属性初始值都为18</span></span><br><span class="line"><span class="comment"> * 第二个带pName和pAge两个参数的构造器：</span></span><br><span class="line"><span class="comment"> * 使得每次创建Person对象的同时初始化对象的age属性值和name属性值。</span></span><br><span class="line"><span class="comment"> * 分别使用不同的构造器，创建对象.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">String name;<span class="comment">//默认值 null</span></span><br><span class="line"><span class="type">int</span> age;<span class="comment">//默认 0</span></span><br><span class="line"><span class="comment">//第一个无参构造器：利用构造器设置所有人的age属性初始值都为18</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span> &#123;</span><br><span class="line">age = <span class="number">18</span>;<span class="comment">//</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//第二个带pName和pAge两个参数的构造器</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String pName, <span class="type">int</span> pAge)</span> &#123;</span><br><span class="line">name = pName;</span><br><span class="line">age = pAge;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="八、对象创建流程分析-面试"><a href="#八、对象创建流程分析-面试" class="headerlink" title="八、对象创建流程分析 (面试)"></a>八、对象创建流程分析 (面试)</h1><ol><li>在方法区中加载 <code>Person</code> 类信息 (Person.class), 只会加载一次</li><li>在堆区中为新 <code>new</code> 的对象分配空间, 具有一个内存地址</li><li>先进行属性的默认初始化, <code>age = 0, name = null</code></li><li>然后进行属性的显示初始化, <code>age = 90, name = null</code></li><li>最后进行构造器的初始化, <code>age = 20, name = &quot;小倩&quot;</code></li><li>将对象在堆区中的地址返回给变量 <code>p</code>, 这个 <code>p</code> 是对象名, 也可以说是对象的引用, 真正的对象是堆区中开辟的那块空间, <code>p</code> 只是一个代理</li></ol><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230130214107797.png" alt="分析流程"></p><hr><h1 id="十、this"><a href="#十、this" class="headerlink" title="十、this"></a>十、this</h1><h2 id="10-1-问题引出"><a href="#10-1-问题引出" class="headerlink" title="10.1 问题引出"></a>10.1 问题引出</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">This01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">Dog</span> <span class="variable">dog1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;大壮&quot;</span>, <span class="number">3</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;dog1的hashcode=&quot;</span> + dog1.hashCode());</span><br><span class="line"><span class="comment">//dog1调用了 info()方法</span></span><br><span class="line">dog1.info(); </span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;============&quot;</span>);</span><br><span class="line"><span class="type">Dog</span> <span class="variable">dog2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;大黄&quot;</span>, <span class="number">2</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;dog2的hashcode=&quot;</span> + dog2.hashCode());</span><br><span class="line">dog2.info();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>&#123; <span class="comment">//类</span></span><br><span class="line"></span><br><span class="line">String name;</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line"><span class="comment">// public Dog(String dName, int  dAge)&#123;//构造器</span></span><br><span class="line"><span class="comment">// name = dName;</span></span><br><span class="line"><span class="comment">// age = dAge;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">//如果我们构造器的形参，能够直接写成属性名，就更好了</span></span><br><span class="line"><span class="comment">//但是出现了一个问题，根据变量的作用域原则</span></span><br><span class="line"><span class="comment">//构造器的name 是局部变量，而不是属性</span></span><br><span class="line"><span class="comment">//构造器的age  是局部变量，而不是属性</span></span><br><span class="line"><span class="comment">//==&gt; 引出this关键字来解决</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Dog</span><span class="params">(String name, <span class="type">int</span>  age)</span>&#123;<span class="comment">//构造器</span></span><br><span class="line"><span class="comment">//this.name 就是当前对象的属性name</span></span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line"><span class="comment">//this.age 就是当前对象的属性age</span></span><br><span class="line"><span class="built_in">this</span>.age = age;</span><br><span class="line">System.out.println(<span class="string">&quot;this.hashCode=&quot;</span> + <span class="built_in">this</span>.hashCode());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">info</span><span class="params">()</span>&#123;<span class="comment">//成员方法,输出属性x信息</span></span><br><span class="line">System.out.println(<span class="string">&quot;this.hashCode=&quot;</span> + <span class="built_in">this</span>.hashCode());</span><br><span class="line">System.out.println(name + <span class="string">&quot;\t&quot;</span> + age + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="10-2-深入理解-this"><a href="#10-2-深入理解-this" class="headerlink" title="10.2 深入理解 this"></a>10.2 深入理解 this</h2><p><code>this</code> 就是每个对象创建之后赋予的一个隐藏属性, 哪个对象调用, <code>this</code> 就代表哪个对象 (字面意思, this 的值就是这个对象在堆区的地址)</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230130214921509.png" alt="this 在内存中的机制"></p><hr><h2 id="10-3-使用细节"><a href="#10-3-使用细节" class="headerlink" title="10.3 使用细节"></a>10.3 使用细节</h2><ol><li><p>this 关键字可以用来访问本类的属性、方法、构造器</p></li><li><p>this 用于区分当前类的属性和局部变量</p></li><li><p>访问成员方法的语法：this.方法名(参数列表);</p></li><li><p>访问构造器语法：this(参数列表); 注意只能在构造器中使用(即只能在构造器中访问另外一个构造器, 必须放在第一条语句)</p></li><li><p>this 不能在类定义的外部使用，只能在类定义的方法中使用</p></li></ol><hr><h2 id="10-4-练习"><a href="#10-4-练习" class="headerlink" title="10.4 练习"></a>10.4 练习</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPerson</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">Person</span> <span class="variable">p1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;mary&quot;</span>, <span class="number">20</span>);</span><br><span class="line"><span class="type">Person</span> <span class="variable">p2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;mary&quot;</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;p1和p2比较的结果=&quot;</span> + p1.compareTo(p2));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">定义Person类，里面有name、age属性，并提供compareTo比较方法，</span></span><br><span class="line"><span class="comment">用于判断是否和另一个人相等，提供测试类TestPerson用于测试, </span></span><br><span class="line"><span class="comment">名字和年龄完全一样，就返回true, 否则返回false</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">String name;</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line"><span class="comment">//构造器</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line"><span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//compareTo比较方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">compareTo</span><span class="params">(Person p)</span> &#123;</span><br><span class="line"><span class="comment">//名字和年龄完全一样</span></span><br><span class="line"><span class="comment">// if(this.name.equals(p.name) &amp;&amp; this.age == p.age) &#123;</span></span><br><span class="line"><span class="comment">// return true;</span></span><br><span class="line"><span class="comment">// &#125; else &#123;</span></span><br><span class="line"><span class="comment">// return false;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>.name.equals(p.name) &amp;&amp; <span class="built_in">this</span>.age == p.age;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="十一、练习"><a href="#十一、练习" class="headerlink" title="十一、练习"></a>十一、练习</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">A01</span> <span class="variable">a01</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A01</span>();</span><br><span class="line"><span class="type">double</span>[] arr = &#123;<span class="number">1</span>, <span class="number">1.4</span>, -<span class="number">1.3</span>, <span class="number">89.8</span>, <span class="number">123.8</span> , <span class="number">66</span>&#125;; <span class="comment">//;&#123;&#125;;</span></span><br><span class="line"><span class="type">Double</span> <span class="variable">res</span> <span class="operator">=</span> a01.max(arr);</span><br><span class="line"><span class="keyword">if</span>(res != <span class="literal">null</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;arr的最大值=&quot;</span> + res);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;arr的输入有误, 数组不能为null, 或者&#123;&#125;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">编写类A01，定义方法max，实现求某个double数组的最大值，并返回</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">思路分析</span></span><br><span class="line"><span class="comment">1. 类名 A01</span></span><br><span class="line"><span class="comment">2. 方法名 max</span></span><br><span class="line"><span class="comment">3. 形参 (double[])</span></span><br><span class="line"><span class="comment">4. 返回值 double</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">先完成正常业务，然后再考虑代码健壮性</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A01</span> &#123;</span><br><span class="line"><span class="keyword">public</span> Double <span class="title function_">max</span><span class="params">(<span class="type">double</span>[] arr)</span> &#123;</span><br><span class="line"><span class="comment">//老韩先判断arr是否为null,然后再判断 length 是否&gt;0</span></span><br><span class="line"><span class="keyword">if</span>( arr!= <span class="literal">null</span> &amp;&amp; arr.length &gt; <span class="number">0</span> ) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//保证arr至少有一个元素 </span></span><br><span class="line"><span class="type">double</span> <span class="variable">max</span> <span class="operator">=</span> arr[<span class="number">0</span>];<span class="comment">//假定第一个元素就是最大值</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(max &lt; arr[i]) &#123;</span><br><span class="line">max = arr[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> max;<span class="comment">//double</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework02</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">String[] strs = &#123;<span class="string">&quot;jack&quot;</span>, <span class="string">&quot;tom&quot;</span>, <span class="string">&quot;mary&quot;</span>,<span class="string">&quot;milan&quot;</span>&#125;;</span><br><span class="line"><span class="type">A02</span> <span class="variable">a02</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A02</span>();</span><br><span class="line"><span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> a02.find(<span class="string">&quot;milan&quot;</span>, strs);</span><br><span class="line">System.out.println(<span class="string">&quot;查找的index=&quot;</span> + index);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编写类A02，定义方法find，实现查找某字符串是否在字符串数组中，</span></span><br><span class="line"><span class="comment">//并返回索引，如果找不到，返回-1</span></span><br><span class="line"><span class="comment">//分析</span></span><br><span class="line"><span class="comment">//1. 类名 A02</span></span><br><span class="line"><span class="comment">//2. 方法名 find</span></span><br><span class="line"><span class="comment">//3. 返回值 int</span></span><br><span class="line"><span class="comment">//4. 形参 (String , String[])</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//自己补充代码健壮性</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A02</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(String findStr, String[] strs)</span> &#123;</span><br><span class="line"><span class="comment">//直接遍历字符串数组，如果找到，则返回索引</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; strs.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(findStr.equals(strs[i])) &#123;</span><br><span class="line"><span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//如果没有，就返回-1</span></span><br><span class="line"><span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework03</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//测试</span></span><br><span class="line"><span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>(<span class="string">&quot;笑傲江湖&quot;</span>, <span class="number">300</span>);</span><br><span class="line">book.info();</span><br><span class="line">book.updatePrice();<span class="comment">//更新价格</span></span><br><span class="line">book.info();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">编写类Book,  定义方法updatePrice，实现更改某本书的价格，</span></span><br><span class="line"><span class="comment">具体：如果价格&gt;150,则更改为150，如果价格&gt;100,更改为100，否则不变</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">分析</span></span><br><span class="line"><span class="comment">1. 类名 Book</span></span><br><span class="line"><span class="comment">2. 属性 price, name</span></span><br><span class="line"><span class="comment">3. 方法名 updatePrice</span></span><br><span class="line"><span class="comment">4. 形参 ()</span></span><br><span class="line"><span class="comment">5. 返回值 void</span></span><br><span class="line"><span class="comment">6. 提供一个构造器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span> &#123;</span><br><span class="line">String name;</span><br><span class="line"><span class="type">double</span> price;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Book</span><span class="params">(String name, <span class="type">double</span> price)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line"><span class="built_in">this</span>.price = price;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updatePrice</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//如果方法中，没有 price 局部变量, this.price 等价 price</span></span><br><span class="line"><span class="keyword">if</span>(price &gt; <span class="number">150</span>) &#123;</span><br><span class="line">price = <span class="number">150</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(price &gt; <span class="number">100</span> ) &#123;</span><br><span class="line">price = <span class="number">100</span>;</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//显示书籍情况</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">info</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;书名=&quot;</span> + <span class="built_in">this</span>.name + <span class="string">&quot; 价格=&quot;</span> + <span class="built_in">this</span>.price);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework04</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">int</span>[] oldArr = &#123;<span class="number">10</span>, <span class="number">30</span>, <span class="number">50</span>&#125;;</span><br><span class="line"><span class="type">A03</span> <span class="variable">a03</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A03</span>();</span><br><span class="line"><span class="type">int</span>[] newArr = a03.copyArr(oldArr);</span><br><span class="line"><span class="comment">//遍历newArr,验证</span></span><br><span class="line">System.out.println(<span class="string">&quot;==返回的newArr元素情况==&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; newArr.length; i++) &#123;</span><br><span class="line">System.out.print(newArr[i] + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">编写类A03, 实现数组的复制功能copyArr，输入旧数组，返回一个新数组，元素和旧数组一样</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A03</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span>[] copyArr(<span class="type">int</span>[] oldArr) &#123;</span><br><span class="line"><span class="comment">//在堆中，创建一个长度为 oldArr.length 数组</span></span><br><span class="line"><span class="type">int</span>[] newArr = <span class="keyword">new</span> <span class="title class_">int</span>[oldArr.length];</span><br><span class="line"><span class="comment">//遍历 oldArr,将元素拷贝到 newArr</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; oldArr.length; i++) &#123;</span><br><span class="line">newArr[i] = oldArr[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> newArr;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework05</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">Circle</span> <span class="variable">circle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Circle</span>(<span class="number">3</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;面积=&quot;</span> + circle.area());</span><br><span class="line">System.out.println(<span class="string">&quot;周长=&quot;</span> + circle.len());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">定义一个圆类Circle, 定义属性：半径，提供显示圆周长功能的方法， 提供显示圆面积的方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line"><span class="type">double</span> radius;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Circle</span><span class="params">(<span class="type">double</span> radius)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.radius = radius;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">area</span><span class="params">()</span> &#123; <span class="comment">//面积</span></span><br><span class="line"><span class="keyword">return</span> Math.PI * radius * radius;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">len</span><span class="params">()</span> &#123; <span class="comment">//周长</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">2</span> * Math.PI * radius;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework06</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">Cale</span> <span class="variable">cale</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cale</span>(<span class="number">2</span>, <span class="number">10</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;和=&quot;</span> + cale.sum());</span><br><span class="line">System.out.println(<span class="string">&quot;差=&quot;</span> + cale.minus());</span><br><span class="line">System.out.println(<span class="string">&quot;乘=&quot;</span> + cale.mul());</span><br><span class="line"><span class="type">Double</span> <span class="variable">divRes</span> <span class="operator">=</span> cale.div();</span><br><span class="line"><span class="keyword">if</span>(divRes != <span class="literal">null</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;除=&quot;</span> + divRes);</span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> 编程创建一个Cale计算类，在其中定义2个变量表示两个操作数，</span></span><br><span class="line"><span class="comment"> 定义四个方法实现求和、差、乘、商(要求除数为0的话，要提示) 并创建两个对象，分别测试 </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cale</span> &#123;</span><br><span class="line"><span class="type">double</span> num1;</span><br><span class="line"><span class="type">double</span> num2;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Cale</span><span class="params">(<span class="type">double</span> num1, <span class="type">double</span> num2)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.num1 = num1;</span><br><span class="line"><span class="built_in">this</span>.num2 = num2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//和</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">sum</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> num1 + num2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//差</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">minus</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> num1 - num2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//乘积</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">mul</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> num1 * num2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//除法</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">public</span> Double <span class="title function_">div</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//判断</span></span><br><span class="line"><span class="keyword">if</span>(num2 == <span class="number">0</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;num2 不能为0&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span> num1 / num2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework09</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">Music</span> <span class="variable">music</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Music</span>(<span class="string">&quot;笑傲江湖&quot;</span>, <span class="number">300</span>);</span><br><span class="line">music.play();</span><br><span class="line">System.out.println(music.getInfo());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">义Music类，里面有音乐名name、音乐时长times属性，</span></span><br><span class="line"><span class="comment">并有播放play功能和返回本身属性信息的功能方法getInfo</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Music</span> &#123;</span><br><span class="line">String name;</span><br><span class="line"><span class="type">int</span> times;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Music</span><span class="params">(String name, <span class="type">int</span> times)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line"><span class="built_in">this</span>.times = times;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//播放play功能</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">play</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;音乐 &quot;</span> + name + <span class="string">&quot; 正在播放中.... 时长为&quot;</span> + times + <span class="string">&quot;秒&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//返回本身属性信息的功能方法getInfo</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getInfo</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;音乐 &quot;</span> + name + <span class="string">&quot; 播放时间为&quot;</span> + times;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework10</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Demo</span>&#123;</span><br><span class="line"><span class="type">int</span> i=<span class="number">100</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">m</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="type">int</span> j=i++; </span><br><span class="line">System.out.println(<span class="string">&quot;i=&quot;</span>+i);</span><br><span class="line">System.out.println(<span class="string">&quot;j=&quot;</span>+j);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;<span class="comment">//运行它</span></span><br><span class="line">Demo d1=<span class="keyword">new</span> <span class="title class_">Demo</span>();</span><br><span class="line"><span class="type">Demo</span> <span class="variable">d2</span> <span class="operator">=</span> d1;</span><br><span class="line">d2.m();</span><br><span class="line">System.out.println(d1.i);</span><br><span class="line">System.out.println(d2.i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework12</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">创建一个Employee类， </span></span><br><span class="line"><span class="comment">属性有(名字，性别，年龄，职位，薪水)， 提供3个构造方法，可以初始化  </span></span><br><span class="line"><span class="comment">(1) (名字，性别，年龄，职位，薪水), </span></span><br><span class="line"><span class="comment">(2) (名字，性别，年龄) (3) (职位，薪水), 要求充分复用构造器  </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line"><span class="comment">//名字，性别，年龄，职位，薪水</span></span><br><span class="line">String name;</span><br><span class="line"><span class="type">char</span> gender;</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line">String job;</span><br><span class="line"><span class="type">double</span> sal;</span><br><span class="line"><span class="comment">//因为要求可以复用构造器，因此老韩先写属性少的构造器</span></span><br><span class="line"><span class="comment">//职位，薪水</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">(String job, <span class="type">double</span> sal)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.job = job;</span><br><span class="line"><span class="built_in">this</span>.sal = sal;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//名字，性别，年龄</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">(String name, <span class="type">char</span> gender, <span class="type">int</span> age)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line"><span class="built_in">this</span>.gender = gender;</span><br><span class="line"><span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//名字，性别，年龄，职位，薪水</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">(String job, <span class="type">double</span> sal, String name, <span class="type">char</span> gender, <span class="type">int</span> age)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>(name, gender, age);<span class="comment">//使用到 前面的 构造器</span></span><br><span class="line"><span class="built_in">this</span>.job = job;</span><br><span class="line"><span class="built_in">this</span>.sal = sal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework13</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">Circle</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Circle</span>();</span><br><span class="line"><span class="type">PassObject</span> <span class="variable">po</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PassObject</span>();</span><br><span class="line">po.printAreas(c, <span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">题目要求：</span></span><br><span class="line"><span class="comment">(1) 定义一个Circle类，包含一个double型的radius属性代表圆的半径，findArea()方法返回圆的面积。</span></span><br><span class="line"><span class="comment">(2) 定义一个类PassObject，在类中定义一个方法printAreas()，该方法的定义如下：</span></span><br><span class="line"><span class="comment">     public void printAreas(Circle c, int times) //方法签名/声明</span></span><br><span class="line"><span class="comment">(3) 在printAreas方法中打印输出1到times之间的每个整数半径值，以及对应的面积。例如，times为5，则输出半径1，2，3，4，5，以及对应的圆面积。</span></span><br><span class="line"><span class="comment">(4) 在main方法中调用printAreas()方法，调用完毕后输出当前半径值。程序运行结果如图所示</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> &#123; <span class="comment">//类</span></span><br><span class="line"><span class="type">double</span> radius;<span class="comment">//半径</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Circle</span><span class="params">()</span> &#123; <span class="comment">//无参构造器</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Circle</span><span class="params">(<span class="type">double</span> radius)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.radius = radius;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">findArea</span><span class="params">()</span> &#123;<span class="comment">//返回面积</span></span><br><span class="line"><span class="keyword">return</span> Math.PI * radius * radius;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//添加方法setRadius, 修改对象的半径值</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRadius</span><span class="params">(<span class="type">double</span> radius)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.radius = radius;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PassObject</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printAreas</span><span class="params">(Circle c, <span class="type">int</span> times)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;radius\tarea&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= times; i++) &#123;<span class="comment">//输出1到times之间的每个整数半径值</span></span><br><span class="line">c.setRadius(i) ; <span class="comment">//修改c 对象的半径值</span></span><br><span class="line">System.out.println((<span class="type">double</span>)i + <span class="string">&quot;\t&quot;</span> + c.findArea());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;   <span class="comment">//公有类</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">9</span>; <span class="comment">//属性</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">count1</span><span class="params">()</span> &#123; <span class="comment">//Test类的成员方法</span></span><br><span class="line"> count=<span class="number">10</span>;<span class="comment">//这个count就是属性  改成 10</span></span><br><span class="line">        System.out.println(<span class="string">&quot;count1=&quot;</span> + count); <span class="comment">//10  </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">count2</span><span class="params">()</span> &#123;  <span class="comment">//Test类的成员方法</span></span><br><span class="line">        System.out.println(<span class="string">&quot;count1=&quot;</span> + count++);</span><br><span class="line">    &#125; </span><br><span class="line">   </span><br><span class="line">   <span class="comment">//这是Test类的main方法, 任何一个类，都可有main</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">       <span class="comment">//老韩解读</span></span><br><span class="line">       <span class="comment">//1.  new Test()是匿名对象， 匿名对象使用后，就不能使用</span></span><br><span class="line">       <span class="comment">//2.  new Test().count1() 创建好匿名对象后, 就调用count1()</span></span><br><span class="line">       <span class="keyword">new</span> <span class="title class_">Test</span>().count1(); </span><br><span class="line">      </span><br><span class="line">       Test t1= <span class="keyword">new</span> <span class="title class_">Test</span>();</span><br><span class="line">       t1.count2();</span><br><span class="line">       t1.count2();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java学习（一）-- Java基础</title>
      <link href="/2023/01/26/Java%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89--%20Java%E5%9F%BA%E7%A1%80/"/>
      <url>/2023/01/26/Java%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89--%20Java%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="Java学习（一）–-Java基础"><a href="#Java学习（一）–-Java基础" class="headerlink" title="Java学习（一）– Java基础"></a>Java学习（一）– Java基础</h1><blockquote><p><a href="https://www.bilibili.com/video/BV1fh411y7R8/?spm_id_from=333.999.0.0&amp;vd_source=594d36a0860080a36fe599e0b84e5fb2">https://www.bilibili.com/video/BV1fh411y7R8/?spm_id_from=333.999.0.0&amp;vd_source=594d36a0860080a36fe599e0b84e5fb2</a></p></blockquote><h1 id="一、Java概述"><a href="#一、Java概述" class="headerlink" title="一、Java概述"></a>一、Java概述</h1><h2 id="1-1-Java特性"><a href="#1-1-Java特性" class="headerlink" title="1.1 Java特性"></a>1.1 Java特性</h2><ol><li><p>Java 语言是面向对象的(<strong>oop</strong>)</p></li><li><p>Java 语言是健壮的。Java 的强类型机制、异常处理、垃圾的自动收集等是 Java 程序健壮性的重要保证</p></li><li><p>Java 语言是<strong>跨平台性的</strong>。(即: 一个编译好的 .class 文件可以在多个系统下运行，这种特性称为跨平台)</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230102173050737.png" alt="Java的跨平台性"></p></li><li><p>Java 语言是解释型的</p><p>解释性语言：<code>javascript</code>, <code>PHP</code>, <code>Java</code> 编译性语言: <code>c / c++</code></p><p>区别是：解释性语言，编译后的代码，不能直接被机器执行,需要解释器来执行, 编译性语言, 编译后的代码, 可以直接被机器执行: <code>c /c++</code></p></li></ol><hr><h2 id="1-2-Java运行机制及过程"><a href="#1-2-Java运行机制及过程" class="headerlink" title="1.2 Java运行机制及过程"></a>1.2 Java运行机制及过程</h2><h3 id="1-2-1-跨平台性"><a href="#1-2-1-跨平台性" class="headerlink" title="1.2.1 跨平台性"></a>1.2.1 跨平台性</h3><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230102173215898.png" alt="跨平台性"></p><h3 id="1-2-2-Java虚拟机-–-JVM"><a href="#1-2-2-Java虚拟机-–-JVM" class="headerlink" title="1.2.2 Java虚拟机 – JVM"></a>1.2.2 Java虚拟机 – JVM</h3><blockquote><p>JVM <code>Java Virtual Machine</code></p></blockquote><ol><li><code>JVM</code> 是一个虚拟的计算机，具有指令集并使用不同的存储区域。负责执行指令，管理数据、内存、寄存器，包含在 <code>JDK</code> 中</li><li>对于不同的平台，有不同的虚拟机</li><li>Java 虚拟机机制屏蔽了底层运行平台的差别，实现了“一次编译，到处运行”</li></ol><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230102173434901.png" alt="不同平台的不同虚拟机"></p><h3 id="1-2-3-Java开发工具包-–-JDK"><a href="#1-2-3-Java开发工具包-–-JDK" class="headerlink" title="1.2.3 Java开发工具包 – JDK"></a>1.2.3 Java开发工具包 – JDK</h3><blockquote><p>JDK <code>Java Development Kit</code></p></blockquote><ol><li>JDK &#x3D; JRE + Java 的开发工具集（例如 Javac, Java 编译工具等)</li><li>JDK 是提供给 Java 开发人员使用的，其中包含了 java 的开发工具，也包括了 JRE。所以安装了 JDK，就不用在单独安装 JRE 了</li></ol><h3 id="1-2-4-Java运行环境-–-JRE"><a href="#1-2-4-Java运行环境-–-JRE" class="headerlink" title="1.2.4 Java运行环境 – JRE"></a>1.2.4 Java运行环境 – JRE</h3><blockquote><p>JRE <code>Java Runtime Environment</code></p></blockquote><ol><li><p>JRE &#x3D; JVM +  Java SE 标准类库 ( Java 的核心类库 )</p></li><li><p>包括 Java 虚拟机 ( <code>JVM Java Virtual Machine</code> ) 和 Java 程序所需的核心类库等，</p><p>如果想要运行一个开发好的 Java 程序，计算机中只需要安装 JRE 即可</p></li></ol><hr><h2 id="1-3-JDK的下载安装"><a href="#1-3-JDK的下载安装" class="headerlink" title="1.3 JDK的下载安装"></a>1.3 JDK的下载安装</h2><blockquote><p>本博客不包含此目的, 请自行百度</p></blockquote><hr><h2 id="1-4-Java-快速入门"><a href="#1-4-Java-快速入门" class="headerlink" title="1.4 Java 快速入门"></a>1.4 Java 快速入门</h2><p>键入 <code>main + Enter</code> 快速生成 <code>public static void main(String[] args) &#123;&#125;</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一个源文件中最多只能有一个 public 类, 其他类个数不限</span></span><br><span class="line"><span class="comment">//编译后, 每一个类都对应一个 .class 文件</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="comment">// main 方法也可以写在非 public 类中</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;Hello world!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="1-4-1-开发步骤"><a href="#1-4-1-开发步骤" class="headerlink" title="1.4.1 开发步骤"></a>1.4.1 开发步骤</h3><ol><li>将 Java 代码编写到扩展名为 .java 的文件中</li><li>通过 javac 命令对该 java 文件进行编译，生成 .class 文件</li><li>通过 java 命令对生成的 class 文件进行运行</li></ol><h3 id="1-4-2-运行原理"><a href="#1-4-2-运行原理" class="headerlink" title="1.4.2 运行原理"></a>1.4.2 运行原理</h3><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230102174440340.png" alt="运行原理"></p><h3 id="1-4-3-执行流程"><a href="#1-4-3-执行流程" class="headerlink" title="1.4.3 执行流程"></a>1.4.3 执行流程</h3><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230102174643629.png" alt="执行流程"></p><h3 id="1-4-4-细节说明"><a href="#1-4-4-细节说明" class="headerlink" title="1.4.4 细节说明"></a>1.4.4 细节说明</h3><ol><li>Java 源文件扩展名为 .java, 源文件基本组成部分是类 (class)</li><li>Java 程序入口是 <code>main()</code> 方法, 书写格式固定: <code>public static void main(String[] args) &#123;&#125;</code></li><li>Java 严格区分大小写</li><li>每个语句以 <code>;</code> 结束</li><li>注意大括号 <code>&#123;&#125;</code></li><li>一个源文件中只能有 1 个 <code>public</code> 类, 其他类个数不限</li><li>如果源文件中有一个 <code>public</code> 类, 则源文件名要与 <code>public</code> 类名相同</li><li>可以将 <code>main</code> 方法写在 非 <code>public</code> 类 中, 运行非 <code>public</code> 类, 入口见就是非 <code>public</code> 类中的 <code>main</code> 方法</li></ol><hr><h2 id="1-5-快速学会-Java"><a href="#1-5-快速学会-Java" class="headerlink" title="1.5 快速学会 Java"></a>1.5 快速学会 Java</h2><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230102175210039.png" alt="快速学会Java"></p><hr><h2 id="1-6-Java-转义字符"><a href="#1-6-Java-转义字符" class="headerlink" title="1.6 Java 转义字符"></a>1.6 Java 转义字符</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//\t ：一个制表位，实现对齐的功能</span></span><br><span class="line">System.out.println(<span class="string">&quot;北京\t 天津\t 上海&quot;</span>);</span><br><span class="line"><span class="comment">// \n ：换行符</span></span><br><span class="line">System.out.println(<span class="string">&quot;jack\nsmith\nmary&quot;</span>);</span><br><span class="line"><span class="comment">// \\ ：一个\ \\</span></span><br><span class="line">System.out.println(<span class="string">&quot;C:\\Windows\\System32\\cmd.exe&quot;</span>);</span><br><span class="line"><span class="comment">// \&quot; :一个&quot;</span></span><br><span class="line">System.out.println(<span class="string">&quot;老韩说:\&quot;要好好学习 java,有前途\&quot;&quot;</span>);</span><br><span class="line"><span class="comment">// \&#x27; ：一个&#x27;</span></span><br><span class="line">System.out.println(<span class="string">&quot;老韩说:\&#x27;要好好学习 java,有前途\&#x27;&quot;</span>);</span><br><span class="line"><span class="comment">// \r :一个回车</span></span><br><span class="line">System.out.println(<span class="string">&quot;韩顺平教育\r 北京&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="1-7-Java-注释"><a href="#1-7-Java-注释" class="headerlink" title="1.7 Java 注释"></a>1.7 Java 注释</h2><p>键入 <code>/** + Enter</code> 快速生成文档注释</p><p>键入 <code>sout</code> 快速生成 <code>System.out.println();</code></p><p>文档注释不能随便写, 只能使用 <code>Javadoc标签</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 月华.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="comment">//编写一个 main 方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//单行注释</span></span><br><span class="line">    <span class="comment">//选中，然后输入 tab 整体右移</span></span><br><span class="line"><span class="comment">//选中，然后输入 shift+tab 整体左移</span></span><br><span class="line"><span class="comment">/* 多行注释</span></span><br><span class="line"><span class="comment">   多行注释里面不允许有多行注释嵌套</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">n2</span> <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"><span class="comment">//求和</span></span><br><span class="line"><span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> n1 + n2;</span><br><span class="line"><span class="comment">//输出结果</span></span><br><span class="line">System.out.println(<span class="string">&quot;结果=&quot;</span> + sum);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Javadoc标签:</p><table><thead><tr><th>标签</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td>@author</td><td>标识一个类的作者</td><td>@author description</td></tr><tr><td>@deprecated</td><td>指名一个过期的类或成员</td><td>@deprecated description</td></tr><tr><td>{@docRoot}</td><td>指明当前文档根目录的路径</td><td>Directory Path</td></tr><tr><td>@exception</td><td>标志一个类抛出的异常</td><td>@exception exception-name explanation</td></tr><tr><td>{@inheritDoc}</td><td>从直接父类继承的注释</td><td>Inherits a comment from the immediate surperclass.</td></tr><tr><td>{@link}</td><td>插入一个到另一个主题的链接</td><td>{@link name text}</td></tr><tr><td>{@linkplain}</td><td>插入一个到另一个主题的链接，但是该链接显示纯文本字体</td><td>Inserts an in-line link to another topic.</td></tr><tr><td>@param</td><td>说明一个方法的参数</td><td>@param parameter-name explanation</td></tr><tr><td>@return</td><td>说明返回值类型</td><td>@return explanation</td></tr><tr><td>@see</td><td>指定一个到另一个主题的链接</td><td>@see anchor</td></tr><tr><td>@serial</td><td>说明一个序列化属性</td><td>@serial description</td></tr><tr><td>@serialData</td><td>说明通过writeObject( ) 和 writeExternal( )方法写的数据</td><td>@serialData description</td></tr><tr><td>@serialField</td><td>说明一个ObjectStreamField组件</td><td>@serialField name type description</td></tr><tr><td>@since</td><td>标记当引入一个特定的变化时</td><td>@since release</td></tr><tr><td>@throws</td><td>和 @exception标签一样.</td><td>The @throws tag has the same meaning as the @exception tag.</td></tr><tr><td>{@value}</td><td>显示常量的值，该常量必须是static属性。</td><td>Displays the value of a constant, which must be a static field.</td></tr><tr><td>@version</td><td>指定类的版本</td><td>@version info</td></tr></tbody></table><hr><h2 id="1-8-DOC-命令"><a href="#1-8-DOC-命令" class="headerlink" title="1.8 DOC 命令"></a>1.8 DOC 命令</h2><h3 id="1-8-1-DOC-基本原理"><a href="#1-8-1-DOC-基本原理" class="headerlink" title="1.8.1 DOC 基本原理"></a>1.8.1 DOC 基本原理</h3><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230102192317248.png" alt="DOC基本原理"></p><h3 id="1-8-2-相对路径-amp-绝对路径"><a href="#1-8-2-相对路径-amp-绝对路径" class="headerlink" title="1.8.2 相对路径 &amp; 绝对路径"></a>1.8.2 相对路径 &amp; 绝对路径</h3><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230102192346589.png" alt="相对路径 &amp; 绝对路径"></p><h3 id="1-8-3-常用-DOC-命令"><a href="#1-8-3-常用-DOC-命令" class="headerlink" title="1.8.3 常用 DOC 命令"></a>1.8.3 常用 DOC 命令</h3><ul><li><code>dir</code> : 查看当前目录有什么内容</li><li><code>cd</code> : 切换目录、盘符、上一级、根目录 – <code>cd /D c:</code> <code>cd d:\abc\test</code> <code>cd ..</code> <code>cd \</code></li><li><code>tree</code> : 查看目录树</li><li><code>cls</code> : 清屏</li><li><code>exit</code> : 退出 DOS</li><li><code>md </code>: 创建目录</li><li><code>rd</code> : 删除目录</li><li><code>copy</code> : 拷贝文件</li><li><code>del</code> : 删除文件</li><li><code>echo</code> : 输入内容到文件</li><li><code>move</code> : 剪切</li></ul><hr><h1 id="二、变量"><a href="#二、变量" class="headerlink" title="二、变量"></a>二、变量</h1><h2 id="2-1-底层原理"><a href="#2-1-底层原理" class="headerlink" title="2.1 底层原理"></a>2.1 底层原理</h2><blockquote><p>在内存中开辟一个地址, 将变量放在此地址, 地址指向变量的值</p></blockquote><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230102192925529.png" alt="变量基本原理"></p><hr><h2 id="2-2-变量快速入门"><a href="#2-2-变量快速入门" class="headerlink" title="2.2 变量快速入门"></a>2.2 变量快速入门</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Main</span> &#123;</span></span><br><span class="line">public <span class="type">static</span> <span class="type">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//记录人的信息</span></span><br><span class="line"><span class="type">int</span> age = <span class="number">30</span>;</span><br><span class="line"><span class="type">double</span> score = <span class="number">88.9</span>;</span><br><span class="line"><span class="type">char</span> gender = <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line">String name = <span class="string">&quot;king&quot;</span>;</span><br><span class="line"><span class="comment">//输出信息, 快捷键</span></span><br><span class="line">System.out.println(<span class="string">&quot;人的信息如下:&quot;</span>);</span><br><span class="line">System.out.println(name);</span><br><span class="line">System.out.println(age);</span><br><span class="line">System.out.println(score);</span><br><span class="line">System.out.println(gender);</span><br><span class="line"></span><br><span class="line"><span class="comment">//变量必须先声明，后使用, 即有顺序</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">50</span>;<span class="comment">//int</span></span><br><span class="line">System.out.println(a);<span class="comment">//50</span></span><br><span class="line"><span class="comment">//该区域的数据/值可以在同一类型范围内不断变化</span></span><br><span class="line"><span class="comment">//a = &quot;jack&quot;; //错</span></span><br><span class="line">a = <span class="number">88</span>; <span class="comment">//对</span></span><br><span class="line">System.out.println(a);<span class="comment">//88</span></span><br><span class="line"><span class="comment">//变量在同一个作用域内不能重名</span></span><br><span class="line"><span class="comment">//int a = 77;//错误</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> &#123;</span></span><br><span class="line">public <span class="type">static</span> <span class="type">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">666</span>;<span class="comment">//对</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-3-程序中的-号"><a href="#2-3-程序中的-号" class="headerlink" title="2.3 程序中的 + 号"></a>2.3 程序中的 <code>+</code> 号</h2><ol><li>当左右两边都是数值类型, 做加法运算</li><li>当左右两边有一个是字符串, 做拼接运算</li><li>运算顺序: 从左到右</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">System.out.println(<span class="number">100</span> + <span class="number">98</span>); <span class="comment">//198</span></span><br><span class="line">System.out.println(<span class="string">&quot;100&quot;</span> + <span class="number">98</span>); <span class="comment">//10098</span></span><br><span class="line">System.out.println(<span class="number">100</span> + <span class="number">3</span> + <span class="string">&quot;hello&quot;</span>); <span class="comment">//103hello</span></span><br><span class="line">System.out.println(<span class="string">&quot;hello&quot;</span> + <span class="number">100</span> + <span class="number">3</span>); <span class="comment">//hello1003</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-4-基本数据类型"><a href="#2-4-基本数据类型" class="headerlink" title="2.4 基本数据类型"></a>2.4 基本数据类型</h2><blockquote><p>整数类型</p></blockquote><ul><li><code>byte[1]</code></li><li><code>short[2]</code></li><li><code>int[4]</code></li><li><code>long[8]</code></li></ul><blockquote><p>浮点型</p></blockquote><ul><li><code>float[4]</code></li><li><code>double[8]</code></li></ul><blockquote><p>字符型</p></blockquote><ul><li><code>char[2]</code></li></ul><blockquote><p>布尔型</p></blockquote><ul><li><code>boolean[1]</code></li></ul><hr><h2 id="2-5-整数类型"><a href="#2-5-整数类型" class="headerlink" title="2.5 整数类型"></a>2.5 整数类型</h2><ul><li>Java 整数类型有固定的范围和字段长度, 不受 OS 影响, 保证 Java 的可移植性</li><li>Java 中整型常量默认为 <code>int</code>, 声明 <code>long</code> 时后面加 <code>l</code> 或 <code>L</code></li><li>一般声明 <code>int</code>, 除非太大才用 <code>long</code></li><li>1 byte &#x3D; 8 bit</li></ul><table><thead><tr><th>类型</th><th>占用存储空间</th><th>范围</th></tr></thead><tbody><tr><td>byte [字节]</td><td>1 字节</td><td>-128 ~127</td></tr><tr><td>short [短整型]</td><td>2 字节</td><td>-(2^15) ~ 2^15 - 1<br />-32768 ~ 32767</td></tr><tr><td>int [整型]</td><td>4 字节</td><td>-2^31 ~ 2^31 - 1<br />-2147483648 ~ 2147483647</td></tr><tr><td>long [长整型]</td><td>8 字节</td><td>-2^63 ~ 2^63 - 1</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//Java 的整型常量（具体值）默认为 int 型，声明 long 型常量须后加‘l’或‘L’</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">1</span>;<span class="comment">//4 个字节</span></span><br><span class="line"><span class="comment">//int n2 = 1L;//不对</span></span><br><span class="line"><span class="type">long</span> <span class="variable">n3</span> <span class="operator">=</span> <span class="number">1L</span>;<span class="comment">//对</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-6-浮点类型"><a href="#2-6-浮点类型" class="headerlink" title="2.6 浮点类型"></a>2.6 浮点类型</h2><ul><li>关于浮点数在机器中存放形式的简单说明, <code>浮点数 = 符号位 + 指数位 + 尾数位</code></li><li>尾数部分可能丢失，造成精度损失 (小数都是近似值)</li><li>Java 浮点类型也有固定的范围和字段长, 不受 OS 影响</li><li>Java 浮点型常量默认为 <code>double</code>, 声明 <code>float</code> 需要在后面加 <code>f</code> 或 <code>F</code></li></ul><table><thead><tr><th>类型</th><th>占用存储空间</th><th>范围</th></tr></thead><tbody><tr><td>float [单精度]</td><td>4 字节</td><td>-3.403E38 ~ 3.403E38</td></tr><tr><td>double [双精度]</td><td>8 字节</td><td>-1.798E308 ~ 1.798E308</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//Java 的浮点型常量(具体值)默认为 double 型，声明 float 型常量，须后加‘f’或‘F&#x27;</span></span><br><span class="line"><span class="comment">// float num1 = 1.1; //错</span></span><br><span class="line"><span class="type">float</span> <span class="variable">num2</span> <span class="operator">=</span> <span class="number">1.1F</span>; <span class="comment">//对</span></span><br><span class="line"><span class="type">double</span> <span class="variable">num3</span> <span class="operator">=</span> <span class="number">1.1</span>; <span class="comment">//对</span></span><br><span class="line"><span class="type">double</span> <span class="variable">num4</span> <span class="operator">=</span> <span class="number">1.1f</span>; <span class="comment">//对</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//十进制数形式：如：5.12 512.0f .512 (必须有小数点）</span></span><br><span class="line"><span class="type">double</span> <span class="variable">num5</span> <span class="operator">=</span> <span class="number">.123</span>; <span class="comment">//等价 0.123</span></span><br><span class="line">System.out.println(num5);</span><br><span class="line"></span><br><span class="line"><span class="comment">//科学计数法形式:如：5.12e2 [5.12 * 10 的 2 次方 ] 5.12E-2 [5.12 * 10 的 -2 次方]</span></span><br><span class="line">System.out.println(<span class="number">5.12e2</span>);<span class="comment">//512.0</span></span><br><span class="line">System.out.println(<span class="number">5.12E-2</span>);<span class="comment">//0.0512</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//通常情况下，应该使用 double 型，因为它比 float 型更精确。</span></span><br><span class="line"><span class="comment">//[举例说明]double num9 = 2.1234567851;float num10 = 2.1234567851F;</span></span><br><span class="line"><span class="type">double</span> <span class="variable">num9</span> <span class="operator">=</span> <span class="number">2.1234567851</span>;</span><br><span class="line"><span class="type">float</span> <span class="variable">num10</span> <span class="operator">=</span> <span class="number">2.1234567851F</span>;</span><br><span class="line">System.out.println(num9); <span class="comment">//2.1234567851</span></span><br><span class="line">System.out.println(num10); <span class="comment">//2.1234567</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//浮点数使用陷阱: 2.7 和 8.1 / 3 比较</span></span><br><span class="line"><span class="type">double</span> <span class="variable">num11</span> <span class="operator">=</span> <span class="number">2.7</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">num12</span> <span class="operator">=</span> <span class="number">8.1</span> / <span class="number">3</span>; <span class="comment">//2.7?</span></span><br><span class="line">System.out.println(num11);<span class="comment">//2.7</span></span><br><span class="line">System.out.println(num12);<span class="comment">//接近 2.7 的一个小数，而不是 2.7</span></span><br><span class="line"><span class="comment">//得到一个重要的使用点: 当我们对运算结果是小数的进行相等判断是，要小心</span></span><br><span class="line"><span class="comment">//应该是以两个数的差值的绝对值，在某个精度范围类判断</span></span><br><span class="line"><span class="keyword">if</span>( num11 == num12) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;num11 == num12 相等&quot;</span>); <span class="comment">//未输出</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//正确的写法</span></span><br><span class="line"><span class="comment">//Math.abs()表示取绝对值</span></span><br><span class="line"><span class="keyword">if</span>(Math.abs(num11 - num12) &lt; <span class="number">0.000001</span> ) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;差值非常小，到我的规定精度，认为相等...&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(Math.abs(num11 - num12));</span><br><span class="line"><span class="comment">//细节:如果是直接查询得的的小数或者直接赋值，是可以判断相等</span></span><br><span class="line"><span class="type">double</span> <span class="variable">num13</span> <span class="operator">=</span> <span class="number">2.7</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">num14</span> <span class="operator">=</span> <span class="number">2.7</span>;</span><br><span class="line"><span class="keyword">if</span>( num13 == num14) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;num13 == num14 相等&quot;</span>); <span class="comment">//输出</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-7-字符类型"><a href="#2-7-字符类型" class="headerlink" title="2.7 字符类型"></a>2.7 字符类型</h2><blockquote><p>字符类型可以表示单个字符,字符类型是 <code>char</code>，<code>char</code> 是两个字节(可以存放汉字)，多个字符我们用字符串 <code>String</code></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//字符常量是用 &#x27;&#x27; 单引号引起来的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在 java 中，char 的本质是一个整数，在默认输出时，是 unicode 码对应的字符</span></span><br><span class="line"><span class="comment">//要输出对应的数字，可以(int)字符</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c1</span> <span class="operator">=</span> <span class="number">97</span>;</span><br><span class="line">System.out.println(c1); <span class="comment">// a</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c2</span> <span class="operator">=</span> <span class="string">&#x27;a&#x27;</span>; <span class="comment">//输出&#x27;a&#x27; 对应的 数字</span></span><br><span class="line">System.out.println((<span class="type">int</span>)c2);</span><br><span class="line"><span class="type">char</span> <span class="variable">c3</span> <span class="operator">=</span> <span class="string">&#x27;韩&#x27;</span>;</span><br><span class="line">System.out.println((<span class="type">int</span>)c3);<span class="comment">//38889</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c4</span> <span class="operator">=</span> <span class="number">38889</span>;</span><br><span class="line">System.out.println(c4);<span class="comment">//韩</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//char 类型是可以进行运算的，相当于一个整数，因为它都对应有 Unicode 码. System.out.println(&#x27;a&#x27; + 10);//107</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c5</span> <span class="operator">=</span> <span class="string">&#x27;b&#x27;</span> + <span class="number">1</span>;<span class="comment">//98+1==&gt; 99</span></span><br><span class="line">System.out.println((<span class="type">int</span>)c5); <span class="comment">//99</span></span><br><span class="line">System.out.println(c5); <span class="comment">//99-&gt;对应的字符-&gt;编码表 ASCII(规定好的)=&gt;c</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">在内存中:</span></span><br><span class="line"><span class="comment">存储: &#x27;a&#x27; ===&gt; 97 ===&gt; 二进制(110001) ===&gt; 存储</span></span><br><span class="line"><span class="comment">读取: 二进制(110001) ===&gt; 97 ===&gt; &#x27;a&#x27; ===&gt; 显示</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Java中允许使用转义字符作为字符</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c6</span> <span class="operator">=</span> <span class="string">&#x27;\t&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-8-布尔类型"><a href="#2-8-布尔类型" class="headerlink" title="2.8 布尔类型"></a>2.8 布尔类型</h2><ul><li>只允许 <code>true</code> 和 <code>false</code> , 不允许使用 0 或 非0 来取代 (与 C语言 不一样)</li><li>boolean 类型占 1 个字节</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//演示判断成绩是否通过的案例</span></span><br><span class="line"><span class="comment">//定义一个布尔变量</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">isPass</span> <span class="operator">=</span> <span class="literal">true</span>;<span class="comment">//</span></span><br><span class="line"><span class="keyword">if</span>(isPass == <span class="literal">true</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;考试通过，恭喜&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;考试没有通过，下次努力&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-9-字符编码表"><a href="#2-9-字符编码表" class="headerlink" title="2.9 字符编码表"></a>2.9 字符编码表</h2><blockquote><p><code>ASCII</code> 一个字节表示, 共 128 个字符, 实际可以用 256 个, 只用了 128 个</p></blockquote><ul><li>缺点: 不能表示所有字符</li></ul><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230102201801748.png" alt="ASCII控制字符"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230102201837033.png" alt="ASCII可显示字符"></p><blockquote><p><code>Unicode</code> 使用两个字节表示字符, 汉子与字母都是两个字节, 兼容 ASCII 码</p></blockquote><ul><li>优点: 没有乱码问题, 世界上所有符号都有编码</li><li>缺点: 浪费空间</li></ul><blockquote><p><code>uft-8</code> Unicoude 的改进, 字母使用 1 个字节, 汉字使用 3 个字节</p></blockquote><ul><li>优点: 大小可变, 使用 1-6个字节表示一个符号, 根据不同的符号而变化字节长度</li></ul><hr><h2 id="2-10-Java-API-文档"><a href="#2-10-Java-API-文档" class="headerlink" title="2.10 Java API 文档"></a>2.10 Java API 文档</h2><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230102204000762.png" alt="Java类的组织形式"></p><hr><h2 id="2-11-基本数据类型自动转换"><a href="#2-11-基本数据类型自动转换" class="headerlink" title="2.11 基本数据类型自动转换"></a>2.11 基本数据类型自动转换</h2><ul><li>进行赋值或运算时, 精度小的类型会自动转为精度大的类型</li></ul><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230102210358699.png" alt="自动类型转换"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//细节 1： 有多种类型的数据混合运算时，</span></span><br><span class="line"><span class="comment">//系统首先自动将所有数据转换成容量最大的那种数据类型，然后再进行计算</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">10</span>; <span class="comment">//ok</span></span><br><span class="line"><span class="comment">//float d1 = n1 + 1.1;//错 n1 + 1.1 =&gt; 结果类型是 double</span></span><br><span class="line"><span class="comment">//double d1 = n1 + 1.1;//对 n1 + 1.1 =&gt; 结果类型是 double</span></span><br><span class="line"><span class="type">float</span> <span class="variable">d1</span> <span class="operator">=</span> n1 + <span class="number">1.1F</span>;<span class="comment">//对 n1 + 1.1 =&gt; 结果类型是 float</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//细节 2: 当我们把精度(容量)大 的数据类型赋值给精度(容量)小 的数据类型时，</span></span><br><span class="line"><span class="comment">//就会报错，反之就会进行自动类型转换。</span></span><br><span class="line"><span class="comment">//int n2 = 1.1;//错误 double -&gt; int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//细节 3: (byte, short) 和 char 之间可以计算, 但是不会相互自动转换</span></span><br><span class="line"><span class="comment">// char c1 = b1; //错误， 原因 byte 不能自动转成 char</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//(1)当把具体数赋给 byte 时，先判断该数是否在 byte 范围内，如果是就可以</span></span><br><span class="line"><span class="type">byte</span> <span class="variable">b1</span> <span class="operator">=</span> <span class="number">10</span>; <span class="comment">//对 , -128 ~ 127</span></span><br><span class="line"><span class="comment">// int n2 = 1; //n2 是 int</span></span><br><span class="line"><span class="comment">//(2)如果是变量赋值，判断类型</span></span><br><span class="line"><span class="comment">// byte b2 = n2; //错</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//细节 4: byte，short，char 他们三者可以计算，在计算时首先转换为 int 类型</span></span><br><span class="line"><span class="type">byte</span> <span class="variable">b2</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="type">byte</span> <span class="variable">b3</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="type">short</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="comment">//short s2 = b2 + s1;//错, b2 + s1 =&gt; int</span></span><br><span class="line"><span class="type">int</span> <span class="variable">s2</span> <span class="operator">=</span> b2 + s1;<span class="comment">//对, b2 + s1 =&gt; int</span></span><br><span class="line"><span class="comment">//byte b4 = b2 + b3; //错误: b2 + b3 =&gt; int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//细节5: boolean 不参与转换</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">pass</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"><span class="comment">//int num100 = pass;// boolean 不参与类型的自动转换</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//细节6: 自动提升原则： 表达式结果的类型自动提升为 操作数中最大的类型</span></span><br><span class="line"><span class="comment">//看一道题</span></span><br><span class="line"><span class="type">byte</span> <span class="variable">b4</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="type">short</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">num200</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="type">float</span> <span class="variable">num300</span> <span class="operator">=</span> <span class="number">1.1F</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">num500</span> <span class="operator">=</span> b4 + s3 + num200 + num300; <span class="comment">//float -&gt; double</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-12-基本数据类型自动转换"><a href="#2-12-基本数据类型自动转换" class="headerlink" title="2.12 基本数据类型自动转换"></a>2.12 基本数据类型自动转换</h2><ul><li><p>自动类型转换的逆过程，<strong>将容量大的数据类型转换为容量小的数据类型</strong>。</p><p>使用时要加上强制转换符 ( )，但可能造成<strong>精度降低或溢出</strong>,格外要注意</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//当数据大小 从 大-&gt;小, 就需要强制转换</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//细节1: 强转符号只针对于最近的操作数有效，往往会使用小括号提升优先级</span></span><br><span class="line"><span class="comment">//int x = (int)10*3.5+6*1.5;//编译错误： double -&gt; int</span></span><br><span class="line"><span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> (<span class="type">int</span>)(<span class="number">10</span>*<span class="number">3.5</span>+<span class="number">6</span>*<span class="number">1.5</span>);<span class="comment">// (int)44.0 -&gt; 44</span></span><br><span class="line">System.out.println(x);<span class="comment">//44</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c1</span> <span class="operator">=</span> <span class="number">100</span>; <span class="comment">//ok</span></span><br><span class="line"><span class="type">int</span> <span class="variable">m</span> <span class="operator">=</span> <span class="number">100</span>; <span class="comment">//ok</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//细节2: char类型可以保存int的常量值, 但是不能保存int的变量值, 需要强转</span></span><br><span class="line"><span class="comment">//char c2 = m; //错误</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c3</span> <span class="operator">=</span> (<span class="type">char</span>)m; <span class="comment">//ok</span></span><br><span class="line">System.out.println(c3);<span class="comment">//100 对应的字符, d 字符</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//细节3: byte和short, char类型在运算时, 当做int类型处理</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">判断是否能够通过编译</span><br><span class="line"><span class="number">1.</span>  <span class="type">short</span> <span class="variable">s</span> <span class="operator">=</span> <span class="number">12</span>; <span class="comment">//ok</span></span><br><span class="line">s= s-<span class="number">9</span>; <span class="comment">//错误int -&gt; short</span></span><br><span class="line"><span class="number">2.</span>  byteb = <span class="number">10</span>; <span class="comment">//ok</span></span><br><span class="line">b = b+<span class="number">11</span>; <span class="comment">//错误int-&gt; byte</span></span><br><span class="line">b = (<span class="type">byte</span>)(b+<span class="number">11</span>); <span class="comment">//正确，使用强转</span></span><br><span class="line"><span class="number">3.</span>  <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> <span class="string">&#x27;a&#x27;</span>; <span class="comment">//ok</span></span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">16</span>; <span class="comment">//ok</span></span><br><span class="line">floatd = <span class="number">.314F</span>; <span class="comment">//ok</span></span><br><span class="line"><span class="type">double</span> <span class="variable">result</span> <span class="operator">=</span> c + i + d; <span class="comment">//ok float- &gt; double</span></span><br><span class="line"><span class="number">4.</span>  <span class="type">byte</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">16</span>; <span class="comment">//ok</span></span><br><span class="line"><span class="type">short</span> <span class="variable">s</span> <span class="operator">=</span> <span class="number">14</span>; <span class="comment">//ok</span></span><br><span class="line"><span class="type">short</span> <span class="variable">t</span> <span class="operator">=</span> S + b; <span class="comment">//错误int -&gt; short</span></span><br></pre></td></tr></table></figure><hr><h2 id="2-13-基本数据类型和-String-类型的转换"><a href="#2-13-基本数据类型和-String-类型的转换" class="headerlink" title="2.13 基本数据类型和 String 类型的转换"></a>2.13 基本数据类型和 String 类型的转换</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//基本数据类型-&gt;String</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"><span class="type">float</span> <span class="variable">f1</span> <span class="operator">=</span> <span class="number">1.1F</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">d1</span> <span class="operator">=</span> <span class="number">4.5</span>;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">b1</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> n1 + <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> f1 + <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">s3</span> <span class="operator">=</span> d1 + <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">s4</span> <span class="operator">=</span> b1 + <span class="string">&quot;&quot;</span>;</span><br><span class="line">System.out.println(s1 + <span class="string">&quot; &quot;</span> + s2 + <span class="string">&quot; &quot;</span> + s3 + <span class="string">&quot; &quot;</span> + s4);</span><br><span class="line"></span><br><span class="line"><span class="comment">//String-&gt;对应的基本数据类型</span></span><br><span class="line"><span class="type">String</span> <span class="variable">s5</span> <span class="operator">=</span> <span class="string">&quot;123&quot;</span>;</span><br><span class="line"><span class="comment">//会在 OOP 讲对象和方法的时候回详细</span></span><br><span class="line"><span class="comment">//解读 使用 基本数据类型对应的包装类，的相应方法，得到基本数据类型</span></span><br><span class="line"><span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> Integer.parseInt(s5);</span><br><span class="line"><span class="type">double</span> <span class="variable">num2</span> <span class="operator">=</span> Double.parseDouble(s5);</span><br><span class="line"><span class="type">float</span> <span class="variable">num3</span> <span class="operator">=</span> Float.parseFloat(s5);</span><br><span class="line"><span class="type">long</span> <span class="variable">num4</span> <span class="operator">=</span> Long.parseLong(s5);</span><br><span class="line"><span class="type">byte</span> <span class="variable">num5</span> <span class="operator">=</span> Byte.parseByte(s5);</span><br><span class="line"><span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> Boolean.parseBoolean(<span class="string">&quot;true&quot;</span>);</span><br><span class="line"><span class="type">short</span> <span class="variable">num6</span> <span class="operator">=</span> Short.parseShort(s5);</span><br><span class="line">System.out.println(<span class="string">&quot;===================&quot;</span>);</span><br><span class="line">System.out.println(num1);<span class="comment">//123</span></span><br><span class="line">System.out.println(num2);<span class="comment">//123.0</span></span><br><span class="line">System.out.println(num3);<span class="comment">//123.0</span></span><br><span class="line">System.out.println(num4);<span class="comment">//123</span></span><br><span class="line">System.out.println(num5);<span class="comment">//123</span></span><br><span class="line">System.out.println(num6);<span class="comment">//123</span></span><br><span class="line">System.out.println(b);<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//怎么把字符串转成字符 char --&gt; 其含义是把字符串的 第一个字符 转成 char (只有第一个字符这一个字符)</span></span><br><span class="line"><span class="comment">//解读 s5.charAt(0) 得到 s5 字符串的第一个字符 &#x27;1&#x27;</span></span><br><span class="line">System.out.println(s5.charAt(<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//在将 String 类型转成 基本数据类型时，要确保 String 能转成有效的数据类型，</span></span><br><span class="line"><span class="comment">// 比如 我们可以把 &quot;123&quot; , 转成一个整数，但是不能把 &quot;hello&quot; 转成一个整数</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="comment">//转成 int</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n10</span> <span class="operator">=</span> Integer.parseInt(str); <span class="comment">//抛出异常，程序就会终止</span></span><br><span class="line">System.out.println(n1);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="三、运算符"><a href="#三、运算符" class="headerlink" title="三、运算符"></a>三、运算符</h1><h2 id="3-1-算数运算符"><a href="#3-1-算数运算符" class="headerlink" title="3.1 算数运算符"></a>3.1 算数运算符</h2><blockquote><p>对数值类型的变量进行运算</p></blockquote><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230103113103503.png" alt="算术运算符"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// /使用</span></span><br><span class="line">System.out.println(<span class="number">10</span> / <span class="number">4</span>); <span class="comment">//从数学来看是 2.5, java 中 2</span></span><br><span class="line">System.out.println(<span class="number">10.0</span> / <span class="number">4</span>); <span class="comment">//java 是 2.5</span></span><br><span class="line"><span class="comment">// 注释快捷键 ctrl + /, 再次输入 ctrl + / 取消注释</span></span><br><span class="line"><span class="type">double</span> <span class="variable">d</span> <span class="operator">=</span> <span class="number">10</span> / <span class="number">4</span>;<span class="comment">//java 中 10 / 4 = 2, 2=&gt;2.0</span></span><br><span class="line">System.out.println(d);<span class="comment">// 是 2.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// % 取模 ,取余</span></span><br><span class="line"><span class="comment">// 在 % 的本质 看一个公式!!!! a % b = a - a / b * b !!!!</span></span><br><span class="line"><span class="comment">// -10 % 3 =&gt; -10 - (-10) / 3 * 3 = -10 + 9 = -1</span></span><br><span class="line"><span class="comment">// 10 % -3 = 10 - 10 / (-3) * (-3) = 10 - 9 = 1</span></span><br><span class="line"><span class="comment">// -10 % -3 = (-10) - (-10) / (-3) * (-3) = -10 + 9 = -1</span></span><br><span class="line">System.out.println(<span class="number">10</span> % <span class="number">3</span>); <span class="comment">//1</span></span><br><span class="line">System.out.println(-<span class="number">10</span> % <span class="number">3</span>); <span class="comment">// -1</span></span><br><span class="line">System.out.println(<span class="number">10</span> % -<span class="number">3</span>); <span class="comment">//1</span></span><br><span class="line">System.out.println(-<span class="number">10</span> % -<span class="number">3</span>);<span class="comment">//-1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//++的使用</span></span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">i++;<span class="comment">//自增 等价于 i = i + 1; =&gt; i = 11</span></span><br><span class="line">++i;<span class="comment">//自增 等价于 i = i + 1; =&gt; i = 12</span></span><br><span class="line">System.out.println(<span class="string">&quot;i=&quot;</span> + i);<span class="comment">//12</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">作为表达式使用</span></span><br><span class="line"><span class="comment">前++：++i 先自增后赋值</span></span><br><span class="line"><span class="comment">后++：i++先赋值后自增</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">8</span>;</span><br><span class="line"><span class="comment">//int k = ++j; //等价 j=j+1;k=j;</span></span><br><span class="line"><span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> j++; <span class="comment">// 等价 k =j;j=j+1;</span></span><br><span class="line">System.out.println(<span class="string">&quot;k=&quot;</span> + k + <span class="string">&quot;j=&quot;</span> + j);<span class="comment">//8 9</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下面这段是重点</span></span><br><span class="line"> <span class="type">int</span> <span class="variable">i1</span> <span class="operator">=</span> <span class="number">1</span>;<span class="comment">//i-&gt;1</span></span><br><span class="line"> i1 = i++; <span class="comment">//规则使用临时变量: (1) temp=i;(2) i=i+1;(3)i=temp;</span></span><br><span class="line"> System.out.println(i1); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"> <span class="type">int</span> <span class="variable">i2</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"> i2 = ++i2; <span class="comment">//规则使用临时变量: (1) i=i+1;(2) temp=i;(3)i=temp;</span></span><br><span class="line"> System.out.println(i2); <span class="comment">//2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试输出</span></span><br><span class="line"><span class="type">int</span> <span class="variable">i3</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">i4</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> i3++;</span><br><span class="line">System.out.print(<span class="string">&quot;i=&quot;</span> + i);<span class="comment">//10</span></span><br><span class="line">System.out.println(<span class="string">&quot;i2=&quot;</span> + i4);<span class="comment">//20</span></span><br><span class="line">i = --i4;</span><br><span class="line">System.out.print(<span class="string">&quot;i=&quot;</span> + i);<span class="comment">//19</span></span><br><span class="line">System.out.println(<span class="string">&quot;i2=&quot;</span> + i4);<span class="comment">//19</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//1.需求:</span></span><br><span class="line"><span class="comment">//假如还有 59 天放假，问：合 xx 个星期零 xx 天</span></span><br><span class="line"><span class="comment">//2.思路分析</span></span><br><span class="line"><span class="comment">//(1) 使用 int 变量 days 保存 天数</span></span><br><span class="line"><span class="comment">//(2) 一个星期是 7 天 星期数 weeks： days / 7 零 xx 天 leftDays days % 7</span></span><br><span class="line"><span class="comment">//(3) 输出</span></span><br><span class="line"><span class="comment">//3.走代码</span></span><br><span class="line"><span class="type">int</span> <span class="variable">days</span> <span class="operator">=</span> <span class="number">25911</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">weeks</span> <span class="operator">=</span> days / <span class="number">7</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">leftDays</span> <span class="operator">=</span> days % <span class="number">7</span>;</span><br><span class="line">System.out.println(days + <span class="string">&quot;天 合&quot;</span> + weeks + <span class="string">&quot;星期零&quot;</span> + leftDays + <span class="string">&quot;天&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.需求</span></span><br><span class="line"><span class="comment">//定义一个变量保存华氏温度，华氏温度转换摄氏温度的公式为</span></span><br><span class="line"><span class="comment">//：5/9*(华氏温度-100),请求出华氏温度对应的摄氏温度</span></span><br><span class="line"><span class="comment">//2 思路分析</span></span><br><span class="line"><span class="comment">//(1) 先定义一个 double huaShi 变量保存 华氏温度</span></span><br><span class="line"><span class="comment">//(2) 根据给出的公式，进行计算即可 5/9*(华氏温度-100)</span></span><br><span class="line"><span class="comment">// 考虑数学公式和 java 语言的特性</span></span><br><span class="line"><span class="comment">//(3) 将得到的结果保存到 double sheShi</span></span><br><span class="line"><span class="comment">//3 走代码</span></span><br><span class="line"><span class="type">double</span> <span class="variable">huaShi</span> <span class="operator">=</span> <span class="number">1234.6</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">sheShi</span> <span class="operator">=</span> <span class="number">5.0</span> / <span class="number">9</span> * (huaShi - <span class="number">100</span>); <span class="comment">//注意是 5.0</span></span><br><span class="line">System.out.println(<span class="string">&quot;华氏温度&quot;</span> + huaShi + <span class="string">&quot; 对应的摄氏温度=&quot;</span> + sheShi);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="3-2-关系-比较-运算符"><a href="#3-2-关系-比较-运算符" class="headerlink" title="3.2 关系(比较)运算符"></a>3.2 关系(比较)运算符</h2><ol><li>关系运算符的结果都是 <code>boolean</code> 型，也就是要么是 <code>true</code>，要么是 <code>false</code></li><li>关系表达式 经常用在 <code>if</code> 结构的条件中或循环结构的条件中</li></ol><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230103200303794.png" alt="关系运算符"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">9</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">8</span>;</span><br><span class="line"><span class="comment">//关系运算符组成的表达式，我们称为关系表达式。 a &gt; b</span></span><br><span class="line">System.out.println(a &gt; b); <span class="comment">//T</span></span><br><span class="line">System.out.println(a &gt;= b); <span class="comment">//T</span></span><br><span class="line">System.out.println(a &lt;= b); <span class="comment">//F</span></span><br><span class="line">System.out.println(a &lt; b);<span class="comment">//F</span></span><br><span class="line"><span class="comment">//比较运算符&quot;==&quot;不能误写成&quot;=&quot;</span></span><br><span class="line">System.out.println(a == b); <span class="comment">//F</span></span><br><span class="line">System.out.println(a != b); <span class="comment">//T</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> a &gt; b; <span class="comment">//T</span></span><br><span class="line">System.out.println(<span class="string">&quot;flag=&quot;</span> + flag);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="3-3-逻辑运算符"><a href="#3-3-逻辑运算符" class="headerlink" title="3.3 逻辑运算符"></a>3.3 逻辑运算符</h2><blockquote><p>用于连接多个条件（多个关系表达式），最终的结果也是一个 boolean 值。</p></blockquote><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230103200523651.png" alt="逻辑运算符"></p><blockquote><ol><li><p>a&amp;b : &amp; 叫逻辑与： 规则：当 a 和 b 同时为 true ,则结果为 true, 否则为 false</p></li><li><p>a&amp;&amp;b : &amp;&amp; 叫短路与：规则：当 a 和 b 同时为 true ,则结果为 true,否则为 false</p></li><li><p>a|b : | 叫逻辑或，     规则：当 a 和 b ，有一个为 true ,则结果为 true,否则为 false</p></li><li><p>a||b : || 叫短路或，规则：当 a 和 b ，有一个为 true ,则结果为 true,否则为 false</p></li><li><p>!a : 叫取反，或者非运算。当 a 为 true, 则结果为 false; 当 a 为 false 是，结果为 true</p></li><li><p>a^b: 叫逻辑异或，当 a 和 b 不同时，则结果为 true, 否则为 false</p></li></ol></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//&amp;&amp;短路与 和 &amp; 案例演示</span></span><br><span class="line"><span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">50</span>;</span><br><span class="line"><span class="keyword">if</span>(age &gt; <span class="number">20</span> &amp;&amp; age &lt; <span class="number">90</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;ok100&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//&amp;逻辑与使用</span></span><br><span class="line"><span class="keyword">if</span>(age &gt; <span class="number">20</span> &amp; age &lt; <span class="number">90</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;ok200&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//区别</span></span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">9</span>;</span><br><span class="line"><span class="comment">//对于&amp;&amp;短路与而言，如果第一个条件为 false ,后面的条件不再判断</span></span><br><span class="line"><span class="comment">//对于&amp;逻辑与而言，如果第一个条件为 false ,后面的条件仍然会判断</span></span><br><span class="line"><span class="keyword">if</span>(a &lt; <span class="number">1</span> &amp; ++b &lt; <span class="number">50</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;ok300&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;a=&quot;</span> + a + <span class="string">&quot; b=&quot;</span> + b);<span class="comment">// 4 10</span></span><br><span class="line"><span class="comment">// &amp;&amp;短路与：如果第一个条件为 false，则第二个条件不会判断，最终结果为 false，效率高</span></span><br><span class="line"><span class="comment">// &amp; 逻辑与：不管第一个条件是否为 false，第二个条件都要判断，效率低</span></span><br><span class="line"><span class="comment">// 开发中， 使用的基本是使用短路与&amp;&amp;, 效率高</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ||短路或 和 |逻辑或 案例演示</span></span><br><span class="line"><span class="comment">// || 规则: 两个条件中只要有一个成立，结果为 true,否则为 false</span></span><br><span class="line"><span class="comment">// | 规则: 两个条件中只要有一个成立，结果为 true,否则为 false</span></span><br><span class="line"><span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">50</span>;</span><br><span class="line"><span class="keyword">if</span>(age &gt; <span class="number">20</span> || age &lt; <span class="number">30</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;ok100&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &amp;逻辑与使用</span></span><br><span class="line"><span class="keyword">if</span>(age &gt; <span class="number">20</span> | age &lt; <span class="number">30</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;ok200&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//看看区别</span></span><br><span class="line"><span class="comment">//(1)||短路或：如果第一个条件为 true，</span></span><br><span class="line"><span class="comment">//则第二个条件不会判断，最终结果为 true，效率高</span></span><br><span class="line"><span class="comment">//(2)| 逻辑或：不管第一个条件是否为 true，第二个条件都要判断，效率低</span></span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">9</span>;</span><br><span class="line"><span class="keyword">if</span>( a &gt; <span class="number">1</span> || ++b &gt; <span class="number">4</span>) &#123; <span class="comment">// 可以换成 | 测试</span></span><br><span class="line">System.out.println(<span class="string">&quot;ok300&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;a=&quot;</span> + a + <span class="string">&quot; b=&quot;</span> + b); <span class="comment">//4 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ! 取反操作演示</span></span><br><span class="line"><span class="comment">//! 操作是取反 T-&gt;F , F -&gt; T</span></span><br><span class="line">System.out.println(<span class="number">60</span> &gt; <span class="number">20</span>); <span class="comment">//T</span></span><br><span class="line">System.out.println(!(<span class="number">60</span> &gt; <span class="number">20</span>)); <span class="comment">//F</span></span><br><span class="line"><span class="comment">//a^b: 叫逻辑异或，当 a 和 b 不同时，则结果为 true, 否则为 false</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> (<span class="number">10</span> &gt; <span class="number">1</span>) ^ ( <span class="number">3</span> &gt; <span class="number">5</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;b=&quot;</span> + b);<span class="comment">//T</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// a^b: 叫逻辑异或，当 a 和 b 不同时，则结果为 true, 否则为 false</span></span><br><span class="line">System.out.println( (<span class="number">4</span> &lt; <span class="number">1</span>) ^ (<span class="number">6</span> &gt; <span class="number">3</span>) ); <span class="comment">// true</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-4-赋值运算符"><a href="#3-4-赋值运算符" class="headerlink" title="3.4 赋值运算符"></a>3.4 赋值运算符</h2><ul><li>基本赋值运算符 <code>=</code></li><li>复合赋值运算符 <code>+= ，-= ，*= ， /= ，%=</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//运算顺序从右往左 int num = a + b + c;</span></span><br><span class="line"><span class="comment">//赋值运算符的左边 只能是变量; 右边 可以是变量、表达式、常量值</span></span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">20</span>; <span class="type">int</span> num2= <span class="number">78</span> * <span class="number">34</span> - <span class="number">10</span>; <span class="type">int</span> <span class="variable">num3</span> <span class="operator">=</span> a;</span><br><span class="line"><span class="comment">//复合赋值运算符等价于下面的效果</span></span><br><span class="line"><span class="comment">//比如：a+=3;等价于 a=a+3; 其他类推</span></span><br><span class="line"><span class="comment">//复合赋值运算符会进行类型转换。</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">n1 += <span class="number">4</span>;<span class="comment">// n1 = n1 + 4;</span></span><br><span class="line">System.out.println(n1); <span class="comment">// 14</span></span><br><span class="line">n1 /= <span class="number">3</span>;<span class="comment">// n1 = n1 / 3;//4</span></span><br><span class="line">System.out.println(n1); <span class="comment">// 4</span></span><br><span class="line"><span class="comment">//复合赋值运算符会进行类型转换</span></span><br><span class="line"><span class="type">byte</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"><span class="comment">//byte b = 2; b+=3; b++;</span></span><br><span class="line">b += <span class="number">2</span>; <span class="comment">// 等价 b = (byte)(b + 2);</span></span><br><span class="line">b++; <span class="comment">// b = (byte)(b+1);</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-5-三元运算符"><a href="#3-5-三元运算符" class="headerlink" title="3.5 三元运算符"></a>3.5 三元运算符</h2><blockquote><p>条件表达式 ? 表达式 1: 表达式 2</p></blockquote><ol><li><p>如果条件表达式为 true，运算后的结果是表达式 1；</p></li><li><p>如果条件表达式为 false，运算后的结果是表达式 2；</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">99</span>;</span><br><span class="line"><span class="comment">// 解读</span></span><br><span class="line"><span class="comment">// 1. a &gt; b 为 false</span></span><br><span class="line"><span class="comment">// 2. 返回 b--, 先返回 b 的值,然后在 b-1</span></span><br><span class="line"><span class="comment">// 3. 返回的结果是 99</span></span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> a &gt; b ? a++ : b--;</span><br><span class="line">System.out.println(<span class="string">&quot;result=&quot;</span> + result);</span><br><span class="line">System.out.println(<span class="string">&quot;a=&quot;</span> + a);</span><br><span class="line">System.out.println(<span class="string">&quot;b=&quot;</span> + b);</span><br><span class="line"></span><br><span class="line"><span class="comment">//表达式 1 和表达式 2 要为可以赋给接收变量的类型</span></span><br><span class="line"><span class="comment">//(或可以自动转换/或者强制转换)</span></span><br><span class="line"><span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">d</span> <span class="operator">=</span> <span class="number">8</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">e</span> <span class="operator">=</span> c &gt; d ? (<span class="type">int</span>)<span class="number">1.1</span> : (<span class="type">int</span>)<span class="number">3.4</span>;<span class="comment">//可以的</span></span><br><span class="line"><span class="type">double</span> <span class="variable">f</span> <span class="operator">=</span> c &gt; d ? c : d + <span class="number">3</span>;<span class="comment">//可以的，满足 int -&gt; double</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//案例：实现三个数的最大值</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">553</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">n2</span> <span class="operator">=</span> <span class="number">33</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">n3</span> <span class="operator">=</span> <span class="number">123</span>;</span><br><span class="line"><span class="comment">//思路</span></span><br><span class="line"><span class="comment">//1. 先得到 n1 和 n2 中最大数 , 保存到 max1</span></span><br><span class="line"><span class="comment">//2. 然后再 求出 max1 和 n3 中的最大数，保存到 max2</span></span><br><span class="line"><span class="type">int</span> <span class="variable">max1</span> <span class="operator">=</span> n1 &gt; n2 ? n1 : n2;</span><br><span class="line"><span class="type">int</span> <span class="variable">max2</span> <span class="operator">=</span> max1 &gt; n3 ? max1 : n3;</span><br><span class="line">System.out.println(<span class="string">&quot;最大数=&quot;</span> + max2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用一条语句实现, 推荐使用上面方法</span></span><br><span class="line"><span class="comment">//提示: 后面我们可以使用更好方法,比如排序</span></span><br><span class="line"><span class="comment">// int max = (n1 &gt; n2 ? n1 : n2) &gt; n3 ?</span></span><br><span class="line"><span class="comment">// (n1 &gt; n2 ? n1 : n2) : n3;</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;最大数=&quot; + max);</span></span><br><span class="line"><span class="type">int</span> <span class="variable">abcclass</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> <span class="number">40</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">N</span> <span class="operator">=</span> <span class="number">50</span>;</span><br><span class="line">System.out.println(<span class="string">&quot;n=&quot;</span> + n);<span class="comment">//40</span></span><br><span class="line">System.out.println(<span class="string">&quot;N=&quot;</span> + N);<span class="comment">//50</span></span><br><span class="line"><span class="comment">// abc 和 aBc 是两个不同变量</span></span><br><span class="line"><span class="type">int</span> <span class="variable">abc</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">aBc</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line"><span class="comment">//int a b = 300;</span></span><br><span class="line"><span class="comment">//int a-b=10;</span></span><br><span class="line"><span class="type">int</span> <span class="variable">goto1</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="3-6-运算符优先级"><a href="#3-6-运算符优先级" class="headerlink" title="3.6 运算符优先级"></a>3.6 运算符优先级</h2><ul><li>只有单目运算符、赋值运算符是从右向左运算的</li></ul><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230103210338370.png" alt="运算符优先级"></p><hr><h2 id="3-7-键盘输入语句"><a href="#3-7-键盘输入语句" class="headerlink" title="3.7 键盘输入语句"></a>3.7 键盘输入语句</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//演示接受用户的输入</span></span><br><span class="line"><span class="comment">//步骤</span></span><br><span class="line"><span class="comment">//Scanner 类 表示 简单文本扫描器，在 java.util 包</span></span><br><span class="line"><span class="comment">//1. 引入/导入 Scanner 类所在的包</span></span><br><span class="line"><span class="comment">//2. 创建 Scanner 对象 , new 创建一个对象,体会</span></span><br><span class="line"><span class="comment">// myScanner 就是 Scanner 类的对象</span></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">myScanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="comment">//3. 接收用户输入了， 使用 相关的方法</span></span><br><span class="line">System.out.println(<span class="string">&quot;请输入名字&quot;</span>);</span><br><span class="line"><span class="comment">//当程序执行到 next 方法时，会等待用户输入~~~</span></span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> myScanner.next(); <span class="comment">//接收用户输入字符串</span></span><br><span class="line">System.out.println(<span class="string">&quot;请输入年龄&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> myScanner.nextInt(); <span class="comment">//接收用户输入 int</span></span><br><span class="line">System.out.println(<span class="string">&quot;请输入薪水&quot;</span>);</span><br><span class="line"><span class="type">double</span> <span class="variable">sal</span> <span class="operator">=</span> myScanner.nextDouble(); <span class="comment">//接收用户输入 double</span></span><br><span class="line">System.out.println(<span class="string">&quot;人的信息如下:&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;名字=&quot;</span> + name + <span class="string">&quot; 年龄=&quot;</span> + age + <span class="string">&quot; 薪水=&quot;</span> + sal);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        nextLine()用法总结：</span></span><br><span class="line"><span class="comment">        1、以回车符作为结束标识符，获取到的是回车符前输入的所有字符串（包括空格）。</span></span><br><span class="line"><span class="comment">        2、读取结束后，该方法会将我们的鼠标定位在我们输入数据的那一行的下一行。</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> myScanner.nextLine(); <span class="comment">//接收用户输入字符串, 以 回车符 作为结束符</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        next()用法总结：</span></span><br><span class="line"><span class="comment">        1. 一定要读取到有效字符后才可以结束输入。</span></span><br><span class="line"><span class="comment">        2. 对输入的有效字符之前所遇到的空白，会自动将其去除。</span></span><br><span class="line"><span class="comment">        3. 只有输入的有效字符后才将其后面输入的空白作为结束符。</span></span><br><span class="line"><span class="comment">        4. next()不能得到带有空格的字符串。</span></span><br><span class="line"><span class="comment">        5. 读取结束后，该方法会将我们的鼠标定位在我们输入数据的那一行。</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> myScanner.next(); <span class="comment">//接收用户输入字符串, 以 空格符 作为结束符</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        先使用nextLine()再使用next()、nextInt()等没问题，</span></span><br><span class="line"><span class="comment">        但是先使用next()和nextInt()等之后就不可以再紧跟nextLine()使用。（这一点很重要！！！）</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">        这是因为next()等这些方法读取结束后会紧跟一个回车符，</span></span><br><span class="line"><span class="comment">        而nextLine会直接读取到这个回车符，</span></span><br><span class="line"><span class="comment">        这就导致出现我们还没有来得及输入我们想要输入的数据，</span></span><br><span class="line"><span class="comment">        nextLine就以为我们已经输入完了这样的情况！</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">        解决办法也很简单：我们直接在next()使用后加两个nextLine()就OK了，</span></span><br><span class="line"><span class="comment">        这样第一个nextLine()就会当一个‘替死鬼’，</span></span><br><span class="line"><span class="comment">        第二个nextLine()我们就可以输入自己想要输入的数据啦！</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        </span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> myScanner.next().charAt(<span class="number">0</span>);</span><br><span class="line">        <span class="type">byte</span> a1= myScanner.nextByte(); <span class="comment">//接收用户输入 byte</span></span><br><span class="line">        <span class="type">short</span> a2= myScanner.nextShort(); <span class="comment">//接收用户输入 short</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">a3</span> <span class="operator">=</span> myScanner.nextInt(); <span class="comment">//接收用户输入 int</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">a4</span> <span class="operator">=</span> myScanner.nextLong(); <span class="comment">//接收用户输入 long</span></span><br><span class="line">        <span class="type">float</span> <span class="variable">a5</span> <span class="operator">=</span> myScanner.nextFloat(); <span class="comment">//接收用户输入 float</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">a6</span> <span class="operator">=</span> myScanner.nextDouble(); <span class="comment">//接收用户输入 double</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">a7</span> <span class="operator">=</span> myScanner.nextBoolean(); <span class="comment">//接收用户输入 boolean</span></span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//使用完Scanner后，一定要记得将它关闭!</span></span><br><span class="line">        <span class="comment">//因为使用Scanner本质上是打开了一个IO流，如果不关闭的话，它将会一直占用系统资源。</span></span><br><span class="line">        sc.close();</span><br><span class="line">        <span class="comment">//但是一旦关闭后，就算在sc.close()这行代码后你再重新new Scanner(System.in)，</span></span><br><span class="line">        <span class="comment">//那也不能重新再打开一个扫描器了，程序会报错</span></span><br><span class="line">        <span class="comment">//所以一定要在用不到扫描器之后再关闭，即把sc.close()代码放到最后。</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="3-8-进制"><a href="#3-8-进制" class="headerlink" title="3.8 进制"></a>3.8 进制</h2><ul><li>二进制：0,1 ，满 2 进 1.以 0b 或 0B 开头。</li><li>十进制：0-9 ，满 10 进 1。</li><li>八进制：0-7 ，满 8 进 1. 以数字 0 开头表示。</li><li>十六进制：0-9 及 A(10)-F(15)，满 16 进 1. 以 <strong>0x</strong> <strong>或</strong> <strong>0X</strong> 开头表示。此处的 A-F 不区分大小写</li></ul><h3 id="3-8-1-各种进制转十进制"><a href="#3-8-1-各种进制转十进制" class="headerlink" title="3.8.1 各种进制转十进制"></a>3.8.1 各种进制转十进制</h3><ul><li>二 转 十</li></ul><blockquote><p>从最低位 (右边) 开始, 将每个位上的数提取出来, 乘以 <code>2</code> 的 (位数 - 1)次方, 然后求和</p></blockquote><ul><li>八 转 十</li></ul><blockquote><p>从最低位 (右边) 开始, 将每个位上的数提取出来, 乘以 <code>8</code> 的 (位数 - 1)次方, 然后求和</p></blockquote><ul><li>十六 转 十</li></ul><blockquote><p>从最低位 (右边) 开始, 将每个位上的数提取出来, 乘以 <code>16</code> 的 (位数 - 1)次方, 然后求和</p></blockquote><h3 id="3-8-2-十进制转各种进制"><a href="#3-8-2-十进制转各种进制" class="headerlink" title="3.8.2 十进制转各种进制"></a>3.8.2 十进制转各种进制</h3><blockquote><p>短除</p></blockquote><ul><li>十 转 二</li></ul><blockquote><p>将该数不断除以 <code>2</code>, 直到商为 0 为止, 然后将每步得到的余数倒过来, 就是对应二进制</p></blockquote><ul><li>十 转 八</li></ul><blockquote><p>将该数不断除以 <code>8</code>, 直到商为 0 为止, 然后将每步得到的余数倒过来, 就是对应八进制</p></blockquote><ul><li>十 转 十六</li></ul><blockquote><p>将该数不断除以 <code>16</code>, 直到商为 0 为止, 然后将每步得到的余数倒过来, 就是对应十六进制</p></blockquote><h3 id="3-8-3-二进制转各种进制"><a href="#3-8-3-二进制转各种进制" class="headerlink" title="3.8.3 二进制转各种进制"></a>3.8.3 二进制转各种进制</h3><ul><li>二 转 八</li></ul><blockquote><p>从低位开始,将二进制数每 <code>3</code> 位一组，转成对应的八进制数即可</p></blockquote><ul><li>二 转 十六</li></ul><blockquote><p>从低位开始，将二进制数每 <code>4</code> 位一组，转成对应的十六进制数即可</p></blockquote><h3 id="3-8-4-各种进制转二进制"><a href="#3-8-4-各种进制转二进制" class="headerlink" title="3.8.4 各种进制转二进制"></a>3.8.4 各种进制转二进制</h3><ul><li>八 转 二</li></ul><blockquote><p>将八进制数每 1 位，转成对应的一个 <code>3 </code>位的二进制数即可</p></blockquote><ul><li>十六 转 二</li></ul><blockquote><p>将十六进制数每 1 位，转成对应的 <code>4</code> 位的一个二进制数即可</p></blockquote><hr><h2 id="3-9-原码、反码、补码"><a href="#3-9-原码、反码、补码" class="headerlink" title="3.9 原码、反码、补码"></a>3.9 原码、反码、补码</h2><p>对于有符号的而言:</p><ol><li>二进制的最高位是符号位: 0表示正数，1表示负数</li><li>正数的原码，反码，补码都一样 (三码合一)</li><li>负数的反码 &#x3D; 它的原码符号位不变，其它位取反(0-&gt;1,1-&gt;0)</li><li>负数的补码 &#x3D; 它的反码 + 1，负数的反码 &#x3D; 负数的补码 - 1</li><li>0的反码，补码都是0</li><li>java没有无符号数，换言之，java中的数都是有符号的</li><li>在计算机运算的时候，都是以<strong>补码的方式来运算</strong>的.</li><li>当我们看运算结果的时候，要看他的原码 (重点)</li></ol><hr><h2 id="3-10-位运算符"><a href="#3-10-位运算符" class="headerlink" title="3.10 位运算符"></a>3.10 位运算符</h2><ul><li>按位与 <code>&amp;</code>: 两位全为 1 , 结果为 1 , 否则为 0</li><li>按位或 <code>|</code>: 两位有一个为 1 ,  结果为 1 , 否则为 0</li><li>按位异或 <code>^</code>: 两位一个为 0 , 一个为 1 , 结果为 1 , 否则为 0</li><li>按位取反 <code>~</code>: 0-&gt;1 ,1-&gt;0</li><li>算术右移 <code>&gt;&gt;</code>：低位溢出, 符号位不变, 并用符号位补溢出的高位</li><li>算术左移 <code>&lt;&lt;</code>: 符号位不变, 低位补 0</li><li>逻辑右移 &#x2F; 无符号右移 <code>&gt;&gt;&gt;</code>: 低位溢出，高位补 0</li><li>特别说明：没有 <code>&lt;&lt;&lt;</code> 符号</li></ul><hr><h1 id="四、程序控制结构"><a href="#四、程序控制结构" class="headerlink" title="四、程序控制结构"></a>四、程序控制结构</h1><h2 id="4-1-顺序控制"><a href="#4-1-顺序控制" class="headerlink" title="4.1 顺序控制"></a>4.1 顺序控制</h2><p>从上到下执行, 变量采取<strong>前向引用</strong>的格式</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230119172712621.png" alt="前向引用"></p><hr><h2 id="4-2-分支控制"><a href="#4-2-分支控制" class="headerlink" title="4.2 分支控制"></a>4.2 分支控制</h2><ul><li>如果<strong>判断的具体数值不多</strong>，而且符合 byte、 short 、int、 char, enum[枚举], String 这 6 种类型。虽然两个语句都可以使用，建议使用 swtich 语句</li><li>其他情况：对区间判断，对结果为 boolean 类型判断，使用 if，if 的使用范围更广</li></ul><h3 id="4-2-1-if-else"><a href="#4-2-1-if-else" class="headerlink" title="4.2.1 if-else"></a>4.2.1 if-else</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单分支 if</span></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;<span class="comment">//导入</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">If01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//编写一个程序,可以输入人的年龄,如果该同志的年龄大于18岁,</span></span><br><span class="line"><span class="comment">//则输出 &quot;你年龄大于18,要对自己的行为负责,送入监狱&quot;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//思路分析</span></span><br><span class="line"><span class="comment">//1. 接收输入的年龄, 应该定义一个Scanner 对象</span></span><br><span class="line"><span class="comment">//2. 把年龄保存到一个变量 int age</span></span><br><span class="line"><span class="comment">//3. 使用 if 判断，输出对应信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//应该定义一个Scanner 对象</span></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">myScanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">System.out.println(<span class="string">&quot;请输入年龄&quot;</span>);</span><br><span class="line"><span class="comment">//把年龄保存到一个变量 int age</span></span><br><span class="line"><span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> myScanner.nextInt();</span><br><span class="line"><span class="comment">//使用 if 判断，输出对应信息</span></span><br><span class="line"><span class="keyword">if</span>(age &gt; <span class="number">18</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;你年龄大于18,要对自己的行为负责,送入监狱&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;程序继续...&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 双分支 if-else</span></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;<span class="comment">//导入</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">If02</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//编写一个程序,可以输入人的年龄,如果该同志的年龄大于18岁,</span></span><br><span class="line"><span class="comment">//则输出 &quot;你年龄大于18,要对</span></span><br><span class="line"><span class="comment">//自己的行为负责, 送入监狱&quot;。否则 ,输出&quot;你的年龄不大这次放过你了.&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//思路分析</span></span><br><span class="line"><span class="comment">//1. 接收输入的年龄, 应该定义一个Scanner 对象</span></span><br><span class="line"><span class="comment">//2. 把年龄保存到一个变量 int age</span></span><br><span class="line"><span class="comment">//3. 使用 if-else 判断，输出对应信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//应该定义一个Scanner 对象</span></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">myScanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">System.out.println(<span class="string">&quot;请输入年龄&quot;</span>);</span><br><span class="line"><span class="comment">//把年龄保存到一个变量 int age</span></span><br><span class="line"><span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> myScanner.nextInt();</span><br><span class="line"><span class="comment">//使用 if-else 判断，输出对应信息</span></span><br><span class="line"><span class="keyword">if</span>(age &gt; <span class="number">18</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;你年龄大于18,要对自己的行为负责,送入监狱&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;<span class="comment">//双分支</span></span><br><span class="line">System.out.println(<span class="string">&quot;你的年龄不大这次放过你了&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;程序继续...&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单分支和双分支的练习</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IfExercise01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编写程序，声明2个double型变量并赋值。</span></span><br><span class="line"><span class="comment">//判断第一个数大于10.0，且第2个数小于20.0，打印两数之和</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//思路分析</span></span><br><span class="line"></span><br><span class="line"><span class="type">double</span> <span class="variable">d1</span> <span class="operator">=</span> <span class="number">33.5</span>;</span><br><span class="line"><span class="type">double</span> <span class="variable">d2</span> <span class="operator">=</span> <span class="number">2.6</span>;</span><br><span class="line"><span class="keyword">if</span>(d1 &gt; <span class="number">10.0</span> &amp;&amp; d2 &lt; <span class="number">20.0</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;两个数和=&quot;</span> + (d1 + d2));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//【课后自己练】定义两个变量int，判断二者的和，</span></span><br><span class="line"><span class="comment">//是否能被3又能被5整除，打印提示信息</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//思路分析</span></span><br><span class="line"><span class="comment">//1. 定义两个变量int num1, num2</span></span><br><span class="line"><span class="comment">//2. 定义一个变量 int sum = num1 + num2;</span></span><br><span class="line"><span class="comment">//3. sum % 3 , 5 后 等于0 说明可以整除</span></span><br><span class="line"><span class="comment">//4. 使用 if - else 来提示对应信息</span></span><br><span class="line"><span class="comment">//走代码</span></span><br><span class="line"><span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">num2</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> num1 + num2;</span><br><span class="line"><span class="keyword">if</span>(sum % <span class="number">3</span> == <span class="number">0</span> &amp;&amp; sum % <span class="number">5</span> == <span class="number">0</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;和可以被3又能被5整除&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;和不能被3和5整除..&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断一个年份是否是闰年，闰年的条件是符合下面二者之一：</span></span><br><span class="line"><span class="comment">//(1)年份能被4整除，但不能被100整除；(2)能被400整除</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//思路分析</span></span><br><span class="line"><span class="comment">//1. 定义 int year 保存年</span></span><br><span class="line"><span class="comment">//2. 年份能被4整除，但不能被100整除, </span></span><br><span class="line"><span class="comment">//   =&gt; year % 4 == 0 &amp;&amp; year % 100 != 0 </span></span><br><span class="line"><span class="comment">//3. 能被400整除 =&gt; year % 400 == 0</span></span><br><span class="line"><span class="comment">//4. 上面的 2 和  3 是 或的关系 </span></span><br><span class="line"><span class="comment">//代码实现</span></span><br><span class="line"><span class="type">int</span> <span class="variable">year</span> <span class="operator">=</span> <span class="number">2028</span>;</span><br><span class="line"><span class="keyword">if</span>( (year % <span class="number">4</span> == <span class="number">0</span> &amp;&amp; year % <span class="number">100</span> != <span class="number">0</span>) ||  year % <span class="number">400</span> == <span class="number">0</span> ) &#123;</span><br><span class="line">System.out.println(year + <span class="string">&quot; 是 闰年&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(year + <span class="string">&quot; 不是 闰年&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 多分支 if-else if-else</span></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">If03</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输入保国同志的芝麻信用分：</span></span><br><span class="line"><span class="comment">如果：</span></span><br><span class="line"><span class="comment">信用分为100分时，输出 信用极好；</span></span><br><span class="line"><span class="comment">信用分为(80，99]时，输出 信用优秀；</span></span><br><span class="line"><span class="comment">信用分为[60,80]时，输出 信用一般；</span></span><br><span class="line"><span class="comment">其它情况 ，输出 信用 不及格 </span></span><br><span class="line"><span class="comment">请从键盘输入保国的芝麻信用分，并加以判断</span></span><br><span class="line"><span class="comment">假定信用分数为int</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">myScanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="comment">//接收用户输入</span></span><br><span class="line">System.out.println(<span class="string">&quot;请输入信用分(1-100):&quot;</span>);</span><br><span class="line"><span class="comment">//请思考：如果小伙伴输入的不是整数，而是hello..</span></span><br><span class="line"><span class="comment">//==&gt;这里我们后面可以使用异常处理机制搞定-》老师点一下</span></span><br><span class="line"><span class="type">int</span> <span class="variable">grade</span> <span class="operator">=</span> myScanner.nextInt();</span><br><span class="line"></span><br><span class="line"><span class="comment">//先对输入的信用分，进行一个范围的有效判断 1-100, 否则提示输入错误</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(grade &gt;=<span class="number">1</span> &amp;&amp; grade &lt;= <span class="number">100</span>) &#123;</span><br><span class="line"><span class="comment">//因为有4种情况，所以使用多分支</span></span><br><span class="line"><span class="keyword">if</span>(grade == <span class="number">100</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;信用极好&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (grade &gt; <span class="number">80</span> &amp;&amp; grade &lt;= <span class="number">99</span>) &#123; <span class="comment">//信用分为(80，99]时，输出 信用优秀；</span></span><br><span class="line">System.out.println(<span class="string">&quot;信用优秀&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (grade &gt;= <span class="number">60</span> &amp;&amp; grade &lt;= <span class="number">80</span>) &#123;<span class="comment">//信用分为[60,80]时，输出 信用一般</span></span><br><span class="line">System.out.println(<span class="string">&quot;信用一般&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;<span class="comment">//其它情况 ，输出 信用 不及格 </span></span><br><span class="line">System.out.println(<span class="string">&quot;信用不及格&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;信用分需要在1-100,请重新输入:)&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 嵌套分支 (最好不要超过 3 层, 不然可读性不好)</span></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NestedIf</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">参加歌手比赛，如果初赛成绩大于8.0进入决赛，</span></span><br><span class="line"><span class="comment">否则提示淘汰。并且根据性别提示进入男子组或女子组。</span></span><br><span class="line"><span class="comment">输入成绩和性别，进行判断和输出信息。</span></span><br><span class="line"><span class="comment">[NestedIf.java]</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">提示: double score; char gender; </span></span><br><span class="line"><span class="comment">接收字符: char gender = scanner.next().charAt(0)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//思路分析</span></span><br><span class="line"><span class="comment">//1. 创建Scanner对象，接收用户输入</span></span><br><span class="line"><span class="comment">//2. 接收 成绩保存到 double score</span></span><br><span class="line"><span class="comment">//3. 使用 if-else 判断 如果初赛成绩大于8.0进入决赛，否则提示淘汰</span></span><br><span class="line"><span class="comment">//4. 如果进入到 决赛，再接收 char gender, 使用 if-else 输出信息</span></span><br><span class="line"><span class="comment">//代码实现 =&gt; 思路 --&gt; java代码</span></span><br><span class="line"></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">myScanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">System.out.println(<span class="string">&quot;请输入该歌手的成绩&quot;</span>);</span><br><span class="line"><span class="type">double</span> <span class="variable">score</span> <span class="operator">=</span> myScanner.nextDouble();</span><br><span class="line"><span class="keyword">if</span>( score &gt; <span class="number">8.0</span> ) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;请输入性别&quot;</span>);</span><br><span class="line"><span class="type">char</span> <span class="variable">gender</span> <span class="operator">=</span> myScanner.next().charAt(<span class="number">0</span>); </span><br><span class="line"><span class="keyword">if</span>( gender == <span class="string">&#x27;男&#x27;</span> ) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;进入男子组&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(gender == <span class="string">&#x27;女&#x27;</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;进入女子组&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;你的性别有误，不能参加决赛~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;sorry ,你被淘汰了~&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-2-2-switch"><a href="#4-2-2-switch" class="headerlink" title="4.2.2 switch"></a>4.2.2 switch</h3><ol><li>switch 表达式的数据类型要与 case 后的常量类型一致, 或者是可以进行隐式转换 (表达式类型转常量类型) 的类型, 不然怎么比较</li><li>switch 表达式的返回值必须是 <code>byte, short, int, char, enum, String</code></li><li>case 后的值必须是常量, 不能是变量</li><li>default 可选, 但是必须加上</li><li>如果没有在 case 分支后写 break, 就会从当前分支一直执行到底, 除非中途碰到 break</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Switch01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">案例：Switch01.java</span></span><br><span class="line"><span class="comment">请编写一个程序，该程序可以接收一个字符，比如:a,b,c,d,e,f,g</span></span><br><span class="line"><span class="comment">a表示星期一，b表示星期二 …</span></span><br><span class="line"><span class="comment">根据用户的输入显示相应的信息.要求使用 switch 语句完成</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">思路分析</span></span><br><span class="line"><span class="comment">1. 接收一个字符 , 创建Scanner对象</span></span><br><span class="line"><span class="comment">2. 使用switch 来完成匹配,并输出对应信息</span></span><br><span class="line"><span class="comment">代码</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">myScanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">System.out.println(<span class="string">&quot;请输入一个字符(a-g)&quot;</span>);</span><br><span class="line"><span class="type">char</span> <span class="variable">c1</span> <span class="operator">=</span> myScanner.next().charAt(<span class="number">0</span>);<span class="comment">//</span></span><br><span class="line"><span class="comment">//在java中，只要是有值返回，就是一个表达式</span></span><br><span class="line"><span class="keyword">switch</span>(c1) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span> : </span><br><span class="line">System.out.println(<span class="string">&quot;今天星期一,猴子穿新衣&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;b&#x27;</span> : </span><br><span class="line">System.out.println(<span class="string">&quot;今天星期二,猴子当小二&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;c&#x27;</span> : </span><br><span class="line">System.out.println(<span class="string">&quot;今天星期三,猴子爬雪山..&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="comment">//.....</span></span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">System.out.println(<span class="string">&quot;你输入的字符不正确，没有匹配的&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;退出了switch ,继续执行程序&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwitchDetail</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//细节1</span></span><br><span class="line"><span class="comment">//表达式数据类型，应和case 后的常量类型一致，</span></span><br><span class="line"><span class="comment">//或者是可以自动转成可以相互比较的类型，比如输入的是字符，而常量是 int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//细节2</span></span><br><span class="line"><span class="comment">//switch(表达式)中表达式的返回值必须是：</span></span><br><span class="line"><span class="comment">//(byte,short,int,char,enum[枚举],String)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//细节3</span></span><br><span class="line"><span class="comment">//case子句中的值必须是常量(1,&#x27;a&#x27;)或者是常量表达式,而不能是变量</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//细节4</span></span><br><span class="line"><span class="comment">//default子句是可选的，当没有匹配的case时，执行default</span></span><br><span class="line"><span class="comment">//如果没有default 子句，有没有匹配任何常量，则没有输出</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//细节5</span></span><br><span class="line"><span class="comment">//break语句用来在执行完一个case分支后使程序跳出switch语句块；</span></span><br><span class="line"><span class="comment">//如果没有写break，程序会顺序执行到switch结尾,除非执行到break</span></span><br><span class="line"><span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line"><span class="type">char</span> <span class="variable">c2</span> <span class="operator">=</span> <span class="string">&#x27;c&#x27;</span>;</span><br><span class="line"><span class="keyword">switch</span>(c) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span> :</span><br><span class="line">System.out.println(<span class="string">&quot;ok1&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;b&#x27;</span>  :</span><br><span class="line">System.out.println(<span class="string">&quot;ok2&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span> :</span><br><span class="line">System.out.println(<span class="string">&quot;ok3&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;退出了switch,继续执行..&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwitchExercise</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用 switch 把小写类型的 </span></span><br><span class="line"><span class="comment">//char型转为大写(键盘输入)。只转换 a-&gt;A, b-&gt;B, c, d, e. </span></span><br><span class="line"><span class="comment">//其它的输出 &quot;other&quot;。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建Scanner对象</span></span><br><span class="line"><span class="comment">// Scanner myScanner = new Scanner(System.in);</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;请输入a-e&quot;);</span></span><br><span class="line"><span class="comment">// char c1 = myScanner.next().charAt(0);</span></span><br><span class="line"><span class="comment">// switch(c1) &#123;</span></span><br><span class="line"><span class="comment">// case &#x27;a&#x27; :</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;A&quot;);</span></span><br><span class="line"><span class="comment">// break;</span></span><br><span class="line"><span class="comment">// case &#x27;b&#x27; :</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;B&quot;);</span></span><br><span class="line"><span class="comment">// break;</span></span><br><span class="line"><span class="comment">// case &#x27;c&#x27; :</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;C&quot;);</span></span><br><span class="line"><span class="comment">// break;</span></span><br><span class="line"><span class="comment">// case &#x27;d&#x27; :</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;D&quot;);</span></span><br><span class="line"><span class="comment">// break;</span></span><br><span class="line"><span class="comment">// case &#x27;e&#x27; :</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;E&quot;);</span></span><br><span class="line"><span class="comment">// break;</span></span><br><span class="line"><span class="comment">// default :</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;你的输入有误~&quot;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//对学生成绩大于60分的，输出&quot;合格&quot;。低于60分的，</span></span><br><span class="line"><span class="comment">//输出&quot;不合格&quot;。(注：输入的成绩不能大于100), 提示 成绩/60</span></span><br><span class="line"><span class="comment">//思路分析</span></span><br><span class="line"><span class="comment">//1. 这道题，可以使用 分支来完成， 但是要求使用switch</span></span><br><span class="line"><span class="comment">//2. 这里我们需要进行一个转换, 编程思路 : </span></span><br><span class="line"><span class="comment">//   如果成绩在 [60,100] , (int)(成绩/60) = 1 </span></span><br><span class="line"><span class="comment">//   如果成绩在 [0,60) , (int)(成绩/60) = 0 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//代码实现</span></span><br><span class="line"></span><br><span class="line"><span class="type">double</span> <span class="variable">score</span> <span class="operator">=</span> <span class="number">1.1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用if-else 保证输入的成绩有有效的 0-100</span></span><br><span class="line"><span class="comment">//看了当老师的分析和代码演示后，自己一定要独立完成（不看老韩代码，也能写）</span></span><br><span class="line"><span class="keyword">if</span>( score &gt;= <span class="number">0</span> &amp;&amp; score &lt;= <span class="number">100</span>) &#123;</span><br><span class="line"><span class="keyword">switch</span> ((<span class="type">int</span>)(score / <span class="number">60</span>)) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span> :</span><br><span class="line">System.out.println(<span class="string">&quot;不合格&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span> :</span><br><span class="line">System.out.println(<span class="string">&quot;合格&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="comment">// default :</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;输入有误&quot;);</span></span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;输入的成绩在0-100&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据用于指定月份，</span></span><br><span class="line"><span class="comment">//打印该月份所属的季节。</span></span><br><span class="line"><span class="comment">//3,4,5 春季 6,7,8 夏季  9,10,11 秋季 12, 1, 2 冬季 </span></span><br><span class="line"><span class="comment">//[课堂练习, 提示 使用穿透 ] </span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//思路分析</span></span><br><span class="line"><span class="comment">//1. 创建Scanner对象， 接收用户输入</span></span><br><span class="line"><span class="comment">//2. 使用 int month 接收</span></span><br><span class="line"><span class="comment">//3. 使用switch 来匹配 ,使用穿透来完成，比较简洁</span></span><br><span class="line"></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">myScanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">System.out.println(<span class="string">&quot;输入月份&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">month</span> <span class="operator">=</span> myScanner.nextInt();</span><br><span class="line"><span class="keyword">switch</span>(month) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">5</span>: </span><br><span class="line">System.out.println(<span class="string">&quot;这是春季&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">8</span>: </span><br><span class="line">System.out.println(<span class="string">&quot;这是夏季&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">11</span>: </span><br><span class="line">System.out.println(<span class="string">&quot;这是秋季&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">12</span>: </span><br><span class="line">System.out.println(<span class="string">&quot;这是冬季&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span> :</span><br><span class="line">System.out.println(<span class="string">&quot;你输入的月份不对(1-12)&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="4-3-循环控制"><a href="#4-3-循环控制" class="headerlink" title="4.3 循环控制"></a>4.3 循环控制</h2><h3 id="4-3-1-for"><a href="#4-3-1-for" class="headerlink" title="4.3.1 for"></a>4.3.1 for</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ForDetail</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//for(;循环判断条件;) </span></span><br><span class="line"><span class="comment">//中的初始化和变量迭代可以写到其它地方，但是两边的分号不能省略</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用for循环控制</span></span><br><span class="line"><span class="comment">// int i = 1;//循环变量初始化</span></span><br><span class="line"><span class="comment">// for( ; i &lt;= 10 ; ) &#123;</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;hello，韩顺平教育&quot; + i);</span></span><br><span class="line"><span class="comment">// i++;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// System.out.println(&quot;i=&quot; + i);//11 ok</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// int j = 1;</span></span><br><span class="line"><span class="comment">// //补充</span></span><br><span class="line"><span class="comment">// for(;;) &#123; //表示一个无限循环,死循环</span></span><br><span class="line"><span class="comment">// System.out.println(&quot;ok~&quot; + (j++));</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//循环初始值可以有多条初始化语句，但要求类型一样，并且中间用逗号隔开，</span></span><br><span class="line"><span class="comment">//循环变量迭代也可以有多条变量迭代语句，中间用逗号隔开</span></span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>,j = <span class="number">0</span>;  i &lt; count; i++, j += <span class="number">2</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;i=&quot;</span> + i + <span class="string">&quot; j=&quot;</span> + j);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ForExercise</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//打印1~100之间所有是9的倍数的整数，统计个数  及 总和.[化繁为简,先死后活]</span></span><br><span class="line"><span class="comment">//老韩的两个编程思想(技巧)</span></span><br><span class="line"><span class="comment">//1. 化繁为简 : 即将复杂的需求，拆解成简单的需求，逐步完成</span></span><br><span class="line"><span class="comment">//2. 先死后活 : 先考虑固定的值，然后转成可以灵活变化的值</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//思路分析</span></span><br><span class="line"><span class="comment">//打印1~100之间所有是9的倍数的整数，统计个数  及 总和</span></span><br><span class="line"><span class="comment">//化繁为简</span></span><br><span class="line"><span class="comment">//(1) 完成 输出 1-100的值</span></span><br><span class="line"><span class="comment">//(2) 在输出的过程中，进行过滤，只输出9的倍数  i % 9 ==0</span></span><br><span class="line"><span class="comment">//(3) 统计个数 定义一个变量 int count = 0; 当 条件满足时 count++;</span></span><br><span class="line"><span class="comment">//(4) 总和 , 定义一个变量 int sum = 0; 当条件满足时累积 sum += i;</span></span><br><span class="line"><span class="comment">//先死后活</span></span><br><span class="line"><span class="comment">//(1) 为了适应更好的需求，把范围的开始的值和结束的值，做出变量</span></span><br><span class="line"><span class="comment">//(2) 还可以更进一步 9 倍数也做成变量 int t = 9;</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//统计9的倍数个数 变量</span></span><br><span class="line"><span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//总和</span></span><br><span class="line"><span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">t</span> <span class="operator">=</span> <span class="number">5</span>; <span class="comment">// 倍数</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start; i &lt;= end; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>( i % t == <span class="number">0</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;i=&quot;</span> + i);</span><br><span class="line">count++;</span><br><span class="line">sum += i;<span class="comment">//累积</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;count=&quot;</span> + count);</span><br><span class="line">System.out.println(<span class="string">&quot;sum=&quot;</span> + sum);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-3-2-while"><a href="#4-3-2-while" class="headerlink" title="4.3.2 while"></a>4.3.2 while</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WhileExercise</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印1—100之间所有能被3整除的数 </span></span><br><span class="line"><span class="comment">// 化繁为简, 先死后活</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">endNum</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"><span class="keyword">while</span>( i &lt;= endNum) &#123;</span><br><span class="line"><span class="keyword">if</span>( i % <span class="number">3</span> == <span class="number">0</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;i=&quot;</span> + i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">i++;<span class="comment">//变量自增</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印40—200之间所有的偶数</span></span><br><span class="line"><span class="comment">// 化繁为简, 先死后活(利于思考)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">System.out.println(<span class="string">&quot;========&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">40</span>; <span class="comment">//变量初始化</span></span><br><span class="line"><span class="keyword">while</span> ( j &lt;= <span class="number">200</span>) &#123;</span><br><span class="line"><span class="comment">//判断</span></span><br><span class="line"><span class="keyword">if</span>( j % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;j=&quot;</span> + j);</span><br><span class="line">&#125;</span><br><span class="line">j++;<span class="comment">//循环变量的迭代</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-3-3-do-while"><a href="#4-3-3-do-while" class="headerlink" title="4.3.3 do-while"></a>4.3.3 do-while</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DoWhileExercise01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//统计1---200之间能被5整除但不能被3整除的 个数</span></span><br><span class="line"><span class="comment">//化繁为简</span></span><br><span class="line"><span class="comment">//(1) 使用do-while输出 1-200</span></span><br><span class="line"><span class="comment">//(2) 过滤 能被5整除但不能被3整除的数 %</span></span><br><span class="line"><span class="comment">//(3) 统计满足条件的个数 int count = 0; </span></span><br><span class="line"><span class="comment">//先死后活</span></span><br><span class="line"><span class="comment">//(1) 范围的值 1-200 你可以做出变量</span></span><br><span class="line"><span class="comment">//(2) 能被5整除但不能被3整除的 , 5 和 3 可以改成变量 </span></span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//统计满足条件的个数</span></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line"><span class="keyword">if</span>( i % <span class="number">5</span> == <span class="number">0</span> &amp;&amp; i % <span class="number">3</span> != <span class="number">0</span> ) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;i=&quot;</span> + i);</span><br><span class="line">count++;</span><br><span class="line">&#125;</span><br><span class="line">i++;</span><br><span class="line">&#125;<span class="keyword">while</span>(i &lt;= <span class="number">200</span>); <span class="comment">// 后面的分号不能落</span></span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;count=&quot;</span> + count);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DoWhileExercise02</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果李三不还钱，则老韩将一直使出五连鞭，直到李三说还钱为</span></span><br><span class="line"><span class="comment">//[System.out.println(&quot;老韩问：还钱吗？y/n&quot;)]   do...while ..</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//化繁为简</span></span><br><span class="line"><span class="comment">//(1) 不停的问还钱吗?</span></span><br><span class="line"><span class="comment">//(2) 使用char answer 接收回答, 定义一个Scanner对象</span></span><br><span class="line"><span class="comment">//(3) 在do-while 的while 判断如果是 y 就不在循环</span></span><br><span class="line"><span class="comment">//一定自己动脑筋..</span></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">myScanner</span>  <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="type">char</span> <span class="variable">answer</span> <span class="operator">=</span> <span class="string">&#x27; &#x27;</span>;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;老韩使出五连鞭~&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;老韩问：还钱吗？y/n&quot;</span>);</span><br><span class="line">answer = myScanner.next().charAt(<span class="number">0</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;他的回答是&quot;</span> + answer);</span><br><span class="line">&#125;<span class="keyword">while</span>(answer != <span class="string">&#x27;y&#x27;</span>);<span class="comment">//判断条件很关键</span></span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;李三还钱了&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="4-4-多重循环控制"><a href="#4-4-多重循环控制" class="headerlink" title="4.4 多重循环控制"></a>4.4 多重循环控制</h2><p>最多不要超过 3 层</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MulForExercise01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//统计3个班成绩情况，每个班有5名同学，</span></span><br><span class="line"><span class="comment">//求出各个班的平均分和所有班级的平均分[学生的成绩从键盘输入]。</span></span><br><span class="line"><span class="comment">//统计三个班及格人数，每个班有5名同学。</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//思路分析:</span></span><br><span class="line"><span class="comment">//化繁为简</span></span><br><span class="line"><span class="comment">//(1) 先计算一个班 , 5个学生的成绩和平均分 , 使用for</span></span><br><span class="line"><span class="comment">//1.1 创建 Scanner 对象然后，接收用户输入</span></span><br><span class="line"><span class="comment">//1.2 得到该班级的平均分 , 定义一个 doubel sum 把该班级5个学生的成绩累积 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//(2) 统计3个班(每个班5个学生) 平均分</span></span><br><span class="line"><span class="comment">//(3) 所有班级的平均分</span></span><br><span class="line"><span class="comment">//3.1 定义一个变量，double totalScore 累积所有学生的成绩</span></span><br><span class="line"><span class="comment">//3.2 当多重循环结束后，totalScore / (3 * 5) </span></span><br><span class="line"><span class="comment">//(4) 统计三个班及格人数</span></span><br><span class="line"><span class="comment">//4.1 定义变量 int passNum = 0; 当有一个学生成绩&gt;=60, passNum++</span></span><br><span class="line"><span class="comment">//4.2 如果 &gt;= 60 passNum++</span></span><br><span class="line"><span class="comment">//(5) 可以优化[效率，可读性, 结构]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建 Scanner 对象</span></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">myScanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="type">double</span> <span class="variable">totalScore</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//累积所有学生的成绩</span></span><br><span class="line"><span class="type">int</span> <span class="variable">passNum</span> <span class="operator">=</span> <span class="number">0</span>;<span class="comment">//累积 及格人数</span></span><br><span class="line"><span class="type">int</span> <span class="variable">classNum</span> <span class="operator">=</span> <span class="number">3</span>; <span class="comment">//班级个数</span></span><br><span class="line"><span class="type">int</span> <span class="variable">stuNum</span> <span class="operator">=</span> <span class="number">5</span>;<span class="comment">//学生个数</span></span><br><span class="line"><span class="keyword">for</span>( <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= classNum; i++) &#123;<span class="comment">//i 表示班级</span></span><br><span class="line"></span><br><span class="line"><span class="type">double</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//一个班级的总分</span></span><br><span class="line"><span class="keyword">for</span>( <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= stuNum; j++) &#123;<span class="comment">//j 表示学生</span></span><br><span class="line">System.out.println(<span class="string">&quot;请数第&quot;</span>+i+<span class="string">&quot;个班的第&quot;</span>+j+<span class="string">&quot;个学生的成绩&quot;</span>);</span><br><span class="line"><span class="type">double</span> <span class="variable">score</span> <span class="operator">=</span> myScanner.nextDouble();</span><br><span class="line"><span class="comment">//当有一个学生成绩&gt;=60, passNum++</span></span><br><span class="line"><span class="keyword">if</span>(score &gt;= <span class="number">60</span>) &#123;</span><br><span class="line">passNum++;</span><br><span class="line">&#125;</span><br><span class="line">sum += score; <span class="comment">//累积</span></span><br><span class="line">System.out.println(<span class="string">&quot;成绩为&quot;</span> + score);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//因为sum 是 5个学生的总成绩</span></span><br><span class="line">System.out.println(<span class="string">&quot;sum=&quot;</span> + sum + <span class="string">&quot; 平均分=&quot;</span> + (sum / stuNum));</span><br><span class="line"><span class="comment">//把 sum 累积到 totalScore</span></span><br><span class="line">totalScore += sum;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;三个班总分=&quot;</span>+ totalScore </span><br><span class="line">+ <span class="string">&quot; 平均分=&quot;</span> + totalScore / (classNum*stuNum));</span><br><span class="line">System.out.println(<span class="string">&quot;及格人数=&quot;</span> + passNum);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="4-5-打印金字塔"><a href="#4-5-打印金字塔" class="headerlink" title="4.5 打印金字塔"></a>4.5 打印金字塔</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Stars</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">  *  *</span></span><br><span class="line"><span class="comment"> *    *</span></span><br><span class="line"><span class="comment">********</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">思路分析</span></span><br><span class="line"><span class="comment">化繁为简</span></span><br><span class="line"><span class="comment">1. 先打印一个矩形</span></span><br><span class="line"><span class="comment">*****</span></span><br><span class="line"><span class="comment">*****</span></span><br><span class="line"><span class="comment">*****</span></span><br><span class="line"><span class="comment">*****</span></span><br><span class="line"><span class="comment">*****</span></span><br><span class="line"><span class="comment">2. 打印半个金字塔</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*    //第1层 有 1个*</span></span><br><span class="line"><span class="comment">**   //第2层 有 2个*</span></span><br><span class="line"><span class="comment">***//第3层 有 3个*</span></span><br><span class="line"><span class="comment">****    //第4层 有 4个*</span></span><br><span class="line"><span class="comment">*****   //第5层 有 5个*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">3. 打印整个金字塔</span></span><br><span class="line"><span class="comment">*       //第1层 有 1个*   2 * 1 -1   有4=(总层数-1)个空格</span></span><br><span class="line"><span class="comment">   ***      //第2层 有 3个*   2 * 2 -1   有3=(总层数-2)个空格</span></span><br><span class="line"><span class="comment">  *****     //第3层 有 5个*   2 * 3 -1   有2=(总层数-3)个空格</span></span><br><span class="line"><span class="comment"> *******    //第4层 有 7个*   2 * 4 -1   有1=(总层数-4)个空格</span></span><br><span class="line"><span class="comment">*********   //第5层 有 9个*   2 * 5 -1   有0=(总层数-5)个空格</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">4. 打印空心的金字塔 [最难的]</span></span><br><span class="line"><span class="comment">    *       //第1层 有 1个*   当前行的第一个位置是*,最后一个位置也是*</span></span><br><span class="line"><span class="comment">   * *      //第2层 有 2个*   当前行的第一个位置是*,最后一个位置也是*</span></span><br><span class="line"><span class="comment">  *   *     //第3层 有 2个*   当前行的第一个位置是*,最后一个位置也是*</span></span><br><span class="line"><span class="comment"> *     *    //第4层 有 2个*   当前行的第一个位置是*,最后一个位置也是*</span></span><br><span class="line"><span class="comment">*********   //第5层 有 9个*   全部输出*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">先死后活</span></span><br><span class="line"><span class="comment">5 层数做成变量 int totalLevel = 5;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span> <span class="variable">totalLevel</span> <span class="operator">=</span> <span class="number">20</span>; <span class="comment">//层数</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= totalLevel; i++) &#123; <span class="comment">//i 表示层数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在输出*之前，还有输出 对应空格 = 总层数-当前层</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">1</span>; k &lt;= totalLevel - i; k++ ) &#123;</span><br><span class="line">System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//控制打印每层的*个数</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>;j &lt;= <span class="number">2</span> * i - <span class="number">1</span>;j++) &#123;</span><br><span class="line"><span class="comment">//当前行的第一个位置是*,最后一个位置也是*, 最后一层全部 *</span></span><br><span class="line"><span class="keyword">if</span>(j == <span class="number">1</span> || j == <span class="number">2</span> * i - <span class="number">1</span> || i == totalLevel) &#123;</span><br><span class="line">System.out.print(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">//其他情况输出空格</span></span><br><span class="line">System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//每打印完一层的*后，就换行 println本身会换行</span></span><br><span class="line">System.out.println(<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="4-6-跳转控制语句"><a href="#4-6-跳转控制语句" class="headerlink" title="4.6 跳转控制语句"></a>4.6 跳转控制语句</h2><h3 id="4-6-1-break"><a href="#4-6-1-break" class="headerlink" title="4.6.1 break"></a>4.6.1 break</h3><p>要知道标签是什么东西, 编程的时候一般不写, 但是要知道</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BreakDetail</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">abc1: <span class="comment">// 标签</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">4</span>; j++)&#123;<span class="comment">//外层for</span></span><br><span class="line">abc2: <span class="comment">// 标签</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;<span class="comment">//内层for</span></span><br><span class="line"><span class="keyword">if</span>(i == <span class="number">2</span>)&#123;</span><br><span class="line"><span class="comment">//break  ;//等价 break abc2</span></span><br><span class="line"><span class="keyword">break</span> abc1 ; <span class="comment">// 退出哪个标签下的循环</span></span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;i = &quot;</span> + i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BreakExercise02</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//实现登录验证，有3次机会，如果用户名为&quot;丁真&quot; ,密码&quot;666&quot;提示登录成功，</span></span><br><span class="line"><span class="comment">//否则提示还有几次机会，请使用for+break完成</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 思路分析</span></span><br><span class="line"><span class="comment">// 1. 创建Scanner对象接收用户输入  </span></span><br><span class="line"><span class="comment">// 2. 定义 String name ; String passwd; 保存用户名和密码</span></span><br><span class="line"><span class="comment">// 3. 最多循环3次[登录3次]，如果 满足条件就提前退出</span></span><br><span class="line"><span class="comment">// 4. 定义一般变量 int chance 记录还有几次登录机会</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="comment">// 代码实现</span></span><br><span class="line"></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">myScanner</span>  <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">passwd</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">chance</span> <span class="operator">=</span> <span class="number">3</span>; <span class="comment">//登录一次 ，就减少一次</span></span><br><span class="line"><span class="keyword">for</span>( <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">3</span>; i++) &#123;<span class="comment">//3次登录机会</span></span><br><span class="line">System.out.println(<span class="string">&quot;请输入名字&quot;</span>);</span><br><span class="line">name = myScanner.next();</span><br><span class="line">System.out.println(<span class="string">&quot;请输入密码&quot;</span>);</span><br><span class="line">passwd = myScanner.next();</span><br><span class="line"><span class="comment">//比较输入的名字和密码是否正确</span></span><br><span class="line"><span class="comment">//补充说明字符串 的内容 比较 使用的 方法 equals</span></span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;丁真&quot;</span>.equals(name) &amp;&amp; <span class="string">&quot;666&quot;</span>.equals(passwd)) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;恭喜你，登录成功~&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//登录的机会就减少一次</span></span><br><span class="line">chance--;</span><br><span class="line">System.out.println(<span class="string">&quot;你还有&quot;</span> + chance + <span class="string">&quot;次登录机会&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-6-2-continue"><a href="#4-6-2-continue" class="headerlink" title="4.6.2 continue"></a>4.6.2 continue</h3><p>也有标签这个东西</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ContinueDetail</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">label1:</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">2</span>; j++)&#123;</span><br><span class="line">label2:</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(i == <span class="number">2</span>)&#123;</span><br><span class="line"><span class="comment">//看看分别输出什么值，并分析</span></span><br><span class="line"><span class="comment">//continue ; //等价于 continue label2</span></span><br><span class="line"><span class="comment">//continue label2;//等价 continue;</span></span><br><span class="line"><span class="keyword">continue</span> label1; <span class="comment">//输出 2次[0,1]</span></span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;i = &quot;</span> + i);<span class="comment">//输出2次[0,1,3,4,5,6,7,8,9]</span></span><br><span class="line">        &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-6-3-return"><a href="#4-6-3-return" class="headerlink" title="4.6.3 return"></a>4.6.3 return</h3><p>方法中的 return 表示退出方法</p><p>main 函数中的 return 表示结束程序</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Return01</span> &#123; </span><br><span class="line"></span><br><span class="line">   <span class="comment">//编写一个main方法</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">5</span>;i++)&#123;</span><br><span class="line"></span><br><span class="line">         <span class="keyword">if</span>(i==<span class="number">3</span>) &#123;</span><br><span class="line">              System.out.println(<span class="string">&quot;韩顺平教育 &quot;</span>+i);</span><br><span class="line">            <span class="keyword">return</span>; <span class="comment">//当return用在方法时，表示跳出方法，如果使用在main,表示退出程序</span></span><br><span class="line">            </span><br><span class="line">         &#125;</span><br><span class="line">         System.out.println(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      System.out.println(<span class="string">&quot;go on..&quot;</span>);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="五、数组、排序和查找"><a href="#五、数组、排序和查找" class="headerlink" title="五、数组、排序和查找"></a>五、数组、排序和查找</h1><h2 id="5-1-数组"><a href="#5-1-数组" class="headerlink" title="5.1 数组"></a>5.1 数组</h2><h3 id="5-1-1-数组基础"><a href="#5-1-1-数组基础" class="headerlink" title="5.1.1 数组基础"></a>5.1.1 数组基础</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Array02</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//演示 数据类型 数组名[]=new 数据类型[大小]</span></span><br><span class="line"><span class="comment">//循环输入5个成绩，保存到double数组,并输出</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//步骤</span></span><br><span class="line"><span class="comment">//1. 创建一个 double 数组，大小 5</span></span><br><span class="line"><span class="comment">//静态初始化就是直接在数组中定义数组内容</span></span><br><span class="line"><span class="comment">//(1) 第一种动态分配方式</span></span><br><span class="line"><span class="comment">//double scores[] = new double[5];</span></span><br><span class="line"><span class="comment">//(2) 第2种动态分配方式， 先声明数组，再 new 分配空间</span></span><br><span class="line"><span class="type">double</span> scores[] ; <span class="comment">//声明数组， 这时 scores 是 null</span></span><br><span class="line">scores = <span class="keyword">new</span> <span class="title class_">double</span>[<span class="number">5</span>]; <span class="comment">// 分配内存空间，可以存放数据</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 循环输入</span></span><br><span class="line"><span class="comment">//   scores.length 表示数组的大小/长度</span></span><br><span class="line"><span class="comment">//   </span></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">myScanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="keyword">for</span>( <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; scores.length; i++) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;请输入第&quot;</span>+ (i+<span class="number">1</span>) +<span class="string">&quot;个元素的值&quot;</span>);</span><br><span class="line">scores[i] = myScanner.nextDouble();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出，遍历数组</span></span><br><span class="line">System.out.println(<span class="string">&quot;==数组的元素/值的情况如下:===&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>( <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; scores.length; i++) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;第&quot;</span>+ (i+<span class="number">1</span>) +<span class="string">&quot;个元素的值=&quot;</span> + scores[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayDetail</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//1. 数组是多个相同类型数据的组合，实现对这些数据的统一管理</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//int[] arr1 = &#123;1, 2, 3, 60,&quot;hello&quot;&#125;;//String -&gt;int</span></span><br><span class="line"><span class="type">double</span>[] arr2 = &#123;<span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>, <span class="number">60.6</span>, <span class="number">100</span>&#125;;<span class="comment">//int -&gt;double</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 数组中的元素可以是任何数据类型，包括基本类型和引用类型，但是不能混用</span></span><br><span class="line">String[] arr3 = &#123;<span class="string">&quot;北京&quot;</span>,<span class="string">&quot;jack&quot;</span>,<span class="string">&quot;milan&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3. 数组创建后，如果没有赋值，有默认值</span></span><br><span class="line"><span class="comment">//int 0，short 0, byte 0, long 0, </span></span><br><span class="line"><span class="comment">//float 0.0,double 0.0，char \u0000，</span></span><br><span class="line"><span class="comment">//boolean false，String null</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="type">short</span>[] arr4 = <span class="keyword">new</span> <span class="title class_">short</span>[<span class="number">3</span>];</span><br><span class="line">System.out.println(<span class="string">&quot;=====数组arr4=====&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr4.length; i++) &#123;</span><br><span class="line">System.out.println(arr4[i]);</span><br><span class="line">&#125;</span><br><span class="line">        <span class="comment">//4. 使用数组的步骤 1. 声明数组并开辟空间 2 给数组各个元素赋值 3 使用数组</span></span><br><span class="line">        <span class="comment">//5. 数组的下标是从 0 开始的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//6. 数组下标必须在指定范围内使用，否则报：下标越界异常，比如 </span></span><br><span class="line"><span class="comment">//int [] arr=new int[5]; 则有效下标为 0-4 </span></span><br><span class="line"><span class="comment">//即数组的下标/索引 最小 0 最大 数组长度-1(4)</span></span><br><span class="line"><span class="type">int</span> [] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">5</span>];</span><br><span class="line"><span class="comment">//System.out.println(arr[5]);//数组越界</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//7. 数组属引用类型，数组型数据是对象(object)</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-1-2-数组赋值机制-※"><a href="#5-1-2-数组赋值机制-※" class="headerlink" title="5.1.2 数组赋值机制 (※)"></a>5.1.2 数组赋值机制 (※)</h3><p>没有 <code>new</code> 过 (初始化) 的数组没有独立空间, 只是声明了而已</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayAssign</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//基本数据类型赋值, 赋值方式为值拷贝</span></span><br><span class="line"><span class="comment">//n2的变化，不会影响到n1的值</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n1</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">n2</span> <span class="operator">=</span> n1;</span><br><span class="line"></span><br><span class="line">n2 = <span class="number">80</span>;</span><br><span class="line">System.out.println(<span class="string">&quot;n1=&quot;</span> + n1);<span class="comment">//10</span></span><br><span class="line">System.out.println(<span class="string">&quot;n2=&quot;</span> + n2);<span class="comment">//80</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组在默认情况下是引用传递，赋的值是地址，赋值方式为引用赋值</span></span><br><span class="line"><span class="comment">//是一个地址 , arr2变化会影响到 arr1</span></span><br><span class="line"><span class="type">int</span>[] arr1 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line"><span class="type">int</span>[] arr2 = arr1;<span class="comment">//把 arr1赋给 arr2</span></span><br><span class="line">arr2[<span class="number">0</span>] = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//看看arr1的值</span></span><br><span class="line">System.out.println(<span class="string">&quot;====arr1的元素====&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr1.length; i++) &#123;</span><br><span class="line">System.out.println(arr1[i]);<span class="comment">//10, 2, 3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;====arr2的元素====&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr2.length; i++) &#123;</span><br><span class="line">System.out.println(arr2[i]);<span class="comment">//10, 2, 3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230125214546419.png" alt="数组内存图"></p><h3 id="5-1-3-数组拷贝"><a href="#5-1-3-数组拷贝" class="headerlink" title="5.1.3 数组拷贝"></a>5.1.3 数组拷贝</h3><p>新建一个数组, 开辟一个独立的空间, 将原数组的值赋值到新的数组</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayCopy</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将 int[] arr1 = &#123;10,20,30&#125;; 拷贝到 arr2数组, </span></span><br><span class="line"><span class="comment">//要求数据空间是独立的.</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] arr1 = &#123;<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建一个新的数组arr2,开辟新的数据空间</span></span><br><span class="line"><span class="comment">//大小 arr1.length;</span></span><br><span class="line"><span class="type">int</span>[] arr2 = <span class="keyword">new</span> <span class="title class_">int</span>[arr1.length];</span><br><span class="line"></span><br><span class="line"><span class="comment">//遍历 arr1 ，把每个元素拷贝到arr2对应的元素位置</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr1.length; i++) &#123;</span><br><span class="line">arr2[i] = arr1[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//老师修改 arr2， 不会对arr1有影响.</span></span><br><span class="line">arr2[<span class="number">0</span>] = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出arr1 </span></span><br><span class="line">System.out.println(<span class="string">&quot;====arr1的元素====&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr1.length; i++) &#123;</span><br><span class="line">System.out.println(arr1[i]);<span class="comment">//10,20,30</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">System.out.println(<span class="string">&quot;====arr2的元素====&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr2.length; i++) &#123;</span><br><span class="line">System.out.println(arr2[i]);<span class="comment">//</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-1-4-数组翻转"><a href="#5-1-4-数组翻转" class="headerlink" title="5.1.4 数组翻转"></a>5.1.4 数组翻转</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式 1：通过找规律反转</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayReverse</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义数组</span></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>, <span class="number">66</span>&#125;;</span><br><span class="line"><span class="comment">//规律</span></span><br><span class="line"><span class="comment">//1. 把 arr[0] 和 arr[5] 进行交换 &#123;66,22,33,44,55,11&#125;</span></span><br><span class="line"><span class="comment">//2. 把 arr[1] 和 arr[4] 进行交换 &#123;66,55,33,44,22,11&#125;</span></span><br><span class="line"><span class="comment">//3. 把 arr[2] 和 arr[3] 进行交换 &#123;66,55,44,33,22,11&#125;</span></span><br><span class="line"><span class="comment">//4. 一共要交换 3 次 = arr.length / 2</span></span><br><span class="line"><span class="comment">//5. 每次交换时，对应的下标 是 arr[i] 和 arr[arr.length - 1 -i]</span></span><br><span class="line"><span class="comment">//代码</span></span><br><span class="line"><span class="comment">//优化</span></span><br><span class="line"><span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> arr.length; <span class="comment">//计算数组的长度</span></span><br><span class="line"><span class="keyword">for</span>( <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len / <span class="number">2</span>; i++) &#123;</span><br><span class="line">temp = arr[len - <span class="number">1</span> - i];<span class="comment">//保存</span></span><br><span class="line">arr[len - <span class="number">1</span> - i] = arr[i];</span><br><span class="line">arr[i] = temp; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;===翻转后数组===&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">System.out.print(arr[i] + <span class="string">&quot;\t&quot;</span>);<span class="comment">//66,55,44,33,22,11</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式 2：使用逆序赋值方式</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayReverse02</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义数组</span></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>, <span class="number">66</span>&#125;;</span><br><span class="line"><span class="comment">//使用逆序赋值方式 </span></span><br><span class="line"><span class="comment">//1. 先创建一个新的数组 arr2 ,大小 arr.length</span></span><br><span class="line"><span class="comment">//2. 逆序遍历 arr ,将 每个元素拷贝到 arr2的元素中(顺序拷贝)</span></span><br><span class="line"><span class="comment">//3. 建议增加一个循环变量 j -&gt; 0 -&gt; 5</span></span><br><span class="line"><span class="type">int</span>[] arr2 = <span class="keyword">new</span> <span class="title class_">int</span>[arr.length];</span><br><span class="line"><span class="comment">//逆序遍历 arr</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> arr.length - <span class="number">1</span>, j = <span class="number">0</span>; i &gt;= <span class="number">0</span>; i--, j++) &#123;</span><br><span class="line">arr2[j] = arr[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//4. 当for循环结束，arr2就是一个逆序的数组 &#123;66, 55, 44,33, 22, 11&#125; </span></span><br><span class="line"><span class="comment">//5. 让 arr 指向 arr2数据空间, 此时 arr原来的数据空间就没有变量引用</span></span><br><span class="line"><span class="comment">//   会被当做垃圾，销毁</span></span><br><span class="line">arr = arr2;</span><br><span class="line">System.out.println(<span class="string">&quot;====arr的元素情况=====&quot;</span>);</span><br><span class="line"><span class="comment">//6. 输出 arr 看看</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">System.out.print(arr[i] + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-1-5-数组扩容"><a href="#5-1-5-数组扩容" class="headerlink" title="5.1.5 数组扩容"></a>5.1.5 数组扩容</h3><p>新建一个数组之后扩容, 再将原数组名指向新的数组, 原数组空间被垃圾回收机制回收销毁</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayAdd02</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">要求：实现动态的给数组添加元素效果，实现对数组扩容。ArrayAdd.java</span></span><br><span class="line"><span class="comment">1.原始数组使用静态分配 int[] arr = &#123;1,2,3&#125;</span></span><br><span class="line"><span class="comment">2.增加的元素4，直接放在数组的最后 arr = &#123;1,2,3,4&#125;</span></span><br><span class="line"><span class="comment">3.用户可以通过如下方法来决定是否继续添加，添加成功，是否继续？y/n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">思路分析</span></span><br><span class="line"><span class="comment">1. 定义初始数组 int[] arr = &#123;1,2,3&#125;//下标0-2</span></span><br><span class="line"><span class="comment">2. 定义一个新的数组 int[] arrNew = new int[arr.length+1];</span></span><br><span class="line"><span class="comment">3. 遍历 arr 数组，依次将arr的元素拷贝到 arrNew数组</span></span><br><span class="line"><span class="comment">4. 将 4 赋给 arrNew[arrNew.length - 1] = 4;把4赋给arrNew最后一个元素</span></span><br><span class="line"><span class="comment">5. 让 arr 指向 arrNew ;  arr = arrNew; 那么 原来arr数组就被销毁</span></span><br><span class="line"><span class="comment">6. 创建一个 Scanner可以接受用户输入</span></span><br><span class="line"><span class="comment">7. 因为用户什么时候退出，不确定，老师使用 do-while + break来控制</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="type">Scanner</span> <span class="variable">myScanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"><span class="comment">//初始化数组</span></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line"><span class="type">int</span>[] arrNew = <span class="keyword">new</span> <span class="title class_">int</span>[arr.length + <span class="number">1</span>];</span><br><span class="line"><span class="comment">//遍历 arr 数组，依次将arr的元素拷贝到 arrNew数组</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">arrNew[i] = arr[i];</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;请输入你要添加的元素&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">addNum</span> <span class="operator">=</span> myScanner.nextInt();</span><br><span class="line"><span class="comment">//把addNum赋给arrNew最后一个元素</span></span><br><span class="line">arrNew[arrNew.length - <span class="number">1</span>] = addNum;</span><br><span class="line"><span class="comment">//让 arr 指向 arrNew, </span></span><br><span class="line">arr = arrNew;</span><br><span class="line"><span class="comment">//输出arr 看看效果</span></span><br><span class="line">System.out.println(<span class="string">&quot;====arr扩容后元素情况====&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">System.out.print(arr[i] + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//问用户是否继续</span></span><br><span class="line">System.out.println(<span class="string">&quot;是否继续添加 y/n&quot;</span>);</span><br><span class="line"><span class="type">char</span> <span class="variable">key</span> <span class="operator">=</span> myScanner.next().charAt(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>( key == <span class="string">&#x27;n&#x27;</span>) &#123; <span class="comment">//如果输入n ,就结束</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">while</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;你退出了添加...&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="5-1-6-数组缩减"><a href="#5-1-6-数组缩减" class="headerlink" title="5.1.6 数组缩减"></a>5.1.6 数组缩减</h3><p>新建一个数组之后缩减, 再将原数组名指向新的数组, 原数组空间被垃圾回收机制回收销毁</p><h3 id="5-1-7-应用案例"><a href="#5-1-7-应用案例" class="headerlink" title="5.1.7 应用案例"></a>5.1.7 应用案例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayExercise01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">创建一个char类型的26个元素的数组，分别 放置&#x27;A&#x27;-&#x27;Z&#x27;。</span></span><br><span class="line"><span class="comment">使用for循环访问所有元素并打印出来。</span></span><br><span class="line"><span class="comment">提示：char类型数据运算 &#x27;A&#x27;+1 -&gt; &#x27;B&#x27;  </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">思路分析</span></span><br><span class="line"><span class="comment">1. 定义一个 数组  char[] chars = new char[26]</span></span><br><span class="line"><span class="comment">2. 因为 &#x27;A&#x27; + 1 = &#x27;B&#x27; 类推，所以老师使用for来赋值</span></span><br><span class="line"><span class="comment">3. 使用for循环访问所有元素</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">char</span>[] chars = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">26</span>];</span><br><span class="line"><span class="keyword">for</span>( <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; chars.length; i++) &#123;<span class="comment">//循环26次</span></span><br><span class="line"><span class="comment">//chars 是 char[] </span></span><br><span class="line"><span class="comment">//chars[i] 是 char</span></span><br><span class="line">chars[i] = (<span class="type">char</span>)(<span class="string">&#x27;A&#x27;</span> + i); <span class="comment">//&#x27;A&#x27; + i 是int , 需要强制转换</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//循环输出</span></span><br><span class="line">System.out.println(<span class="string">&quot;===chars数组===&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>( <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; chars.length; i++) &#123;<span class="comment">//循环26次</span></span><br><span class="line">System.out.print(chars[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayExercise02</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//请求出一个数组int[]的最大值 &#123;4,-1,9, 10,23&#125;，并得到对应的下标</span></span><br><span class="line"><span class="comment">//老韩思路分析</span></span><br><span class="line"><span class="comment">//1. 定义一个int数组 int[] arr = &#123;4,-1,9, 10,23&#125;;</span></span><br><span class="line"><span class="comment">//2. 假定 max = arr[0] 是最大值 , maxIndex=0;</span></span><br><span class="line"><span class="comment">//3. 从下标 1 开始遍历arr， 如果max &lt; 当前元素，说明max 不是真正的</span></span><br><span class="line"><span class="comment">//   最大值, 我们就 max=当前元素; maxIndex=当前元素下标</span></span><br><span class="line"><span class="comment">//4. 当我们遍历这个数组arr后 , max就是真正的最大值，maxIndex最大值</span></span><br><span class="line"><span class="comment">//   对应的下标</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">4</span>,-<span class="number">1</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">23</span>&#125;;</span><br><span class="line"><span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> arr[<span class="number">0</span>];<span class="comment">//假定第一个元素就是最大值</span></span><br><span class="line"><span class="type">int</span> <span class="variable">maxIndex</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; arr.length; i++) &#123;<span class="comment">//从下标 1 开始遍历arr</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(max &lt; arr[i]) &#123;<span class="comment">//如果max &lt; 当前元素</span></span><br><span class="line">max = arr[i]; <span class="comment">//把max 设置成 当前元素</span></span><br><span class="line">maxIndex = i; </span><br><span class="line">&#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="comment">//当我们遍历这个数组arr后 , max就是真正的最大值，maxIndex最大值下标</span></span><br><span class="line">System.out.println(<span class="string">&quot;max=&quot;</span> + max + <span class="string">&quot; maxIndex=&quot;</span> + maxIndex);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Homework04</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">已知有个升序的数组，要求插入一个元素，该数组顺序依然是升序, 比如:  </span></span><br><span class="line"><span class="comment">[10， 12， 45， 90],  添加23 后, 数组为 [10， 12，23， 45， 90]</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">思路 本质数组扩容 + 定位</span></span><br><span class="line"><span class="comment">1. 我们先确定 添加数应该插入到哪个索引</span></span><br><span class="line"><span class="comment">2. 然后扩容</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//先定义原数组</span></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">10</span>, <span class="number">12</span>, <span class="number">45</span>, <span class="number">90</span>&#125;;</span><br><span class="line"><span class="type">int</span> <span class="variable">insertNum</span> <span class="operator">=</span> <span class="number">111</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> -<span class="number">1</span>; <span class="comment">//index就是要插入的位置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//遍历 arr数组， 如果发现 insertNum&lt;=arr[i], 说明 i 就是要插入的位置</span></span><br><span class="line"><span class="comment">//使用 index 保留 index = i;</span></span><br><span class="line"><span class="comment">//如果遍历完后，没有发现 insertNum&lt;=arr[i]， 说明 index = arr.length</span></span><br><span class="line"><span class="comment">//即：添加到arr的最后</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(insertNum &lt;= arr[i]) &#123;</span><br><span class="line">index = i;</span><br><span class="line"><span class="keyword">break</span>; <span class="comment">//找到位置后，就退出</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断index 的值</span></span><br><span class="line"><span class="keyword">if</span>(index == -<span class="number">1</span>) &#123; <span class="comment">//说明没有还没有找到位置</span></span><br><span class="line">index = arr.length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//扩容</span></span><br><span class="line"><span class="comment">//先创建一个新的数组，大小 arr.length + 1</span></span><br><span class="line"><span class="type">int</span>[] arrNew = <span class="keyword">new</span> <span class="title class_">int</span>[arr.length + <span class="number">1</span>];</span><br><span class="line"><span class="comment">//下面老师准备将arr的元素拷贝到 arrNew ,并且要跳过 index位置</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">分析:</span></span><br><span class="line"><span class="comment">int[] arr = &#123;10, 12, 45, 90&#125;;</span></span><br><span class="line"><span class="comment">arrNew = &#123;              &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//i 控制arrNew的下标  , j用来控制arr数组的下标</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = <span class="number">0</span>; i &lt; arrNew.length; i++) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>( i != index ) &#123; <span class="comment">//说明可以把 arr的元素拷贝到 arrNew</span></span><br><span class="line">arrNew[i] = arr[j];</span><br><span class="line">j++;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">//i这个位置就是要插入的数</span></span><br><span class="line">arrNew[i] = insertNum;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//让arr 指向 arrNew , 原来的数组，就成为垃圾，被销毁</span></span><br><span class="line">arr = arrNew;</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;======插入后，arr数组的元素情况======&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">System.out.print(arr[i] + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="5-2-排序"><a href="#5-2-排序" class="headerlink" title="5.2 排序"></a>5.2 排序</h2><h3 id="5-2-1-内部排序"><a href="#5-2-1-内部排序" class="headerlink" title="5.2.1 内部排序"></a>5.2.1 内部排序</h3><p>指将需要处理的所有数据都加载到内部存储器中进行排序。</p><p>包括 (交换式排序法、选择式排序法和插入式排序法)；</p><h3 id="5-2-2-外部排序"><a href="#5-2-2-外部排序" class="headerlink" title="5.2.2 外部排序"></a>5.2.2 外部排序</h3><p>数据量过大，无法全部加载到内存中，需要借助外部存储进行排序。</p><p>包括 (合并排序法和直接合并排序法)</p><h3 id="5-2-3-冒泡排序"><a href="#5-2-3-冒泡排序" class="headerlink" title="5.2.3 冒泡排序"></a>5.2.3 冒泡排序</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BubbleSort</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//老韩 化繁为简，先死后活</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">数组 [24,69,80,57,13]</span></span><br><span class="line"><span class="comment">第1轮排序: 目标把最大数放在最后</span></span><br><span class="line"><span class="comment">第1次比较[24,69,80,57,13]</span></span><br><span class="line"><span class="comment">第2次比较[24,69,80,57,13]</span></span><br><span class="line"><span class="comment">第3次比较[24,69,57,80,13]</span></span><br><span class="line"><span class="comment">第4次比较[24,69,57,13,80]</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">24</span>, <span class="number">69</span>, <span class="number">80</span>, <span class="number">57</span>, <span class="number">13</span>, -<span class="number">1</span>, <span class="number">30</span>, <span class="number">200</span>, -<span class="number">110</span>&#125;;</span><br><span class="line"><span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">//用于辅助交换的变量</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//将多轮排序使用外层循环包括起来即可</span></span><br><span class="line"><span class="comment">//先死后活 =》 4就是 arr.length - 1</span></span><br><span class="line"><span class="keyword">for</span>( <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length - <span class="number">1</span>; i++) &#123;<span class="comment">//外层循环是4次</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>( <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; arr.length - <span class="number">1</span> - i; j++) &#123;<span class="comment">//4次比较-3次-2次-1次</span></span><br><span class="line"><span class="comment">//如果前面的数&gt;后面的数，就交换</span></span><br><span class="line"><span class="keyword">if</span>(arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">temp = arr[j];</span><br><span class="line">arr[j] = arr[j+<span class="number">1</span>];</span><br><span class="line">arr[j+<span class="number">1</span>] = temp;  </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;\n==第&quot;</span>+(i+<span class="number">1</span>)+<span class="string">&quot;轮==&quot;</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; arr.length; j++) &#123;</span><br><span class="line">System.out.print(arr[j] + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 一下是一个一个循环, 两层循环的前一个版本</span></span><br><span class="line">        </span><br><span class="line"><span class="comment">// for( int j = 0; j &lt; 4; j++) &#123;//4次比较</span></span><br><span class="line"><span class="comment">// //如果前面的数&gt;后面的数，就交换</span></span><br><span class="line"><span class="comment">// if(arr[j] &gt; arr[j + 1]) &#123;</span></span><br><span class="line"><span class="comment">// temp = arr[j];</span></span><br><span class="line"><span class="comment">// arr[j] = arr[j+1];</span></span><br><span class="line"><span class="comment">// arr[j+1] = temp;  </span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// System.out.println(&quot;==第1轮==&quot;);</span></span><br><span class="line"><span class="comment">// for(int j = 0; j &lt; arr.length; j++) &#123;</span></span><br><span class="line"><span class="comment">// System.out.print(arr[j] + &quot;\t&quot;);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// /*</span></span><br><span class="line"><span class="comment">// 第2轮排序: 目标把第二大数放在倒数第二位置</span></span><br><span class="line"><span class="comment">// 第1次比较[24,69,57,13,80]</span></span><br><span class="line"><span class="comment">// 第2次比较[24,57,69,13,80]</span></span><br><span class="line"><span class="comment">// 第3次比较[24,57,13,69,80]</span></span><br><span class="line"><span class="comment">//  */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// for( int j = 0; j &lt; 3; j++) &#123;//3次比较</span></span><br><span class="line"><span class="comment">// //如果前面的数&gt;后面的数，就交换</span></span><br><span class="line"><span class="comment">// if(arr[j] &gt; arr[j + 1]) &#123;</span></span><br><span class="line"><span class="comment">// temp = arr[j];</span></span><br><span class="line"><span class="comment">// arr[j] = arr[j+1];</span></span><br><span class="line"><span class="comment">// arr[j+1] = temp;  </span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// System.out.println(&quot;\n==第2轮==&quot;);</span></span><br><span class="line"><span class="comment">// for(int j = 0; j &lt; arr.length; j++) &#123;</span></span><br><span class="line"><span class="comment">// System.out.print(arr[j] + &quot;\t&quot;);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第3轮排序: 目标把第3大数放在倒数第3位置</span></span><br><span class="line"><span class="comment">// 第1次比较[24,57,13,69,80]</span></span><br><span class="line"><span class="comment">// 第2次比较[24,13,57,69,80]</span></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="comment">// for( int j = 0; j &lt; 2; j++) &#123;//2次比较</span></span><br><span class="line"><span class="comment">// //如果前面的数&gt;后面的数，就交换</span></span><br><span class="line"><span class="comment">// if(arr[j] &gt; arr[j + 1]) &#123;</span></span><br><span class="line"><span class="comment">// temp = arr[j];</span></span><br><span class="line"><span class="comment">// arr[j] = arr[j+1];</span></span><br><span class="line"><span class="comment">// arr[j+1] = temp;  </span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// System.out.println(&quot;\n==第3轮==&quot;);</span></span><br><span class="line"><span class="comment">// for(int j = 0; j &lt; arr.length; j++) &#123;</span></span><br><span class="line"><span class="comment">// System.out.print(arr[j] + &quot;\t&quot;);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// /*</span></span><br><span class="line"><span class="comment">// 第4轮排序: 目标把第4大数放在倒数第4位置</span></span><br><span class="line"><span class="comment">// 第1次比较[13,24,57,69,80]</span></span><br><span class="line"><span class="comment">//  */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// for( int j = 0; j &lt; 1; j++) &#123;//1次比较</span></span><br><span class="line"><span class="comment">// //如果前面的数&gt;后面的数，就交换</span></span><br><span class="line"><span class="comment">// if(arr[j] &gt; arr[j + 1]) &#123;</span></span><br><span class="line"><span class="comment">// temp = arr[j];</span></span><br><span class="line"><span class="comment">// arr[j] = arr[j+1];</span></span><br><span class="line"><span class="comment">// arr[j+1] = temp;  </span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// System.out.println(&quot;\n==第4轮==&quot;);</span></span><br><span class="line"><span class="comment">// for(int j = 0; j &lt; arr.length; j++) &#123;</span></span><br><span class="line"><span class="comment">// System.out.print(arr[j] + &quot;\t&quot;);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="5-3-查找"><a href="#5-3-查找" class="headerlink" title="5.3 查找"></a>5.3 查找</h2><p>常用查找:</p><ul><li>顺序查找</li><li>二分查找</li></ul><h3 id="5-3-1-顺序查找"><a href="#5-3-1-顺序查找" class="headerlink" title="5.3.1 顺序查找"></a>5.3.1 顺序查找</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SeqSearch</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">有一个数列：白眉鹰王、金毛狮王、紫衫龙王、青翼蝠王猜数游戏：</span></span><br><span class="line"><span class="comment">从键盘中任意输入一个名称，判断数列中是否包含此名称【顺序查找】 </span></span><br><span class="line"><span class="comment">要求: 如果找到了，就提示找到，并给出下标值</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">思路分析</span></span><br><span class="line"><span class="comment">1. 定义一个字符串数组</span></span><br><span class="line"><span class="comment">2. 接收用户输入, 遍历数组，逐一比较，如果有，则提示信息，并退出</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//定义一个字符串数组</span></span><br><span class="line">String[] names = &#123;<span class="string">&quot;白眉鹰王&quot;</span>, <span class="string">&quot;金毛狮王&quot;</span>, <span class="string">&quot;紫衫龙王&quot;</span>, <span class="string">&quot;青翼蝠王&quot;</span>&#125;;</span><br><span class="line"><span class="type">Scanner</span> <span class="variable">myScanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in); </span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;请输入名字&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">findName</span> <span class="operator">=</span> myScanner.next();</span><br><span class="line"></span><br><span class="line"><span class="comment">//遍历数组，逐一比较，如果有，则提示信息，并退出</span></span><br><span class="line"><span class="comment">//这里老师给大家一个编程思想/技巧, 一个经典的方法</span></span><br><span class="line"><span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; names.length; i++) &#123;</span><br><span class="line"><span class="comment">//比较 字符串比较 equals, 如果要找到名字就是当前元素</span></span><br><span class="line"><span class="keyword">if</span>(findName.equals(names[i])) &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;恭喜你找到 &quot;</span> + findName);</span><br><span class="line">System.out.println(<span class="string">&quot;下标为= &quot;</span> + i);</span><br><span class="line"><span class="comment">//把i 保存到 index</span></span><br><span class="line">index = i;</span><br><span class="line"><span class="keyword">break</span>;<span class="comment">//退出 </span></span><br><span class="line">&#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(index == -<span class="number">1</span>) &#123; <span class="comment">//没有找到</span></span><br><span class="line">System.out.println(<span class="string">&quot;sorry ,没有找到 &quot;</span> + findName);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="5-4-二维数组"><a href="#5-4-二维数组" class="headerlink" title="5.4 二维数组"></a>5.4 二维数组</h2><h3 id="5-4-1-二维数组基础"><a href="#5-4-1-二维数组基础" class="headerlink" title="5.4.1 二维数组基础"></a>5.4.1 二维数组基础</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TwoDimensionalArray01</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">请用二维数组输出如下图形</span></span><br><span class="line"><span class="comment">0 0 0 0 0 0</span></span><br><span class="line"><span class="comment">0 0 1 0 0 0</span></span><br><span class="line"><span class="comment">0 2 0 3 0 0</span></span><br><span class="line"><span class="comment">0 0 0 0 0 0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//什么是二维数组： </span></span><br><span class="line"><span class="comment">//老韩解读</span></span><br><span class="line"><span class="comment">//1. 从定义形式上看 int[][]</span></span><br><span class="line"><span class="comment">//2. 可以这样理解，原来的一维数组的每个元素是一维数组, 就构成二维数组</span></span><br><span class="line"><span class="type">int</span>[][] arr = &#123; &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;,</span><br><span class="line">&#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;, </span><br><span class="line">&#123;<span class="number">0</span>,<span class="number">2</span>,  <span class="number">0</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>&#125;, </span><br><span class="line">&#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//关于二维数组的关键概念</span></span><br><span class="line"><span class="comment">//(1)</span></span><br><span class="line">System.out.println(<span class="string">&quot;二维数组的元素个数=&quot;</span> + arr.length);</span><br><span class="line"><span class="comment">//(2) 二维数组的每个元素是一维数组, 所以如果需要得到每个一维数组的值</span></span><br><span class="line"><span class="comment">//    还需要再次遍历</span></span><br><span class="line"><span class="comment">//(3) 如果我们要访问第 (i+1)个一维数组的第j+1个值 arr[i][j];</span></span><br><span class="line"><span class="comment">//    举例 访问 3, =》 他是第3个一维数组的第4个值 arr[2][3]</span></span><br><span class="line">System.out.println(<span class="string">&quot;第3个一维数组的第4个值=&quot;</span> + arr[<span class="number">2</span>][<span class="number">3</span>]); <span class="comment">//3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//输出二维图形</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;<span class="comment">//遍历二维数组的每个元素</span></span><br><span class="line"><span class="comment">//遍历二维数组的每个元素(数组)</span></span><br><span class="line"><span class="comment">//1. arr[i] 表示 二维数组的第i+1个元素 比如arr[0]：二维数组的第一个元素</span></span><br><span class="line"><span class="comment">//2. arr[i].length 得到 对应的 每个一维数组的长度 </span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; arr[i].length; j++) &#123;</span><br><span class="line">System.out.print(arr[i][j] + <span class="string">&quot; &quot;</span>); <span class="comment">//输出了一维数组</span></span><br><span class="line">&#125;</span><br><span class="line">System.out.println();<span class="comment">//换行</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-4-2-二维数组赋值机制-※"><a href="#5-4-2-二维数组赋值机制-※" class="headerlink" title="5.4.2 二维数组赋值机制 (※)"></a>5.4.2 二维数组赋值机制 (※)</h3><p>允许列不相等, 即 <code>new</code> 的时候必须把行确定出来, 列可以后续开辟</p><p>本质上是一维数组的每一个元素都是一维数组, 这时候就要把外层的一维数组确定出来</p><p>而内层的一维数组可以后续进行创建, 如果没创建, 内存默认为 <code>null</code>, 无伤大雅, 啥都不影响</p><p>因此可以动态定义每一行的列数, 没有定义的列均为 <code>null</code></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230126132258325.png" alt="二维数组赋值机制"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 动态初始化</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TwoDimensionalArray02</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//int arr[][] = new int[2][3];</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> arr[][]; <span class="comment">//声明二维数组</span></span><br><span class="line">arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>][<span class="number">3</span>];<span class="comment">//再开空间 </span></span><br><span class="line"></span><br><span class="line">arr[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">8</span>;</span><br><span class="line"><span class="comment">//遍历arr数组</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; arr[i].length; j++) &#123;<span class="comment">//对每个一维数组遍历</span></span><br><span class="line">System.out.print(arr[i][j] +<span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println();<span class="comment">//换行</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 列数不确定性</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TwoDimensionalArray03</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">看一个需求：动态创建下面二维数组，并输出</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> i = 0:1</span></span><br><span class="line"><span class="comment"> i = 1:22</span></span><br><span class="line"><span class="comment"> i = 2:333</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> 一个有三个一维数组, 每个一维数组的元素是不一样的</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建 二维数组，一个有3个一维数组，但是每个一维数组还没有开数据空间</span></span><br><span class="line"><span class="type">int</span>[][] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>][]; </span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;<span class="comment">//遍历arr每个一维数组</span></span><br><span class="line"><span class="comment">//给每个一维数组开空间 new</span></span><br><span class="line"><span class="comment">//如果没有给一维数组 new ,那么 arr[i]就是null</span></span><br><span class="line">arr[i] = <span class="keyword">new</span> <span class="title class_">int</span>[i + <span class="number">1</span>]; </span><br><span class="line"></span><br><span class="line"><span class="comment">//遍历一维数组，并给一维数组的每个元素赋值</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>;  j &lt; arr[i].length; j++) &#123;</span><br><span class="line">arr[i][j] = i + <span class="number">1</span>;<span class="comment">//赋值</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;=====arr元素=====&quot;</span>);</span><br><span class="line"><span class="comment">//遍历arr输出</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="comment">//输出arr的每个一维数组</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; arr[i].length; j++) &#123;</span><br><span class="line">System.out.print(arr[i][j] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println();<span class="comment">//换行</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>静态初始化就是直接在定义时赋值</p><p><code>类型 数组名[][] = &#123;&#123;值 1,值 2..&#125;,&#123;值 1,值 2..&#125;,&#123;值 1,值 2..&#125;&#125;</code></p><h3 id="5-4-3-杨辉三角"><a href="#5-4-3-杨辉三角" class="headerlink" title="5.4.3 杨辉三角"></a>5.4.3 杨辉三角</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">YangHui</span> &#123; </span><br><span class="line"></span><br><span class="line"><span class="comment">//编写一个main方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">使用二维数组打印一个 10 行杨辉三角</span></span><br><span class="line"><span class="comment">1</span></span><br><span class="line"><span class="comment">1 1</span></span><br><span class="line"><span class="comment">1 2 1</span></span><br><span class="line"><span class="comment">1 3 3  1</span></span><br><span class="line"><span class="comment">1 4 6  4  1</span></span><br><span class="line"><span class="comment">1 5 10 10 5 1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">规律</span></span><br><span class="line"><span class="comment"> 1.第一行有 1 个元素, 第 n 行有 n 个元素</span></span><br><span class="line"><span class="comment"> 2. 每一行的第一个元素和最后一个元素都是 1</span></span><br><span class="line"><span class="comment"> 3. 从第三行开始, 对于非第一个元素和最后一个元素的元素的值. arr[i][j] </span></span><br><span class="line"><span class="comment">  arr[i][j]  =  arr[i-1][j] + arr[i-1][j-1]; //必须找到这个规律</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span>[][] yangHui = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">12</span>][];</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; yangHui.length; i++) &#123;<span class="comment">//遍历yangHui的每个元素</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//给每个一维数组(行) 开空间</span></span><br><span class="line">yangHui[i] = <span class="keyword">new</span> <span class="title class_">int</span>[i+<span class="number">1</span>];</span><br><span class="line"><span class="comment">//给每个一维数组(行) 赋值</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; yangHui[i].length; j++)&#123;</span><br><span class="line"><span class="comment">//每一行的第一个元素和最后一个元素都是1</span></span><br><span class="line"><span class="keyword">if</span>(j == <span class="number">0</span> || j == yangHui[i].length - <span class="number">1</span>) &#123;</span><br><span class="line">yangHui[i][j] = <span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;<span class="comment">//中间的元素</span></span><br><span class="line">yangHui[i][j]  =  yangHui[i-<span class="number">1</span>][j] + yangHui[i-<span class="number">1</span>][j-<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//输出杨辉三角</span></span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; yangHui.length; i++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; yangHui[i].length; j++) &#123;<span class="comment">//遍历输出该行</span></span><br><span class="line">System.out.print(yangHui[i][j] + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println();<span class="comment">//换行.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-4-4-二维数组使用细节"><a href="#5-4-4-二维数组使用细节" class="headerlink" title="5.4.4 二维数组使用细节"></a>5.4.4 二维数组使用细节</h3><ol><li><p>一维数组的声明方式有: <code>int[] x 或者 int x[]</code></p></li><li><p>二维数组的声明方式有: <code>int[][] y 或者 int[] y[] 或者 int y</code>[][]</p></li><li><p>二维数组实际上是由多个一维数组组成的，它的各个一维数组的长度可以相同，也可以不相同。</p><p>比如： map[][] 是一个二维数组 <code>int map [][] = &#123;&#123;1,2&#125;,&#123;3,4,5&#125;&#125;</code></p><p>由 map[0] 是一个含有两个元素的一维数组 ，map[1] 是一个含有三个元素的一维数组构成，我们也称为列数不等的二维数组</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UML 类图与对象间的关系</title>
      <link href="/2023/01/18/UML%20%E7%B1%BB%E5%9B%BE%E4%B8%8E%E5%AF%B9%E8%B1%A1%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/"/>
      <url>/2023/01/18/UML%20%E7%B1%BB%E5%9B%BE%E4%B8%8E%E5%AF%B9%E8%B1%A1%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="UML-类图与对象间的关系"><a href="#UML-类图与对象间的关系" class="headerlink" title="UML 类图与对象间的关系"></a>UML 类图与对象间的关系</h1><h1 id="一、UML"><a href="#一、UML" class="headerlink" title="一、UML"></a>一、UML</h1><blockquote><p>UML——Unified modeling language UML (统一建模语言)，是一种用于软件系统分析和设计的语言工具，它用<br>于帮助软件开发人员进行思考和记录思路的结果</p></blockquote><h2 id="1-1-UML-图的分类"><a href="#1-1-UML-图的分类" class="headerlink" title="1.1 UML 图的分类"></a>1.1 UML 图的分类</h2><ol><li>用例图(use case)</li><li>静态结构图：类图、对象图、包图、组件图、部署图</li><li>动态行为图：交互图（时序图与协作图）、状态图、活动图</li></ol><p>类图用于描述<strong>类(对象)本身的组成和类(对象)之间的各种静态关系</strong>, 最重要</p><h2 id="1-2-类图的使用"><a href="#1-2-类图的使用" class="headerlink" title="1.2 类图的使用"></a>1.2 类图的使用</h2><p>我们借助画图网站中的元素来了解类图的使用</p><blockquote><p><a href="https://app.diagrams.net/">https://app.diagrams.net/</a></p></blockquote><p>书写格式: <code>属性名\方法名: 类型</code></p><p>就是正常在代码里用的时候反过来</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118153821028.png" alt="创建一个类"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118153901253.png" alt="创建一个只有属性的类"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118154630361.png" alt="创建一个空白的类"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118154650042.png" alt="创建一个无属性无方法的类"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118154732067.png" alt="创建一个有属性有方法的类"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118154050354.png" alt="在一个类中添加一个属性或方法"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118154137727.png" alt="添加一个分割线"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118153802069.png" alt="创建一个接口"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118154757768.png" alt="创建一个啥都有的接口"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118155201370.png" alt="依赖关系"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118155043427.png" alt="关联关系（1 对 1"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118155250136.png" alt="关联关系（双向）"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118155438870.png" alt="关联关系(单向)"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118155216238.png" alt="泛化（继承）关系"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118155346819.png" alt="实现关系"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118155119549.png" alt="聚合关系(一对多)"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118155407954.png" alt="聚合关系(一对一)"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118155139963.png" alt="组合关系(一对多)"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118155419516.png" alt="组合关系(一对一)"></p><hr><h1 id="二、依赖关系-Dependence"><a href="#二、依赖关系-Dependence" class="headerlink" title="二、依赖关系 (Dependence)"></a>二、依赖关系 (Dependence)</h1><blockquote><p>只要是在<strong>类中用到了对方</strong>，那么他们之间<strong>就存在依赖关系</strong>。如果没有对方，连编绎都通过不了。</p></blockquote><ul><li><strong>类中</strong>用到了对方</li><li>如果是<strong>类的成员属性</strong></li><li>如果是<strong>方法的返回类型</strong></li><li>是<strong>方法接收的参数类型</strong></li><li><strong>方法中</strong>使用到</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PersonServiceBean</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> PersonDao personDao;<span class="comment">//类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Person person)</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> IDCard <span class="title function_">getIDCard</span><span class="params">(Integer personid)</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">modify</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">Department</span> <span class="variable">department</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Department</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PersonDao</span>&#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IDCard</span>&#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span>&#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Department</span>&#123;&#125;</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118173949591.png" alt="依赖"></p><h1 id="三、泛化（继承）关系-generalization"><a href="#三、泛化（继承）关系-generalization" class="headerlink" title="三、泛化（继承）关系 (generalization)"></a>三、泛化（继承）关系 (generalization)</h1><blockquote><p>泛化关系实际上就是<strong>继承</strong>关系，他是依赖关系的特例</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">DaoSupport</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Object entity)</span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Object id)</span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PersonServiceBean</span> <span class="keyword">extends</span> <span class="title class_">Daosupport</span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118174427049.png" alt="泛化(继承)"></p><hr><h1 id="四、实现关系-Implementation"><a href="#四、实现关系-Implementation" class="headerlink" title="四、实现关系 (Implementation)"></a>四、实现关系 (Implementation)</h1><blockquote><p>实现关系实际上就是 <strong>A 类实现 B 接口</strong>，他是<strong>依赖关系的特例</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">PersonService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Interger id)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PersonServiceBean</span> <span class="keyword">implements</span> <span class="title class_">PersonService</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Interger id)</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118174613790.png" alt="实现"></p><hr><h1 id="五、关联关系（Association）"><a href="#五、关联关系（Association）" class="headerlink" title="五、关联关系（Association）"></a>五、关联关系（Association）</h1><blockquote><p>关联关系实际上就是<strong>类与类之间的联系，他是依赖关系的特例</strong></p></blockquote><p>关联的导航性：单向 或者 双向</p><p>关联的多重性: 一对一, 一对多 或者 多对多</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 一个人有一个身份证</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">private</span> IDCard card;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IDCard</span>&#123;&#125;</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118174843437.png" alt="单向一对一"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 一个人有一个身份证, 一个身份证属于一个人</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">private</span> IDCard card;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IDCard</span>&#123;</span><br><span class="line"><span class="keyword">private</span> Person person</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118175003934.png" alt="双向一对一"></p><hr><h1 id="六、聚合关系（Aggregation）"><a href="#六、聚合关系（Aggregation）" class="headerlink" title="六、聚合关系（Aggregation）"></a>六、聚合关系（Aggregation）</h1><blockquote><p>表示<strong>整体和部分的关系</strong>，整体与部分<strong>可以分开</strong>。聚合关系是<strong>关联关系的特例</strong>, 也有导航性与多重性</p></blockquote><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118175241872.png" alt="鼠标和键盘可以从电脑上分离"></p><hr><h1 id="七、组合关系（Composition）"><a href="#七、组合关系（Composition）" class="headerlink" title="七、组合关系（Composition）"></a>七、组合关系（Composition）</h1><blockquote><p>表示<strong>整体与部分的关系</strong>，但是<strong>整体与部分不可以分开</strong></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在程序中我们定义实体：Person 与 IDCard、Head, </span></span><br><span class="line"><span class="comment">// 那么 Head 和 Person 就是 组合，IDCard 和 Person 就是聚合。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> IDCard card;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Head</span> <span class="variable">head</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Head</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IDCard</span>&#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Head</span>&#123;&#125;</span><br><span class="line"><span class="comment">// 但是如果在程序中 Person 实体中定义了对 IDCard 进行级联删除，即删除 Person 时连同 IDCard 一起删除，</span></span><br><span class="line"><span class="comment">// 那么 IDCard 和 Person 就是组合</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118180717093.png" alt="组合 or 聚合"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Computer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">Mouse</span> <span class="variable">mouse</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Mouse</span>(); <span class="comment">//鼠标可以和 computer 不能分离</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Moniter</span> <span class="variable">moniter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Moniter</span>();<span class="comment">//显示器可以和 Computer 不能分离</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMouse</span><span class="params">(Mouse mouse)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.mouse = mouse;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMoniter</span><span class="params">(Moniter moniter)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.moniter = moniter;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mouse</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Moniter</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230118180839962.png" alt="组合"></p>]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 设计模式 </tag>
            
            <tag> UML </tag>
            
            <tag> 类图 </tag>
            
            <tag> 对象 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>设计模式 -- 七大基本原则</title>
      <link href="/2023/01/17/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%20--%20%E4%B8%83%E5%A4%A7%E5%9F%BA%E6%9C%AC%E5%8E%9F%E5%88%99/"/>
      <url>/2023/01/17/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%20--%20%E4%B8%83%E5%A4%A7%E5%9F%BA%E6%9C%AC%E5%8E%9F%E5%88%99/</url>
      
        <content type="html"><![CDATA[<h1 id="设计模式-–-七大基本原则"><a href="#设计模式-–-七大基本原则" class="headerlink" title="设计模式 – 七大基本原则"></a>设计模式 – 七大基本原则</h1><h1 id="设计原则核心思想"><a href="#设计原则核心思想" class="headerlink" title="设计原则核心思想"></a>设计原则核心思想</h1><ul><li>找出应用中可<strong>能需要变化之处</strong>，把它们独立出来，不要和那些不需要变化的代码混在一起。</li><li>针对<strong>接口编程</strong>，而不是针对实现编程。</li><li>为了交互对象之间的<strong>松耦合</strong>设计而努力</li></ul><hr><h1 id="一、单一职责原则（SRP）"><a href="#一、单一职责原则（SRP）" class="headerlink" title="一、单一职责原则（SRP）"></a>一、单一职责原则（SRP）</h1><blockquote><p>对类来说的，即<strong>一个类应该只负责一项职责</strong>。</p><p>如类 A 负责两个不同职责：职责 1，职责 2。</p><p>当职责 1 需求变更而改变 A 时，可能造成职责 2 执行错误，所以需要将类 A 的粒度分解为 A1，A2</p></blockquote><p>可以分别在<strong>类</strong>的级别上与<strong>方法</strong>的级别上遵循单依职责原则</p><p>但是最好是在类的级别上， 在方法级别上一般都是<strong>一个类的方法比较少</strong>或者<strong>逻辑真的很简单</strong>的时候</p><p>核心思想是少用 <code>if else</code> 语句, 否则会增加代码耦合性</p><ol><li><p>降低类的复杂度，一个类只负责一项职责。</p></li><li><p>提高类的可读性，可维护性</p></li><li><p>降低变更引起的风险</p></li><li><p>通常情况下，我们应当遵守单一职责原则，只有逻辑足够简单，才可以在代码级违反单一职责原则；</p><p>只有类中方法数量足够少，可以在方法级别保持单一职责原则</p></li></ol><h2 id="违反单一职责原则"><a href="#违反单一职责原则" class="headerlink" title="违反单一职责原则"></a>违反单一职责原则</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.principle.singleresponsibility;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SingleResponsibility1</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="type">Vehicle</span> <span class="variable">vehicle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Vehicle</span>();</span><br><span class="line">vehicle.run(<span class="string">&quot;摩托车&quot;</span>);</span><br><span class="line">vehicle.run(<span class="string">&quot;汽车&quot;</span>);</span><br><span class="line">vehicle.run(<span class="string">&quot;飞机&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 交通工具类</span></span><br><span class="line"><span class="comment">// 方式1</span></span><br><span class="line"><span class="comment">// 1. 在方式1 的run方法中，违反了单一职责原则</span></span><br><span class="line"><span class="comment">// 2. 解决的方案非常的简单，根据交通工具运行方法不同，分解成不同类即可</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Vehicle</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(String vehicle)</span> &#123;</span><br><span class="line">System.out.println(vehicle + <span class="string">&quot; 在公路上运行....&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="类级别实现单一职责原则"><a href="#类级别实现单一职责原则" class="headerlink" title="类级别实现单一职责原则"></a>类级别实现单一职责原则</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.principle.singleresponsibility;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SingleResponsibility2</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="type">RoadVehicle</span> <span class="variable">roadVehicle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RoadVehicle</span>();</span><br><span class="line">roadVehicle.run(<span class="string">&quot;摩托车&quot;</span>);</span><br><span class="line">roadVehicle.run(<span class="string">&quot;汽车&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">AirVehicle</span> <span class="variable">airVehicle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AirVehicle</span>();</span><br><span class="line"></span><br><span class="line">airVehicle.run(<span class="string">&quot;飞机&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方案2的分析</span></span><br><span class="line"><span class="comment">//1. 遵守单一职责原则</span></span><br><span class="line"><span class="comment">//2. 但是这样做的改动很大，即将类分解，同时修改客户端</span></span><br><span class="line"><span class="comment">//3. 改进：直接修改Vehicle 类，改动的代码会比较少=&gt;方案3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RoadVehicle</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(String vehicle)</span> &#123;</span><br><span class="line">System.out.println(vehicle + <span class="string">&quot;公路运行&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AirVehicle</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(String vehicle)</span> &#123;</span><br><span class="line">System.out.println(vehicle + <span class="string">&quot;天空运行&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">WaterVehicle</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(String vehicle)</span> &#123;</span><br><span class="line">System.out.println(vehicle + <span class="string">&quot;水中运行&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="方法级别实现单一职责原则"><a href="#方法级别实现单一职责原则" class="headerlink" title="方法级别实现单一职责原则"></a>方法级别实现单一职责原则</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.principle.singleresponsibility;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SingleResponsibility3</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="type">Vehicle2</span> <span class="variable">vehicle2</span>  <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Vehicle2</span>();</span><br><span class="line">vehicle2.run(<span class="string">&quot;汽车&quot;</span>);</span><br><span class="line">vehicle2.runWater(<span class="string">&quot;轮船&quot;</span>);</span><br><span class="line">vehicle2.runAir(<span class="string">&quot;飞机&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//方式3的分析</span></span><br><span class="line"><span class="comment">//1. 这种修改方法没有对原来的类做大的修改，只是增加方法</span></span><br><span class="line"><span class="comment">//2. 这里虽然没有在类这个级别上遵守单一职责原则，但是在方法级别上，仍然是遵守单一职责</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Vehicle2</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(String vehicle)</span> &#123;</span><br><span class="line"><span class="comment">//处理</span></span><br><span class="line"></span><br><span class="line">System.out.println(vehicle + <span class="string">&quot; 在公路上运行....&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">runAir</span><span class="params">(String vehicle)</span> &#123;</span><br><span class="line">System.out.println(vehicle + <span class="string">&quot; 在天空上运行....&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">runWater</span><span class="params">(String vehicle)</span> &#123;</span><br><span class="line">System.out.println(vehicle + <span class="string">&quot; 在水中行....&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法2.</span></span><br><span class="line"><span class="comment">//..</span></span><br><span class="line"><span class="comment">//..</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="二、接口隔离原则-（ISP）"><a href="#二、接口隔离原则-（ISP）" class="headerlink" title="二、接口隔离原则 （ISP）"></a>二、接口隔离原则 （ISP）</h1><blockquote><p>客户端不应该依赖它不需要的接口，即<strong>一个类对另一个类的依赖应该建立在最小的接口</strong>上</p></blockquote><p>一个接口可能有许多需要实现的方法, 但是一个类如果通过一个接口来依赖另一个类的时候可能就回需要实现那个它不需要的方法</p><p>这时候我们就要将一个大接口拆分成几个小接口, 让它们物尽其用, 让一个类只依赖那个它们需要的最小接口即可</p><h2 id="违反实现接口隔离原则"><a href="#违反实现接口隔离原则" class="headerlink" title="违反实现接口隔离原则"></a>违反实现接口隔离原则</h2><p>类 A 通过接口 Interface1 依赖类 B，类 C 通过接口 Interface1 依赖类 D，</p><p>如果接口 Interface1 对于类 A 和类 C来说不是最小接口，那么类 B 和类 D 必须去实现他们不需要的方法</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230117134334649.png" alt="不满足接口隔离"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.principle.segregation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Segregation1</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//接口</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Interface1</span> &#123;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">operation1</span><span class="params">()</span>;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">operation2</span><span class="params">()</span>;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">operation3</span><span class="params">()</span>;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">operation4</span><span class="params">()</span>;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">operation5</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">implements</span> <span class="title class_">Interface1</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">operation1</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;B 实现了 operation1&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">operation2</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;B 实现了 operation2&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">operation3</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;B 实现了 operation3&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">operation4</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;B 实现了 operation4&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">operation5</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;B 实现了 operation5&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span> <span class="keyword">implements</span> <span class="title class_">Interface1</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">operation1</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;D 实现了 operation1&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">operation2</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;D 实现了 operation2&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">operation3</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;D 实现了 operation3&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">operation4</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;D 实现了 operation4&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">operation5</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;D 实现了 operation5&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123; <span class="comment">//A 类通过接口Interface1 依赖(使用) B类，但是只会用到1,2,3方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">depend1</span><span class="params">(Interface1 i)</span> &#123;</span><br><span class="line">i.operation1();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">depend2</span><span class="params">(Interface1 i)</span> &#123;</span><br><span class="line">i.operation2();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">depend3</span><span class="params">(Interface1 i)</span> &#123;</span><br><span class="line">i.operation3();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> &#123; <span class="comment">//C 类通过接口Interface1 依赖(使用) D类，但是只会用到1,4,5方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">depend1</span><span class="params">(Interface1 i)</span> &#123;</span><br><span class="line">i.operation1();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">depend4</span><span class="params">(Interface1 i)</span> &#123;</span><br><span class="line">i.operation4();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">depend5</span><span class="params">(Interface1 i)</span> &#123;</span><br><span class="line">i.operation5();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="遵循接口隔离原则"><a href="#遵循接口隔离原则" class="headerlink" title="遵循接口隔离原则"></a>遵循接口隔离原则</h2><p>将接口 Interface1 <strong>拆分</strong>为独立的几个接口(<strong>这里我们拆分成 3 个接口</strong>)，</p><p>类 A 和类 C 分别与他们需要的接口建立依赖关系。也就是采用接口隔离原则</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230117134505230.png" alt="通过接口隔离原则拆分"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.principle.segregation.improve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Segregation1</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="comment">// 使用一把</span></span><br><span class="line"><span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">a.depend1(<span class="keyword">new</span> <span class="title class_">B</span>()); <span class="comment">// A类通过接口去依赖B类</span></span><br><span class="line">a.depend2(<span class="keyword">new</span> <span class="title class_">B</span>());</span><br><span class="line">a.depend3(<span class="keyword">new</span> <span class="title class_">B</span>());</span><br><span class="line"></span><br><span class="line"><span class="type">C</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">C</span>();</span><br><span class="line"></span><br><span class="line">c.depend1(<span class="keyword">new</span> <span class="title class_">D</span>()); <span class="comment">// C类通过接口去依赖(使用)D类</span></span><br><span class="line">c.depend4(<span class="keyword">new</span> <span class="title class_">D</span>());</span><br><span class="line">c.depend5(<span class="keyword">new</span> <span class="title class_">D</span>());</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接口1</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Interface1</span> &#123;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">operation1</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接口2</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Interface2</span> &#123;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">operation2</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">operation3</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接口3</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Interface3</span> &#123;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">operation4</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">operation5</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">implements</span> <span class="title class_">Interface1</span>, Interface2 &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">operation1</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;B 实现了 operation1&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">operation2</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;B 实现了 operation2&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">operation3</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;B 实现了 operation3&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span> <span class="keyword">implements</span> <span class="title class_">Interface1</span>, Interface3 &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">operation1</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;D 实现了 operation1&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">operation4</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;D 实现了 operation4&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">operation5</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;D 实现了 operation5&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123; <span class="comment">// A 类通过接口Interface1,Interface2 依赖(使用) B类，但是只会用到1,2,3方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">depend1</span><span class="params">(Interface1 i)</span> &#123;</span><br><span class="line">i.operation1();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">depend2</span><span class="params">(Interface2 i)</span> &#123;</span><br><span class="line">i.operation2();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">depend3</span><span class="params">(Interface2 i)</span> &#123;</span><br><span class="line">i.operation3();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> &#123; <span class="comment">// C 类通过接口Interface1,Interface3 依赖(使用) D类，但是只会用到1,4,5方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">depend1</span><span class="params">(Interface1 i)</span> &#123;</span><br><span class="line">i.operation1();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">depend4</span><span class="params">(Interface3 i)</span> &#123;</span><br><span class="line">i.operation4();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">depend5</span><span class="params">(Interface3 i)</span> &#123;</span><br><span class="line">i.operation5();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="三、依赖倒转原则（DIP）"><a href="#三、依赖倒转原则（DIP）" class="headerlink" title="三、依赖倒转原则（DIP）"></a>三、依赖倒转原则（DIP）</h1><blockquote><ul><li>高层模块不应该依赖低层模块，二者都应该依赖其<strong>抽象</strong></li><li><strong>抽象不应该依赖细节，细节应该依赖抽象</strong></li><li>依赖倒转(倒置)的中心思想是<strong>面向接口编程</strong></li></ul></blockquote><p>使用接口或抽象类的目的是制定好规范，而不涉及任何具体的操作，</p><p>把展现细节的任务交给他们的实现类去完成</p><p>每个子类都应该有它的上层接口或抽象， 抽象指的就是接口或者<strong>抽象类</strong>， 细节就是实现类</p><p>为了增强代码的稳定性， 尽量每个子类（底层模块）都有抽象类或接口， 两者都有更稳定</p><p>抽象的作用相当于在实现类和变量引用中加了一层缓冲， </p><p>这样我们在对细节进行修改或扩展的时候就可以避免在变量引用中进行修改导致代码冗杂</p><h2 id="违反依赖倒转原则"><a href="#违反依赖倒转原则" class="headerlink" title="违反依赖倒转原则"></a>违反依赖倒转原则</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.principle.inversion;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DependecyInversion</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">person.receive(<span class="keyword">new</span> <span class="title class_">Email</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Email</span> &#123;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getInfo</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;电子邮件信息: hello,world&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//完成Person接收消息的功能</span></span><br><span class="line"><span class="comment">//方式1分析</span></span><br><span class="line"><span class="comment">//1. 简单，比较容易想到</span></span><br><span class="line"><span class="comment">//2. 如果我们获取的对象是 微信，短信等等，则新增类，同时Perons也要增加相应的接收方法</span></span><br><span class="line"><span class="comment">//3. 解决思路：引入一个抽象的接口IReceiver, 表示接收者, 这样Person类与接口IReceiver发生依赖</span></span><br><span class="line"><span class="comment">//   因为Email, WeiXin 等等属于接收的范围，他们各自实现IReceiver 接口就ok, 这样我们就符号依赖倒转原则</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive</span><span class="params">(Email email )</span> &#123;</span><br><span class="line">System.out.println(email.getInfo());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="使用接口传递实现依赖倒转"><a href="#使用接口传递实现依赖倒转" class="headerlink" title="使用接口传递实现依赖倒转"></a>使用接口传递实现依赖倒转</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.principle.inversion.improve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DependecyInversion</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//客户端无需改变</span></span><br><span class="line"><span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">person.receive(<span class="keyword">new</span> <span class="title class_">Email</span>());</span><br><span class="line"></span><br><span class="line">person.receive(<span class="keyword">new</span> <span class="title class_">WeiXin</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义接口</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IReceiver</span> &#123;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getInfo</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Email</span> <span class="keyword">implements</span> <span class="title class_">IReceiver</span> &#123;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getInfo</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;电子邮件信息: hello,world&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//增加微信</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">WeiXin</span> <span class="keyword">implements</span> <span class="title class_">IReceiver</span> &#123;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getInfo</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;微信信息: hello,ok&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方式2</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line"><span class="comment">//这里我们是对接口的依赖</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive</span><span class="params">(IReceiver receiver )</span> &#123;</span><br><span class="line">System.out.println(receiver.getInfo());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="使用构造器或-setter-方法实现依赖倒转原则"><a href="#使用构造器或-setter-方法实现依赖倒转原则" class="headerlink" title="使用构造器或 setter 方法实现依赖倒转原则"></a>使用构造器或 setter 方法实现依赖倒转原则</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.principle.inversion.improve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DependencyPass</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="type">ChangHong</span> <span class="variable">changHong</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ChangHong</span>();</span><br><span class="line"><span class="comment">//OpenAndClose openAndClose = new OpenAndClose();</span></span><br><span class="line"><span class="comment">//openAndClose.open(changHong);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//通过构造器进行依赖传递</span></span><br><span class="line"><span class="comment">//OpenAndClose openAndClose = new OpenAndClose(changHong);</span></span><br><span class="line"><span class="comment">//openAndClose.open();</span></span><br><span class="line"><span class="comment">//通过setter方法进行依赖传递</span></span><br><span class="line"><span class="type">OpenAndClose</span> <span class="variable">openAndClose</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OpenAndClose</span>();</span><br><span class="line">openAndClose.setTv(changHong);</span><br><span class="line">openAndClose.open();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式1： 通过接口传递实现依赖</span></span><br><span class="line"><span class="comment">// 开关的接口</span></span><br><span class="line"><span class="comment">// interface IOpenAndClose &#123;</span></span><br><span class="line"><span class="comment">// public void open(ITV tv); //抽象方法,接收接口</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// interface ITV &#123; //ITV接口</span></span><br><span class="line"><span class="comment">// public void play();</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="comment">// class ChangHong implements ITV &#123;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//@Override</span></span><br><span class="line"><span class="comment">//public void play() &#123;</span></span><br><span class="line"><span class="comment">//// TODO Auto-generated method stub</span></span><br><span class="line"><span class="comment">//System.out.println(&quot;长虹电视机，打开&quot;);</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">//// 实现接口</span></span><br><span class="line"><span class="comment">// class OpenAndClose implements IOpenAndClose&#123;</span></span><br><span class="line"><span class="comment">// public void open(ITV tv)&#123;</span></span><br><span class="line"><span class="comment">// tv.play();</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式2: 通过构造方法依赖传递</span></span><br><span class="line"><span class="comment">// interface IOpenAndClose &#123;</span></span><br><span class="line"><span class="comment">// public void open(); //抽象方法</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// interface ITV &#123; //ITV接口</span></span><br><span class="line"><span class="comment">// public void play();</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// class OpenAndClose implements IOpenAndClose&#123;</span></span><br><span class="line"><span class="comment">// public ITV tv; //成员</span></span><br><span class="line"><span class="comment">// public OpenAndClose(ITV tv)&#123; //构造器</span></span><br><span class="line"><span class="comment">// this.tv = tv;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// public void open()&#123;</span></span><br><span class="line"><span class="comment">// this.tv.play();</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式3 , 通过setter方法传递</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IOpenAndClose</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">open</span><span class="params">()</span>; <span class="comment">// 抽象方法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTv</span><span class="params">(ITV tv)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ITV</span> &#123; <span class="comment">// ITV接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">play</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OpenAndClose</span> <span class="keyword">implements</span> <span class="title class_">IOpenAndClose</span> &#123;</span><br><span class="line"><span class="keyword">private</span> ITV tv;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTv</span><span class="params">(ITV tv)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.tv = tv;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">open</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.tv.play();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ChangHong</span> <span class="keyword">implements</span> <span class="title class_">ITV</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">play</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">System.out.println(<span class="string">&quot;长虹电视机，打开&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="四、里氏代换原则（LSP）"><a href="#四、里氏代换原则（LSP）" class="headerlink" title="四、里氏代换原则（LSP）"></a>四、里氏代换原则（LSP）</h1><blockquote><p> 继承所带来的问题:</p></blockquote><p>继承包含这样一层含义：父类中凡是已经实现好的方法，实际上是在设定规范和契约，虽然它不强制要求所有<br>的子类必须遵循这些契约，但是如果子类对这些已经实现的方法任意修改，就会对整个继承体系造成破坏。</p><p><strong>继承在给程序设计带来便利的同时，也带来了弊端</strong>。比如使用继承会给程序带来<strong>侵入性</strong>，程序的可移植性降低，<br>增加对象间的耦合性，如果一个类被其他的类所继承，则当这个类需要修改时，必须考虑到所有的子类，并且<br>父类修改后，所有涉及到子类的功能都有可能产生故障</p><blockquote><p>如果对每个类型为 T1 的对象 o1，都有类型为 T2 的对象 o2，</p><p>使得以 T1 定义的所有程序 P 在所有的对象 o1 都代换成 o2 时，程序 P 的行为没有发生变化，那么类型 T2 是类型 T1 的子类型。</p><p>换句话说，<strong>所有引用基类的地方必须能透明地使用其子类的对象</strong>。</p></blockquote><p>在使用继承时，遵循里氏替换原则，<strong>在子类中尽量不要重写父类的方法</strong></p><p>里氏替换原则告诉我们，继承实际上让两个类耦合性增强了，在适当的情况下，可以通过<strong>聚合，组合，依赖</strong> 来<br>解决问题</p><p>就是说继承的时候子类可能会<strong>无意间重写父类方法,</strong> 结果导致使用的时候出错</p><p>解决方法是<strong>将继承关系拆解</strong>, 子类不再是子类, 父类不再是父类</p><p>将他们需要的方法提出来到一个第三类, 原子类和原父类均继承这个第三类, </p><p>然后通过<strong>聚合, 组合, 依赖</strong>等方式重新构建这两个类的关系, 根本思路是减少这两个类的耦合性</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230117195138477.png" alt="拆解继承关系"></p><h2 id="违反里氏代换原则"><a href="#违反里氏代换原则" class="headerlink" title="违反里氏代换原则"></a>违反里氏代换原则</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.principle.liskov;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Liskov</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">System.out.println(<span class="string">&quot;11-3=&quot;</span> + a.func1(<span class="number">11</span>, <span class="number">3</span>));</span><br><span class="line">System.out.println(<span class="string">&quot;1-8=&quot;</span> + a.func1(<span class="number">1</span>, <span class="number">8</span>));</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;-----------------------&quot;</span>);</span><br><span class="line"><span class="type">B</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">B</span>();</span><br><span class="line">System.out.println(<span class="string">&quot;11-3=&quot;</span> + b.func1(<span class="number">11</span>, <span class="number">3</span>));<span class="comment">//这里本意是求出11-3</span></span><br><span class="line">System.out.println(<span class="string">&quot;1-8=&quot;</span> + b.func1(<span class="number">1</span>, <span class="number">8</span>));<span class="comment">// 1-8</span></span><br><span class="line">System.out.println(<span class="string">&quot;11+3+9=&quot;</span> + b.func2(<span class="number">11</span>, <span class="number">3</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// A类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="comment">// 返回两个数的差</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">func1</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> num1 - num2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// B类继承了A</span></span><br><span class="line"><span class="comment">// 增加了一个新功能：完成两个数相加,然后和9求和</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_">A</span> &#123;</span><br><span class="line"><span class="comment">//这里，重写了A类的方法, 可能是无意识</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">func1</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">func2</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> func1(a, b) + <span class="number">9</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="遵循里氏代换原则"><a href="#遵循里氏代换原则" class="headerlink" title="遵循里氏代换原则"></a>遵循里氏代换原则</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.principle.liskov.improve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Liskov</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"><span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">System.out.println(<span class="string">&quot;11-3=&quot;</span> + a.func1(<span class="number">11</span>, <span class="number">3</span>));</span><br><span class="line">System.out.println(<span class="string">&quot;1-8=&quot;</span> + a.func1(<span class="number">1</span>, <span class="number">8</span>));</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;-----------------------&quot;</span>);</span><br><span class="line"><span class="type">B</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">B</span>();</span><br><span class="line"><span class="comment">//因为B类不再继承A类，因此调用者，不会再func1是求减法</span></span><br><span class="line"><span class="comment">//调用完成的功能就会很明确</span></span><br><span class="line">System.out.println(<span class="string">&quot;11+3=&quot;</span> + b.func1(<span class="number">11</span>, <span class="number">3</span>));<span class="comment">//这里本意是求出11+3</span></span><br><span class="line">System.out.println(<span class="string">&quot;1+8=&quot;</span> + b.func1(<span class="number">1</span>, <span class="number">8</span>));<span class="comment">// 1+8</span></span><br><span class="line">System.out.println(<span class="string">&quot;11+3+9=&quot;</span> + b.func2(<span class="number">11</span>, <span class="number">3</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用组合仍然可以使用到A类相关方法</span></span><br><span class="line">System.out.println(<span class="string">&quot;11-3=&quot;</span> + b.func3(<span class="number">11</span>, <span class="number">3</span>));<span class="comment">// 这里本意是求出11-3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建一个更加基础的基类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="comment">//把更加基础的方法和成员写到Base类</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// A类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> <span class="keyword">extends</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="comment">// 返回两个数的差</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">func1</span><span class="params">(<span class="type">int</span> num1, <span class="type">int</span> num2)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> num1 - num2;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// B类继承了A</span></span><br><span class="line"><span class="comment">// 增加了一个新功能：完成两个数相加,然后和9求和</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_">Base</span> &#123;</span><br><span class="line"><span class="comment">//如果B需要使用A类的方法,使用组合关系</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//这里，重写了A类的方法, 可能是无意识</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">func1</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">func2</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> func1(a, b) + <span class="number">9</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//我们仍然想使用A的方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">func3</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>.a.func1(a, b);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="五、开闭原则（OCP）"><a href="#五、开闭原则（OCP）" class="headerlink" title="五、开闭原则（OCP）"></a>五、开闭原则（OCP）</h1><p>开闭原则是编程中<strong>最基础、最重要</strong>的设计原则</p><p>所有其他原则以及设计模式都是为了实现开闭原则</p><blockquote><p>一个软件实体如类，模块和函数应该**对扩展开放(对提供方方法)**，对修改关闭(对使用方方法)。</p><p>用抽象构建框架，用实现扩展细节</p></blockquote><p>就是在后期修改时, 尽量不要去修改原来的代码, 只是在原来的代码上进行添加及扩展</p><p>如果改了代码谁知道会对哪个功能产生影响, 这样就可以减少耦合性</p><h2 id="违反开闭原则"><a href="#违反开闭原则" class="headerlink" title="违反开闭原则"></a>违反开闭原则</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1) 优点是比较好理解，简单易操作。</span></span><br><span class="line"><span class="comment">2) 缺点是违反了设计模式的 ocp 原则，即对扩展开放(提供方)，对修改关闭(使用方)。</span></span><br><span class="line"><span class="comment">即当我们给类增加新功能的时候，尽量不修改代码，或者尽可能少修改代码.</span></span><br><span class="line"><span class="comment">3) 比如我们这时要新增加一个图形种类 三角形，我们需要做如下修改，修改的地方较多</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> com.atguigu.principle.ocp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Ocp</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//使用看看存在的问题</span></span><br><span class="line"><span class="type">GraphicEditor</span> <span class="variable">graphicEditor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GraphicEditor</span>();</span><br><span class="line">graphicEditor.drawShape(<span class="keyword">new</span> <span class="title class_">Rectangle</span>());</span><br><span class="line">graphicEditor.drawShape(<span class="keyword">new</span> <span class="title class_">Circle</span>());</span><br><span class="line">graphicEditor.drawShape(<span class="keyword">new</span> <span class="title class_">Triangle</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//这是一个用于绘图的类 [使用方]</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GraphicEditor</span> &#123;</span><br><span class="line"><span class="comment">//接收Shape对象，然后根据type，来绘制不同的图形</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawShape</span><span class="params">(Shape s)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (s.m_type == <span class="number">1</span>)</span><br><span class="line">drawRectangle(s);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (s.m_type == <span class="number">2</span>)</span><br><span class="line">drawCircle(s);</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (s.m_type == <span class="number">3</span>)</span><br><span class="line">drawTriangle(s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//绘制矩形</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawRectangle</span><span class="params">(Shape r)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot; 绘制矩形 &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//绘制圆形</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawCircle</span><span class="params">(Shape r)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot; 绘制圆形 &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//绘制三角形</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawTriangle</span><span class="params">(Shape r)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot; 绘制三角形 &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Shape类，基类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line"><span class="type">int</span> m_type;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">Rectangle() &#123;</span><br><span class="line"><span class="built_in">super</span>.m_type = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">Circle() &#123;</span><br><span class="line"><span class="built_in">super</span>.m_type = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//新增画三角形</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Triangle</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">Triangle() &#123;</span><br><span class="line"><span class="built_in">super</span>.m_type = <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="遵循开闭原则"><a href="#遵循开闭原则" class="headerlink" title="遵循开闭原则"></a>遵循开闭原则</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">把创建 Shape 类做成抽象类，并提供一个抽象的 draw 方法，让子类去实现即可，</span></span><br><span class="line"><span class="comment">这样我们有新的图形种类时，只需要让新的图形类继承 Shape，并实现 draw 方法即可，使用方的代码就不需要修 -&gt; 满足了开闭原则</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> com.atguigu.principle.ocp.improve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Ocp</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//使用看看存在的问题</span></span><br><span class="line"><span class="type">GraphicEditor</span> <span class="variable">graphicEditor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GraphicEditor</span>();</span><br><span class="line">graphicEditor.drawShape(<span class="keyword">new</span> <span class="title class_">Rectangle</span>());</span><br><span class="line">graphicEditor.drawShape(<span class="keyword">new</span> <span class="title class_">Circle</span>());</span><br><span class="line">graphicEditor.drawShape(<span class="keyword">new</span> <span class="title class_">Triangle</span>());</span><br><span class="line">graphicEditor.drawShape(<span class="keyword">new</span> <span class="title class_">OtherGraphic</span>());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//这是一个用于绘图的类 [使用方]</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GraphicEditor</span> &#123;</span><br><span class="line"><span class="comment">//接收 Shape 对象，调用 draw 方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">drawShape</span><span class="params">(Shape s)</span> &#123;</span><br><span class="line">s.draw();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Shape 类，基类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line"><span class="type">int</span> m_type;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span>;<span class="comment">//抽象方法</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">Rectangle() &#123;</span><br><span class="line"><span class="built_in">super</span>.m_type = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">System.out.println(<span class="string">&quot; 绘制矩形 &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">Circle() &#123;</span><br><span class="line"><span class="built_in">super</span>.m_type = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">System.out.println(<span class="string">&quot; 绘制圆形 &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//新增画三角形</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Triangle</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">Triangle() &#123;</span><br><span class="line"><span class="built_in">super</span>.m_type = <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">System.out.println(<span class="string">&quot; 绘制三角形 &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//新增一个图形</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OtherGraphic</span> <span class="keyword">extends</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">OtherGraphic() &#123;</span><br><span class="line"><span class="built_in">super</span>.m_type = <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">draw</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">System.out.println(<span class="string">&quot; 绘制其它图形 &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="六、迪米特法则（最少知道原则）"><a href="#六、迪米特法则（最少知道原则）" class="headerlink" title="六、迪米特法则（最少知道原则）"></a>六、迪米特法则（最少知道原则）</h1><blockquote><p>一个对象应该对其他对象保持<strong>最少的</strong>了解</p></blockquote><p>类与类关系越密切，耦合度越大<br>迪米特法则又叫<strong>最少知道原则</strong>，即一个类对自己依赖的类知道的越少越好。</p><p>对于被依赖的类不管多么复杂，都尽量将逻辑封装在类的内部。对外除了提供的 public 方法，不对外泄露任何信息<br>迪米特法则更简单的定义：只与<strong>直接朋友</strong>通信</p><p><strong>直接朋友</strong>：每个对象都会与其他对象有耦合关系，只要两个对象之间有耦合关系，我们就说这两个对象之间<br>是朋友关系。耦合的方式很多，依赖，关联，组合，聚合等。其中，我们称出现<strong>成员变量，方法参数，方法返</strong><br><strong>回值</strong>中的<strong>类</strong>为直接朋友，而出现在<strong>局部变量</strong>中的类不是直接朋友。</p><p><strong>陌生的类最好不要以局部变量的形式出现在类的内部。</strong></p><p>两个类总会有耦合, 我们只是尽可能降低它们之前的耦合</p><p>迪米特法则的本质是<strong>避免类中出现非直接朋友关系的耦合</strong></p><h2 id="违反迪米特法则"><a href="#违反迪米特法则" class="headerlink" title="违反迪米特法则"></a>违反迪米特法则</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 有一个学校，下属有各个学院和总部，现要求打印出学校总部员工 ID 和学院员工的 id</span></span><br><span class="line"><span class="keyword">package</span> com.atguigu.principle.demeter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">//客户端</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demeter1</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//创建了一个 SchoolManager 对象</span></span><br><span class="line"><span class="type">SchoolManager</span> <span class="variable">schoolManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SchoolManager</span>();</span><br><span class="line"><span class="comment">//输出学院的员工id 和  学校总部的员工信息</span></span><br><span class="line">schoolManager.printAllEmployee(<span class="keyword">new</span> <span class="title class_">CollegeManager</span>());</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//学校总部员工类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line"><span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.id = id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//学院的员工类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CollegeEmployee</span> &#123;</span><br><span class="line"><span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.id = id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//管理学院员工的管理类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CollegeManager</span> &#123;</span><br><span class="line"><span class="comment">//返回学院的所有员工</span></span><br><span class="line"><span class="keyword">public</span> List&lt;CollegeEmployee&gt; <span class="title function_">getAllEmployee</span><span class="params">()</span> &#123;</span><br><span class="line">List&lt;CollegeEmployee&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;CollegeEmployee&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123; <span class="comment">//这里我们增加了10个员工到 list</span></span><br><span class="line"><span class="type">CollegeEmployee</span> <span class="variable">emp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CollegeEmployee</span>();</span><br><span class="line">emp.setId(<span class="string">&quot;学院员工id= &quot;</span> + i);</span><br><span class="line">list.add(emp);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//学校管理类</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//分析 SchoolManager 类的直接朋友类有哪些 Employee、CollegeManager</span></span><br><span class="line"><span class="comment">//CollegeEmployee 不是 直接朋友 而是一个陌生类，这样违背了 迪米特法则 </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SchoolManager</span> &#123;</span><br><span class="line"><span class="comment">//返回学校总部的员工</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">getAllEmployee</span><span class="params">()</span> &#123;</span><br><span class="line">List&lt;Employee&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Employee&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123; <span class="comment">//这里我们增加了5个员工到 list</span></span><br><span class="line"><span class="type">Employee</span> <span class="variable">emp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line">emp.setId(<span class="string">&quot;学校总部员工id= &quot;</span> + i);</span><br><span class="line">list.add(emp);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//该方法完成输出学校总部和学院员工信息(id)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">printAllEmployee</span><span class="params">(CollegeManager sub)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//分析问题</span></span><br><span class="line"><span class="comment">//1. 这里的 CollegeEmployee 不是  SchoolManager的直接朋友</span></span><br><span class="line"><span class="comment">//2. CollegeEmployee 是以局部变量方式出现在 SchoolManager</span></span><br><span class="line"><span class="comment">//3. 违反了 迪米特法则 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取到学院员工</span></span><br><span class="line">List&lt;CollegeEmployee&gt; list1 = sub.getAllEmployee();</span><br><span class="line">System.out.println(<span class="string">&quot;------------学院员工------------&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (CollegeEmployee e : list1) &#123;</span><br><span class="line">System.out.println(e.getId());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//获取到学校总部员工</span></span><br><span class="line">List&lt;Employee&gt; list2 = <span class="built_in">this</span>.getAllEmployee();</span><br><span class="line">System.out.println(<span class="string">&quot;------------学校总部员工------------&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (Employee e : list2) &#123;</span><br><span class="line">System.out.println(e.getId());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="遵循迪米特法则"><a href="#遵循迪米特法则" class="headerlink" title="遵循迪米特法则"></a>遵循迪米特法则</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.principle.demeter.improve;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">//客户端</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demeter1</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;~~~使用迪米特法则的改进~~~&quot;</span>);</span><br><span class="line"><span class="comment">//创建了一个 SchoolManager 对象</span></span><br><span class="line"><span class="type">SchoolManager</span> <span class="variable">schoolManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SchoolManager</span>();</span><br><span class="line"><span class="comment">//输出学院的员工id 和  学校总部的员工信息</span></span><br><span class="line">schoolManager.printAllEmployee(<span class="keyword">new</span> <span class="title class_">CollegeManager</span>());</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//学校总部员工类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line"><span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.id = id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//学院的员工类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CollegeEmployee</span> &#123;</span><br><span class="line"><span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.id = id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> id;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//管理学院员工的管理类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CollegeManager</span> &#123;</span><br><span class="line"><span class="comment">//返回学院的所有员工</span></span><br><span class="line"><span class="keyword">public</span> List&lt;CollegeEmployee&gt; <span class="title function_">getAllEmployee</span><span class="params">()</span> &#123;</span><br><span class="line">List&lt;CollegeEmployee&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;CollegeEmployee&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123; <span class="comment">//这里我们增加了10个员工到 list</span></span><br><span class="line"><span class="type">CollegeEmployee</span> <span class="variable">emp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CollegeEmployee</span>();</span><br><span class="line">emp.setId(<span class="string">&quot;学院员工id= &quot;</span> + i);</span><br><span class="line">list.add(emp);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出学院员工的信息</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printEmployee</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//获取到学院员工</span></span><br><span class="line">List&lt;CollegeEmployee&gt; list1 = getAllEmployee();</span><br><span class="line">System.out.println(<span class="string">&quot;------------学院员工------------&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (CollegeEmployee e : list1) &#123;</span><br><span class="line">System.out.println(e.getId());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//学校管理类</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//分析 SchoolManager 类的直接朋友类有哪些 Employee、CollegeManager</span></span><br><span class="line"><span class="comment">//CollegeEmployee 不是 直接朋友 而是一个陌生类，这样违背了 迪米特法则 </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SchoolManager</span> &#123;</span><br><span class="line"><span class="comment">//返回学校总部的员工</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">getAllEmployee</span><span class="params">()</span> &#123;</span><br><span class="line">List&lt;Employee&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Employee&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123; <span class="comment">//这里我们增加了5个员工到 list</span></span><br><span class="line"><span class="type">Employee</span> <span class="variable">emp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line">emp.setId(<span class="string">&quot;学校总部员工id= &quot;</span> + i);</span><br><span class="line">list.add(emp);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//该方法完成输出学校总部和学院员工信息(id)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">printAllEmployee</span><span class="params">(CollegeManager sub)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//分析问题</span></span><br><span class="line"><span class="comment">//1. 将输出学院的员工方法，封装到CollegeManager</span></span><br><span class="line">sub.printEmployee();</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取到学校总部员工</span></span><br><span class="line">List&lt;Employee&gt; list2 = <span class="built_in">this</span>.getAllEmployee();</span><br><span class="line">System.out.println(<span class="string">&quot;------------学校总部员工------------&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (Employee e : list2) &#123;</span><br><span class="line">System.out.println(e.getId());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="七、合成-x2F-聚合复用原则（CARP）"><a href="#七、合成-x2F-聚合复用原则（CARP）" class="headerlink" title="七、合成 &#x2F; 聚合复用原则（CARP）"></a>七、合成 &#x2F; 聚合复用原则（CARP）</h1><blockquote><p>尽量使用合成&#x2F;聚合的方式，而不是使用继承</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 设计模式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 设计模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Go 语言基础 - 基础语法</title>
      <link href="/2023/01/15/Go%20%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%20-%20%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/"/>
      <url>/2023/01/15/Go%20%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%20-%20%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="Go-语言基础-基础语法"><a href="#Go-语言基础-基础语法" class="headerlink" title="Go 语言基础 - 基础语法"></a>Go 语言基础 - 基础语法</h1><h1 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h1><h2 id="1-1-什么是-Go-语言"><a href="#1-1-什么是-Go-语言" class="headerlink" title="1.1 什么是 Go 语言"></a>1.1 什么是 Go 语言</h2><ol><li>高性能、高并发</li><li>语法简单、学习曲线平缓</li><li>丰富的标准库</li><li>完善的工具链</li><li>静态链接</li><li>快速编译</li><li>跨平台</li><li>垃圾回收</li></ol><hr><h1 id="二、Go-语言入门"><a href="#二、Go-语言入门" class="headerlink" title="二、Go 语言入门"></a>二、Go 语言入门</h1><h2 id="2-1-安装-Golang"><a href="#2-1-安装-Golang" class="headerlink" title="2.1 安装 Golang"></a>2.1 安装 Golang</h2><ol><li>下载 Go <code>https://go.dev/</code></li><li>配置 Go 语言开发环境 VScode <code>https://go.dev/</code> 或 Goland <code>https://www.jetbrains.com/zh-cn/go/</code></li></ol><hr><h2 id="2-2-基础语法"><a href="#2-2-基础语法" class="headerlink" title="2.2 基础语法"></a>2.2 基础语法</h2><h3 id="2-2-1-Hello-World"><a href="#2-2-1-Hello-World" class="headerlink" title="2.2.1 Hello World"></a>2.2.1 Hello World</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;hello world&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230114182853884.png" alt="命令行执行"></p><h3 id="2-2-2-变量"><a href="#2-2-2-变量" class="headerlink" title="2.2.2 变量"></a>2.2.2 变量</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;math&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// go 的常见变量类型包括 字符串 整数 浮点型 布尔型 等</span></span><br><span class="line"><span class="comment">// go 语言中, 大部分运算符的使用和优先级都和 C 或 C++ 类似</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//两种变量声明方式其一: var 变量名 数据类型 = 变量值</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;initial&quot;</span> <span class="comment">//go 一般会自动推导变阿玲类型, 有需要的话也可以写上</span></span><br><span class="line"><span class="comment">//字符串类型 string 要用 &quot;&quot; 引起来</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b, c <span class="type">int</span> = <span class="number">1</span>, <span class="number">2</span> <span class="comment">//同时声明两个整型, 写了数据类型</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> d = <span class="literal">true</span> <span class="comment">//布尔型, 没写数据类型</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//未指定类型定义浮点型时, 模式类型是 float64</span></span><br><span class="line"><span class="keyword">var</span> e <span class="type">float64</span> <span class="comment">//声明了一个浮点型变量 e, 但是没有赋值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//两种变量声明方式其二: 变量名 := 变量值</span></span><br><span class="line">f := <span class="type">float32</span>(e) <span class="comment">//定义一个 float32 类型, 将变量 e 强转</span></span><br><span class="line"></span><br><span class="line">g := a + <span class="string">&quot;foo&quot;</span>                <span class="comment">//go 语言中字符串是内置类型, 可以直接通过加号拼接, 也可以直接用等于号比较两个字符串</span></span><br><span class="line">fmt.Println(a, b, c, d, e, f) <span class="comment">// initial 1 2 true 0 0</span></span><br><span class="line">fmt.Println(g)                <span class="comment">// initialapple</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//常量的声明就是把 var 改成 const</span></span><br><span class="line"><span class="comment">//go 语言中的常量没有确定的类型, 会根据使用的上下文来自动确定类型</span></span><br><span class="line"><span class="keyword">const</span> s <span class="type">string</span> = <span class="string">&quot;constant&quot;</span></span><br><span class="line"><span class="keyword">const</span> h = <span class="number">500000000</span></span><br><span class="line"><span class="keyword">const</span> i = <span class="number">3e20</span> / h</span><br><span class="line"><span class="comment">//sin 表示正弦</span></span><br><span class="line">fmt.Println(s, h, i, math.Sin(h), math.Sin(i)) <span class="comment">//constant 500000000 6e+11 -0.28470407323754404 0.7591864109375384</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-2-3-循环"><a href="#2-2-3-循环" class="headerlink" title="2.2.3 循环"></a>2.2.3 循环</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//go 语言中只有 for 循环</span></span><br><span class="line">i := <span class="number">1</span></span><br><span class="line"><span class="comment">//什么限制条件都不写, 表示一个死循环</span></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;loop&quot;</span>)</span><br><span class="line"><span class="keyword">break</span> <span class="comment">//循环途中可以使用 break 跳出</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//经典 C 循环</span></span><br><span class="line"><span class="keyword">for</span> j := <span class="number">7</span>; j &lt; <span class="number">9</span>; j++ &#123;</span><br><span class="line">fmt.Println(j)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> n := <span class="number">0</span>; n &lt; <span class="number">5</span>; n++ &#123;</span><br><span class="line"><span class="keyword">if</span> n%<span class="number">2</span> == <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">continue</span> <span class="comment">//可以使用 continue 跳出循环</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(n)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> i &lt;= <span class="number">3</span> &#123; <span class="comment">//经典 C 循环的任意一段都可以省略</span></span><br><span class="line">fmt.Println(i)</span><br><span class="line">i = i + <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-4-if-语句"><a href="#2-2-4-if-语句" class="headerlink" title="2.2.4 if 语句"></a>2.2.4 if 语句</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//go 语言中 if 后面没有小括号, 就算写了编译的时候也会被去掉</span></span><br><span class="line"><span class="comment">//其他的跟 C 一样</span></span><br><span class="line"><span class="keyword">if</span> <span class="number">7</span>%<span class="number">2</span> == <span class="number">0</span> &#123; <span class="comment">//go 中的 if 必须加大括号, 不能将 if 中的语句与 if 写在同一行</span></span><br><span class="line">fmt.Println(<span class="string">&quot;7 is even&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;7 is odd&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="number">8</span>%<span class="number">4</span> == <span class="number">0</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;8 is divisible by 4&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> num := <span class="number">9</span>; num &lt; <span class="number">0</span> &#123; <span class="comment">//表示先定义一个 num 变量赋值 9, 再执行 if else 语句, 相当于在 if 语句外的定义</span></span><br><span class="line">fmt.Println(num, <span class="string">&quot;is negative&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> num &lt; <span class="number">10</span> &#123;</span><br><span class="line">fmt.Println(num, <span class="string">&quot;has 1 digit&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">fmt.Println(num, <span class="string">&quot;has multiple digits&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-5-switch-语句"><a href="#2-2-5-switch-语句" class="headerlink" title="2.2.5 switch 语句"></a>2.2.5 switch 语句</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">a := <span class="number">2</span></span><br><span class="line"><span class="keyword">switch</span> a &#123; <span class="comment">//switch 后面的变量名 并不需要括号</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">fmt.Println(<span class="string">&quot;one&quot;</span>) <span class="comment">//go 中不加 break 也不会跑完所有 case, 只会执行相应的 case</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">fmt.Println(<span class="string">&quot;two&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">fmt.Println(<span class="string">&quot;three&quot;</span>)</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>, <span class="number">5</span>:</span><br><span class="line">fmt.Println(<span class="string">&quot;four or five&quot;</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">fmt.Println(<span class="string">&quot;other&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">t := time.Now()</span><br><span class="line"><span class="comment">//go 中的 swtich 功能很强大, 可以使用任意的变量类型, 甚至可以取代 if else 语句</span></span><br><span class="line"><span class="comment">//如何取代 if else 语句</span></span><br><span class="line"><span class="keyword">switch</span> &#123; <span class="comment">//switch 后不加任何变量</span></span><br><span class="line"><span class="keyword">case</span> t.Hour() &lt; <span class="number">12</span>: <span class="comment">//在 case 中写条件分支</span></span><br><span class="line">fmt.Println(<span class="string">&quot;It&#x27;s before noon&quot;</span>)</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">fmt.Println(<span class="string">&quot;It&#x27;s after noon&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//以上的代码会比 if else 逻辑更加清晰</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-6-数组"><a href="#2-2-6-数组" class="headerlink" title="2.2.6 数组"></a>2.2.6 数组</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//因为不能任意更改长度, 使用较少</span></span><br><span class="line"><span class="keyword">var</span> a [<span class="number">5</span>]<span class="type">int</span>                <span class="comment">//声明一个整型数组</span></span><br><span class="line">a[<span class="number">4</span>] = <span class="number">100</span>                  <span class="comment">//给数组其中一个变量赋值</span></span><br><span class="line">fmt.Println(<span class="string">&quot;get:&quot;</span>, a[<span class="number">2</span>])   <span class="comment">//get: 0</span></span><br><span class="line">fmt.Println(<span class="string">&quot;get:&quot;</span>, a[<span class="number">4</span>])   <span class="comment">//get: 100</span></span><br><span class="line">fmt.Println(<span class="string">&quot;len:&quot;</span>, <span class="built_in">len</span>(a)) <span class="comment">//len: 5</span></span><br><span class="line"></span><br><span class="line">b := [<span class="number">5</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125; <span class="comment">//声明并初始化一个整型数组</span></span><br><span class="line">fmt.Println(b)             <span class="comment">//[1 2 3 4 5]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> twoD [<span class="number">2</span>][<span class="number">3</span>]<span class="type">int</span>       <span class="comment">//声明一个整型二位数组</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="number">2</span>; i++ &#123; <span class="comment">//for 循环初始化二维数组</span></span><br><span class="line"><span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">3</span>; j++ &#123;</span><br><span class="line">twoD[i][j] = i + j</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Println相当于输出了两个拼接的变量 先输出 2d: 再输出 twoD</span></span><br><span class="line">fmt.Println(<span class="string">&quot;2d: &quot;</span>, twoD) <span class="comment">//2d:  [[0 1 2] [1 2 3]]</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-7-切片"><a href="#2-2-7-切片" class="headerlink" title="2.2.7 切片"></a>2.2.7 切片</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//切片相比数组可以任意更改长度, 有更多丰富的操作</span></span><br><span class="line">s := <span class="built_in">make</span>([]<span class="type">string</span>, <span class="number">3</span>) <span class="comment">//用 make 创建一个长度为 3 的 string 型切片</span></span><br><span class="line">s[<span class="number">0</span>] = <span class="string">&quot;a&quot;</span></span><br><span class="line">s[<span class="number">1</span>] = <span class="string">&quot;b&quot;</span></span><br><span class="line">s[<span class="number">2</span>] = <span class="string">&quot;c&quot;</span></span><br><span class="line">fmt.Println(<span class="string">&quot;get:&quot;</span>, s[<span class="number">2</span>])   <span class="comment">// c</span></span><br><span class="line">fmt.Println(<span class="string">&quot;len:&quot;</span>, <span class="built_in">len</span>(s)) <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//append(原数组, &quot;追加值&quot;), 可以使用 append 来给切片追加值</span></span><br><span class="line">s = <span class="built_in">append</span>(s, <span class="string">&quot;d&quot;</span>) <span class="comment">//将 append 的结果赋值到原切片</span></span><br><span class="line"><span class="comment">//slice 的原理是一个切片存储了一个长度 + 一个容量 + 一个指向一个数组的指针, 执行 append 时如果容量不够, 会扩容并返回新的切片</span></span><br><span class="line">s = <span class="built_in">append</span>(s, <span class="string">&quot;e&quot;</span>, <span class="string">&quot;f&quot;</span>)</span><br><span class="line">fmt.Println(s) <span class="comment">// [a b c d e f]</span></span><br><span class="line"></span><br><span class="line">c := <span class="built_in">make</span>([]<span class="type">string</span>, <span class="built_in">len</span>(s)) <span class="comment">//指定长度为切片 s 的长度</span></span><br><span class="line"><span class="built_in">copy</span>(c, s)                  <span class="comment">//将切片 s 拷贝到切片 c</span></span><br><span class="line">fmt.Println(c)              <span class="comment">// [a b c d e f]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//不同于 Python, 不支持负数索引</span></span><br><span class="line">fmt.Println(s[<span class="number">2</span>:<span class="number">5</span>]) <span class="comment">// [c d e] 取出 2~5 的元素</span></span><br><span class="line">fmt.Println(s[:<span class="number">5</span>])  <span class="comment">// [a b c d e] 取出 0~5 的元素</span></span><br><span class="line">fmt.Println(s[<span class="number">2</span>:])  <span class="comment">// [c d e f] 取出 2~end 的元素</span></span><br><span class="line"></span><br><span class="line">good := []<span class="type">string</span>&#123;<span class="string">&quot;g&quot;</span>, <span class="string">&quot;o&quot;</span>, <span class="string">&quot;o&quot;</span>, <span class="string">&quot;d&quot;</span>&#125; <span class="comment">// 定义并赋值, 相当于一个数组, 但是也可以是 slice</span></span><br><span class="line">fmt.Println(good)                    <span class="comment">// [g o o d]</span></span><br><span class="line">good = <span class="built_in">append</span>(good, <span class="string">&quot;d&quot;</span>)             <span class="comment">// 追加值</span></span><br><span class="line">fmt.Println(good)                    <span class="comment">// [g o o d d]</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-8-map"><a href="#2-2-8-map" class="headerlink" title="2.2.8 map"></a>2.2.8 map</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">map ~ 哈希 ~ 字典 ~ 键值对</span></span><br><span class="line"><span class="comment">是实际使用最频繁的数据结构</span></span><br><span class="line"><span class="comment">go 中的 map 是完全无序的, 遍历的时候既不会按照字母顺序也不会按照插入顺序, 而是随机顺序</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>) <span class="comment">//使用 make 创建一个空 map, key 是 string, value 是 int</span></span><br><span class="line">m[<span class="string">&quot;one&quot;</span>] = <span class="number">1</span>              <span class="comment">//赋值一个键值对</span></span><br><span class="line">m[<span class="string">&quot;two&quot;</span>] = <span class="number">2</span></span><br><span class="line">fmt.Println(m)           <span class="comment">// map[one:1 two:2]</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(m))      <span class="comment">// 2</span></span><br><span class="line">fmt.Println(m[<span class="string">&quot;one&quot;</span>])    <span class="comment">// 1</span></span><br><span class="line">fmt.Println(m[<span class="string">&quot;unknow&quot;</span>]) <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line">r, ok := m[<span class="string">&quot;unknow&quot;</span>] <span class="comment">// 获取键值对时在变量后加一个 ok 来判断这个 key 是否存在</span></span><br><span class="line">fmt.Println(r, ok)   <span class="comment">// 0 false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">delete</span>(m, <span class="string">&quot;one&quot;</span>) <span class="comment">// 删除键值对</span></span><br><span class="line"></span><br><span class="line">m2 := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>&#123;<span class="string">&quot;one&quot;</span>: <span class="number">1</span>, <span class="string">&quot;two&quot;</span>: <span class="number">2</span>&#125;    <span class="comment">// 定义并初始化</span></span><br><span class="line"><span class="keyword">var</span> m3 = <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>&#123;<span class="string">&quot;one&quot;</span>: <span class="number">1</span>, <span class="string">&quot;two&quot;</span>: <span class="number">2</span>&#125; <span class="comment">// 定义并初始化</span></span><br><span class="line">fmt.Println(m2, m3)                         <span class="comment">// map[one:1 two:2] map[one:1 two:2]</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-9-range"><a href="#2-2-9-range" class="headerlink" title="2.2.9 range"></a>2.2.9 range</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// 可以用 range 快速遍历 slice 或 map, 使代码更加简洁</span></span><br><span class="line">nums := []<span class="type">int</span>&#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125; <span class="comment">// 定义一个数组 或 slice</span></span><br><span class="line">sum := <span class="number">0</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">i 表示切片的角标, num 表示切片的值</span></span><br><span class="line"><span class="comment">可以这么理解, 一个切片有两个为定值 nums[i] = num</span></span><br><span class="line"><span class="comment">map 中的键值对也是需要两个变量, 一个表示 key, 一个表示 value</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">for</span> i, num := <span class="keyword">range</span> nums &#123; <span class="comment">// 注意写法, 中间是 :=</span></span><br><span class="line">sum += num</span><br><span class="line"><span class="keyword">if</span> num == <span class="number">2</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;index:&quot;</span>, i, <span class="string">&quot;num:&quot;</span>, num) <span class="comment">// index: 0 num: 2</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(sum) <span class="comment">// 9</span></span><br><span class="line"></span><br><span class="line">m := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>&#123;<span class="string">&quot;a&quot;</span>: <span class="string">&quot;A&quot;</span>, <span class="string">&quot;b&quot;</span>: <span class="string">&quot;B&quot;</span>&#125; <span class="comment">// 定义一个 map</span></span><br><span class="line"><span class="keyword">for</span> k, v := <span class="keyword">range</span> m &#123;                      <span class="comment">// 注意写法, 中间是 :=</span></span><br><span class="line">fmt.Println(k, v) <span class="comment">// a A \n b B</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> k := <span class="keyword">range</span> m &#123; <span class="comment">// 只遍历 key</span></span><br><span class="line">fmt.Println(<span class="string">&quot;key&quot;</span>, k) <span class="comment">// key a \n key b</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-10-函数"><a href="#2-2-10-函数" class="headerlink" title="2.2.10 函数"></a>2.2.10 函数</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// func 定义一个函数, 函数的数据类型是后置的</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(a <span class="type">int</span>, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123; <span class="comment">// 两个数相加</span></span><br><span class="line"><span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add2</span><span class="params">(a, b <span class="type">int</span>)</span></span> <span class="type">int</span> &#123; <span class="comment">// 两个数相加, 省略一个数据类型</span></span><br><span class="line"><span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// go 中函数原生支持多个返回值, 实际业务逻辑代码中几乎所有的函数都能返回两个值, 第一个是真正的结果, 第二个是一个错误信息</span></span><br><span class="line"><span class="comment">// (v string, ok bool) 这个位置本来是函数的数据类型, 这里需要返回的是两个变量, 所以直接这样写, 如果没有返回值的话这部分直接省略即可</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">exists</span><span class="params">(m <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>, k <span class="type">string</span>)</span></span> (v <span class="type">string</span>, ok <span class="type">bool</span>) &#123;</span><br><span class="line">v, ok = m[k]</span><br><span class="line"><span class="keyword">return</span> v, ok <span class="comment">// 两个返回值</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 从主函数进入</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">res := add(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">fmt.Println(res) <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// map[string]string&#123;&quot;a&quot;: &quot;A&quot;&#125; 是 m, &quot;a&quot; 是 k</span></span><br><span class="line">v, ok := exists(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">string</span>&#123;<span class="string">&quot;a&quot;</span>: <span class="string">&quot;A&quot;</span>&#125;, <span class="string">&quot;a&quot;</span>)</span><br><span class="line">fmt.Println(v, ok) <span class="comment">// A True</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-11-指针"><a href="#2-2-11-指针" class="headerlink" title="2.2.11 指针"></a>2.2.11 指针</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 无效修改</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add2</span><span class="params">(n <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">n += <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用指针, 有小修改</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add2ptr</span><span class="params">(n *<span class="type">int</span>)</span></span> &#123; <span class="comment">// 指针函数也是, 数据类型后置</span></span><br><span class="line">*n += <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// go 里的指针类似于 C 中的指针, 只不过操作更加有限</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">n := <span class="number">5</span></span><br><span class="line">add2(n)</span><br><span class="line">fmt.Println(n) <span class="comment">// 5</span></span><br><span class="line">add2ptr(&amp;n)    <span class="comment">// 加个取地址符 &amp; 使类型匹配</span></span><br><span class="line">fmt.Println(n) <span class="comment">// 7</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-12-结构体"><a href="#2-2-12-结构体" class="headerlink" title="2.2.12 结构体"></a>2.2.12 结构体</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 结构体是带类型的字段的集合</span></span><br><span class="line"><span class="keyword">type</span> user <span class="keyword">struct</span> &#123;</span><br><span class="line">name     <span class="type">string</span></span><br><span class="line">password <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">a := user&#123;name: <span class="string">&quot;wang&quot;</span>, password: <span class="string">&quot;1024&quot;</span>&#125; <span class="comment">// 结构体初始化, 注意需要传入每个字段的初始值</span></span><br><span class="line">b := user&#123;<span class="string">&quot;wang&quot;</span>, <span class="string">&quot;1024&quot;</span>&#125;</span><br><span class="line">c := user&#123;name: <span class="string">&quot;wang&quot;</span>&#125;</span><br><span class="line">c.password = <span class="string">&quot;1024&quot;</span> <span class="comment">// 分开初始化</span></span><br><span class="line"><span class="keyword">var</span> d user          <span class="comment">// 定义一个 user 结构体变量, 然后分别初始化</span></span><br><span class="line">d.name = <span class="string">&quot;wang&quot;</span>     <span class="comment">// 相当于键值对, 可以只对一部分字段进行初始化</span></span><br><span class="line">d.password = <span class="string">&quot;1024&quot;</span></span><br><span class="line"></span><br><span class="line">fmt.Println(a, b, c, d)                 <span class="comment">// &#123;wang 1024&#125; &#123;wang 1024&#125; &#123;wang 1024&#125; &#123;wang 1024&#125;</span></span><br><span class="line">fmt.Println(checkPassword(a, <span class="string">&quot;haha&quot;</span>))   <span class="comment">// false</span></span><br><span class="line">fmt.Println(checkPassword2(&amp;a, <span class="string">&quot;haha&quot;</span>)) <span class="comment">// false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 拷贝的结构体修改, 开销大</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">checkPassword</span><span class="params">(u user, password <span class="type">string</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line"><span class="keyword">return</span> u.password == password</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 借助指针实现对于结构体的修改, 避免结构体的拷贝开销</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">checkPassword2</span><span class="params">(u *user, password <span class="type">string</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line"><span class="keyword">return</span> u.password == password</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-13-结构体方法"><a href="#2-2-13-结构体方法" class="headerlink" title="2.2.13 结构体方法"></a>2.2.13 结构体方法</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义 user 结构体</span></span><br><span class="line"><span class="keyword">type</span> user <span class="keyword">struct</span> &#123;</span><br><span class="line">name     <span class="type">string</span></span><br><span class="line">password <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">从上一个例子中的普通函数, 修改为结构体方法</span></span><br><span class="line"><span class="comment">具体的代码修改是把第一个参数加上括号写到函数名称前面</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">func checkPassword(u user, password string) bool &#123;</span></span><br><span class="line"><span class="comment">return u.password == password</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u user)</span></span> checkPassword(password <span class="type">string</span>) <span class="type">bool</span> &#123;</span><br><span class="line"><span class="keyword">return</span> u.password == password</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">从上一个例子中的普通函数, 修改为结构体方法</span></span><br><span class="line"><span class="comment">具体的代码修改是把第一个参数加上括号写到函数名称前面</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">func checkPassword2(u *user, password string) bool &#123;</span></span><br><span class="line"><span class="comment">return u.password == password</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(u *user)</span></span> resetPassword(password <span class="type">string</span>) &#123; <span class="comment">// 修改 password 变量</span></span><br><span class="line">u.password = password <span class="comment">// 这个函数不需要返回值, 所有函数定义的时候没有声明返回值类型</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">a := user&#123;name: <span class="string">&quot;wang&quot;</span>, password: <span class="string">&quot;1024&quot;</span>&#125;</span><br><span class="line">a.resetPassword(<span class="string">&quot;2048&quot;</span>)              <span class="comment">// 目的是可以以这种形式调用方法 (类似面向对象)</span></span><br><span class="line">fmt.Println(a.checkPassword(<span class="string">&quot;2048&quot;</span>)) <span class="comment">// true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-14-异常处理"><a href="#2-2-14-异常处理" class="headerlink" title="2.2.14 异常处理"></a>2.2.14 异常处理</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;errors&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> user <span class="keyword">struct</span> &#123;</span><br><span class="line">name     <span class="type">string</span></span><br><span class="line">password <span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// go 的语言习惯是使用一个单独的返回值来传递错误信息</span></span><br><span class="line"><span class="comment">// 在函数定义中, 在函数的返回值类型中加一个 error, 就代表这个函数可能会返回错误</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findUser</span><span class="params">(users []user, name <span class="type">string</span>)</span></span> (v *user, err <span class="type">error</span>) &#123;</span><br><span class="line"><span class="keyword">for</span> _, u := <span class="keyword">range</span> users &#123;</span><br><span class="line"><span class="keyword">if</span> u.name == name &#123;</span><br><span class="line"><span class="keyword">return</span> &amp;u, <span class="literal">nil</span> <span class="comment">// 返回值 1, nil 代表零值, 相当于 null</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">不同于 Java 与 C++ 中的异常处理</span></span><br><span class="line"><span class="comment">go 的处理方式可以很清晰地知道哪个函数返回了错误, 并且可以食用菌简单的 if else 来处理错误</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">函数实现的时候 return 需要同时 return 两个值</span></span><br><span class="line"><span class="comment">报错的话 return nil, error</span></span><br><span class="line"><span class="comment">没报错的话 return 结果, nil</span></span><br><span class="line"><span class="comment">说白了就是结果和 error 只能有一个, 另一个为空</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, errors.New(<span class="string">&quot;not found&quot;</span>) <span class="comment">// 返回值 2, 报错 error</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">u, err := findUser([]user&#123;&#123;<span class="string">&quot;wang&quot;</span>, <span class="string">&quot;1024&quot;</span>&#125;&#125;, <span class="string">&quot;wang&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Println(err)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(u.name) <span class="comment">// wang</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> u, err := findUser([]user&#123;&#123;<span class="string">&quot;wang&quot;</span>, <span class="string">&quot;1024&quot;</span>&#125;&#125;, <span class="string">&quot;li&quot;</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">fmt.Println(err) <span class="comment">// not found</span></span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">fmt.Println(u.name)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-15-字符串操作"><a href="#2-2-15-字符串操作" class="headerlink" title="2.2.15 字符串操作"></a>2.2.15 字符串操作</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;strings&quot;</span> <span class="comment">// 以下常用字符串工具函数都来自这个包</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">a := <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="comment">// 判断一个字符串里是否包含另外一个字符串</span></span><br><span class="line">fmt.Println(strings.Contains(a, <span class="string">&quot;ll&quot;</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 字符串中字符计数</span></span><br><span class="line">fmt.Println(strings.Count(a, <span class="string">&quot;l&quot;</span>)) <span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 判断字符串是否以 prefix 开头</span></span><br><span class="line">fmt.Println(strings.HasPrefix(a, <span class="string">&quot;he&quot;</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 判断字符串是否以 prefix 结尾</span></span><br><span class="line">fmt.Println(strings.HasSuffix(a, <span class="string">&quot;llo&quot;</span>)) <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 查找某个字符串的位置, 从 0 开始  -1 表示不包含</span></span><br><span class="line">fmt.Println(strings.Index(a, <span class="string">&quot;ll&quot;</span>)) <span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 连接多个字符串</span></span><br><span class="line">fmt.Println(strings.Join([]<span class="type">string</span>&#123;<span class="string">&quot;he&quot;</span>, <span class="string">&quot;llo&quot;</span>&#125;, <span class="string">&quot;-&quot;</span>)) <span class="comment">// he-llo</span></span><br><span class="line"><span class="comment">// 重复多个字符串</span></span><br><span class="line">fmt.Println(strings.Repeat(a, <span class="number">2</span>)) <span class="comment">// hellohello</span></span><br><span class="line"><span class="comment">// 替换字符串中的字符, n 表示前 n 个字符串, n = -1 表示全替换</span></span><br><span class="line">fmt.Println(strings.Replace(a, <span class="string">&quot;e&quot;</span>, <span class="string">&quot;E&quot;</span>, <span class="number">-1</span>)) <span class="comment">// hEllo</span></span><br><span class="line"><span class="comment">// 字符串分割</span></span><br><span class="line">fmt.Println(strings.Split(<span class="string">&quot;a-b-c&quot;</span>, <span class="string">&quot;-&quot;</span>)) <span class="comment">// [a b c]</span></span><br><span class="line"><span class="comment">// 全转小写</span></span><br><span class="line">fmt.Println(strings.ToLower(a)) <span class="comment">// hello</span></span><br><span class="line"><span class="comment">// 全转大写</span></span><br><span class="line">fmt.Println(strings.ToUpper(a)) <span class="comment">// HELLO</span></span><br><span class="line"><span class="comment">// 求字符串长度</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(a)) <span class="comment">// 5</span></span><br><span class="line">b := <span class="string">&quot;你好&quot;</span></span><br><span class="line"><span class="comment">// 中文跟英文长度不一样</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(b)) <span class="comment">// 6</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-16-字符串格式化"><a href="#2-2-16-字符串格式化" class="headerlink" title="2.2.16 字符串格式化"></a>2.2.16 字符串格式化</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> point <span class="keyword">struct</span> &#123;</span><br><span class="line">x, y <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">s := <span class="string">&quot;hello&quot;</span></span><br><span class="line">n := <span class="number">123</span></span><br><span class="line">p := point&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line"><span class="comment">// Printf 与 Println 都可以用, 分别是 C 与 Java中的格式</span></span><br><span class="line">fmt.Println(s, n) <span class="comment">// hello 123</span></span><br><span class="line">fmt.Println(p)    <span class="comment">// &#123;1 2&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// %v 可以打印任意类型的变量, 不需要区分数字字符串等</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;s=%v\n&quot;</span>, s) <span class="comment">// s=hello</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;n=%v\n&quot;</span>, n) <span class="comment">// n=123</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;p=%v\n&quot;</span>, p) <span class="comment">// p=&#123;1 2&#125;</span></span><br><span class="line"><span class="comment">// %+v 打印详细结果</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;p=%+v\n&quot;</span>, p) <span class="comment">// p=&#123;x:1 y:2&#125;</span></span><br><span class="line"><span class="comment">// %+v 打印更详细结果</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;p=%#v\n&quot;</span>, p) <span class="comment">// p=main.point&#123;x:1, y:2&#125;</span></span><br><span class="line"></span><br><span class="line">f := <span class="number">3.141592653</span></span><br><span class="line">fmt.Println(f) <span class="comment">// 3.141592653</span></span><br><span class="line"><span class="comment">// 保留小数点后两位</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%.2f\n&quot;</span>, f) <span class="comment">// 3.14</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-17-JSON-处理"><a href="#2-2-17-JSON-处理" class="headerlink" title="2.2.17 JSON 处理"></a>2.2.17 JSON 处理</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;encoding/json&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将结构体每个字段的首字母大写表示公开字段, 这个结构体就可以用 JSON.marshal 序列化变成一个 JSON 字符串</span></span><br><span class="line"><span class="comment">// 默认序列化出来的字符串风格是大写字母开头而不是下划线, 可以在后面用 json tag 等语法修改输出的 JSON 结果里面的字段名</span></span><br><span class="line"><span class="keyword">type</span> userInfo <span class="keyword">struct</span> &#123;</span><br><span class="line">Name  <span class="type">string</span></span><br><span class="line">Age   <span class="type">int</span> <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">Hobby []<span class="type">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">a := userInfo&#123;Name: <span class="string">&quot;wang&quot;</span>, Age: <span class="number">18</span>, Hobby: []<span class="type">string</span>&#123;<span class="string">&quot;Golang&quot;</span>, <span class="string">&quot;TypeScript&quot;</span>&#125;&#125;</span><br><span class="line">buf, err := json.Marshal(a)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123; <span class="comment">// 错误处理</span></span><br><span class="line"><span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(buf)         <span class="comment">// [123 34 78 97...]</span></span><br><span class="line">fmt.Println(<span class="type">string</span>(buf)) <span class="comment">// &#123;&quot;Name&quot;:&quot;wang&quot;,&quot;age&quot;:18,&quot;Hobby&quot;:[&quot;Golang&quot;,&quot;TypeScript&quot;]&#125;</span></span><br><span class="line"></span><br><span class="line">buf, err = json.MarshalIndent(a, <span class="string">&quot;&quot;</span>, <span class="string">&quot;\t&quot;</span>) <span class="comment">// 每个字段序列化后用 \t 分开</span></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="type">string</span>(buf))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 反序列化到一个空变量中</span></span><br><span class="line"><span class="keyword">var</span> b userInfo</span><br><span class="line">err = json.Unmarshal(buf, &amp;b)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">&quot;%#v\n&quot;</span>, b) <span class="comment">// main.userInfo&#123;Name:&quot;wang&quot;, Age:18, Hobby:[]string&#123;&quot;Golang&quot;, &quot;TypeScript&quot;&#125;&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-18-时间处理"><a href="#2-2-18-时间处理" class="headerlink" title="2.2.18 时间处理"></a>2.2.18 时间处理</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">now := time.Now() <span class="comment">// 获取当前时间</span></span><br><span class="line">fmt.Println(now)  <span class="comment">// 2022-03-27 18:04:59.433297 +0800 CST m=+0.000087933</span></span><br><span class="line"><span class="comment">// 构造一个带时区的时间</span></span><br><span class="line">t := time.Date(<span class="number">2022</span>, <span class="number">3</span>, <span class="number">27</span>, <span class="number">1</span>, <span class="number">25</span>, <span class="number">36</span>, <span class="number">0</span>, time.UTC)</span><br><span class="line">t2 := time.Date(<span class="number">2022</span>, <span class="number">3</span>, <span class="number">27</span>, <span class="number">2</span>, <span class="number">30</span>, <span class="number">36</span>, <span class="number">0</span>, time.UTC)</span><br><span class="line">fmt.Println(t)                                                  <span class="comment">// 2022-03-27 01:25:36 +0000 UTC</span></span><br><span class="line">fmt.Println(t.Year(), t.Month(), t.Day(), t.Hour(), t.Minute()) <span class="comment">// 2022 March 27 1 25</span></span><br><span class="line"><span class="comment">// &quot;2006-01-02 15:04:05&quot; 是固定的, 输出一个这样格式的现在时间</span></span><br><span class="line">fmt.Println(t.Format(<span class="string">&quot;2006-01-02 15:04:05&quot;</span>)) <span class="comment">// 2022-03-27 01:25:36</span></span><br><span class="line"><span class="comment">// 对两段时间做减法, 得到一个时间段</span></span><br><span class="line">diff := t2.Sub(t)</span><br><span class="line"><span class="comment">// 这个时间段有几小时几分钟几秒</span></span><br><span class="line">fmt.Println(diff)                           <span class="comment">// 1h5m0s</span></span><br><span class="line">fmt.Println(diff.Minutes(), diff.Seconds()) <span class="comment">// 65 3900</span></span><br><span class="line">t3, err := time.Parse(<span class="string">&quot;2006-01-02 15:04:05&quot;</span>, <span class="string">&quot;2022-03-27 01:25:36&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(t3 == t) <span class="comment">// true</span></span><br><span class="line"><span class="comment">// .Unix 获取时间戳</span></span><br><span class="line">fmt.Println(now.Unix()) <span class="comment">// 1648738080</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-19-数字解析"><a href="#2-2-19-数字解析" class="headerlink" title="2.2.19 数字解析"></a>2.2.19 数字解析</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;strconv&quot;</span> <span class="comment">// 关于字符串和数字类型之间的转换方法都在这个包下</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果输入不合法, 以下所有函数都会输出 error</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// ParseFloat 解析一个字符串, 解析成 float64</span></span><br><span class="line"><span class="comment">// _ 表示 err</span></span><br><span class="line">f, _ := strconv.ParseFloat(<span class="string">&quot;1.234&quot;</span>, <span class="number">64</span>)</span><br><span class="line">fmt.Println(f) <span class="comment">// 1.234</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ParseFloat 解析一个字符串, 解析成 int 10进制</span></span><br><span class="line">n, _ := strconv.ParseInt(<span class="string">&quot;111&quot;</span>, <span class="number">10</span>, <span class="number">64</span>)</span><br><span class="line">fmt.Println(n) <span class="comment">// 111</span></span><br><span class="line"></span><br><span class="line">n, _ = strconv.ParseInt(<span class="string">&quot;0x1000&quot;</span>, <span class="number">0</span>, <span class="number">64</span>)</span><br><span class="line">fmt.Println(n) <span class="comment">// 4096</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Atoi 把一个十进制字符串转成数字</span></span><br><span class="line"><span class="comment">// iotA 把一个数字转换成字符串</span></span><br><span class="line">n2, _ := strconv.Atoi(<span class="string">&quot;123&quot;</span>)</span><br><span class="line">fmt.Println(n2) <span class="comment">// 123</span></span><br><span class="line"></span><br><span class="line">n2, err := strconv.Atoi(<span class="string">&quot;AAA&quot;</span>) <span class="comment">// 输入不合法</span></span><br><span class="line">fmt.Println(n2, err)           <span class="comment">// 0 strconv.Atoi: parsing &quot;AAA&quot;: invalid syntax</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-2-20-进程信息"><a href="#2-2-20-进程信息" class="headerlink" title="2.2.20 进程信息"></a>2.2.20 进程信息</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;os&quot;</span></span><br><span class="line"><span class="string">&quot;os/exec&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// os.Args 得到程序执行时指定的命令行参数</span></span><br><span class="line"><span class="comment">// go run example/20-env/main.go a b c d</span></span><br><span class="line">fmt.Println(os.Args) <span class="comment">// [/var/folders/8p/n34xxfnx38dg8bv_x8l62t_m0000gn/T/go-build3406981276/b001/exe/main a b c d]</span></span><br><span class="line"><span class="comment">// 读取环境变量</span></span><br><span class="line">fmt.Println(os.Getenv(<span class="string">&quot;PATH&quot;</span>)) <span class="comment">// /usr/local/go/bin...</span></span><br><span class="line">fmt.Println(os.Setenv(<span class="string">&quot;AA&quot;</span>, <span class="string">&quot;BB&quot;</span>))</span><br><span class="line"></span><br><span class="line">buf, err := exec.Command(<span class="string">&quot;grep&quot;</span>, <span class="string">&quot;127.0.0.1&quot;</span>, <span class="string">&quot;/etc/hosts&quot;</span>).CombinedOutput()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="type">string</span>(buf)) <span class="comment">// 127.0.0.1       localhost</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="三、实战"><a href="#三、实战" class="headerlink" title="三、实战"></a>三、实战</h1><h2 id="3-1-猜谜游戏"><a href="#3-1-猜谜游戏" class="headerlink" title="3.1 猜谜游戏"></a>3.1 猜谜游戏</h2><blockquote><p>程序首先会生成一个介于 1 到 100 之间的随机整数, 然后提示玩家进行猜测</p><p>玩家每次输入一个数字, 程序就回告诉玩家这个猜测的值是高于还是低于随机数</p><p>猜对了就告诉玩家胜利并退出程序</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;bufio&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;math/rand&quot;</span></span><br><span class="line"><span class="string">&quot;os&quot;</span></span><br><span class="line"><span class="string">&quot;strconv&quot;</span></span><br><span class="line"><span class="string">&quot;strings&quot;</span></span><br><span class="line"><span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">maxNum := <span class="number">100</span></span><br><span class="line">rand.Seed(time.Now().UnixNano()) <span class="comment">// time.Now().UnixNano() 通过时间戳来生成一个随机数种子</span></span><br><span class="line"><span class="comment">// 使用 rand.Intn() 的时候要设置随机数种子, 否则每次都会生成相同的随机数序列</span></span><br><span class="line">secretNumber := rand.Intn(maxNum) <span class="comment">// 上限为 maxNum, 下限是 0 (默认), 就生成了一个 0 ~ 100 的随机数</span></span><br><span class="line"><span class="comment">// fmt.Println(&quot;The secret number is &quot;, secretNumber)</span></span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="string">&quot;Please input your guess&quot;</span>)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">每个程序执行的时候都会打开几个文件, stdin stdout stderr</span></span><br><span class="line"><span class="comment">stdin 文件可以使用 os.Stdin 得到</span></span><br><span class="line"><span class="comment">但是直接操作这个 stdin 文件不方便, 就用 bufio.NewReader 方法把文件转换成一个 reader 变量</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">reader := bufio.NewReader(os.Stdin) <span class="comment">// 转成一个只读的流, 这个流里有很多行</span></span><br><span class="line"><span class="keyword">for</span> &#123;                               <span class="comment">// 猜不出来就一直猜</span></span><br><span class="line">input, err := reader.ReadString(<span class="string">&#x27;\n&#x27;</span>) <span class="comment">// 用 ReadString 方法读取流中的一行</span></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;                       <span class="comment">// 读取流失败 -- 打印错误 退出循环</span></span><br><span class="line">fmt.Println(<span class="string">&quot;An error occured while reading input. Please try again&quot;</span>, err)</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125;</span><br><span class="line">input = strings.Trim(input, <span class="string">&quot;\r\n&quot;</span>) <span class="comment">// ReadString 方法返回值包含结尾的换行符, 去掉</span></span><br><span class="line"></span><br><span class="line">guess, err := strconv.Atoi(input) <span class="comment">// 将读取的结果转换成数字</span></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;                   <span class="comment">// 转换数字失败 -- 打印错误并退出</span></span><br><span class="line">fmt.Println(<span class="string">&quot;Invalid input. Please enter an integer value&quot;</span>)</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="string">&quot;You guess is&quot;</span>, guess)</span><br><span class="line"><span class="comment">// 开始比较大小</span></span><br><span class="line"><span class="keyword">if</span> guess &gt; secretNumber &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;Your guess is bigger than the secret number. Please try again&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> guess &lt; secretNumber &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;Your guess is smaller than the secret number. Please try again&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;Correct, you Legend!&quot;</span>)</span><br><span class="line"><span class="keyword">break</span> <span class="comment">// 之道猜对了跳出循环</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h2 id="3-2-在线词典"><a href="#3-2-在线词典" class="headerlink" title="3.2 在线词典"></a>3.2 在线词典</h2><blockquote><p>用户可以在命令行中查询一个单词, 我们通过调用第三方 API 查询单词的翻译并打印出来</p><p>使用 Go 来发送 HTTP 请求, 解析 JSON, 并使用代码生成来提高开发效率</p></blockquote><h3 id="3-2-1-抓包"><a href="#3-2-1-抓包" class="headerlink" title="3.2.1 抓包"></a>3.2.1 抓包</h3><p>先找到一个第三方 API</p><blockquote><p><a href="https://fanyi.caiyunapp.com/">https://fanyi.caiyunapp.com</a></p></blockquote><ol><li>随便输入一个单词</li><li>点击翻译按钮</li><li>按 F12 进入开发者工具</li><li>在 Network 项中找到 All</li><li>左侧边栏从下向上找到最近的 dict ( 上面的都是之前请求的, 最下面的是最新的 )</li><li>检查请求头 Headers 中的请求形式应为 POST</li></ol><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230115173649793.png" alt="第三方 API"></p><p>Payload 中是一个 JSON 代码段</p><p>source 表示要翻译的词</p><p>trans_type 表示的是从英文翻译到中文</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230115173920478.png" alt="Payload"></p><p>Preview 中显示的是这个词的翻译等</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230115174153665.png" alt="Preview"></p><h3 id="3-2-2-代码生成"><a href="#3-2-2-代码生成" class="headerlink" title="3.2.2 代码生成"></a>3.2.2 代码生成</h3><p>右键 dict 一次选择 <code>copy -&gt; copy as cURL (bash)</code> 复制所有请求头到一个空文件中</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230115174720225.png" alt="右键这个"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230115174747547.png" alt="随便复制到一个空文件中"></p><p>在这个网站中将拿到的 JSON 准换成 Go 语言</p><blockquote><p><a href="https://curlconverter.com/go/">https://curlconverter.com/go/</a></p></blockquote><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230115180028169.png" alt="JSON to Go"></p><p>将转换完成的代码粘贴回编译器是可以正常运行的, 可以看到返回了一大串 JSON</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230115190839125.png" alt="生成代码运行"></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line"><span class="string">&quot;log&quot;</span></span><br><span class="line"><span class="string">&quot;net/http&quot;</span></span><br><span class="line"><span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// 创建一个 HTTP client, 创建的时候可以指定很多参数, 包括是否启用请求超时的 cookie 等 (这里没有设置是否超时)</span></span><br><span class="line">client := &amp;http.Client&#123;&#125;</span><br><span class="line"><span class="comment">// 将请求体设置为一个只读流</span></span><br><span class="line"><span class="keyword">var</span> data = strings.NewReader(<span class="string">`&#123;&quot;trans_type&quot;:&quot;en2zh&quot;,&quot;source&quot;:&quot;infer&quot;&#125;`</span>)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">http.NewRequest 构造一个 HTTP 请求</span></span><br><span class="line"><span class="comment">第一个参数 http 的方法 POST, 第二个参数是 URL, 第三个参数是 body</span></span><br><span class="line"><span class="comment">由于 body 可能很大, 放在内存里会影响程序效率, 所以将 body 设置成一个只读流</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">req, err := http.NewRequest(<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;https://api.interpreter.caiyunai.com/v1/dict&quot;</span>, data)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 设置一堆请求头</span></span><br><span class="line">req.Header.Set(<span class="string">&quot;authority&quot;</span>, <span class="string">&quot;api.interpreter.caiyunai.com&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;accept&quot;</span>, <span class="string">&quot;application/json, text/plain, */*&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;accept-language&quot;</span>, <span class="string">&quot;zh-CN,zh;q=0.9&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;app-name&quot;</span>, <span class="string">&quot;xy&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;content-type&quot;</span>, <span class="string">&quot;application/json;charset=UTF-8&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;device-id&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;origin&quot;</span>, <span class="string">&quot;https://fanyi.caiyunapp.com&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;os-type&quot;</span>, <span class="string">&quot;web&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;os-version&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;referer&quot;</span>, <span class="string">&quot;https://fanyi.caiyunapp.com/&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-ch-ua&quot;</span>, <span class="string">`&quot;Not?A_Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;108&quot;, &quot;Google Chrome&quot;;v=&quot;108&quot;`</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-ch-ua-mobile&quot;</span>, <span class="string">&quot;?0&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-ch-ua-platform&quot;</span>, <span class="string">`&quot;Windows&quot;`</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-fetch-dest&quot;</span>, <span class="string">&quot;empty&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-fetch-mode&quot;</span>, <span class="string">&quot;cors&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-fetch-site&quot;</span>, <span class="string">&quot;cross-site&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;user-agent&quot;</span>, <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;x-authorization&quot;</span>, <span class="string">&quot;token:qgemv4jr1y38jyq6vhvi&quot;</span>)</span><br><span class="line"><span class="comment">// 发起请求并得到 response</span></span><br><span class="line"><span class="comment">// response 有自己的 HTTP 状态码, response header 和 body</span></span><br><span class="line">resp, err := client.Do(req)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// response 的 body 也是一个流, 为了避免资源泄露需要手动添加一个 defer 方法来关闭这个流</span></span><br><span class="line"><span class="comment">// defer 函数会在函数运行之后从下往上执行, 这里只有一个 defer 所有只执行这一个</span></span><br><span class="line"><span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line"><span class="comment">// 使用 ioutil.ReadAll 来读取 response 的 body 流</span></span><br><span class="line">bodyText, err := ioutil.ReadAll(resp.Body)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 得到整个 body 后用 print 打印出来</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%s\n&quot;</span>, bodyText)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-2-3-生成-request-body"><a href="#3-2-3-生成-request-body" class="headerlink" title="3.2.3 生成 request body"></a>3.2.3 生成 request body</h3><p>go 语言中生成一段 JSON 常用的方式是先构造一个结构体, 结构体与 JSON 结构是一一对应的</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;bytes&quot;</span></span><br><span class="line"><span class="string">&quot;encoding/json&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line"><span class="string">&quot;log&quot;</span></span><br><span class="line"><span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 构造一个结构体, 用来解析 JSON</span></span><br><span class="line"><span class="keyword">type</span> DictRequest <span class="keyword">struct</span> &#123;</span><br><span class="line">TransType <span class="type">string</span> <span class="string">`json:&quot;trans_type&quot;`</span></span><br><span class="line">Source    <span class="type">string</span> <span class="string">`json:&quot;source&quot;`</span></span><br><span class="line">UserID    <span class="type">string</span> <span class="string">`json:&quot;user_id&quot;`</span> <span class="comment">// 其实这个字段用不到</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// 创建一个 HTTP client, 创建的时候可以指定很多参数, 包括是否启用请求超时的 cookie 等 (这里没有设置是否超时)</span></span><br><span class="line">client := &amp;http.Client&#123;&#125;</span><br><span class="line"><span class="comment">// 初始化结构体成员</span></span><br><span class="line">request := DictRequest&#123;TransType: <span class="string">&quot;en2zh&quot;</span>, Source: <span class="string">&quot;good&quot;</span>&#125;</span><br><span class="line"><span class="comment">// 序列化字符串</span></span><br><span class="line">buf, err := json.Marshal(request)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 将请求体设置为一个只读流</span></span><br><span class="line"><span class="comment">//var data = strings.NewReader(`&#123;&quot;trans_type&quot;:&quot;en2zh&quot;,&quot;source&quot;:&quot;infer&quot;&#125;`)</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">由于这里是字节数组, 所以不用 string.NewReader</span></span><br><span class="line"><span class="comment">因为我们请求的应该是用一个变量作为一个请求体, 如果是 string 的话就相当于直接写死了</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">使用 bytes.NewReader 来构造 request 的请求体</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> data = bytes.NewReader(buf)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">http.NewRequest 构造一个 HTTP 请求</span></span><br><span class="line"><span class="comment">第一个参数 http 的方法 POST, 第二个参数是 URL, 第三个参数是 body</span></span><br><span class="line"><span class="comment">由于 body 可能很大, 放在内存里会影响程序效率, 所以将 body 设置成一个只读流</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 以下代码没变</span></span><br><span class="line">req, err := http.NewRequest(<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;https://api.interpreter.caiyunai.com/v1/dict&quot;</span>, data)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 设置一堆请求头</span></span><br><span class="line">req.Header.Set(<span class="string">&quot;authority&quot;</span>, <span class="string">&quot;api.interpreter.caiyunai.com&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;accept&quot;</span>, <span class="string">&quot;application/json, text/plain, */*&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;accept-language&quot;</span>, <span class="string">&quot;zh-CN,zh;q=0.9&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;app-name&quot;</span>, <span class="string">&quot;xy&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;content-type&quot;</span>, <span class="string">&quot;application/json;charset=UTF-8&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;device-id&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;origin&quot;</span>, <span class="string">&quot;https://fanyi.caiyunapp.com&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;os-type&quot;</span>, <span class="string">&quot;web&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;os-version&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;referer&quot;</span>, <span class="string">&quot;https://fanyi.caiyunapp.com/&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-ch-ua&quot;</span>, <span class="string">`&quot;Not?A_Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;108&quot;, &quot;Google Chrome&quot;;v=&quot;108&quot;`</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-ch-ua-mobile&quot;</span>, <span class="string">&quot;?0&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-ch-ua-platform&quot;</span>, <span class="string">`&quot;Windows&quot;`</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-fetch-dest&quot;</span>, <span class="string">&quot;empty&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-fetch-mode&quot;</span>, <span class="string">&quot;cors&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-fetch-site&quot;</span>, <span class="string">&quot;cross-site&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;user-agent&quot;</span>, <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;x-authorization&quot;</span>, <span class="string">&quot;token:qgemv4jr1y38jyq6vhvi&quot;</span>)</span><br><span class="line"><span class="comment">// 发起请求并得到 response</span></span><br><span class="line"><span class="comment">// response 有自己的 HTTP 状态码, response header 和 body</span></span><br><span class="line">resp, err := client.Do(req)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// response 的 body 也是一个流, 为了避免资源泄露需要手动添加一个 defer 方法来关闭这个流</span></span><br><span class="line"><span class="comment">// defer 函数会在函数运行之后从下往上执行, 这里只有一个 defer 所有只执行这一个</span></span><br><span class="line"><span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line"><span class="comment">// 使用 ioutil.ReadAll 来读取 response 的 body 流</span></span><br><span class="line">bodyText, err := ioutil.ReadAll(resp.Body)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 得到整个 body 后用 print 打印出来</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%s\n&quot;</span>, bodyText)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-2-4-解析-response-body"><a href="#3-2-4-解析-response-body" class="headerlink" title="3.2.4 解析 response body"></a>3.2.4 解析 response body</h3><p>go 语言是强语言类型, 不建议直接用 map 从 body 中取值</p><p>更常用的方法是和 request 一样写一个结构体, 然后把返回的 JSON 反序列化到结构体里面</p><blockquote><p> <a href="https://oktools.net/json2go">https://oktools.net/json2go</a></p></blockquote><p>将 Preview 中的 JSON 字符串复制到上述网站</p><p><code>右键 -&gt; copy value</code></p><p>一定要是 <code>rc</code> 开头的整个这个东西, 不然之后生成的结构体会有问题</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230115195852511.png" alt="复制 JSON"></p><p>转换-展开 生成多个独立的结构体</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230115195940932.png" alt="转换-展开"></p><p>转换-嵌套 生成一个单独的结构体</p><p>因为这个小项目不需要对数据进行单独的操作所以生成嵌套的即可</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230115195957114.png" alt="转换-嵌套"></p><p>运行一下是这个效果, 已经可以将翻译的结果输出了</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230115200213777.png" alt="解析请求体"></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;bytes&quot;</span></span><br><span class="line"><span class="string">&quot;encoding/json&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line"><span class="string">&quot;log&quot;</span></span><br><span class="line"><span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 构造一个结构体, 用来解析 JSON</span></span><br><span class="line"><span class="keyword">type</span> DictRequest <span class="keyword">struct</span> &#123;</span><br><span class="line">TransType <span class="type">string</span> <span class="string">`json:&quot;trans_type&quot;`</span></span><br><span class="line">Source    <span class="type">string</span> <span class="string">`json:&quot;source&quot;`</span></span><br><span class="line">UserID    <span class="type">string</span> <span class="string">`json:&quot;user_id&quot;`</span> <span class="comment">// 其实这个字段用不到</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将生成的结构体改名并粘贴到这里</span></span><br><span class="line"><span class="keyword">type</span> DictResponse <span class="keyword">struct</span> &#123;</span><br><span class="line">Rc   <span class="type">int</span> <span class="string">`json:&quot;rc&quot;`</span></span><br><span class="line">Wiki <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125; <span class="string">`json:&quot;wiki&quot;`</span></span><br><span class="line">Dictionary <span class="keyword">struct</span> &#123;</span><br><span class="line">Prons <span class="keyword">struct</span> &#123;</span><br><span class="line">EnUs <span class="type">string</span> <span class="string">`json:&quot;en-us&quot;`</span></span><br><span class="line">En   <span class="type">string</span> <span class="string">`json:&quot;en&quot;`</span></span><br><span class="line">&#125; <span class="string">`json:&quot;prons&quot;`</span></span><br><span class="line">Explanations []<span class="type">string</span>      <span class="string">`json:&quot;explanations&quot;`</span></span><br><span class="line">Synonym      []<span class="type">string</span>      <span class="string">`json:&quot;synonym&quot;`</span></span><br><span class="line">Antonym      []<span class="keyword">interface</span>&#123;&#125; <span class="string">`json:&quot;antonym&quot;`</span></span><br><span class="line">WqxExample   [][]<span class="type">string</span>    <span class="string">`json:&quot;wqx_example&quot;`</span></span><br><span class="line">Entry        <span class="type">string</span>        <span class="string">`json:&quot;entry&quot;`</span></span><br><span class="line">Type         <span class="type">string</span>        <span class="string">`json:&quot;type&quot;`</span></span><br><span class="line">Related      []<span class="keyword">interface</span>&#123;&#125; <span class="string">`json:&quot;related&quot;`</span></span><br><span class="line">Source       <span class="type">string</span>        <span class="string">`json:&quot;source&quot;`</span></span><br><span class="line">&#125; <span class="string">`json:&quot;dictionary&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// 创建一个 HTTP client, 创建的时候可以指定很多参数, 包括是否启用请求超时的 cookie 等 (这里没有设置是否超时)</span></span><br><span class="line">client := &amp;http.Client&#123;&#125;</span><br><span class="line"><span class="comment">// 初始化结构体成员</span></span><br><span class="line">request := DictRequest&#123;TransType: <span class="string">&quot;en2zh&quot;</span>, Source: <span class="string">&quot;infer&quot;</span>&#125;</span><br><span class="line"><span class="comment">// 序列化字符串</span></span><br><span class="line">buf, err := json.Marshal(request)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 将请求体设置为一个只读流</span></span><br><span class="line"><span class="comment">//var data = strings.NewReader(`&#123;&quot;trans_type&quot;:&quot;en2zh&quot;,&quot;source&quot;:&quot;infer&quot;&#125;`)</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">由于这里是字节数组, 所以不用 string.NewReader</span></span><br><span class="line"><span class="comment">因为我们请求的应该是用一个变量作为一个请求体, 如果是 string 的话就相当于直接写死了</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">使用 bytes.NewReader 来构造 request 的请求体</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> data = bytes.NewReader(buf)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">http.NewRequest 构造一个 HTTP 请求</span></span><br><span class="line"><span class="comment">第一个参数 http 的方法 POST, 第二个参数是 URL, 第三个参数是 body</span></span><br><span class="line"><span class="comment">由于 body 可能很大, 放在内存里会影响程序效率, 所以将 body 设置成一个只读流</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 以下代码没变</span></span><br><span class="line">req, err := http.NewRequest(<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;https://api.interpreter.caiyunai.com/v1/dict&quot;</span>, data)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 设置一堆请求头</span></span><br><span class="line">req.Header.Set(<span class="string">&quot;authority&quot;</span>, <span class="string">&quot;api.interpreter.caiyunai.com&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;accept&quot;</span>, <span class="string">&quot;application/json, text/plain, */*&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;accept-language&quot;</span>, <span class="string">&quot;zh-CN,zh;q=0.9&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;app-name&quot;</span>, <span class="string">&quot;xy&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;content-type&quot;</span>, <span class="string">&quot;application/json;charset=UTF-8&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;device-id&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;origin&quot;</span>, <span class="string">&quot;https://fanyi.caiyunapp.com&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;os-type&quot;</span>, <span class="string">&quot;web&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;os-version&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;referer&quot;</span>, <span class="string">&quot;https://fanyi.caiyunapp.com/&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-ch-ua&quot;</span>, <span class="string">`&quot;Not?A_Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;108&quot;, &quot;Google Chrome&quot;;v=&quot;108&quot;`</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-ch-ua-mobile&quot;</span>, <span class="string">&quot;?0&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-ch-ua-platform&quot;</span>, <span class="string">`&quot;Windows&quot;`</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-fetch-dest&quot;</span>, <span class="string">&quot;empty&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-fetch-mode&quot;</span>, <span class="string">&quot;cors&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-fetch-site&quot;</span>, <span class="string">&quot;cross-site&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;user-agent&quot;</span>, <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;x-authorization&quot;</span>, <span class="string">&quot;token:qgemv4jr1y38jyq6vhvi&quot;</span>)</span><br><span class="line"><span class="comment">// 发起请求并得到 response</span></span><br><span class="line"><span class="comment">// response 有自己的 HTTP 状态码, response header 和 body</span></span><br><span class="line">resp, err := client.Do(req)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// response 的 body 也是一个流, 为了避免资源泄露需要手动添加一个 defer 方法来关闭这个流</span></span><br><span class="line"><span class="comment">// defer 函数会在函数运行之后从下往上执行, 这里只有一个 defer 所有只执行这一个</span></span><br><span class="line"><span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line"><span class="comment">// 使用 ioutil.ReadAll 来读取 response 的 body 流</span></span><br><span class="line">bodyText, err := ioutil.ReadAll(resp.Body)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 得到整个 body 后用 print 打印出来</span></span><br><span class="line"><span class="comment">// fmt.Printf(&quot;%s\n&quot;, bodyText)</span></span><br><span class="line"><span class="comment">// 定义一个大结构体变量</span></span><br><span class="line"><span class="keyword">var</span> dictResponse DictResponse</span><br><span class="line"><span class="comment">// 将 JSON 的值反序列化到这个新定义的变量中, 注意 &amp; 这样才能写入结构体</span></span><br><span class="line">err = json.Unmarshal(bodyText, &amp;dictResponse)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 使用最详细的方式打印</span></span><br><span class="line">fmt.Printf(<span class="string">&quot;%#v\n&quot;</span>, dictResponse)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-2-5-打印结果"><a href="#3-2-5-打印结果" class="headerlink" title="3.2.5 打印结果"></a>3.2.5 打印结果</h3><p>在一堆结果中截取我们想要的结果</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;bytes&quot;</span></span><br><span class="line"><span class="string">&quot;encoding/json&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line"><span class="string">&quot;log&quot;</span></span><br><span class="line"><span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 构造一个结构体, 用来解析 JSON</span></span><br><span class="line"><span class="keyword">type</span> DictRequest <span class="keyword">struct</span> &#123;</span><br><span class="line">TransType <span class="type">string</span> <span class="string">`json:&quot;trans_type&quot;`</span></span><br><span class="line">Source    <span class="type">string</span> <span class="string">`json:&quot;source&quot;`</span></span><br><span class="line">UserID    <span class="type">string</span> <span class="string">`json:&quot;user_id&quot;`</span> <span class="comment">// 其实这个字段用不到</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将生成的结构体改名并粘贴到这里</span></span><br><span class="line"><span class="keyword">type</span> DictResponse <span class="keyword">struct</span> &#123;</span><br><span class="line">Rc   <span class="type">int</span> <span class="string">`json:&quot;rc&quot;`</span></span><br><span class="line">Wiki <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125; <span class="string">`json:&quot;wiki&quot;`</span></span><br><span class="line">Dictionary <span class="keyword">struct</span> &#123;</span><br><span class="line">Prons <span class="keyword">struct</span> &#123;</span><br><span class="line">EnUs <span class="type">string</span> <span class="string">`json:&quot;en-us&quot;`</span></span><br><span class="line">En   <span class="type">string</span> <span class="string">`json:&quot;en&quot;`</span></span><br><span class="line">&#125; <span class="string">`json:&quot;prons&quot;`</span></span><br><span class="line">Explanations []<span class="type">string</span>      <span class="string">`json:&quot;explanations&quot;`</span></span><br><span class="line">Synonym      []<span class="type">string</span>      <span class="string">`json:&quot;synonym&quot;`</span></span><br><span class="line">Antonym      []<span class="keyword">interface</span>&#123;&#125; <span class="string">`json:&quot;antonym&quot;`</span></span><br><span class="line">WqxExample   [][]<span class="type">string</span>    <span class="string">`json:&quot;wqx_example&quot;`</span></span><br><span class="line">Entry        <span class="type">string</span>        <span class="string">`json:&quot;entry&quot;`</span></span><br><span class="line">Type         <span class="type">string</span>        <span class="string">`json:&quot;type&quot;`</span></span><br><span class="line">Related      []<span class="keyword">interface</span>&#123;&#125; <span class="string">`json:&quot;related&quot;`</span></span><br><span class="line">Source       <span class="type">string</span>        <span class="string">`json:&quot;source&quot;`</span></span><br><span class="line">&#125; <span class="string">`json:&quot;dictionary&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// 创建一个 HTTP client, 创建的时候可以指定很多参数, 包括是否启用请求超时的 cookie 等 (这里没有设置是否超时)</span></span><br><span class="line">client := &amp;http.Client&#123;&#125;</span><br><span class="line"><span class="comment">// 初始化结构体成员</span></span><br><span class="line">request := DictRequest&#123;TransType: <span class="string">&quot;en2zh&quot;</span>, Source: <span class="string">&quot;infer&quot;</span>&#125;</span><br><span class="line"><span class="comment">// 序列化字符串</span></span><br><span class="line">buf, err := json.Marshal(request)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 将请求体设置为一个只读流</span></span><br><span class="line"><span class="comment">//var data = strings.NewReader(`&#123;&quot;trans_type&quot;:&quot;en2zh&quot;,&quot;source&quot;:&quot;infer&quot;&#125;`)</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">由于这里是字节数组, 所以不用 string.NewReader</span></span><br><span class="line"><span class="comment">因为我们请求的应该是用一个变量作为一个请求体, 如果是 string 的话就相当于直接写死了</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">使用 bytes.NewReader 来构造 request 的请求体</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> data = bytes.NewReader(buf)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">http.NewRequest 构造一个 HTTP 请求</span></span><br><span class="line"><span class="comment">第一个参数 http 的方法 POST, 第二个参数是 URL, 第三个参数是 body</span></span><br><span class="line"><span class="comment">由于 body 可能很大, 放在内存里会影响程序效率, 所以将 body 设置成一个只读流</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 以下代码没变</span></span><br><span class="line">req, err := http.NewRequest(<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;https://api.interpreter.caiyunai.com/v1/dict&quot;</span>, data)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 设置一堆请求头</span></span><br><span class="line">req.Header.Set(<span class="string">&quot;authority&quot;</span>, <span class="string">&quot;api.interpreter.caiyunai.com&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;accept&quot;</span>, <span class="string">&quot;application/json, text/plain, */*&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;accept-language&quot;</span>, <span class="string">&quot;zh-CN,zh;q=0.9&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;app-name&quot;</span>, <span class="string">&quot;xy&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;content-type&quot;</span>, <span class="string">&quot;application/json;charset=UTF-8&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;device-id&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;origin&quot;</span>, <span class="string">&quot;https://fanyi.caiyunapp.com&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;os-type&quot;</span>, <span class="string">&quot;web&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;os-version&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;referer&quot;</span>, <span class="string">&quot;https://fanyi.caiyunapp.com/&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-ch-ua&quot;</span>, <span class="string">`&quot;Not?A_Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;108&quot;, &quot;Google Chrome&quot;;v=&quot;108&quot;`</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-ch-ua-mobile&quot;</span>, <span class="string">&quot;?0&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-ch-ua-platform&quot;</span>, <span class="string">`&quot;Windows&quot;`</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-fetch-dest&quot;</span>, <span class="string">&quot;empty&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-fetch-mode&quot;</span>, <span class="string">&quot;cors&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-fetch-site&quot;</span>, <span class="string">&quot;cross-site&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;user-agent&quot;</span>, <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;x-authorization&quot;</span>, <span class="string">&quot;token:qgemv4jr1y38jyq6vhvi&quot;</span>)</span><br><span class="line"><span class="comment">// 发起请求并得到 response</span></span><br><span class="line"><span class="comment">// response 有自己的 HTTP 状态码, response header 和 body</span></span><br><span class="line">resp, err := client.Do(req)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// response 的 body 也是一个流, 为了避免资源泄露需要手动添加一个 defer 方法来关闭这个流</span></span><br><span class="line"><span class="comment">// defer 函数会在函数运行之后从下往上执行, 这里只有一个 defer 所有只执行这一个</span></span><br><span class="line"><span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line"><span class="comment">// 使用 ioutil.ReadAll 来读取 response 的 body 流</span></span><br><span class="line">bodyText, err := ioutil.ReadAll(resp.Body)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">相当于环日志编程</span></span><br><span class="line"><span class="comment">得到的 response 不一定使我们想要的那个 response</span></span><br><span class="line"><span class="comment">如果状态码不是 200, 就直接报错并打印出状态码以及报文</span></span><br><span class="line"><span class="comment">这样方便我们在出错后排查问题</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">if</span> resp.StatusCode != <span class="number">200</span> &#123;</span><br><span class="line">log.Fatal(<span class="string">&quot;bad StatusCode:&quot;</span>, resp.StatusCode, <span class="string">&quot;body&quot;</span>, <span class="type">string</span>(bodyText))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 得到整个 body 后用 print 打印出来</span></span><br><span class="line"><span class="comment">// fmt.Printf(&quot;%s\n&quot;, bodyText)</span></span><br><span class="line"><span class="comment">// 定义一个大结构体变量</span></span><br><span class="line"><span class="keyword">var</span> dictResponse DictResponse</span><br><span class="line"><span class="comment">// 将 JSON 的值反序列化到这个新定义的变量中, 注意 &amp; 这样才能写入结构体</span></span><br><span class="line">err = json.Unmarshal(bodyText, &amp;dictResponse)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 使用最详细的方式打印</span></span><br><span class="line"><span class="comment">//fmt.Printf(&quot;%#v\n&quot;, dictResponse)</span></span><br><span class="line"><span class="keyword">var</span> word <span class="type">string</span> <span class="comment">// 定义一个变量 word</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">由于上一段代码中输出的值并不都是我们想要的, 我们只想要音标以及翻译</span></span><br><span class="line"><span class="comment">所以我们使用 dictResponse.Dictionary.Prons.En 来获取英式音标, ictResponse.Dictionary.Prons.EnUs 获取美式音标</span></span><br><span class="line"><span class="comment">然后再通过 range 对 dictResponse.Dictionary.Explanations 字典中的翻译进行循环打印, 输出所有的翻译</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">fmt.Println(word, <span class="string">&quot;UK:&quot;</span>, dictResponse.Dictionary.Prons.En, <span class="string">&quot;US:&quot;</span>, dictResponse.Dictionary.Prons.EnUs)</span><br><span class="line"><span class="keyword">for</span> _, item := <span class="keyword">range</span> dictResponse.Dictionary.Explanations &#123;</span><br><span class="line">fmt.Println(item)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-4-6-优化代码"><a href="#3-4-6-优化代码" class="headerlink" title="3.4.6 优化代码"></a>3.4.6 优化代码</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">&quot;bytes&quot;</span></span><br><span class="line"><span class="string">&quot;encoding/json&quot;</span></span><br><span class="line"><span class="string">&quot;fmt&quot;</span></span><br><span class="line"><span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line"><span class="string">&quot;log&quot;</span></span><br><span class="line"><span class="string">&quot;net/http&quot;</span></span><br><span class="line"><span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 构造一个结构体, 用来解析 JSON</span></span><br><span class="line"><span class="keyword">type</span> DictRequest <span class="keyword">struct</span> &#123;</span><br><span class="line">TransType <span class="type">string</span> <span class="string">`json:&quot;trans_type&quot;`</span></span><br><span class="line">Source    <span class="type">string</span> <span class="string">`json:&quot;source&quot;`</span></span><br><span class="line">UserID    <span class="type">string</span> <span class="string">`json:&quot;user_id&quot;`</span> <span class="comment">// 其实这个字段用不到</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将生成的结构体改名并粘贴到这里</span></span><br><span class="line"><span class="keyword">type</span> DictResponse <span class="keyword">struct</span> &#123;</span><br><span class="line">Rc   <span class="type">int</span> <span class="string">`json:&quot;rc&quot;`</span></span><br><span class="line">Wiki <span class="keyword">struct</span> &#123;</span><br><span class="line">&#125; <span class="string">`json:&quot;wiki&quot;`</span></span><br><span class="line">Dictionary <span class="keyword">struct</span> &#123;</span><br><span class="line">Prons <span class="keyword">struct</span> &#123;</span><br><span class="line">EnUs <span class="type">string</span> <span class="string">`json:&quot;en-us&quot;`</span></span><br><span class="line">En   <span class="type">string</span> <span class="string">`json:&quot;en&quot;`</span></span><br><span class="line">&#125; <span class="string">`json:&quot;prons&quot;`</span></span><br><span class="line">Explanations []<span class="type">string</span>      <span class="string">`json:&quot;explanations&quot;`</span></span><br><span class="line">Synonym      []<span class="type">string</span>      <span class="string">`json:&quot;synonym&quot;`</span></span><br><span class="line">Antonym      []<span class="keyword">interface</span>&#123;&#125; <span class="string">`json:&quot;antonym&quot;`</span></span><br><span class="line">WqxExample   [][]<span class="type">string</span>    <span class="string">`json:&quot;wqx_example&quot;`</span></span><br><span class="line">Entry        <span class="type">string</span>        <span class="string">`json:&quot;entry&quot;`</span></span><br><span class="line">Type         <span class="type">string</span>        <span class="string">`json:&quot;type&quot;`</span></span><br><span class="line">Related      []<span class="keyword">interface</span>&#123;&#125; <span class="string">`json:&quot;related&quot;`</span></span><br><span class="line">Source       <span class="type">string</span>        <span class="string">`json:&quot;source&quot;`</span></span><br><span class="line">&#125; <span class="string">`json:&quot;dictionary&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">query</span><span class="params">(word <span class="type">string</span>)</span></span> &#123;</span><br><span class="line"><span class="comment">// 创建一个 HTTP client, 创建的时候可以指定很多参数, 包括是否启用请求超时的 cookie 等 (这里没有设置是否超时)</span></span><br><span class="line">client := &amp;http.Client&#123;&#125;</span><br><span class="line"><span class="comment">// 初始化结构体成员</span></span><br><span class="line">request := DictRequest&#123;TransType: <span class="string">&quot;en2zh&quot;</span>, Source: <span class="string">&quot;infer&quot;</span>&#125;</span><br><span class="line"><span class="comment">// 序列化字符串</span></span><br><span class="line">buf, err := json.Marshal(request)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 使用 bytes.NewReader 来构造 request 的请求体</span></span><br><span class="line"><span class="keyword">var</span> data = bytes.NewReader(buf)</span><br><span class="line"><span class="comment">// http.NewRequest 构造一个 HTTP 请求</span></span><br><span class="line">req, err := http.NewRequest(<span class="string">&quot;POST&quot;</span>, <span class="string">&quot;https://api.interpreter.caiyunai.com/v1/dict&quot;</span>, data)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 设置一堆请求头</span></span><br><span class="line">req.Header.Set(<span class="string">&quot;authority&quot;</span>, <span class="string">&quot;api.interpreter.caiyunai.com&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;accept&quot;</span>, <span class="string">&quot;application/json, text/plain, */*&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;accept-language&quot;</span>, <span class="string">&quot;zh-CN,zh;q=0.9&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;app-name&quot;</span>, <span class="string">&quot;xy&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;content-type&quot;</span>, <span class="string">&quot;application/json;charset=UTF-8&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;device-id&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;origin&quot;</span>, <span class="string">&quot;https://fanyi.caiyunapp.com&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;os-type&quot;</span>, <span class="string">&quot;web&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;os-version&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;referer&quot;</span>, <span class="string">&quot;https://fanyi.caiyunapp.com/&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-ch-ua&quot;</span>, <span class="string">`&quot;Not?A_Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;108&quot;, &quot;Google Chrome&quot;;v=&quot;108&quot;`</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-ch-ua-mobile&quot;</span>, <span class="string">&quot;?0&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-ch-ua-platform&quot;</span>, <span class="string">`&quot;Windows&quot;`</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-fetch-dest&quot;</span>, <span class="string">&quot;empty&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-fetch-mode&quot;</span>, <span class="string">&quot;cors&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;sec-fetch-site&quot;</span>, <span class="string">&quot;cross-site&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;user-agent&quot;</span>, <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36&quot;</span>)</span><br><span class="line">req.Header.Set(<span class="string">&quot;x-authorization&quot;</span>, <span class="string">&quot;token:qgemv4jr1y38jyq6vhvi&quot;</span>)</span><br><span class="line"><span class="comment">// 发起请求并得到 response</span></span><br><span class="line">resp, err := client.Do(req)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// response 的 body 也是一个流, 为了避免资源泄露需要手动添加一个 defer 方法来关闭这个流</span></span><br><span class="line"><span class="keyword">defer</span> resp.Body.Close()</span><br><span class="line"><span class="comment">// 使用 ioutil.ReadAll 来读取 response 的 body 流</span></span><br><span class="line">bodyText, err := ioutil.ReadAll(resp.Body)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 相当于环日志编程, 方便我们在出错后排查问题</span></span><br><span class="line"><span class="keyword">if</span> resp.StatusCode != <span class="number">200</span> &#123;</span><br><span class="line">log.Fatal(<span class="string">&quot;bad StatusCode:&quot;</span>, resp.StatusCode, <span class="string">&quot;body&quot;</span>, <span class="type">string</span>(bodyText))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 定义一个大结构体变量</span></span><br><span class="line"><span class="keyword">var</span> dictResponse DictResponse</span><br><span class="line"><span class="comment">// 将 JSON 的值反序列化到这个新定义的变量中, 注意 &amp; 这样才能写入结构体</span></span><br><span class="line">err = json.Unmarshal(bodyText, &amp;dictResponse)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 打印出我们想要的部分的结果</span></span><br><span class="line">fmt.Println(word, <span class="string">&quot;UK:&quot;</span>, dictResponse.Dictionary.Prons.En, <span class="string">&quot;US:&quot;</span>, dictResponse.Dictionary.Prons.EnUs)</span><br><span class="line"><span class="comment">// 循环遍历翻译</span></span><br><span class="line"><span class="keyword">for</span> _, item := <span class="keyword">range</span> dictResponse.Dictionary.Explanations &#123;</span><br><span class="line">fmt.Println(item)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// os.Args 判断命令和参数的个数</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(os.Args) != <span class="number">2</span> &#123; <span class="comment">// 如果不是两个就报错, 提醒正确的运行格式</span></span><br><span class="line">fmt.Fprintf(os.Stderr, <span class="string">`usage: simpleDict WORD</span></span><br><span class="line"><span class="string">example: simpleDict hello</span></span><br><span class="line"><span class="string">`</span>)</span><br><span class="line">os.Exit(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line">word := os.Args[<span class="number">1</span>] <span class="comment">// 如果是正确的就抓取第二个, 也就是我们需要翻译的单词</span></span><br><span class="line">query(word)        <span class="comment">// 查询翻译</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">到目前为止是需要命令行输入指令才能运行</span></span><br><span class="line"><span class="comment">后期可以试着优化一下直接读取键盘输入</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230115202928676.png" alt="运行演示"></p><hr>]]></content>
      
      
      <categories>
          
          <category> C/C++/Go </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Golang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C语言复习</title>
      <link href="/2023/01/01/C%E8%AF%AD%E8%A8%80%E5%A4%8D%E4%B9%A0/"/>
      <url>/2023/01/01/C%E8%AF%AD%E8%A8%80%E5%A4%8D%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="C语言复习"><a href="#C语言复习" class="headerlink" title="C语言复习"></a>C语言复习</h1><blockquote><p><a href="https://www.bilibili.com/video/BV1cq4y1U7sg?p=1&amp;vd_source=594d36a0860080a36fe599e0b84e5fb2">https://www.bilibili.com/video/BV1cq4y1U7sg?p=1&amp;vd_source=594d36a0860080a36fe599e0b84e5fb2</a></p></blockquote><blockquote><ol><li>必须实践敲代码 (不是抄写 ! 抄写没有意义)</li></ol><ul><li>理清别人代码的思路</li><li>不看别人的代码, 按照代码的思路, 自己写代码</li><li>写注释 ! 写注释 ! 写注释 !</li></ul><ol start="2"><li><p>必须画图, 理解内存布局</p></li><li><p>要不断调试</p></li><li><p>多写, 多刷题</p></li></ol><ul><li>牛客 PTA 力扣</li></ul></blockquote><h1 id="一、初识C语言"><a href="#一、初识C语言" class="headerlink" title="一、初识C语言"></a>一、初识C语言</h1><h2 id="1-1-第一个C语言程序"><a href="#1-1-第一个C语言程序" class="headerlink" title="1.1 第一个C语言程序"></a>1.1 第一个C语言程序</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//C语言从主函数main开始执行 (必须要有main函数且一个工程中只能有一个main函数)</span></span><br><span class="line"><span class="comment">//printf属于一个库函数</span></span><br><span class="line"><span class="comment">//编译+运行快捷键: ctrl+F5</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span> <span class="comment">//引用头文件stdio.h</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="1-2-C语言数据类型"><a href="#1-2-C语言数据类型" class="headerlink" title="1.2 C语言数据类型"></a>1.2 C语言数据类型</h2><ul><li><code>char</code> 字符数据类型</li><li><code>short</code> 短整型</li><li><code>int</code> 整型</li><li><code>long</code> 长整型</li><li><code>long long</code> 长长整型</li><li><code>float</code> 单精度浮点数</li><li><code>double</code> 双精度浮点数</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//printf(&quot;hello world&quot;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//sizeof--关键字 (操作符 !!不是函数!! ) --计算类型或变量所占空间大小</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="type">char</span>));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="type">short</span>));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="type">long</span>));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="type">long</span> <span class="type">long</span>));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="type">float</span>));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="type">double</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出结果 (单位: 字节)</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">4</span> <span class="comment">//sizeof(long) &gt;= sizeof(int)</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">8</span></span><br></pre></td></tr></table></figure><blockquote><p>计算机中的单位</p><ul><li><code>bit</code> 比特位</li><li><code>byte</code> 字节 1 byte &#x3D; 8 bit</li><li><code>KB</code> 1 KB &#x3D; 1024 byte</li><li><code>MB</code> 1 MB &#x3D; 1024 KB</li><li><code>GB</code> 1 GB &#x3D; 1024 MB</li><li><code>TB</code> 1 TB &#x3D; 1024 GB</li><li><code>PB</code> 1 PB &#x3D; 1024 TB</li></ul></blockquote><hr><h2 id="1-3-常量-amp-变量"><a href="#1-3-常量-amp-变量" class="headerlink" title="1.3 常量&amp;变量"></a>1.3 常量&amp;变量</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//%d - 整型</span></span><br><span class="line"><span class="comment">//%f - float</span></span><br><span class="line"><span class="comment">//%lf - double</span></span><br><span class="line">    <span class="comment">//%s - 字符串</span></span><br><span class="line">    <span class="comment">//%p - 按地址格式打印, 十六进制的打印</span></span><br><span class="line">    <span class="comment">//%u - 无符号10进制整数</span></span><br><span class="line">    <span class="comment">//%x,%X 读入十六进制整数</span></span><br><span class="line"><span class="type">int</span> age = <span class="number">20</span>;</span><br><span class="line"><span class="type">double</span> weight = <span class="number">80</span>;</span><br><span class="line">age = age + <span class="number">1</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, age);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lf\n&quot;</span>, weight);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="局部变量-amp-全局变量"><a href="#局部变量-amp-全局变量" class="headerlink" title="局部变量&amp;全局变量"></a>局部变量&amp;全局变量</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//全局变量 - &#123;&#125;外定义</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">局部变量 - &#123;&#125;内定义</span></span><br><span class="line"><span class="comment">局部变量与全局变量名字冲突时, 局部优先</span></span><br><span class="line"><span class="comment">但是不能使局部变量与全局变量名字相同</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">定义变量的同时必须给变量初始化 (赋值)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, a);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="变量的使用"><a href="#变量的使用" class="headerlink" title="变量的使用"></a>变量的使用</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//scanf 输入函数, 括号中间的分隔符是什么, 输入时候的分隔符就是什么 (本段代码中为空格)</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">sum = a + b;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;sum = %d\n&quot;</span>, sum);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">上面代码在VScode中报错</span></span><br><span class="line"><span class="comment">C4996&#x27;scanf&#x27;: This function or variable may be unsafe. Consider using scanf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See online help for details.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">在整个.c文件第一行加#define _CRT_SECURE_NO_WARNINGS 1即可解决</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _CRT_SECURE_NO_WARNINGS 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">sum = a + b;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;sum = %d\n&quot;</span>, sum);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="变量的作用域和生命周期"><a href="#变量的作用域和生命周期" class="headerlink" title="变量的作用域和生命周期"></a>变量的作用域和生命周期</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 局部变量作用域: 变量所在的局部范围</span></span><br><span class="line"><span class="comment">* 全局变量作用域: 整个工程(但是需要引入)</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* extern int year //该语句用来引入其他文件中的全局变量</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> year = <span class="number">2022</span>; <span class="comment">//变量的命名可以写在函数外, 其他运行代码必须写在函数体外</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;年: %d\n&quot;</span>, year);</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> month = <span class="number">12</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;月: %d\n&quot;</span>, month);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 变量的生命周期: 变量的创建和销毁之间的时间段</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* 局部变量生命周期: 进入局部范围开始, 出局部范围结束</span></span><br><span class="line"><span class="comment">* 全局变量生命周期: 程序的生命周期</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h3><ul><li><p>字面常量</p></li><li><p><code>const</code> 修饰的常变量, 变量被 <code>const</code> 修饰后变量值就不允许被修改</p><blockquote><p>const修饰指针变量的时候：</p><ol><li><code>const</code> 如果放在 <code>*</code> 的左边，修饰的是指针指向的内容，保证指针指向的内容不能通过指针来改</li></ol><p>变。但是指针变量本身的内容可变。</p><ol start="2"><li><code>const</code> 如果放在 <code>*</code> 的右边，修饰的是指针变量本身，保证了指针变量的内容不能修改，但是指</li></ol><p>针指向的内容，可以通过指针改变。</p></blockquote></li><li><p><code>#define</code> 定义的标识符常量</p></li><li><p>枚举常量</p></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> 一万 10000;</span></span><br><span class="line"><span class="comment">//枚举声明语句 枚举变量的所有可能取值</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Ocean</span> &#123;</span></span><br><span class="line">    <span class="comment">//枚举常量的第一个常量可以给其赋初值 PACIFIC = 6, 则此后常量值从6开始</span></span><br><span class="line">PACIFIC, <span class="comment">//注意逗号</span></span><br><span class="line">INDIAN_OCEAN,</span><br><span class="line">ATLANTIC,</span><br><span class="line">ARCTIC_OCEAN <span class="comment">//注意没有逗号</span></span><br><span class="line">&#125;; <span class="comment">//注意分号</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//字面常量</span></span><br><span class="line"><span class="number">12345</span>; <span class="comment">//整型</span></span><br><span class="line"><span class="string">&#x27;a&#x27;</span>; <span class="comment">//字符</span></span><br><span class="line"><span class="string">&quot;abcsde&quot;</span>; <span class="comment">//字符串</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//const修饰的常变量</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> num = <span class="number">123</span>; <span class="comment">//如果要修改num值, 会报错</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#define定义的标识符常量</span></span><br><span class="line"><span class="type">int</span> one_h = 一万;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, one_h);</span><br><span class="line"></span><br><span class="line"><span class="comment">//枚举常量 (可以一一列举的常量)</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Ocean</span> <span class="title">place</span> =</span> ATLANTIC; <span class="comment">//枚举赋值语句</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, PACIFIC);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, INDIAN_OCEAN);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ATLANTIC);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ARCTIC_OCEAN);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出: </p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10000</span></span><br><span class="line"><span class="number">0</span> <span class="comment">//枚举常量是常量, 默认从0开始</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure><hr><h2 id="1-4-字符串"><a href="#1-4-字符串" class="headerlink" title="1.4 字符串"></a>1.4 字符串</h2><ul><li><p>字符串就是一串字符 (用 <code>&quot;&quot;</code> 扩起来的字符) </p><blockquote><p>字符串在结尾的位置隐藏了一个 <code>\0</code> 字符作为字符串的结束标志, </p><p>通过 <code>strlen()</code> 函数字符串长度时不算在里面</p></blockquote></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span> <span class="comment">//使用 strlen() 函数做引入头文件</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">char</span> <span class="built_in">array</span>[] = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="type">char</span> array2[] = &#123; <span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;o&#x27;</span> &#125;;</span><br><span class="line"><span class="comment">//求两个字符数组的长度</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(<span class="built_in">array</span>));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n\n&quot;</span>, <span class="built_in">strlen</span>(array2));</span><br><span class="line"><span class="comment">//打印出两个字符数组</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, <span class="built_in">array</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s\n\n&quot;</span>, array2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改第二个数组</span></span><br><span class="line"><span class="type">char</span> array3[] = &#123;<span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;\0&#x27;</span>&#125;;</span><br><span class="line"><span class="comment">//求修改后两个字符数组的长度</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(<span class="built_in">array</span>));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n\n&quot;</span>, <span class="built_in">strlen</span>(array3));</span><br><span class="line"><span class="comment">//打印出修改后两个字符数组</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, <span class="built_in">array</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s\n\n&quot;</span>, array3);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">65</span> <span class="comment">//随机值</span></span><br><span class="line"></span><br><span class="line">hello</span><br><span class="line">hello烫烫烫烫烫烫烫烫烫烫烫烫烫烫烫烫烫烫烫烫烫烫烫烫烫烫烫虁鯵?</span><br><span class="line"></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"></span><br><span class="line">hello</span><br><span class="line">hello</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221221172200680.png" alt="image-20221221172200680"></p><hr><h2 id="1-5-转义字符"><a href="#1-5-转义字符" class="headerlink" title="1.5 转义字符"></a>1.5 转义字符</h2><table><thead><tr><th><strong>转义字符 释义</strong></th><th></th></tr></thead><tbody><tr><td>?</td><td>在书写连续多个问号时使用，防止他们被解析成三字母词</td></tr><tr><td>\‘</td><td>用于表示字符常量’</td></tr><tr><td>\“</td><td>用于表示一个字符串内部的双引号</td></tr><tr><td>\\</td><td>用于表示一个反斜杠，防止它被解释为一个转义序列符。</td></tr><tr><td>\a</td><td>警告字符，蜂鸣</td></tr><tr><td>\b</td><td>退格符</td></tr><tr><td>\f</td><td>进纸符</td></tr><tr><td>\n</td><td>换行</td></tr><tr><td>\r</td><td>回车</td></tr><tr><td>\t</td><td>水平制表符</td></tr><tr><td>\v</td><td>垂直制表符</td></tr><tr><td>\ddd</td><td><code>ddd</code> 表示1~3个八进制的数字。 如： \130 X</td></tr><tr><td>\xdd</td><td><code>dd</code> 表示2个十六进制数字。 如： \x30 0</td></tr></tbody></table><hr><h2 id="1-6-选择语句"><a href="#1-6-选择语句" class="headerlink" title="1.6 选择语句"></a>1.6 选择语句</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> complete = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;今天的任务完成了吗? ( 1 or 0 ) :&gt; &quot;</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;complete);</span><br><span class="line"><span class="keyword">if</span> (complete == <span class="number">1</span>)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;恭喜你!!!&quot;</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;不要摆啊!!!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="1-7-循环语句"><a href="#1-7-循环语句" class="headerlink" title="1.7 循环语句"></a>1.7 循环语句</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> age = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (age &lt; <span class="number">100</span>) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;You are alive, %d\n&quot;</span>, age);</span><br><span class="line">age++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (age = <span class="number">100</span>)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;You died&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="1-8-函数"><a href="#1-8-函数" class="headerlink" title="1.8 函数"></a>1.8 函数</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//必须把 函数定义 写在 函数使用 之前</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">multiply</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line"><span class="type">int</span> c = <span class="number">0</span>;</span><br><span class="line">c = a * b;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> num1 = <span class="number">12</span>;</span><br><span class="line"><span class="type">int</span> num2 = <span class="number">13</span>;</span><br><span class="line"><span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">sum = multiply(num1, num2);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, sum);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="1-9-数组"><a href="#1-9-数组" class="headerlink" title="1.9 数组"></a>1.9 数组</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> array_int[<span class="number">3</span>] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> &#125;;</span><br><span class="line"><span class="type">char</span> array_char[<span class="number">5</span>] = &#123; <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span> &#125;; <span class="comment">//不完全初始化, 默认赋0</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, array_int[i]);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c &quot;</span>, array_char[j]); <span class="comment">//将未赋值的部分输出为空格</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;end&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">a b c   end</span><br></pre></td></tr></table></figure><hr><h2 id="1-10-操作符"><a href="#1-10-操作符" class="headerlink" title="1.10 操作符"></a>1.10 操作符</h2><blockquote><p>整数的二进制表示</p><ul><li>原码</li><li>反码 – 符号位不变, 其余位置按位取反</li><li>补码 (整数在内存中的存储) – 反码 + 1</li></ul></blockquote><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">整数二进制共 4 * 8 = 32 位 (整型 4 个字节)</span><br><span class="line">最高位表示符号位 0 表示正数, 1 表示负数</span><br><span class="line"></span><br><span class="line">正整数的原码、反码、补码相同（规定）</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">-1:</span><br><span class="line">10000000000000000000000000000001 (原码)</span><br><span class="line">11111111111111111111111111111110 (反码)</span><br><span class="line">11111111111111111111111111111111 (补码)</span><br></pre></td></tr></table></figure><ul><li><p>算数操作符</p><blockquote><p><code>+</code> </p><p><code>-</code> </p><p><code>*</code> </p><p><code>/</code> </p><p><code>%</code></p></blockquote></li><li><p>移位操作符 (移动二进制位)</p><blockquote><p>左移运算符: <code>&lt;&lt;</code> 低位补 <code>0</code></p><p>右移运算符: <code>&gt;&gt;</code></p></blockquote></li><li><p>位操作符</p><blockquote><p>按位与: <code>&amp;</code></p><p>按位或: <code>|</code></p><p>按位异或: <code>^</code></p></blockquote></li><li><p>赋值操作符</p><blockquote><p><code>=</code> </p><p><code>+</code> </p><p><code>=</code> </p><p><code>-=</code> </p><p><code>*=</code> </p><p><code>/=</code> </p><p><code>&amp;=</code> </p><p><code>^=</code> </p><p><code>|=</code>  </p><p><code>&gt;&gt;=</code> </p><p><code>&lt;&lt;=</code> </p></blockquote></li><li><p>单目操作符 (只有一个操作数)</p><table><thead><tr><th align="center">操作符</th><th align="center">作用</th></tr></thead><tbody><tr><td align="center">!</td><td align="center">逻辑反操作</td></tr><tr><td align="center">-</td><td align="center">负值</td></tr><tr><td align="center">+</td><td align="center">正值</td></tr><tr><td align="center">&amp;</td><td align="center">取地址</td></tr><tr><td align="center"><code>sizeof</code></td><td align="center">操作数的类型长度（以字节为单位）</td></tr><tr><td align="center">~</td><td align="center">对一个数的二进制按位取反</td></tr><tr><td align="center">–</td><td align="center">前置、后置–</td></tr><tr><td align="center">++</td><td align="center">前置、后置++</td></tr><tr><td align="center">*</td><td align="center">间接访问操作符(解引用操作符)</td></tr><tr><td align="center">(类型)</td><td align="center">强制类型转换</td></tr></tbody></table></li><li><p>关系操作符</p><blockquote><p><code>&gt;</code></p><p><code>&gt;=</code></p><p><code>&lt;</code></p><p><code>&lt;=</code></p><p><code>!=</code></p><p><code>==</code></p></blockquote></li><li><p>逻辑操作符</p><blockquote><p><code>&amp;&amp;</code></p><p><code>||</code></p></blockquote></li><li><p>条件操作符 (三目运算符)</p><blockquote><p><code>exp1 ? exp2 : exp3</code></p><p>如果 <code>exp1</code> 为 true, 表达式的值为 <code>exp2</code>; 为 false, 表达式的值为 <code>exp3</code></p></blockquote></li><li><p>逗号表达式</p><blockquote><p><code>exp1, exp2, exp3 ... expN</code> </p><p>从左往右运算, 逗号表达式的值为最后一个表达式 <code>expN</code> 的值</p></blockquote></li><li><p>下标引用</p><blockquote><p><code>[]</code></p></blockquote></li><li><p>函数调用</p><blockquote><p><code>()</code></p></blockquote></li><li><p>结构成员</p><blockquote><p><code>.</code></p><p><code>-&gt;</code></p></blockquote></li></ul><hr><h2 id="1-11-常见关键字"><a href="#1-11-常见关键字" class="headerlink" title="1.11 常见关键字"></a>1.11 常见关键字</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">auto  自动创建, 自动销毁, 所有局部变量都是auto</span><br><span class="line">break   case  char  const   continue  default  do   double else  enum   </span><br><span class="line">extern 用来生命外部符号</span><br><span class="line">float  for   goto  if   int   long  </span><br><span class="line">register    寄存器关键字 (大量频繁被使用的数据, 放在寄存器中提高效率)</span><br><span class="line">return   short  </span><br><span class="line">signed有符号的</span><br><span class="line">unsigned   无符号的</span><br><span class="line">sizeof   </span><br><span class="line">static静态的</span><br><span class="line">struct  switch  typedef </span><br><span class="line">union联合体 (共用体)</span><br><span class="line">void空</span><br><span class="line">volatile  while</span><br></pre></td></tr></table></figure><ul><li><code>typedef</code> 类型重命名</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//给基本数据类型起一个别名</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> t_int;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">t_int a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>static</code> 修饰变量与函数</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* static修饰局部变量</span></span><br><span class="line"><span class="comment">*改变了变量的生命周期——本质是改变了变量的存储类型</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* static修饰全局变量</span></span><br><span class="line"><span class="comment">*使被修饰的全局变量只能在自己所在的源文件内部使用</span></span><br><span class="line"><span class="comment">*之所以可以在其他文件中使用，是因为全局变量具有外部链接属性</span></span><br><span class="line"><span class="comment">*被static修饰之后，就变成了内部链接属性，其他源文件无法连接此全局变量</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* static修饰函数</span></span><br><span class="line"><span class="comment">* 使被修饰的函数只能在自己所在的源文件内部使用</span></span><br><span class="line"><span class="comment">*之所以可以在其他文件中使用，是因为函数具有外部链接属性</span></span><br><span class="line"><span class="comment">*被static修饰之后，就变成了内部链接属性，其他源文件无法连接此函数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">test_common</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">i++;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">test_static</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">i++;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">test_common();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n\n&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">test_static();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1111111111</span></span><br><span class="line"></span><br><span class="line"><span class="number">12345678910</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221223153234295.png" alt="内存中的存储类型"></p><hr><h2 id="1-12-define-定义常量和宏"><a href="#1-12-define-定义常量和宏" class="headerlink" title="1.12 define 定义常量和宏"></a>1.12 define 定义常量和宏</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* define 是一个预定义指令</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//define定义标识符常量</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> 一坤年 2.5</span></span><br><span class="line"><span class="comment">//define定义宏</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> Multiply(x, y) ((x)*(y)) <span class="comment">//注意格式, 这几层括号是必要的</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">double</span> sum = Multiply(一坤年, 一坤年);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lf\n&quot;</span>, sum);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%lf\n&quot;</span>, <span class="number">10</span> * sum);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">6.250000</span></span><br><span class="line"><span class="number">62.500000</span></span><br></pre></td></tr></table></figure><hr><h2 id="1-13-指针"><a href="#1-13-指针" class="headerlink" title="1.13 指针"></a>1.13 指针</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">3</span>;</span><br><span class="line"><span class="type">int</span>* indicator_a = &amp;a; <span class="comment">// * 说明indicator_a是指针变量, int说明indicator_a所指向的对象的类型</span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> b = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="type">char</span>* indicator_b = &amp;b;</span><br><span class="line"></span><br><span class="line">*indicator_a = <span class="number">10</span>; <span class="comment">// * 是解引用操作, *indicator_a 就是通过 indicator_a 里的地址找到 a, 对 a 进行操作</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, a);</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span>* p;<span class="comment">//p为一个整形指针变量</span></span><br><span class="line">p = &amp;num; <span class="comment">//指针变量定义的是一个地址</span></span><br><span class="line">    *p = num; <span class="comment">//解引用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>指针变量的大小</p><blockquote><p>指针需要多达空间, 取决于地址存储需要多达空间</p><p>32位机 32 bit – 4 byte</p><p>64位机 64 bit – 8 byte</p></blockquote></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="type">char</span>*));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="type">short</span>*));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="type">int</span>*));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="type">double</span>*));</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">8</span></span><br></pre></td></tr></table></figure><hr><h2 id="1-14-结构体"><a href="#1-14-结构体" class="headerlink" title="1.14 结构体"></a>1.14 结构体</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Garden</span> &#123;</span></span><br><span class="line"><span class="comment">//结构体成员变量</span></span><br><span class="line"><span class="type">char</span> name[<span class="number">20</span>]; <span class="comment">//注意分号</span></span><br><span class="line"><span class="type">int</span> num;</span><br><span class="line"><span class="type">double</span> money;</span><br><span class="line">&#125;; <span class="comment">//注意分号</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//结构体的创建于初始化</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Garden</span> <span class="title">flower</span> =</span> &#123; <span class="string">&quot;violet&quot;</span>, <span class="number">100</span>, <span class="number">33.3</span>&#125;;</span><br><span class="line"><span class="comment">//结构体变量.成员变量</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;一般写法: %s, %d, %lf\n&quot;</span>, flower.name, flower.num, flower.money);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Garden</span>* <span class="title">pf</span> =</span> &amp;flower;</span><br><span class="line">    <span class="comment">//结构体指针.成员变量</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;指针.写法: %s, %d, %lf\n&quot;</span>, (*pf).name, (*pf).num, (*pf).money);</span><br><span class="line"></span><br><span class="line"><span class="comment">//结构体指针-&gt;成员变量 (常)</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;指针-&gt;写法: %s, %d, %lf\n&quot;</span>, pf-&gt;name, pf-&gt;num, pf-&gt;money);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="二、分支和循环"><a href="#二、分支和循环" class="headerlink" title="二、分支和循环"></a>二、分支和循环</h1><blockquote><p>分支语句</p></blockquote><ul><li><code>if..else</code></li><li><code>switch</code></li></ul><blockquote><p>循环语句</p></blockquote><ul><li><code>while</code></li><li><code>for</code></li><li><code>do...while</code></li></ul><blockquote><p>转向语句</p></blockquote><ul><li><code>goto</code> 语句</li><li><code>break</code> 语句</li><li><code>continue</code> 语句</li><li><code>return</code> 语句</li></ul><h2 id="2-1-分支语句-选择结构"><a href="#2-1-分支语句-选择结构" class="headerlink" title="2.1 分支语句 (选择结构)"></a>2.1 分支语句 (选择结构)</h2><ul><li><code>if...else</code></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//判断一个数是否为奇数</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;请输入一个数: &quot;</span>);</span><br><span class="line"><span class="type">int</span> num = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;num);</span><br><span class="line"><span class="keyword">if</span> (num % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n这个数不是奇数&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n这个数是奇数&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出 1-100 之间的奇数</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; <span class="number">101</span>; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (i % <span class="number">2</span> != <span class="number">0</span>) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>switch</code></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> day = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;day);</span><br><span class="line"><span class="comment">//switch中加入判断值</span></span><br><span class="line"><span class="keyword">switch</span> (day) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>: <span class="comment">//case后面只能加 整数常量表达式, 注意冒号</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;今天是星期1&quot;</span>); <span class="comment">//注意分号</span></span><br><span class="line"><span class="keyword">break</span>; <span class="comment">//不加 break 会全部执行一遍, 一定要加, 这是好习惯!!!</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;今天是星期2&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;今天是星期3&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;今天是星期4&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;今天是星期5&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;今天是星期6&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;今天是星期日&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>: <span class="comment">//都不匹配直接进行 default, 必须加, 这是好习惯!!!</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;没有这个星期哦&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输入1-5，输出的是“weekday”;</span></span><br><span class="line"><span class="comment">//输入6 - 7，输出“weekend”</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> day = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;day);</span><br><span class="line"><span class="comment">//switch中加入判断值</span></span><br><span class="line"><span class="keyword">switch</span> (day) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>: <span class="comment">//case后面只能加 整数常量表达式, 注意冒号</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;今天是weekday&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line"><span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;今天是weekend&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>: <span class="comment">//都不匹配直接进行 default, 必须加, 这是好习惯!!!</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;没有这个星期哦&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="2-2-循环语句"><a href="#2-2-循环语句" class="headerlink" title="2.2 循环语句"></a>2.2 循环语句</h2><ul><li><code>while</code></li></ul><p><code>getchar</code> 详见<code>CSDN</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* getchar() - 字符输入函数，没有参数，从输入缓冲区里面读取一个字符 - 「 一次只能读取一个字符 」</span></span><br><span class="line"><span class="comment">* getchar() 返回值类型为 int, 需引用头文件 &lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* EOF（-1） - End Of File 文件结束标志 - 键盘上用 ctrl + z 实现</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> input = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> ((input = getchar()) != EOF) &#123;</span><br><span class="line"><span class="built_in">putchar</span>(input);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">12</span></span><br><span class="line"><span class="number">12</span></span><br><span class="line">fsdf</span><br><span class="line">fsdf</span><br><span class="line">fadsfa dfsdfsd</span><br><span class="line">fadsfa dfsdfsd</span><br><span class="line">fdsfa  dfsdfaf\n</span><br><span class="line">fdsfa  dfsdfaf\n</span><br><span class="line">dfdsaafdsf xbnnc  gnbnn\n\n\n\n</span><br><span class="line">dfdsaafdsf xbnnc  gnbnn\n\n\n\n</span><br><span class="line">^Z <span class="comment">//键入 Ctrl + z 停止</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//只打印数字字符，跳过其他字符</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> num = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line"><span class="keyword">while</span> ((num = getchar()) != EOF) &#123;</span><br><span class="line"><span class="keyword">if</span> (num &lt; <span class="string">&#x27;0&#x27;</span> || num &gt; <span class="string">&#x27;9&#x27;</span>) &#123;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">putchar</span>(num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">f</span><br><span class="line">fsdf</span><br><span class="line"><span class="number">45646</span></span><br><span class="line"><span class="number">4564643</span></span><br><span class="line"><span class="number">43</span>gfdg</span><br><span class="line">g</span><br><span class="line"><span class="number">23</span></span><br><span class="line"><span class="number">23</span></span><br></pre></td></tr></table></figure><ul><li><code>for</code></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* for (初始化部分; 条件判断部分; 调整部分)</span></span><br><span class="line"><span class="comment">* 如果省略条件判断部分则会产生死循环</span></span><br><span class="line"><span class="comment">* 可以使用多个变量来控制循环</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* 建议:</span></span><br><span class="line"><span class="comment">*1. 不可在for 循环体内修改循环变量，防止 for 循环失去控制。</span></span><br><span class="line"><span class="comment">*2. 建议for语句的循环控制变量的取值采用“前闭后开区间”写法。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> j = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//省略初始化部分</span></span><br><span class="line"><span class="keyword">for</span> (; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">count++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, count); <span class="comment">//count = 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//死循环</span></span><br><span class="line"><span class="keyword">for</span> (;;) &#123;</span><br><span class="line">count++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, count);</span><br><span class="line"></span><br><span class="line"><span class="comment">//for 循环嵌套</span></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>, count = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123; <span class="comment">//前开后闭式写法</span></span><br><span class="line"><span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">10</span>; j++) &#123;</span><br><span class="line">count++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, count); <span class="comment">//count = 100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//两个变量控制循环</span></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>, j = <span class="number">0</span>, count = <span class="number">0</span>; i &lt; <span class="number">2</span> &amp;&amp; j &lt; <span class="number">5</span>; i++, j++) &#123;</span><br><span class="line">count++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, count); <span class="comment">//count = 2</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//k = 0, 判断为 FALSE, 循环 0 次</span></span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> k = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(i = <span class="number">0</span>,k = <span class="number">0</span>; k = <span class="number">0</span>; i++, k++) &#123;</span><br><span class="line">        k++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>do...while</code> 至少执行一次, 不经常使用</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">****</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## <span class="number">2.3</span> 练习</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 计算 n 的阶乘</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```c</span><br><span class="line"><span class="comment">//计算n的阶乘</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> n = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line"><span class="type">int</span> sum = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line">sum = sum * n;</span><br><span class="line">n--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, sum);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="计算-1-2-3-……-10"><a href="#计算-1-2-3-……-10" class="headerlink" title="计算 1!+2!+3!+……+10!"></a>计算 <code>1!+2!+3!+……+10!</code></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//计算 1!+2!+3!+……+10!</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> n = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> sum_p = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (n &gt; <span class="number">0</span>) &#123;</span><br><span class="line"><span class="type">int</span> sum_m = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = n; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">sum_m = sum_m * i;</span><br><span class="line">&#125;</span><br><span class="line">sum_p = sum_m + sum_p;</span><br><span class="line">n--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, sum_p);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="在一个有序数组中查找具体的某个数字n-二分查找"><a href="#在一个有序数组中查找具体的某个数字n-二分查找" class="headerlink" title="在一个有序数组中查找具体的某个数字n (二分查找)"></a>在一个有序数组中查找具体的某个数字n (二分查找)</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在一个有序数组中查找具体的某个数字n (二分查找)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> arr[] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span> &#125;;</span><br><span class="line"><span class="type">int</span> left = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> right = <span class="keyword">sizeof</span>(arr)/<span class="keyword">sizeof</span>(arr[<span class="number">0</span>]) - <span class="number">1</span>; <span class="comment">//数组元素个数</span></span><br><span class="line"><span class="type">int</span> key = <span class="number">9</span>;</span><br><span class="line"><span class="type">int</span> mid = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//二分查找关键代码段</span></span><br><span class="line"><span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">mid = (left + right) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span> (arr[mid] &gt; key) &#123;</span><br><span class="line">right = mid - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (arr[mid] &lt; key) &#123;</span><br><span class="line">left = mid + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> (left &lt;= right) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;yes&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;no&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="编写代码，演示多个字符从两端移动，向中间汇聚"><a href="#编写代码，演示多个字符从两端移动，向中间汇聚" class="headerlink" title="编写代码，演示多个字符从两端移动，向中间汇聚"></a>编写代码，演示多个字符从两端移动，向中间汇聚</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//编写代码，演示多个字符从两端移动，向中间汇聚</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">char</span> arr[] = <span class="string">&quot;This is a string , I will full it with &#x27;$&#x27;.&quot;</span>;</span><br><span class="line"><span class="type">int</span> left = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> right = <span class="built_in">strlen</span>(arr) - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//关键代码段</span></span><br><span class="line"><span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">arr[left] = <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line">arr[right] = <span class="string">&#x27;$&#x27;</span>;</span><br><span class="line">left++;</span><br><span class="line">right--;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, arr);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="编写代码实现，模拟用户登录情景，并且只能登录三次。（只允许输入三次密码，如果密码正确则提示登录成，如果三次均输入错误，则退出程序"><a href="#编写代码实现，模拟用户登录情景，并且只能登录三次。（只允许输入三次密码，如果密码正确则提示登录成，如果三次均输入错误，则退出程序" class="headerlink" title="编写代码实现，模拟用户登录情景，并且只能登录三次。（只允许输入三次密码，如果密码正确则提示登录成，如果三次均输入错误，则退出程序)"></a>编写代码实现，模拟用户登录情景，并且只能登录三次。（只允许输入三次密码，如果密码正确则提示登录成，如果三次均输入错误，则退出程序)</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//编写代码实现，模拟用户登录情景，并且只能登录三次。（只允许输入三次密码，如果密码正确则提示登录成，如果三次均输入错误，则退出程序)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> password = <span class="number">123456</span>;</span><br><span class="line"><span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line"><span class="type">int</span> input = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;请输入密码: &quot;</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;input);</span><br><span class="line"><span class="keyword">if</span> (input == password) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n登陆成功&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">count++;</span><br><span class="line"><span class="keyword">if</span> (count == <span class="number">3</span>) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n登陆失败&quot;</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h1 id="三、函数"><a href="#三、函数" class="headerlink" title="三、函数"></a>三、函数</h1><h2 id="3-1-函数分类"><a href="#3-1-函数分类" class="headerlink" title="3.1 函数分类"></a>3.1 函数分类</h2><h3 id="库函数"><a href="#库函数" class="headerlink" title="库函数"></a>库函数</h3><p><a href="www.cplusplus.com">库函数网站</a></p><ul><li>IO函数</li><li>字符串操作函数</li><li>字符操作函数</li><li>内存操作函数</li><li>时间&#x2F;日期函数</li><li>数学函数</li><li>其他库函数</li></ul><h3 id="自定义函数-形参-amp-实参-传值-amp-传址"><a href="#自定义函数-形参-amp-实参-传值-amp-传址" class="headerlink" title="自定义函数 (形参&amp;实参, 传值&amp;传址)"></a>自定义函数 (形参&amp;实参, 传值&amp;传址)</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//传值调用 实现成函数，但是不能完成任务, 因为没有返回值, 没意义</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Swap1</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123; <span class="comment">//函数定义, 形参</span></span><br><span class="line"><span class="comment">//形式参数当函数调用完成之后就自动销毁了。因此形式参数只在函数中有效。</span></span><br><span class="line"><span class="comment">//形参实例化之后其实相当于实参的一份临时拷贝, 改变形参不能改变实参</span></span><br><span class="line"> <span class="type">int</span> tmp = <span class="number">0</span>;</span><br><span class="line"> tmp = x;</span><br><span class="line"> x = y;</span><br><span class="line"> y = tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//传址调用 正确的版本</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Swap2</span><span class="params">(<span class="type">int</span> *px, <span class="type">int</span> *py)</span> &#123; <span class="comment">//函数定义, 形参</span></span><br><span class="line"> <span class="type">int</span> tmp = <span class="number">0</span>;</span><br><span class="line"> tmp = *px;</span><br><span class="line"> *px = *py;</span><br><span class="line"> *py = tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"> <span class="type">int</span> num1 = <span class="number">1</span>;</span><br><span class="line"> <span class="type">int</span> num2 = <span class="number">2</span>;</span><br><span class="line">    </span><br><span class="line"> <span class="comment">//传值调用</span></span><br><span class="line"> Swap1(num1, num2); <span class="comment">//函数调用, 实参</span></span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;Swap1::num1 = %d num2 = %d\n&quot;</span>, num1, num2);</span><br><span class="line">    </span><br><span class="line"> <span class="comment">//传址调用</span></span><br><span class="line"> Swap2(&amp;num1, &amp;num2); <span class="comment">//函数调用, 实参</span></span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;Swap2::num1 = %d num2 = %d\n&quot;</span>, num1, num2);</span><br><span class="line">    </span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="3-2-函数练习"><a href="#3-2-函数练习" class="headerlink" title="3.2 函数练习"></a>3.2 函数练习</h2><h3 id="判断一个数是不是素数"><a href="#判断一个数是不是素数" class="headerlink" title="判断一个数是不是素数"></a>判断一个数是不是素数</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//判断一个数是不是素数</span></span><br><span class="line"><span class="comment">//如果对正整数n，如果用2到sqrt(n)之间的所有整数去除，均无法整除，则n为质数。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//判断一个数是不是素数</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;math.h&gt;</span> <span class="comment">//sqrt()函数所在头文件</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">PrimeNumber</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line"><span class="type">int</span> whether = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (n &gt; <span class="number">2</span>) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt; <span class="built_in">sqrt</span>(n); i++) &#123; <span class="comment">//sqrt(n)表示n的算术平方根</span></span><br><span class="line"><span class="keyword">if</span> (n % i == <span class="number">0</span>) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n这个数不是素数&quot;</span>);</span><br><span class="line">whether = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n这个数不是素数&quot;</span>);</span><br><span class="line">whether = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (whether == <span class="number">0</span>) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n这个数是素数&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> n = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">PrimeNumber(n);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="判断一年是不是闰年"><a href="#判断一年是不是闰年" class="headerlink" title="判断一年是不是闰年"></a>判断一年是不是闰年</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//判断一年是不是闰年</span></span><br><span class="line"><span class="comment">/* 两种情况</span></span><br><span class="line"><span class="comment">* 1. 能被 4 整除不能被 100 整除 (普通闰年)</span></span><br><span class="line"><span class="comment">* 2. 能被 400 整除 (世纪闰年)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//判断一年是不是闰年</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">LeapYear</span><span class="params">(<span class="type">int</span> year)</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (year % <span class="number">4</span> == <span class="number">0</span> &amp;&amp; year % <span class="number">100</span> != <span class="number">0</span>) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n这一年是闰年&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (year % <span class="number">400</span> == <span class="number">0</span>) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n这一年是闰年&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n这一年不是闰年&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> year = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;year);</span><br><span class="line">LeapYear(year);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="实现一个整形有序数组的二分查找"><a href="#实现一个整形有序数组的二分查找" class="headerlink" title="实现一个整形有序数组的二分查找"></a>实现一个整形有序数组的二分查找</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//实现一个整形有序数组的二分查找</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Search</span><span class="params">(<span class="type">int</span>* arr, <span class="type">int</span> key, <span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line"><span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line"><span class="type">int</span> mid = (right + left) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span> (arr[mid] &gt; key) &#123;</span><br><span class="line">right = mid - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (arr[mid] &lt; key) &#123;</span><br><span class="line">left = mid + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (left &lt;= right) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;查找成功&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;查找失败&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> arr[] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span> &#125;;</span><br><span class="line"><span class="type">int</span> key = <span class="number">9</span>;</span><br><span class="line"><span class="type">int</span> left = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> right = <span class="keyword">sizeof</span>(arr)/<span class="keyword">sizeof</span>(arr[<span class="number">0</span>]) - <span class="number">1</span>;</span><br><span class="line">Search(arr, key, left, right);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="写一个函数，每调用一次这个函数，就会将-num-的值增加1"><a href="#写一个函数，每调用一次这个函数，就会将-num-的值增加1" class="headerlink" title="写一个函数，每调用一次这个函数，就会将  num  的值增加1"></a>写一个函数，每调用一次这个函数，就会将  <code>num</code>  的值增加1</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">Count</span><span class="params">()</span> &#123;</span><br><span class="line">    count++;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="3-3-函数的嵌套调用-amp-链式访问"><a href="#3-3-函数的嵌套调用-amp-链式访问" class="headerlink" title="3.3 函数的嵌套调用&amp;链式访问"></a>3.3 函数的嵌套调用&amp;链式访问</h2><h3 id="嵌套调用"><a href="#嵌套调用" class="headerlink" title="嵌套调用"></a>嵌套调用</h3><blockquote><p>函数之中调用另一个函数</p></blockquote><h3 id="链式访问"><a href="#链式访问" class="headerlink" title="链式访问"></a>链式访问</h3><blockquote><p>把一个函数的返回值作为另外一个函数的参数</p></blockquote><hr><h2 id="3-4-函数的声明-amp-定义"><a href="#3-4-函数的声明-amp-定义" class="headerlink" title="3.4 函数的声明&amp;定义"></a>3.4 函数的声明&amp;定义</h2><ul><li><p>函数声明</p><blockquote><ol><li><p>告诉编译器有一个函数叫什么，参数是什么，返回类型是什么。但是具体是不是存在，函数声明决定不了。</p></li><li><p>函数的声明一般出现在函数的使用之前。要满足<strong>先声明后使用</strong>。</p></li><li><p>函数的声明一般要放在头文件中的, 其他文件引用时用 <code>include</code> 引用</p></li></ol></blockquote></li><li><p>函数定义</p><blockquote><p>函数的定义是指函数的具体实现，交待函数的功能实现</p></blockquote></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#pargma comment(lib, <span class="string">&quot;add.lib&quot;</span>) <span class="comment">//导入静态库(目前不知道用在哪, 详情请CSDN)</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;add.h&quot;</span> <span class="comment">//引用</span></span></span><br><span class="line"><span class="comment">//函数定义</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">Add</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> b = <span class="number">2</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//函数声明, 以下两种皆可</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">Add</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span>; <span class="comment">//先声明后使用, 如果函数定义在main()函数后面, 必须声明, 不然用不了</span></span><br><span class="line">    <span class="comment">//int Add(int , int );</span></span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> c = Add(a, b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, c);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="3-5-函数递归"><a href="#3-5-函数递归" class="headerlink" title="3.5 函数递归"></a>3.5 函数递归</h2><blockquote><p>程序调用自身的编程技巧称为递归（ recursion）。</p><p>递归做为一种算法在程序设计语言中广泛应用。 </p><p>一个过程或函数在其定义或说明中有直接或间接调用自身的一种方法，</p><p>它通常把一个大型复杂的问题层层转化为一个与原问题相似的规模较小的问题来求解，</p><p>递归策略</p><p>只需少量的程序就可描述出解题过程所需要的多次重复计算，大大地减少了程序的代码量。</p><p><strong>递归的主要思考方式在于：把大事化小</strong></p></blockquote><ul><li><p>递归的两个必要条件</p><blockquote><p>存在限制条件，当满足这个限制条件的时候，递归便不再继续。</p><p>每次递归调用之后越来越接近这个限制条件</p></blockquote></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接受一个整型值（无符号），按照顺序打印它的每一位</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//无限递归容易 栈溢出</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">print</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line"> <span class="keyword">if</span>(n&gt;<span class="number">9</span>) &#123;</span><br><span class="line">print(n/<span class="number">10</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, n%<span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"> <span class="type">int</span> num = <span class="number">1234</span>;</span><br><span class="line"> print(num);</span><br><span class="line">    </span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//编写函数不允许创建临时变量，求字符串的长度</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#incude <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">Strlen</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* str)</span> &#123;</span><br><span class="line"> <span class="keyword">if</span>(*str == <span class="string">&#x27;\0&#x27;</span>)</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>+Strlen(str+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"> <span class="type">char</span> *p = <span class="string">&quot;abcdef&quot;</span>;</span><br><span class="line"> <span class="type">int</span> len = Strlen(p);</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, len);</span><br><span class="line">    </span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//求n的阶乘。（不考虑溢出）</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">factorial</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line"> <span class="keyword">if</span>(n &lt;= <span class="number">1</span>)</span><br><span class="line"> <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line"> <span class="keyword">return</span> n * factorial(n<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//求第n个斐波那契数。（不考虑溢出）</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">fib</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line"> <span class="keyword">if</span> (n &lt;= <span class="number">2</span>)         </span><br><span class="line"> <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">return</span> fib(n - <span class="number">1</span>) + fib(n - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>递归的改进</p><blockquote><ol><li><p>将递归改写成非递归。</p></li><li><p>使用 <code>static</code> 对象替代  <code>nonstatic </code> 局部对象。</p><p>在递归函数设计中，可以使用 <code>static</code> 对象替代 <code>nonstatic</code> 局部对象（即栈对象），</p><p>这不仅可以减少每次递归调用和返回时产生和释放 <code>nonstatic</code> 对象的开销，</p><p>而且 static 对象还可以保存递归调用的中间状态，并且可为各个调用层所访问。</p></li></ol></blockquote></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//求n的阶乘 (非递归)</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">factorial</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line"><span class="type">int</span> result = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (n &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    result *= n ;</span><br><span class="line">        n -= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//求第n个斐波那契数 (非递归)</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">fib</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span> result;</span><br><span class="line">    <span class="type">int</span> pre_result;</span><br><span class="line">    <span class="type">int</span> next_older_result;</span><br><span class="line">    result = pre_result = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (n &gt; <span class="number">2</span>) &#123;</span><br><span class="line">    n -= <span class="number">1</span>;</span><br><span class="line">        next_older_result = pre_result;</span><br><span class="line">        pre_result = result;</span><br><span class="line">        result = pre_result + next_older_result;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><p>许多问题是以递归的形式进行解释的，这只是因为它比非递归的形式更为清晰。</p></li><li><p>但是这些问题的迭代实现往往比递归实现效率更高，虽然代码的可读性稍微差些。</p></li><li><p>当一个问题相当复杂，难以用迭代实现时，此时递归实现的简洁性便可以补偿它所带来的运行时开销。</p></li></ol><h3 id="经典题目"><a href="#经典题目" class="headerlink" title="经典题目"></a>经典题目</h3><ul><li><p>汉诺塔问题</p></li><li><p>青蛙跳台阶问题</p></li></ul><hr><h1 id="四、数组"><a href="#四、数组" class="headerlink" title="四、数组"></a>四、数组</h1><h2 id="4-1-一维数组"><a href="#4-1-一维数组" class="headerlink" title="4.1 一维数组"></a>4.1 一维数组</h2><ul><li>一维数组在内存中是连续存放的</li><li>随着下标增长, 地址由低到高变化</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一维数组</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> n = <span class="number">5</span>;</span><br><span class="line"><span class="comment">//int arr[n];    不可以这样定义, 必须为常量, n是变量</span></span><br><span class="line"><span class="type">int</span> arr[<span class="number">3</span>] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> &#125;; <span class="comment">//完全初始化</span></span><br><span class="line"><span class="type">int</span> arr_three[<span class="number">3</span>] = &#123; <span class="number">1</span>, <span class="number">2</span> &#125;; <span class="comment">//不完全初始化</span></span><br><span class="line"><span class="type">int</span> <span class="type">arr_t</span>[] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> arr1[<span class="number">4</span>] = &#123; <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;u&#x27;</span>, <span class="string">&#x27;r&#x27;</span> &#125;;</span><br><span class="line"><span class="type">char</span> arr2[] = &#123; <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;u&#x27;</span>, <span class="string">&#x27;r&#x27;</span> &#125;; <span class="comment">// 4 个字符 f o u r</span></span><br><span class="line"><span class="type">char</span> arr3[] = <span class="string">&quot;four&quot;</span>; <span class="comment">// 5 个字符 f o u r \0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//sizeof[arr]表示整个数组大小, 单位字节</span></span><br><span class="line"><span class="comment">//sizeof(arr[0])表示数组第一个数大小, 单位字节</span></span><br><span class="line"><span class="type">int</span> sz = <span class="keyword">sizeof</span>(arr) / <span class="keyword">sizeof</span>(arr[<span class="number">0</span>]); </span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221225202554077.png" alt="一维数组的内存存储"></p><hr><h2 id="4-2-二维数组"><a href="#4-2-二维数组" class="headerlink" title="4.2 二维数组"></a>4.2 二维数组</h2><ul><li>二维数组在内存中也是连续存储的</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//二维数组 本质是一个矩阵</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//数组初始化</span></span><br><span class="line"><span class="type">int</span> arr1[<span class="number">3</span>][<span class="number">4</span>] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span> &#125;;</span><br><span class="line"><span class="type">int</span> arr2[<span class="number">3</span>][<span class="number">4</span>] = &#123; &#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">4</span>,<span class="number">5</span>&#125; &#125;;</span><br><span class="line"><span class="type">int</span> arr3[][<span class="number">4</span>] = &#123; &#123;<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">4</span>,<span class="number">5</span>&#125; &#125;;<span class="comment">//二维数组如果有初始化，行可以省略，列不能省略</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221225202515194.png" alt="二维数组的内存存储"></p><hr><h2 id="4-3-数组越界"><a href="#4-3-数组越界" class="headerlink" title="4.3 数组越界"></a>4.3 数组越界</h2><blockquote><p>数组的下标是有范围限制的。</p><p>数组的下规定是从0开始的，如果数组有n个元素，最后一个元素的下标就是n-1。</p><p>所以数组的下标如果小于0，或者大于n-1，就是数组越界访问了，超出了数组合法空间的访问。</p></blockquote><p>数组名是数组首元素地址: </p><ol><li><code>sizeof(数组名)</code> - 数组名表示整个数组, 计算的是整个儿数组大小, 单位: 字节</li><li><code>&amp;数组名</code> - 数组名表示整个数组, 取出的是整个数组的地址</li></ol><hr><h2 id="4-4-数组作为函数参数-冒泡排序"><a href="#4-4-数组作为函数参数-冒泡排序" class="headerlink" title="4.4 数组作为函数参数 (冒泡排序)"></a>4.4 数组作为函数参数 (冒泡排序)</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//冒泡排序</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">bubble_sort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> sz)</span> &#123;<span class="comment">//参数接收数组元素个数</span></span><br><span class="line"> <span class="comment">//代码同上面函数</span></span><br><span class="line">    <span class="type">int</span> sz = <span class="keyword">sizeof</span>(arr)/<span class="keyword">sizeof</span>(arr[<span class="number">0</span>]);<span class="comment">//这样对吗？</span></span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"> <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;sz<span class="number">-1</span>; i++)</span><br><span class="line">   &#123;</span><br><span class="line">        <span class="type">int</span> j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>; j&lt;sz-i<span class="number">-1</span>; j++)</span><br><span class="line">       &#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[j] &gt; arr[j+<span class="number">1</span>])</span><br><span class="line">           &#123;</span><br><span class="line">                <span class="type">int</span> tmp = arr[j];</span><br><span class="line">                arr[j] = arr[j+<span class="number">1</span>];</span><br><span class="line">                arr[j+<span class="number">1</span>] = tmp;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> arr[] = &#123; <span class="number">3</span>, <span class="number">1</span>, <span class="number">7</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span> &#125;;</span><br><span class="line">    <span class="type">int</span> sz = <span class="keyword">sizeof</span>(arr) / <span class="keyword">sizeof</span>(arr[<span class="number">0</span>]);</span><br><span class="line">    bubble_sort(arr, sz); <span class="comment">//是否可以正常排序？</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sz; i++) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, arr[i]);</span><br><span class="line">   &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="4-5-三子棋"><a href="#4-5-三子棋" class="headerlink" title="4.5 三子棋"></a>4.5 三子棋</h2><ul><li><code>logic.c</code> 测试游戏的逻辑</li><li><code>game.h</code> 关于游戏函数的声明, 符号声明, 包含的头文件</li><li><code>game.c</code> 游戏相关函数实现</li></ul><hr><h2 id="4-6-扫雷"><a href="#4-6-扫雷" class="headerlink" title="4.6 扫雷"></a>4.6 扫雷</h2><ul><li><code>logic.c</code> 测试游戏的逻辑</li><li><code>game.h</code> 关于游戏函数的声明, 符号声明, 包含的头文件</li><li><code>game.c</code> 游戏相关函数实现</li></ul><hr><h1 id="五、操作符"><a href="#五、操作符" class="headerlink" title="五、操作符"></a>五、操作符</h1><h2 id="5-1-操作符分类"><a href="#5-1-操作符分类" class="headerlink" title="5.1 操作符分类"></a>5.1 操作符分类</h2><blockquote><p>算术操作符</p><p>移位操作符</p><p>位操作符</p><p>赋值操作符</p><p>单目操作符</p><p>关系操作符</p><p>逻辑操作符</p><p>条件操作符</p><p>逗号表达式</p><p>下标引用、函数调用和结构成员</p></blockquote><hr><h2 id="5-2-算数操作符"><a href="#5-2-算数操作符" class="headerlink" title="5.2 算数操作符"></a>5.2 算数操作符</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+    -   *   /   % </span><br></pre></td></tr></table></figure><ol><li>除了 <code>%</code> 操作符之外，其他的几个操作符可以作用于整数和浮点数。</li><li>对于 <code>/</code> 操作符如果两个操作数都为整数，执行整数除法。而只要有浮点数执行的就是浮点数除法。</li><li><code>%</code> 操作符的两个操作数必须为整数。返回的是整除之后的余数。</li></ol><hr><h2 id="5-3-移位操作符"><a href="#5-3-移位操作符" class="headerlink" title="5.3 移位操作符"></a>5.3 移位操作符</h2><blockquote><p>对于移位运算符，不要移动负数位，这个是标准未定义的  <code>num&gt;&gt;-1; //error</code></p><p>内存中存放的是二进制的补码 —–即操作的是补码</p></blockquote><ul><li><p><code>&lt;&lt;</code> 左移操作符</p><blockquote><p>左边抛弃, 右边补 0</p></blockquote></li></ul><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221225213719432.png" alt="左移操作符"></p><ul><li><p><code>&gt;&gt;</code> 右移操作符 (通常算数右移)</p><blockquote><ol><li><p>逻辑移位</p><p>左边用0填充，右边丢弃</p></li><li><p>算术移位</p><p>左边用原该值的符号位填充，右边丢弃</p></li></ol></blockquote></li></ul><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221226081055351.png" alt="右移操作符"></p><hr><h2 id="5-4-位操作符"><a href="#5-4-位操作符" class="headerlink" title="5.4 位操作符"></a>5.4 位操作符</h2><blockquote><p><code>&amp;</code>  &#x2F;&#x2F;按位与</p><p>​两个数位值均为 <code>1</code> , 得数位值为 <code>1</code> , 其余均为 <code>0</code></p><p><code>|</code>  &#x2F;&#x2F;按位或</p><p>​两个数位值均为 <code>0</code> , 得数位值为 <code>0</code> , 其余均为 <code>1</code></p><p><code>^</code>  &#x2F;&#x2F;按位异或</p><p>​两个数位值相同为 <code>0</code> , 相异必须是整数。</p><p>注：他们的操作数必须是整数</p><p>注：他们的操作数必须是整数。</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//交换两个整型变量, 不使用第三个变量</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;a = %d, b = %d&quot;</span>, a, b);</span><br><span class="line">a^ a; <span class="comment">//两个相同的数 异或, 值为 0</span></span><br><span class="line">a = a ^ b; </span><br><span class="line">b = a ^ b; <span class="comment">//相当于 a ^ b ^ b, 两个 b 异或值为 0, 剩下 a</span></span><br><span class="line">a = a ^ b; <span class="comment">//相当于 a ^ b ^ a, 两个 a 异或值为 0, 剩下 b</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;a = %d, b = %d&quot;</span>, a, b);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//求一个整数存储在内存中的二进制中1的个数</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> num = <span class="number">-1</span>;</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> count = <span class="number">0</span>; <span class="comment">//计数</span></span><br><span class="line"><span class="keyword">while</span> (num) &#123; <span class="comment">//num 为 0 时跳出循环, 不用循环32次</span></span><br><span class="line">count++;</span><br><span class="line">num = num &amp; (num - <span class="number">1</span>); <span class="comment">//每次减一并按位与, 可以找到到底有多少个 1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;二进制中1的个数 = %d\n&quot;</span>, count);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="5-5-赋值操作符"><a href="#5-5-赋值操作符" class="headerlink" title="5.5 赋值操作符"></a>5.5 赋值操作符</h2><ul><li><p>复合赋值符</p><blockquote><p>+&#x3D;</p><p>-&#x3D;</p><p>*&#x3D;</p><p>&#x2F;&#x3D;</p><p>%&#x3D;</p><p>&gt;&gt;&#x3D;</p><p>&lt;&lt;&#x3D;</p><p>&amp;&#x3D;</p><p>|&#x3D;</p><p>^&#x3D;</p></blockquote></li></ul><hr><h2 id="5-6-单目操作符"><a href="#5-6-单目操作符" class="headerlink" title="5.6 单目操作符"></a>5.6 单目操作符</h2><table><thead><tr><th align="center">操作符</th><th align="center">作用</th></tr></thead><tbody><tr><td align="center">!</td><td align="center">逻辑反操作</td></tr><tr><td align="center">-</td><td align="center">负值</td></tr><tr><td align="center">+</td><td align="center">正值</td></tr><tr><td align="center">&amp;</td><td align="center">取地址</td></tr><tr><td align="center"><code>sizeof</code></td><td align="center">操作数的类型长度（以字节为单位）</td></tr><tr><td align="center">~</td><td align="center">对一个数的二进制按位取反</td></tr><tr><td align="center">–</td><td align="center">前置、后置– (写在前面就先 - )</td></tr><tr><td align="center">++</td><td align="center">前置、后置++ (写在前面就先 + )</td></tr><tr><td align="center">*</td><td align="center">间接访问操作符(解引用操作符) — 用在指针</td></tr><tr><td align="center">(类型)</td><td align="center">强制类型转换</td></tr></tbody></table><hr><h2 id="5-7-关系操作符"><a href="#5-7-关系操作符" class="headerlink" title="5.7 关系操作符"></a>5.7 关系操作符</h2><blockquote><p>&gt;</p><p>&gt;&#x3D;</p><p>&lt;</p><p>&lt;&#x3D;</p><p>!&#x3D;  用于测试“不相等”</p><p>&#x3D;&#x3D;    用于测试“相等”</p></blockquote><hr><h2 id="5-8-逻辑操作符"><a href="#5-8-逻辑操作符" class="headerlink" title="5.8 逻辑操作符"></a>5.8 逻辑操作符</h2><blockquote><p>&amp;&amp;   逻辑与</p><p>||      逻辑或</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输出: 1 2 3 4</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>, a = <span class="number">0</span>, b = <span class="number">2</span>, c = <span class="number">3</span>, d = <span class="number">4</span>;</span><br><span class="line">i = a++ &amp;&amp; ++b &amp;&amp; d++;</span><br><span class="line"><span class="comment">//i = a++||++b||d++;</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;a = %d\n b = %d\n c = %d\nd = %d\n&quot;</span>, a, b, c, d);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="5-9-条件操作符"><a href="#5-9-条件操作符" class="headerlink" title="5.9 条件操作符"></a>5.9 条件操作符</h2><blockquote><p><code>exp1 ? exp2 : exp3</code></p></blockquote><hr><h2 id="5-10-逗号表达式"><a href="#5-10-逗号表达式" class="headerlink" title="5.10 逗号表达式"></a>5.10 逗号表达式</h2><blockquote><p><code>exp1, exp2, exp3, ...expN</code></p><p>逗号表达式，就是用逗号隔开的多个表达式。</p><p>逗号表达式，从左向右依次执行。整个表达式的结果是最后一个表达式的结果。</p></blockquote><hr><h2 id="5-11-下标引用、函数调用和结构成员"><a href="#5-11-下标引用、函数调用和结构成员" class="headerlink" title="5.11 下标引用、函数调用和结构成员"></a>5.11 下标引用、函数调用和结构成员</h2><blockquote><p> <code>[]</code> 下标引用操作符</p><p> <code>()</code> 函数调用操作符</p><p><code>.</code>  结构体.成员名</p><p><code>-&gt;</code> 结构体指针-&gt;成员名</p></blockquote><hr><h2 id="5-12-表达式求值"><a href="#5-12-表达式求值" class="headerlink" title="5.12 表达式求值"></a>5.12 表达式求值</h2><h3 id="隐式类型转换"><a href="#隐式类型转换" class="headerlink" title="隐式类型转换"></a>隐式类型转换</h3><p>C的整型算术运算总是至少以缺省整型类型的精度来进行的。</p><p>为了获得这个精度，表达式中的 字符和短整型 操作数在使用之前被转换为普通整型，这种转换称为<strong>整型提升</strong>。</p><blockquote><p>说白了就是因为 <code>char ( 1 字节)</code> 跟 <code>short (2 字节)</code> 太小了, 达不到运算时所需要的 4 字节, 才会隐式转成整型</p><p>向精度更高的转换</p></blockquote><p><strong>整型提升的意义</strong>：</p><blockquote><p>表达式的整型运算要在 CPU 的相应运算器件内执行，CPU内整型运算器(ALU)的操作数的字节长度</p><p>一般就是int的字节长度，同时也是CPU的通用寄存器的长度。</p><p>因此，即使两个 <code>char</code> 类型的相加，在CPU执行时实际上也要先转换为CPU内整型操作数的标准长</p><p>度。</p><p>通用CPU（general-purpose CPU）是难以直接实现两个8比特字节直接相加运算（虽然机器指令</p><p>中可能有这种字节相加指令）。所以，表达式中各种长度可能小于 <code>int</code> 长度的整型值，都必须先转</p><p>换为 <code>int</code> 或 <code>unsigned int</code>，然后才能送入CPU去执行运算。</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> a,b,c;</span><br><span class="line">...</span><br><span class="line">a = b + c; <span class="comment">// b 和 c 的值被提升为普通整型，然后再执行加法运算, 加法运算完成之后，结果将被截断，然后再存储于 a 中</span></span><br></pre></td></tr></table></figure><p><strong>如何进行整体提升？</strong></p><blockquote><p>整形提升是按照变量的数据类型的符号位来提升的</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//负数的整形提升</span></span><br><span class="line"><span class="type">char</span> c1 = <span class="number">-1</span>;</span><br><span class="line">变量c1的二进制位(补码)中只有<span class="number">8</span>个比特位：</span><br><span class="line"><span class="number">1111111</span></span><br><span class="line">因为 <span class="type">char</span> 为有符号的 <span class="type">char</span></span><br><span class="line">所以整形提升的时候，!!! 高位补充符号位，即为<span class="number">1</span> !!!</span><br><span class="line">提升之后的结果是：</span><br><span class="line"><span class="number">11111111111111111111111111111111</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//正数的整形提升</span></span><br><span class="line"><span class="type">char</span> c2 = <span class="number">1</span>;</span><br><span class="line">变量c2的二进制位(补码)中只有<span class="number">8</span>个比特位：</span><br><span class="line"><span class="number">00000001</span></span><br><span class="line">因为 <span class="type">char</span> 为有符号的 <span class="type">char</span></span><br><span class="line">所以整形提升的时候，!!! 高位补充符号位，即为<span class="number">0</span> !!!</span><br><span class="line">提升之后的结果是：</span><br><span class="line"><span class="number">00000000000000000000000000000001</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//无符号整形提升，高位补0</span></span><br></pre></td></tr></table></figure><p><strong>例1</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">char</span> a = <span class="number">3</span>;</span><br><span class="line"><span class="comment">//00000000000000000000000000000011 - 有符号, 为 0, 高位补 0</span></span><br><span class="line"><span class="comment">//00000011 - a 为 char 型时的二进制位 (8 bit)</span></span><br><span class="line"><span class="type">char</span> b = <span class="number">127</span>;</span><br><span class="line"><span class="comment">//00000000000000000000000001111111 - 有符号, 为 0, 高位补 0</span></span><br><span class="line"><span class="comment">//01111111 - b 为 char 型的二进制位 (8 bit)</span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> c = a + b;</span><br><span class="line"><span class="comment">//00000000000000000000000000000011 - a</span></span><br><span class="line"><span class="comment">//00000000000000000000000001111111 - b</span></span><br><span class="line"><span class="comment">//00000000000000000000000010000010 - a + b</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//10000010 - c 为 char 型的二进制位 (8 bit) - 此处为截断: char中只能放最低的 8 个 bit 位, 其他位置放不下了, 丢弃</span></span><br><span class="line"><span class="comment">//11111111111111111111111110000010 - 补码 - 有符号, 为 1, 高位补 1</span></span><br><span class="line"><span class="comment">//11111111111111111111111110000001 - 反码</span></span><br><span class="line"><span class="comment">//10000000000000000000000001111110 - 原码</span></span><br><span class="line"><span class="comment">//-126</span></span><br><span class="line"><span class="comment">//a 和 b 都是 char 型的, 都没有达到一个 int 的大小</span></span><br><span class="line"><span class="comment">//这里就回发生整形提升</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, c); <span class="comment">// -126</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>例2</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* a,b 要进行整形提升,但是 c 不需要整形提升</span></span><br><span class="line"><span class="comment">* a,b 整形提升之后,变成了负数,所以表达式 a==0xb6 , b==0xb600 的结果是假</span></span><br><span class="line"><span class="comment">* 所程序输出的结果是: c</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">char</span> a = <span class="number">0xb6</span>;</span><br><span class="line"><span class="type">short</span> b = <span class="number">0xb600</span>;</span><br><span class="line"><span class="type">int</span> c = <span class="number">0xb6000000</span>;</span><br><span class="line"><span class="keyword">if</span> (a == <span class="number">0xb6</span>)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (b == <span class="number">0xb600</span>)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;b&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (c == <span class="number">0xb6000000</span>)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;c&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>例3</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* c 只要参与表达式运算,就会发生整形提升,表达式 +c ,就会发生提升,所以 sizeof(+c) 是 4 个字节</span></span><br><span class="line"><span class="comment">* 表达式 -c 也会发生整形提升,所以 sizeof(-c) 是 4 个字节,但是 sizeof(c) ,就是 1 个字节.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">char</span> c = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%u\n&quot;</span>, <span class="keyword">sizeof</span>(c));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%u\n&quot;</span>, <span class="keyword">sizeof</span>(+c));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%u\n&quot;</span>, <span class="keyword">sizeof</span>(-c));</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="算数转换"><a href="#算数转换" class="headerlink" title="算数转换"></a>算数转换</h3><p>如果某个操作符的各个操作数属于不同的类型，那么除非其中一个操作数的转换为另一个操作数的类</p><p>型，否则操作就无法进行。下面的层次体系称为<strong>寻常算术转换</strong>。</p><blockquote><p><code>long double</code></p><p><code>double</code></p><p><code>float</code></p><p><code>unsigned long int</code></p><p><code>long int</code></p><p><code>unsigned int</code></p><p><code>int</code></p></blockquote><p>如果某个操作数的类型在上面这个列表中排名较低，那么首先要转换为另外一个操作数的类型后执行运算</p><blockquote><p>从下往上转, 下面精度低, 上面精度高, 从精度小的转换为精度大的</p></blockquote><h3 id="操作符的属性"><a href="#操作符的属性" class="headerlink" title="操作符的属性"></a>操作符的属性</h3><ol><li><p>操作符的优先级</p></li><li><p>操作符的结合性</p></li><li><p>是否控制求值顺序。</p></li></ol><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221227084052382.png" alt="操作符优先级1"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221227084138451.png" alt="操作符优先级2"></p><hr><h1 id="六、指针"><a href="#六、指针" class="headerlink" title="六、指针"></a>六、指针</h1><ul><li><p>指针是用来存放地址的，地址是唯一标示一块地址空间的。</p></li><li><p><strong>指针的大小在</strong> <strong>32</strong>位平台是<strong>4</strong>个字节，在<strong>64</strong>位平台是<strong>8</strong>个字节</p></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">3</span>;</span><br><span class="line"><span class="type">int</span>* indicator_a = &amp;a; <span class="comment">// * 说明indicator_a是指针变量, int说明indicator_a所指向的对象的类型</span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> b = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line"><span class="type">char</span>* indicator_b = &amp;b;</span><br><span class="line"></span><br><span class="line">*indicator_a = <span class="number">10</span>; <span class="comment">// * 是解引用操作, *indicator_a 就是通过 indicator_a 里的地址找到 a, 对 a 进行操作</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, a);</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span>* p;<span class="comment">//p为一个整形指针变量</span></span><br><span class="line">p = &amp;num; <span class="comment">//指针变量定义的是一个地址</span></span><br><span class="line">    *p = num; <span class="comment">//解引用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-1-指针类型"><a href="#6-1-指针类型" class="headerlink" title="6.1 指针类型"></a>6.1 指针类型</h2><p><code>char*</code> 类型的指针是为了存放 <code>char</code> 类型变量的地址。</p><p><code>short*</code> 类型的指针是为了存放 <code>short</code> 类型变量的地址。</p><p><code>int*</code> 类型的指针是为了存放 <code>int</code> 类型变量的地址。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//指针 + - 整数</span></span><br><span class="line"><span class="comment">//指针的类型决定了指针向前或者向后走一步有多大（距离） (步长)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> n = <span class="number">10</span>;</span><br><span class="line"><span class="type">char</span>* pc = (<span class="type">char</span>*) &amp;n;</span><br><span class="line"><span class="type">int</span>* pi = &amp;n;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, &amp;n);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, pc);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, pc + <span class="number">1</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, pi);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, pi + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0000005</span>C4BCFF8B4</span><br><span class="line"><span class="number">0000005</span>C4BCFF8B4</span><br><span class="line"><span class="number">0000005</span>C4BCFF8B5</span><br><span class="line"><span class="number">0000005</span>C4BCFF8B4</span><br><span class="line"><span class="number">0000005</span>C4BCFF8B8</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//指针的解引用 (此段代码输出为空, 主要是调试证明)</span></span><br><span class="line"><span class="comment">//指针的类型决定了，对指针解引用的时候有多大的权限（能操作几个字节）。</span></span><br><span class="line"><span class="comment">//比如： char* 的指针解引用就只能访问一个字节，而 int* 的指针的解引用就能访问四个字节。</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> n = <span class="number">0x11223344</span>;</span><br><span class="line"><span class="type">char</span>* pc = (<span class="type">char</span>*)&amp;n;</span><br><span class="line"><span class="type">int</span>* pi = &amp;n;</span><br><span class="line">*pc = <span class="number">0</span>; <span class="comment">//重点在调试的过程中观察内存的变化。</span></span><br><span class="line">*pi = <span class="number">0</span>; <span class="comment">//重点在调试的过程中观察内存的变化。</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="6-2-字符指针"><a href="#6-2-字符指针" class="headerlink" title="6.2 字符指针"></a>6.2 字符指针</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//字符指针</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//法一</span></span><br><span class="line"><span class="type">char</span> ch = <span class="string">&#x27;w&#x27;</span>;</span><br><span class="line"><span class="type">char</span>* pc = &amp;ch;</span><br><span class="line">*pc = <span class="string">&#x27;w&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//法二</span></span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* pstr = <span class="string">&quot;hello bit.&quot;</span>; <span class="comment">//本质是把字符串&quot;hello bit.&quot;的首字母放入指针变量 pstr 中</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, pstr);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221231181608071.png" alt="字符指针"></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*输出: </span></span><br><span class="line"><span class="comment">* str1 and str2 are not same</span></span><br><span class="line"><span class="comment">* str3 and str4 are same</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">char</span> str1[] = <span class="string">&quot;hello bit.&quot;</span>;</span><br><span class="line"><span class="type">char</span> str2[] = <span class="string">&quot;hello bit.&quot;</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* str3 = <span class="string">&quot;hello bit.&quot;</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* str4 = <span class="string">&quot;hello bit.&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (str1 == str2)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;str1 and str2 are same\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;str1 and str2 are not same\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (str3 == str4)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;str3 and str4 are same\n&quot;</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;str3 and str4 are not same\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* str3 和 str4 指向的是一个同一个常量字符串。C/C++会把常量字符串存储到单独的一个内存区域，</span></span><br><span class="line"><span class="comment">* 当几个指针。指向同一个字符串的时候，他们实际会指向同一块内存。</span></span><br><span class="line"><span class="comment">* 但是用相同的常量字符串去初始化不同的数组的时候就会开辟出不同的内存块。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><hr><h2 id="6-3-野指针"><a href="#6-3-野指针" class="headerlink" title="6.3 野指针"></a>6.3 野指针</h2><blockquote><p>指针指向的位置是不可知的（随机的、不正确的、没有明确限制的）</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//未初始化的野指针</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span>* p;<span class="comment">//局部变量指针未初始化，默认为随机值</span></span><br><span class="line">*p = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//越界访问的野指针</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="type">int</span> arr[<span class="number">10</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"><span class="type">int</span>* p = arr;</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt;= <span class="number">11</span>; i++) &#123;</span><br><span class="line"><span class="comment">//当指针指向的范围超出数组arr的范围时，p就是野指针</span></span><br><span class="line">        <span class="comment">//C语言不会检查数据是否越界</span></span><br><span class="line">*(p++) = i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//指针指向的空间释放</span></span><br><span class="line"><span class="comment">//空间释放后, 指针指向位置, 编程野指针 (动态内存开辟后补代码)</span></span><br></pre></td></tr></table></figure><p>规避野指针:</p><ol><li><p>指针初始化</p></li><li><p>小心指针越界</p></li><li><p>指针指向空间释放即使置NULL</p></li><li><p>避免返回局部变量的地址</p></li><li><p>指针使用之前检查有效性</p></li></ol><hr><h2 id="6-4-指针运算"><a href="#6-4-指针运算" class="headerlink" title="6.4 指针运算"></a>6.4 指针运算</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//指针关系运算</span></span><br><span class="line"><span class="keyword">for</span> (vp = &amp;values[N_VALUES]; vp &gt; &amp;values[<span class="number">0</span>];) &#123;</span><br><span class="line">*--vp = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//代码改进</span></span><br><span class="line"><span class="keyword">for</span> (vp = &amp;values[N_VALUES - <span class="number">1</span>]; vp &gt;= &amp;values[<span class="number">0</span>];vp--) &#123;</span><br><span class="line">*vp = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 标准规定:</span></span><br><span class="line"><span class="comment">*允许指向数组元素的指针与指向数组最后一个元素后面的那个内存位置的指针比较，</span></span><br><span class="line"><span class="comment">*但是不允许与指向第一个元素之前的那个内存位置的指针进行比较。</span></span><br><span class="line"><span class="comment">* 定义数组 arr[10] = &#123; 0 &#125;, 可以访问与 arr[10] 比较但是不能与 arr[-1] 比较</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><hr><h2 id="6-5-指针与数组"><a href="#6-5-指针与数组" class="headerlink" title="6.5 指针与数组"></a>6.5 指针与数组</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数组名的意义</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> arr[<span class="number">10</span>] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">0</span> &#125;;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%p == %p&quot;</span>, arr, &amp;arr[<span class="number">0</span>]); <span class="comment">//数组名表示的是数组首元素的地址</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> arr[<span class="number">10</span>] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">0</span> &#125;;</span><br><span class="line"><span class="type">int</span>* p = arr;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//指针与数组关系</span></span><br><span class="line"><span class="comment">// p+i 其实计算的是数组 arr 下标为 i 的地址</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> arr[] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">0</span> &#125;;</span><br><span class="line"><span class="type">int</span>* p = arr; <span class="comment">//指针存放数组首元素的地址</span></span><br><span class="line"><span class="type">int</span> sz = <span class="keyword">sizeof</span>(arr) / <span class="keyword">sizeof</span>(arr[<span class="number">0</span>]);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; sz; i++) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;&amp;arr[%d] = %p   &lt;====&gt; p+%d = %p\n&quot;</span>, i, &amp;arr[i], i, p + i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过指针访问数组</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> arr[] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">0</span> &#125;;</span><br><span class="line"><span class="type">int</span>* p = arr; <span class="comment">//指针存放数组首元素的地址</span></span><br><span class="line"><span class="type">int</span> sz = <span class="keyword">sizeof</span>(arr) / <span class="keyword">sizeof</span>(arr[<span class="number">0</span>]);</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sz; i++) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, *(p + i));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="6-6-指针数组"><a href="#6-6-指针数组" class="headerlink" title="6.6 指针数组"></a>6.6 指针数组</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//指针数组 -- 存放指针的数组</span></span><br><span class="line"><span class="type">int</span>* arr3[<span class="number">5</span>];</span><br><span class="line"><span class="type">char</span>* arr4[<span class="number">5</span>];</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//指针数组</span></span><br><span class="line"><span class="comment">//数组中存放的是指针 (地址)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//指针指向变量</span></span><br><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="type">int</span> c = <span class="number">30</span>;</span><br><span class="line"><span class="type">int</span>* arr[<span class="number">3</span>] = &#123; &amp;a, &amp;b, &amp;c &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, *(arr[i]));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//指针指向数组</span></span><br><span class="line"><span class="type">int</span> a1[<span class="number">5</span>] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line"><span class="type">int</span> b1[<span class="number">5</span>] = &#123;&#125;;</span><br><span class="line"><span class="type">int</span> c1[<span class="number">5</span>] = &#123;&#125;;</span><br><span class="line"><span class="type">int</span>* arr1[<span class="number">3</span>] = &#123; a1, b1, c1 &#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, *(arr1[i] + j));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, arr[i][j]); <span class="comment">//这种写法用于模拟二维数组</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="6-7-二级指针"><a href="#6-7-二级指针" class="headerlink" title="6.7 二级指针"></a>6.7 二级指针</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//二级指针</span></span><br><span class="line"><span class="comment">//指针变量也是变量，是变量就有地址，那指针变量的地址存放在哪里？</span></span><br><span class="line"><span class="type">int</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="type">int</span>* ppa = &amp;b;<span class="comment">//等价于 pa = &amp;b;</span></span><br><span class="line"><span class="type">int</span>* *ppa = &amp;ppa;</span><br><span class="line">**ppa = <span class="number">30</span>;</span><br><span class="line"><span class="comment">//等价于*pa = 30;</span></span><br><span class="line"><span class="comment">//等价于a = 30;</span></span><br></pre></td></tr></table></figure><hr><h2 id="6-8-数组指针"><a href="#6-8-数组指针" class="headerlink" title="6.8 数组指针"></a>6.8 数组指针</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> arr[<span class="number">10</span>] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">0</span> &#125;;</span><br><span class="line"><span class="type">int</span>(*p)[<span class="number">10</span>] = &amp;arr;<span class="comment">//把数组arr的地址赋值给数组指针变量p</span></span><br><span class="line"><span class="comment">//但是一般很少这样写代码, 太复杂了没必要</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数组指针的使用</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">print_arr1</span><span class="params">(<span class="type">int</span> arr[<span class="number">3</span>][<span class="number">5</span>], <span class="type">int</span> row, <span class="type">int</span> col)</span> &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; row; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; col; j++) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, arr[i][j]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">print_arr2</span><span class="params">(<span class="type">int</span>(*arr)[<span class="number">5</span>], <span class="type">int</span> row, <span class="type">int</span> col)</span> &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; row; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; col; j++) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, arr[i][j]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> arr[<span class="number">3</span>][<span class="number">5</span>] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span> &#125;;</span><br><span class="line">print_arr1(arr, <span class="number">3</span>, <span class="number">5</span>);</span><br><span class="line"><span class="comment">//数组名arr，表示首元素的地址</span></span><br><span class="line"><span class="comment">//但是二维数组的首元素是二维数组的第一行</span></span><br><span class="line"><span class="comment">//所以这里传递的arr，其实相当于第一行的地址，是一维数组的地址</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//也可以数组指针来接收</span></span><br><span class="line">print_arr2(arr, <span class="number">3</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> arr[<span class="number">5</span>]; <span class="comment">//整形数组</span></span><br><span class="line"><span class="type">int</span>* parr1[<span class="number">10</span>]; <span class="comment">//指针数组, 整型数组中存放 10 个指针</span></span><br><span class="line"><span class="type">int</span> (*parr2)[<span class="number">10</span>]; <span class="comment">//数组指针, 该指针指向一个数组, 这个数组 10 个元素, 每个都是整型</span></span><br><span class="line"><span class="comment">//存储 数组指针 的 数组, 可存放 10 个 数组指针, 每个 数组指针 指向一个 数组, 每个 数组 5 个元素, 都是 整型</span></span><br><span class="line"><span class="type">int</span> (*parr3[<span class="number">10</span>])[<span class="number">5</span>];</span><br></pre></td></tr></table></figure><hr><h2 id="6-9-数组参数-amp-指针参数"><a href="#6-9-数组参数-amp-指针参数" class="headerlink" title="6.9 数组参数 &amp; 指针参数"></a>6.9 数组参数 &amp; 指针参数</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一维数组传参</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span> arr[])</span> <span class="comment">//ok</span></span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span> arr[<span class="number">10</span>])</span> <span class="comment">//ok</span></span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span>* arr)</span> <span class="comment">//ok</span></span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">test2</span><span class="params">(<span class="type">int</span>* arr[<span class="number">20</span>])</span> <span class="comment">//ok</span></span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">test2</span><span class="params">(<span class="type">int</span>** arr)</span> <span class="comment">//ok</span></span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> arr[<span class="number">10</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"><span class="type">int</span>* arr2[<span class="number">20</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">test(arr);</span><br><span class="line">test2(arr2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//二维数组传参</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span> arr[<span class="number">3</span>][<span class="number">5</span>])</span> <span class="comment">//ok</span></span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span> arr[][])</span> <span class="comment">//不ok</span></span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span> arr[][<span class="number">5</span>])</span><span class="comment">//ok？</span></span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="comment">//总结：二维数组传参，函数形参的设计只能省略第一个[]的数字。</span></span><br><span class="line"><span class="comment">//因为对一个二维数组，可以不知道有多少行，但是必须知道一行多少元素。</span></span><br><span class="line"><span class="comment">//这样才方便运算。</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span>* arr)</span> <span class="comment">//不ok, 实参是一个数组地址, 形参不能用一个普通指针接收</span></span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span>* arr[<span class="number">5</span>])</span> <span class="comment">//不ok, 既不是指针, 又不是二维数组</span></span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span>(*arr)[<span class="number">5</span>])</span> <span class="comment">// ok, 数组指针, 传的值为二维数组第一行的一维数组</span></span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span>** arr)</span> <span class="comment">//不ok, 二级指针与实参不匹配</span></span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> arr[<span class="number">3</span>][<span class="number">5</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">test(arr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一级指针传参</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">print</span><span class="params">(<span class="type">int</span>* p, <span class="type">int</span> sz)</span> &#123; <span class="comment">//形参 * p 的意思是传过来一个指针变量</span></span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; sz; i++) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, *(p + i));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> arr[<span class="number">10</span>] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span> &#125;;</span><br><span class="line"><span class="type">int</span>* p = arr;</span><br><span class="line"><span class="type">int</span> sz = <span class="keyword">sizeof</span>(arr) / <span class="keyword">sizeof</span>(arr[<span class="number">0</span>]);</span><br><span class="line"><span class="comment">//一级指针p，传给函数</span></span><br><span class="line">print(p, sz);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//二级指针传参</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span>** ptr)</span> &#123; <span class="comment">//形参 ** ptr 的意思是传过来一个二级指针变量</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;num = %d\n&quot;</span>, **ptr);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> n = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span>* p = &amp;n;</span><br><span class="line"><span class="type">int</span>** pp = &amp;p;</span><br><span class="line">test(pp);</span><br><span class="line">test(&amp;p);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="6-10-函数-amp-指针"><a href="#6-10-函数-amp-指针" class="headerlink" title="6.10 函数 &amp; 指针"></a>6.10 函数 &amp; 指针</h2><h3 id="函数指针"><a href="#函数指针" class="headerlink" title="函数指针"></a>函数指针</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//函数指针 - 存放函数地址的指针</span></span><br><span class="line"><span class="comment">//&amp;函数名 - 取到的就是函数的地址</span></span><br><span class="line"><span class="comment">//函数名 与 &amp;函数名一个意思, 函数名 == &amp;函数名</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">(<span class="type">char</span>*)</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">Add</span><span class="params">(<span class="type">int</span> , <span class="type">int</span>)</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//指针类型跟随函数返回值类型</span></span><br><span class="line"><span class="type">int</span> (*pf)(<span class="type">int</span>, <span class="type">int</span>) = &amp;Add; <span class="comment">//Add == pf</span></span><br><span class="line">    <span class="type">int</span> (*pf)(<span class="type">int</span>, <span class="type">int</span>) = &amp;Add; <span class="comment">//两种都可以</span></span><br><span class="line"><span class="type">void</span> (*pc)(<span class="type">char</span>*) = &amp;test;</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数指针调用</span></span><br><span class="line"><span class="type">int</span> ret = (*pf)(<span class="number">3</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="函数指针数组"><a href="#函数指针数组" class="headerlink" title="函数指针数组"></a>函数指针数组</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//函数指针数组</span></span><br><span class="line"><span class="comment">//本质是数组, 存储的事一堆函数指针</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">test</span><span class="params">(<span class="type">int</span> , <span class="type">int</span>)</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">Add</span><span class="params">(<span class="type">int</span> , <span class="type">int</span>)</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//函数指针数组 存放的 函数指针 的 形参 要相同, 不然会报错</span></span><br><span class="line"><span class="type">int</span> (*pf[<span class="number">10</span>])(<span class="type">int</span>, <span class="type">int</span>) = &#123; Add, test &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//函数指针数组的用途：转移表</span></span><br><span class="line"><span class="comment">//应用: 计算器</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">sub</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> a - b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">mul</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> a * b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">div</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> a / b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> x, y;</span><br><span class="line"><span class="type">int</span> input = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> ret = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span>(*p[<span class="number">5</span>])(<span class="type">int</span> x, <span class="type">int</span> y) = &#123; <span class="number">0</span>, add, sub, mul, div &#125;; <span class="comment">//转移表</span></span><br><span class="line"><span class="keyword">while</span> (input) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;*************************\n&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot; 1:add           2:sub \n&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot; 3:mul           4:div \n&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;*************************\n&quot;</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;请选择：&quot;</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;input);</span><br><span class="line"><span class="keyword">if</span> ((input &lt;= <span class="number">4</span> &amp;&amp; input &gt;= <span class="number">1</span>)) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;输入操作数：&quot;</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;x, &amp;y);</span><br><span class="line">ret = (*p[input])(x, y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;输入有误\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;ret = %d\n&quot;</span>, ret);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="指向函数指针数组的指针"><a href="#指向函数指针数组的指针" class="headerlink" title="指向函数指针数组的指针"></a>指向函数指针数组的指针</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//指向函数指针数组的指针 (了解)</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">test</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* str)</span> &#123;</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, str);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"> <span class="comment">//函数指针pfun</span></span><br><span class="line"> <span class="type">void</span> (*pfun)(<span class="type">const</span> <span class="type">char</span>*) = test;</span><br><span class="line"> <span class="comment">//函数指针的数组pfunArr</span></span><br><span class="line"> <span class="type">void</span> (*pfunArr[<span class="number">5</span>])(<span class="type">const</span> <span class="type">char</span>* str);</span><br><span class="line"> pfunArr[<span class="number">0</span>] = test;</span><br><span class="line"> <span class="comment">//指向函数指针数组pfunArr的指针ppfunArr</span></span><br><span class="line"> <span class="type">void</span> (*(*ppfunArr)[<span class="number">5</span>])(<span class="type">const</span> <span class="type">char</span>*) = &amp;pfunArr;</span><br><span class="line">    </span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="回调函数"><a href="#回调函数" class="headerlink" title="回调函数"></a>回调函数</h3><blockquote><p>回调函数就是一个通过函数指针调用的函数。</p><p>如果你把函数的指针（地址）作为参数传递给另一个函数，当这个指针被用来调用其所指向的函数时，我们就说这是回调函数。</p><p>回调函数不是由该函数的实现方直接调用，</p><p>而是在特定的事件或条件发生时由另外的一方调用的，用于对该事件或条件进行响应。</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//qosrt快排</span></span><br><span class="line"><span class="comment">//qosrt函数的使用者得实现一个比较函数</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">int_cmp</span><span class="params">(<span class="type">const</span> <span class="type">void</span>* p1, <span class="type">const</span> <span class="type">void</span>* p2)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> (*(<span class="type">int</span>*)p1 - *(<span class="type">int</span>*)p2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> arr[] = &#123; <span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">0</span> &#125;;</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">qsort(arr, <span class="keyword">sizeof</span>(arr) / <span class="keyword">sizeof</span>(arr[<span class="number">0</span>]), <span class="keyword">sizeof</span>(<span class="type">int</span>), int_cmp);</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="keyword">sizeof</span>(arr) / <span class="keyword">sizeof</span>(arr[<span class="number">0</span>]); i++) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, arr[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//回调函数 + 冒泡 模拟快排</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">int_cmp</span><span class="params">(<span class="type">const</span> <span class="type">void</span>* p1, <span class="type">const</span> <span class="type">void</span>* p2)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> (*(<span class="type">int</span>*)p1 - *(<span class="type">int</span>*)p2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> _swap(<span class="type">void</span>* p1, <span class="type">void</span>* p2, <span class="type">int</span> size) &#123;</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line"><span class="type">char</span> tmp = *((<span class="type">char</span>*)p1 + i);</span><br><span class="line">*((<span class="type">char</span>*)p1 + i) = *((<span class="type">char</span>*)p2 + i);</span><br><span class="line">*((<span class="type">char</span>*)p2 + i) = tmp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">bubble</span><span class="params">(<span class="type">void</span>* base, <span class="type">int</span> count, <span class="type">int</span> size, <span class="type">int</span>(*cmp)(<span class="type">const</span> <span class="type">void</span>*, <span class="type">const</span> <span class="type">void</span>*))</span> &#123;</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> j = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; count - <span class="number">1</span>; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; count - i - <span class="number">1</span>; j++) &#123;</span><br><span class="line"><span class="keyword">if</span> (cmp((<span class="type">char</span>*)base + j * size, (<span class="type">char</span>*)base + (j + <span class="number">1</span>) * size) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">_swap((<span class="type">char</span>*)base + j * size, (<span class="type">char</span>*)base + (j + <span class="number">1</span>) * size, size);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> arr[] = &#123; <span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">0</span> &#125;;</span><br><span class="line"><span class="comment">//char *arr[] = &#123;&quot;aaaa&quot;,&quot;dddd&quot;,&quot;cccc&quot;,&quot;bbbb&quot;&#125;;</span></span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">bubble(arr, <span class="keyword">sizeof</span>(arr) / <span class="keyword">sizeof</span>(arr[<span class="number">0</span>]), <span class="keyword">sizeof</span>(<span class="type">int</span>), int_cmp);</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="keyword">sizeof</span>(arr) / <span class="keyword">sizeof</span>(arr[<span class="number">0</span>]); i++) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, arr[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="6-11-一些笔试题"><a href="#6-11-一些笔试题" class="headerlink" title="6.11 一些笔试题"></a>6.11 一些笔试题</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 数组名的意义：</span></span><br><span class="line"><span class="comment">* 1. sizeof(数组名)，这里的数组名表示整个数组，计算的是整个数组的大小。</span></span><br><span class="line"><span class="comment">* 2. &amp; 数组名，这里的数组名表示整个数组，取出的是整个数组的地址。</span></span><br><span class="line"><span class="comment">* 3. 除此之外所有的数组名都表示首元素的地址。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//一维数组</span></span><br><span class="line"><span class="type">int</span> a[] = &#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span> &#125;;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(a)); <span class="comment">//16</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(a + <span class="number">0</span>)); <span class="comment">//4或8</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(*a)); <span class="comment">//4</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(a + <span class="number">1</span>)); <span class="comment">//4或8</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(a[<span class="number">1</span>])); <span class="comment">//4</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(&amp;a)); <span class="comment">//4或8</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(*&amp;a)); <span class="comment">//16</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(&amp;a + <span class="number">1</span>)); <span class="comment">//4或8</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(&amp;a[<span class="number">0</span>])); <span class="comment">//4或8</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(&amp;a[<span class="number">0</span>] + <span class="number">1</span>)); <span class="comment">//4或8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//字符数组</span></span><br><span class="line"><span class="type">char</span> arr[] = &#123; <span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;f&#x27;</span> &#125;;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(arr)); <span class="comment">//6</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(arr + <span class="number">0</span>)); <span class="comment">//4或8</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(*arr)); <span class="comment">//1</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(arr[<span class="number">1</span>])); <span class="comment">//1</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(&amp;arr)); <span class="comment">//4或8</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(&amp;arr + <span class="number">1</span>)); <span class="comment">//4或8</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(&amp;arr[<span class="number">0</span>] + <span class="number">1</span>)); <span class="comment">//4或8</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(arr)); <span class="comment">//随机值</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(arr + <span class="number">0</span>)); <span class="comment">//随机值</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(*arr)); <span class="comment">//err</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(arr[<span class="number">1</span>])); <span class="comment">//err</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(&amp;arr)); <span class="comment">//随机值</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(&amp;arr + <span class="number">1</span>)); <span class="comment">//随机值</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(&amp;arr[<span class="number">0</span>] + <span class="number">1</span>)); <span class="comment">// 随机值</span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> arr[] = <span class="string">&quot;abcdef&quot;</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(arr)); <span class="comment">//7</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(arr + <span class="number">0</span>)); <span class="comment">//4或8</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(*arr)); <span class="comment">//1</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(arr[<span class="number">1</span>])); <span class="comment">//1</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(&amp;arr)); <span class="comment">//4或8</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(&amp;arr + <span class="number">1</span>)); <span class="comment">//4或8</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(&amp;arr[<span class="number">0</span>] + <span class="number">1</span>)); <span class="comment">//4或8</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(arr)); <span class="comment">//6</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(arr + <span class="number">0</span>)); <span class="comment">//6</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(*arr)); <span class="comment">//err</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(arr[<span class="number">1</span>])); <span class="comment">//err</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(&amp;arr)); <span class="comment">//6</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(&amp;arr + <span class="number">1</span>)); <span class="comment">//随机值</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(&amp;arr[<span class="number">0</span>] + <span class="number">1</span>)); <span class="comment">//5</span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span>* p = <span class="string">&quot;abcdef&quot;</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(p)); <span class="comment">//4或8</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(p + <span class="number">1</span>)); <span class="comment">//4或8</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(*p)); <span class="comment">//1</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(p[<span class="number">0</span>])); <span class="comment">//1</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(&amp;p)); <span class="comment">//4或8</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(&amp;p + <span class="number">1</span>)); <span class="comment">//4或8</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(&amp;p[<span class="number">0</span>] + <span class="number">1</span>)); <span class="comment">//4或8</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(p)); <span class="comment">//6</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(p + <span class="number">1</span>)); <span class="comment">//5</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(*p)); <span class="comment">//err</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(p[<span class="number">0</span>])); <span class="comment">//err</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(&amp;p)); <span class="comment">//随机值</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(&amp;p + <span class="number">1</span>)); <span class="comment">//随机值</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="built_in">strlen</span>(&amp;p[<span class="number">0</span>] + <span class="number">1</span>)); <span class="comment">//5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//二维数组</span></span><br><span class="line"><span class="type">int</span> a[<span class="number">3</span>][<span class="number">4</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(a)); <span class="comment">//48</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(a[<span class="number">0</span>][<span class="number">0</span>])); <span class="comment">//4</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(a[<span class="number">0</span>])); <span class="comment">//16</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(a[<span class="number">0</span>] + <span class="number">1</span>)); <span class="comment">//</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(*(a[<span class="number">0</span>] + <span class="number">1</span>))); <span class="comment">//4</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(a + <span class="number">1</span>)); <span class="comment">//4</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(*(a + <span class="number">1</span>))); <span class="comment">//16</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(&amp;a[<span class="number">0</span>] + <span class="number">1</span>)); <span class="comment">//4</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(*(&amp;a[<span class="number">0</span>] + <span class="number">1</span>))); <span class="comment">//16</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(*a)); <span class="comment">//16</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, <span class="keyword">sizeof</span>(a[<span class="number">3</span>])); <span class="comment">//16</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输出: 2,5</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> a[<span class="number">5</span>] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> &#125;;</span><br><span class="line"><span class="type">int</span>* ptr = (<span class="type">int</span>*)(&amp;a + <span class="number">1</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d,%d&quot;</span>, *(a + <span class="number">1</span>), *(ptr - <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//结构体的大小是20个字节</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Test</span> &#123;</span></span><br><span class="line"><span class="type">int</span> Num;</span><br><span class="line"><span class="type">char</span>* pcName;</span><br><span class="line"><span class="type">short</span> sDate;</span><br><span class="line"><span class="type">char</span> cha[<span class="number">2</span>];</span><br><span class="line"><span class="type">short</span> sBa[<span class="number">4</span>];</span><br><span class="line">&#125;*p;</span><br><span class="line"><span class="comment">//假设p 的值为0x100000。 如下表表达式的值分别为多少？</span></span><br><span class="line"><span class="comment">//已知，结构体Test类型的变量大小是20个字节</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, p + <span class="number">0x1</span>); <span class="comment">//0000000000000020</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, (<span class="type">unsigned</span> <span class="type">long</span>)p + <span class="number">0x1</span>); <span class="comment">//0000000000000001</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%p\n&quot;</span>, (<span class="type">unsigned</span> <span class="type">int</span>*)p + <span class="number">0x1</span>); <span class="comment">//0000000000000004</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输出: 4,2000000</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> a[<span class="number">4</span>] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> &#125;;</span><br><span class="line"><span class="type">int</span>* ptr1 = (<span class="type">int</span>*)(&amp;a + <span class="number">1</span>);</span><br><span class="line"><span class="type">int</span>* ptr2 = (<span class="type">int</span>*)((<span class="type">int</span>)a + <span class="number">1</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%x,%x&quot;</span>, ptr1[<span class="number">-1</span>], *ptr2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输出: 1</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> a[<span class="number">3</span>][<span class="number">2</span>] = &#123; (<span class="number">0</span>, <span class="number">1</span>), (<span class="number">2</span>, <span class="number">3</span>), (<span class="number">4</span>, <span class="number">5</span>) &#125;;</span><br><span class="line"><span class="type">int</span>* p;</span><br><span class="line">p = a[<span class="number">0</span>];</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, p[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输出: 00000000,0</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> a[<span class="number">5</span>][<span class="number">5</span>];</span><br><span class="line"><span class="type">int</span>(*p)[<span class="number">5</span>];</span><br><span class="line">p = a;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%p,%d\n&quot;</span>, &amp;p[<span class="number">4</span>][<span class="number">2</span>] - &amp;a[<span class="number">4</span>][<span class="number">2</span>], &amp;p[<span class="number">4</span>][<span class="number">2</span>] - &amp;a[<span class="number">4</span>][<span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输出: 10,5</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> aa[<span class="number">2</span>][<span class="number">5</span>] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span> &#125;;</span><br><span class="line"><span class="type">int</span>* ptr1 = (<span class="type">int</span>*)(&amp;aa + <span class="number">1</span>);</span><br><span class="line"><span class="type">int</span>* ptr2 = (<span class="type">int</span>*)(*(aa + <span class="number">1</span>));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d,%d&quot;</span>, *(ptr1 - <span class="number">1</span>), *(ptr2 - <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//感觉现阶段无需学这么深, 考研够用即可</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"> <span class="type">char</span> *a[] = &#123;<span class="string">&quot;work&quot;</span>,<span class="string">&quot;at&quot;</span>,<span class="string">&quot;alibaba&quot;</span>&#125;;</span><br><span class="line"> <span class="type">char</span>**pa = a;</span><br><span class="line"> pa++;</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, *pa);</span><br><span class="line">    </span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//感觉现阶段无需学这么深, 考研够用即可</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"> <span class="type">char</span> *c[] = &#123;<span class="string">&quot;ENTER&quot;</span>,<span class="string">&quot;NEW&quot;</span>,<span class="string">&quot;POINT&quot;</span>,<span class="string">&quot;FIRST&quot;</span>&#125;;</span><br><span class="line"> <span class="type">char</span>**cp[] = &#123;c+<span class="number">3</span>,c+<span class="number">2</span>,c+<span class="number">1</span>,c&#125;;</span><br><span class="line"> <span class="type">char</span>***cpp = cp;</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, **++cpp);</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, *--*++cpp+<span class="number">3</span>);</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, *cpp[<span class="number">-2</span>]+<span class="number">3</span>);</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, cpp[<span class="number">-1</span>][<span class="number">-1</span>]+<span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="七、结构体"><a href="#七、结构体" class="headerlink" title="七、结构体"></a>七、结构体</h1><h2 id="7-1-结构体声明"><a href="#7-1-结构体声明" class="headerlink" title="7.1 结构体声明"></a>7.1 结构体声明</h2><blockquote><p>结构是一些值的集合，这些值称为成员变量。结构的每个成员可以是不同类型的变量</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 结构体声明</span></span><br><span class="line"><span class="comment">*  struct tag &#123;</span></span><br><span class="line"><span class="comment">*     member-list; // 局部变量</span></span><br><span class="line"><span class="comment">*  &#125;variable-list;  //全局变量</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> &#123;</span></span><br><span class="line"><span class="comment">//局部变量</span></span><br><span class="line"><span class="type">char</span> name[<span class="number">100</span>]; <span class="comment">//注意分号</span></span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line"><span class="type">double</span> average;</span><br><span class="line">&#125;student_number; <span class="comment">//全局变量, 注意分号</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Book</span> &#123;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student</span> <span class="title">borrow</span>;</span> <span class="comment">//结构体嵌套, 结构体内的类型可以为其他结构体</span></span><br><span class="line"><span class="type">int</span> year;</span><br><span class="line">&#125; book_name;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//结构体声明</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> &#123;</span></span><br><span class="line"><span class="type">int</span> x;</span><br><span class="line"><span class="type">int</span> y;</span><br><span class="line">&#125;p1; <span class="comment">//声明类型的同时定义变量p1</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> <span class="title">p2</span>;</span> <span class="comment">//定义结构体变量p2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//初始化：定义变量的同时赋初值</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> <span class="title">p3</span> =</span> &#123; x, y &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//结构体初始化</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stu</span> &#123;</span> <span class="comment">//类型声明</span></span><br><span class="line"><span class="type">char</span> name[<span class="number">15</span>];<span class="comment">//名字</span></span><br><span class="line"><span class="type">int</span> age; <span class="comment">//年龄</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stu</span> <span class="title">s</span> =</span> &#123; <span class="string">&quot;zhangsan&quot;</span>, <span class="number">20</span> &#125;;<span class="comment">//初始化</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//结构体嵌套初始化</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line"><span class="type">int</span> data;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> <span class="title">p</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>* <span class="title">next</span>;</span></span><br><span class="line">&#125;n1 = &#123; <span class="number">10</span>, &#123;<span class="number">4</span>,<span class="number">5</span>&#125;, <span class="literal">NULL</span> &#125;; <span class="comment">//结构体嵌套初始化</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> <span class="title">n2</span> =</span> &#123; <span class="number">20</span>, &#123;<span class="number">5</span>, <span class="number">6</span>&#125;, <span class="literal">NULL</span> &#125;;<span class="comment">//结构体嵌套初始化</span></span><br></pre></td></tr></table></figure><hr><h2 id="7-2-结构体成员访问"><a href="#7-2-结构体成员访问" class="headerlink" title="7.2 结构体成员访问"></a>7.2 结构体成员访问</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//结构体成员访问</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stu</span> &#123;</span></span><br><span class="line"><span class="type">char</span> name[<span class="number">20</span>];</span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">print</span><span class="params">(<span class="keyword">struct</span> Stu* ps)</span> &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;name = %s   age = %d\n&quot;</span>, (*ps).name, (*ps).age);</span><br><span class="line"><span class="comment">//使用结构体指针访问指向对象的成员</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;name = %s   age = %d\n&quot;</span>, ps-&gt;name, ps-&gt;age); <span class="comment">//推荐</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stu</span> <span class="title">s</span> =</span> &#123; <span class="string">&quot;zhangsan&quot;</span>, <span class="number">20</span> &#125;;</span><br><span class="line">print(&amp;s); <span class="comment">//结构体地址传参, 传址</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="7-3-结构体传参"><a href="#7-3-结构体传参" class="headerlink" title="7.3 结构体传参"></a>7.3 结构体传参</h2><ul><li>传值 or 传址 ?</li></ul><p>首选传址</p><p>函数传参的时候，参数是需要压栈的。</p><p>如果传递一个结构体对象的时候，结构体过大，参数压栈的的系统开销比较大，所以会导致性能的下降</p><blockquote><p>说白了就是, </p><p>如果传值的话, 调用函数的时候就要新建一个跟结构体大小相等的变量, 开辟一个跟结构体大小相等的空间, 增大没必要的性能损耗</p><p>而且形参的改变无法改变实参, 有些功能函数传值没意义, 也对原结构体无法进行修改</p><p>如果传址就好办了, 直接对地址进行操作, 无需开辟另一个空间, 而且也可以直接对实参进行操作, 一句多得</p><p>！！！！！不要恐惧指针！！！！！</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//结构体传参</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">S</span> &#123;</span></span><br><span class="line"><span class="type">int</span> data[<span class="number">1000</span>];</span><br><span class="line"><span class="type">int</span> num;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">S</span> <span class="title">s</span> =</span> &#123; &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;, <span class="number">1000</span> &#125;;</span><br><span class="line"><span class="comment">//结构体传参, 传值 (性能损耗)</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">print1</span><span class="params">(<span class="keyword">struct</span> S s)</span> &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, s.num);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//结构体地址传参, 传址 (推荐)</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">print2</span><span class="params">(<span class="keyword">struct</span> S* ps)</span> &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ps-&gt;num);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">print1(s); <span class="comment">//传结构体值</span></span><br><span class="line">print2(&amp;s); <span class="comment">//传结构体地址</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="八、数据的存储"><a href="#八、数据的存储" class="headerlink" title="八、数据的存储"></a>八、数据的存储</h1><h2 id="8-1-数据类型"><a href="#8-1-数据类型" class="headerlink" title="8.1 数据类型"></a>8.1 数据类型</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//整形家族</span></span><br><span class="line"><span class="type">char</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span></span><br><span class="line"><span class="type">signed</span> <span class="type">char</span></span><br><span class="line"><span class="type">short</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">short</span>[<span class="type">int</span>]</span><br><span class="line"><span class="type">signed</span> <span class="type">short</span>[<span class="type">int</span>]</span><br><span class="line"><span class="type">int</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span></span><br><span class="line"><span class="type">signed</span> <span class="type">int</span></span><br><span class="line"><span class="type">long</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">long</span>[<span class="type">int</span>]</span><br><span class="line"><span class="type">signed</span> <span class="type">long</span>[<span class="type">int</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">//浮点数家族</span></span><br><span class="line"><span class="type">float</span></span><br><span class="line"><span class="type">double</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//构造类型</span></span><br><span class="line">数组类型</span><br><span class="line">结构体类型 <span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">枚举类型 <span class="title">enum</span></span></span><br><span class="line"><span class="class">联合类型 <span class="title">union</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">//指针类型</span></span><br><span class="line"><span class="class"><span class="title">int</span>* <span class="title">pi</span>;</span></span><br><span class="line"><span class="type">char</span>* pc;</span><br><span class="line"><span class="type">float</span>* pf;</span><br><span class="line"><span class="type">void</span>* pv;</span><br><span class="line"></span><br><span class="line"><span class="comment">//空类型</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* void 表示空类型（无类型）</span></span><br><span class="line"><span class="comment">* 通常应用于函数的返回类型、函数的参数、指针类型</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><hr><h2 id="8-2-整型在内存中的存储"><a href="#8-2-整型在内存中的存储" class="headerlink" title="8.2 整型在内存中的存储"></a>8.2 整型在内存中的存储</h2><p>计算机中的整数有三种表示方法，即原码、反码和补码。</p><p>三种表示方法均有<strong>符号位</strong>和<strong>数值位</strong>两部分，符号位都是用0表示“正”，用1表示“负”</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 原码</span></span><br><span class="line"><span class="comment">* 直接将二进制按照正负数的形式翻译成二进制就可以。</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* 反码</span></span><br><span class="line"><span class="comment">* 将原码的符号位不变，其他位依次按位取反就可以得到了</span></span><br><span class="line"><span class="comment">* </span></span><br><span class="line"><span class="comment">* 补码</span></span><br><span class="line"><span class="comment">* 反码+1就得到补码</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p><strong>正数的原、反、补码都相同。</strong></p><p><strong>对于整形来说：数据存放内存中其实存放的是补码。</strong></p><blockquote><p>在计算机系统中，数值一律用补码来表示和存储。原因在于，使用补码，可以将符号位和数值域统一处理；</p><p>同时，加法和减法也可以统一处理（<strong>CPU****只有加法器</strong>）此外，补码与原码相互转换，其运算过程</p><p>是相同的，不需要额外的硬件电路。</p></blockquote><h3 id="大端小端"><a href="#大端小端" class="headerlink" title="大端小端"></a>大端小端</h3><blockquote><p>大端（存储）模式，是指数据的低位保存在内存的高地址中，而数据的高位，保存在内存的低地址中；</p><p>小端（存储）模式，是指数据的低位保存在内存的低地址中，而数据的高位,，保存在内存的高地址中。</p></blockquote><p>在计算机系统中，我们是以字节为单位的，每个地址单元都对应着一个字节，一个字节为 8 bit。但是在C语言中除了 8 bit 的 char 之外，还有 16 bit 的 short 型，32 bit 的 long 型（要看具体的编译器），另外，对于位数大于 8 位的处理器，例如 16 位或者 32 位的处理器，由于寄存器宽度大于一个字节，那么必然存在着一个如何将多个字节安排的问题。因此就导致了大端存储模式和小端存储模式。</p><p>例如：一个 16 bit 的 short 型 <code>x</code> ，在内存中的地址为 <code>0x0010</code> ， <code>x</code> 的值为 <code>0x1122</code> ，那么 <code>0x11</code> 为高字节， <code>0x22</code> 为低字节。对于大端模式，就将 <code>0x11</code> 放在低地址中，即 <code>0x0010</code> 中， <code>0x22</code> 放在高地址中，即 <code>0x0011</code> 中。小端模式，刚好相反。我们常用的 <code>X86</code> 结构是小端模式，而 <code>KEIL C51</code> 则为大端模式。很多的 <code>ARM</code>，<code>DSP</code> 都为小端模式。有些 <code>ARM</code> 处理器还可以由硬件来选择是大端模式还是小端模式。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//请简述大端字节序和小端字节序的概念，设计一个小程序来判断当前机器的字节序</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">check_sys</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> i = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> (*(<span class="type">char</span>*)&amp;i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> ret = check_sys();</span><br><span class="line"><span class="keyword">if</span> (ret == <span class="number">1</span>) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;小端\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;大端\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">check_sys</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line"><span class="type">int</span> i;</span><br><span class="line"><span class="type">char</span> c;</span><br><span class="line">&#125;un;</span><br><span class="line">un.i = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">return</span> un.c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输出: a = -1, b = -1, c = 255</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">char</span> a = <span class="number">-1</span>;</span><br><span class="line"><span class="type">signed</span> <span class="type">char</span> b = <span class="number">-1</span>;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> c = <span class="number">-1</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;a = %d, b = %d, c = %d&quot;</span>, a, b, c);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输出: 4294967168</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">char</span> a = <span class="number">-128</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%u\n&quot;</span>, a);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输出: 4294967168</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">char</span> a = <span class="number">128</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%u\n&quot;</span>, a);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输出: -10</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> i = <span class="number">-20</span>;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> j = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, i + j);</span><br><span class="line"><span class="comment">//按照补码的形式进行运算，最后格式化成为有符号整数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> i;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">9</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%u\n&quot;</span>, i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出:</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4294933570</span></span><br><span class="line"><span class="number">4294933569</span></span><br><span class="line"><span class="number">4294933568</span></span><br><span class="line"><span class="number">4294933567</span></span><br><span class="line"><span class="number">4294933566</span></span><br><span class="line"><span class="number">4294933565</span></span><br><span class="line"><span class="number">4294933564</span></span><br><span class="line"><span class="number">4294933563</span></span><br><span class="line"><span class="number">4294933562</span></span><br><span class="line"><span class="number">4294933561</span></span><br><span class="line"><span class="number">4294933560</span></span><br><span class="line"><span class="number">4294933559</span></span><br><span class="line"><span class="number">4294933558</span></span><br><span class="line"><span class="number">4294933557</span></span><br><span class="line"><span class="number">4294933556</span></span><br><span class="line"><span class="number">4294933555</span></span><br><span class="line"><span class="number">4294933554</span></span><br><span class="line"><span class="number">4294933553</span></span><br><span class="line"><span class="number">4294933552</span></span><br><span class="line"><span class="number">4294933551</span></span><br><span class="line"><span class="number">4294933550</span></span><br><span class="line"><span class="number">4294933549</span></span><br><span class="line"><span class="number">4294933548</span></span><br><span class="line"><span class="number">4294933547</span></span><br><span class="line"><span class="number">4294933546</span></span><br><span class="line"><span class="number">4294933545</span></span><br><span class="line"><span class="number">4294933544</span></span><br><span class="line"><span class="number">4294933543</span></span><br><span class="line"><span class="number">4294933542</span></span><br><span class="line"><span class="number">4294933541</span></span><br><span class="line"><span class="number">4294933540</span></span><br><span class="line"><span class="number">4294933539</span></span><br><span class="line"><span class="number">4294933538</span></span><br><span class="line"><span class="number">4294933537</span></span><br><span class="line"><span class="number">4294933536</span></span><br><span class="line"><span class="number">4294933535</span></span><br><span class="line"><span class="number">4294933534</span></span><br><span class="line"><span class="number">4294933533</span></span><br><span class="line"><span class="number">4294933532</span></span><br><span class="line"><span class="number">4294933531</span></span><br><span class="line"><span class="number">4294933530</span></span><br><span class="line"><span class="number">4294933529</span></span><br><span class="line"><span class="number">4294933528</span></span><br><span class="line"><span class="number">4294933527</span></span><br><span class="line"><span class="number">4294933526</span></span><br><span class="line"><span class="number">4294933525</span></span><br><span class="line"><span class="number">4294933524</span></span><br><span class="line"><span class="number">4294933523</span></span><br><span class="line"><span class="number">4294933522</span></span><br><span class="line"><span class="number">4294933521</span></span><br><span class="line"><span class="number">4294933520</span></span><br><span class="line"><span class="number">4294933519</span></span><br><span class="line"><span class="number">4294933518</span></span><br><span class="line"><span class="number">4294933517</span></span><br><span class="line"><span class="number">4294933516</span></span><br><span class="line"><span class="number">4294933515</span></span><br><span class="line"><span class="number">4294933514</span></span><br><span class="line"><span class="number">4294933513</span></span><br><span class="line"><span class="number">4294933512</span></span><br><span class="line"><span class="number">4294933511</span></span><br><span class="line"><span class="number">4294933510</span></span><br><span class="line"><span class="number">4294933509</span></span><br><span class="line"><span class="number">4294933508</span></span><br><span class="line"><span class="number">4294933507</span></span><br><span class="line"><span class="number">4294933506</span></span><br><span class="line"><span class="number">4294933505</span></span><br><span class="line"><span class="number">4294933504</span></span><br><span class="line"><span class="number">4294933503</span></span><br><span class="line"><span class="number">4294933502</span></span><br><span class="line"><span class="number">4294933501</span></span><br><span class="line"><span class="number">4294933500</span></span><br><span class="line"><span class="number">4294933499</span></span><br><span class="line"><span class="number">4294933498</span></span><br><span class="line"><span class="number">4294933497</span></span><br><span class="line"><span class="number">4294933496</span></span><br><span class="line"><span class="number">4294933495</span></span><br><span class="line"><span class="number">4294933494</span></span><br><span class="line"><span class="number">4294933493</span></span><br><span class="line"><span class="number">4294933492</span></span><br><span class="line"><span class="number">4294933491</span></span><br><span class="line"><span class="number">4294933490</span></span><br><span class="line"><span class="number">4294933489</span></span><br><span class="line"><span class="number">4294933488</span></span><br><span class="line"><span class="number">4294933487</span></span><br><span class="line"><span class="number">4294933486</span></span><br><span class="line"><span class="number">4294933485</span></span><br><span class="line"><span class="number">4294933484</span></span><br><span class="line"><span class="number">4294933483</span></span><br><span class="line"><span class="number">4294933482</span></span><br><span class="line"><span class="number">4294933481</span></span><br><span class="line"><span class="number">4294933480</span></span><br><span class="line"><span class="number">4294933479</span></span><br><span class="line"><span class="number">4294933478</span></span><br><span class="line"><span class="number">4294933477</span></span><br><span class="line"><span class="number">4294933476</span></span><br><span class="line"><span class="number">4294933475</span></span><br><span class="line"><span class="number">4294933474</span></span><br><span class="line"><span class="number">4294933473</span></span><br><span class="line"><span class="number">4294933472</span></span><br><span class="line"><span class="number">4294933471</span></span><br><span class="line"><span class="number">4294933470</span></span><br><span class="line"><span class="number">4294933469</span></span><br><span class="line"><span class="number">4294933468</span></span><br><span class="line"><span class="number">4294933467</span></span><br><span class="line"><span class="number">4294933466</span></span><br><span class="line"><span class="number">4294933465</span></span><br><span class="line"><span class="number">4294933464</span></span><br><span class="line"><span class="number">4294933463</span></span><br><span class="line"><span class="number">4294933462</span></span><br><span class="line"><span class="number">4294933461</span></span><br><span class="line"><span class="number">4294933460</span></span><br><span class="line"><span class="number">4294933459</span></span><br><span class="line"><span class="number">4294933458</span></span><br><span class="line"><span class="number">4294933457</span></span><br><span class="line"><span class="number">4294933456</span></span><br><span class="line"><span class="number">4294933455</span></span><br><span class="line"><span class="number">4294933454</span></span><br><span class="line"><span class="number">4294933453</span></span><br><span class="line"><span class="number">4294933452</span></span><br><span class="line"><span class="number">4294933451</span></span><br><span class="line"><span class="number">4294933450</span></span><br><span class="line"><span class="number">4294933449</span></span><br><span class="line"><span class="number">4294933448</span></span><br><span class="line"><span class="number">4294933447</span></span><br><span class="line"><span class="number">4294933446</span></span><br><span class="line"><span class="number">4294933445</span></span><br><span class="line"><span class="number">4294933444</span></span><br><span class="line"><span class="number">4294933443</span></span><br><span class="line"><span class="number">4294933442</span></span><br><span class="line"><span class="number">4294933441</span></span><br><span class="line"><span class="number">4294933440</span></span><br><span class="line"><span class="number">4294933439</span></span><br><span class="line"><span class="number">4294933438</span></span><br><span class="line"><span class="number">4294933437</span></span><br><span class="line"><span class="number">4294933436</span></span><br><span class="line"><span class="number">4294933435</span></span><br><span class="line"><span class="number">4294933434</span></span><br><span class="line"><span class="number">4294933433</span></span><br><span class="line"><span class="number">4294933432</span></span><br><span class="line"><span class="number">4294933431</span></span><br><span class="line"><span class="number">4294933430</span></span><br><span class="line"><span class="number">4294933429</span></span><br><span class="line"><span class="number">4294933428</span></span><br><span class="line"><span class="number">4294933427</span></span><br><span class="line"><span class="number">4294933426</span></span><br><span class="line"><span class="number">4294933425</span></span><br><span class="line"><span class="number">4294933424</span></span><br><span class="line"><span class="number">4294933423</span></span><br><span class="line"><span class="number">4294933422</span></span><br><span class="line"><span class="number">4294933421</span></span><br><span class="line"><span class="number">4294933420</span></span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输出: 255</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">char</span> a[<span class="number">1000</span>];</span><br><span class="line"><span class="type">int</span> i;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">a[i] = <span class="number">-1</span> - i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, <span class="built_in">strlen</span>(a));</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输出: 无限循环 hello world</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>;i &lt;= <span class="number">255</span>;i++) &#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;hello world\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="8-3-浮点型在内存中的存储"><a href="#8-3-浮点型在内存中的存储" class="headerlink" title="8.3 浮点型在内存中的存储"></a>8.3 浮点型在内存中的存储</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输出:</span></span><br><span class="line"><span class="comment">/* n的值为：9</span></span><br><span class="line"><span class="comment"> * *pFloat的值为：0.000000</span></span><br><span class="line"><span class="comment"> * num的值为：1091567616</span></span><br><span class="line"><span class="comment"> * *pFloat的值为：9.000000</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> n = <span class="number">9</span>;</span><br><span class="line"><span class="type">float</span>* pFloat = (<span class="type">float</span>*)&amp;n;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;n的值为：%d\n&quot;</span>, n);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;*pFloat的值为：%f\n&quot;</span>, *pFloat);</span><br><span class="line">*pFloat = <span class="number">9.0</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;num的值为：%d\n&quot;</span>, n);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;*pFloat的值为：%f\n&quot;</span>, *pFloat);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>任意一个二进制浮点数 <code>V</code> 可以表示成下面的形式:</p><ul><li><p>(-1)^S * M * 2^E</p></li><li><p>(-1)^s表示符号位，当s&#x3D;0，V为正数；当s&#x3D;1，V为负数。</p></li><li><p>M表示有效数字，大于等于1，小于2。</p></li><li><p>2^E表示指数位。</p></li></ul><p>十进制的 <code>5.0</code>，写成二进制是 <code>101.0</code> ，相当于 <code>1.01×2^2 </code>。</p><p>那么，按照上面 <code>V</code> 的格式，可以得出 <code>s=0，M=1.01，E=2</code>。</p><p>十进制的 <code>-5.0</code>，写成二进制是 <code>-101.0</code> ，相当于 <code>-1.01×2^2 </code>。那么 <code>s=1，M=1.01，E=2</code>。</p><p>对于 32 位的浮点数，最高的 1 位是符号位 s，接着的 8 位是指数 E，剩下的 23 位为有效数字 M。</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230101183208207.png" alt="float在内存中的存储"></p><p>对于 64 位的浮点数，最高的 1 位是符号位 S，接着的 11 位是指数 E，剩下的 52 位为有效数字 M。</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230101183346779.png" alt="double在内存中存储"></p><p>在计算机内部保存 M 时，默认这个数的第一位总是 1，因此可以被舍去，只保存后面的<code>xxxxxx</code>部分。</p><p>比如保存 1.01 的时候，只保存 01，等到读取的时候，再把第一位的 1 加上去。这样做的目的，是节省 1 位有效数字。</p><p>以 32 位浮点数为例，留给 M 只有 23 位，将第一位的 1 舍去以后，等于可以保存 24 位有效数字。</p><p><strong>至于指数 E，情况就比较复杂。</strong></p><p><strong>首先，E 为一个无符号整数（unsigned int）</strong></p><p>这意味着，如果 E 为 8 位，它的取值范围为 <code>0~255</code>；如果 E 为 11 位，它的取值范围为 <code>0~2047</code>。</p><p>但是，我们知道，科学计数法中的E是可以出现负数的，</p><p>所以 IEEE 754 规定，存入内存时 E 的真实值必须再加上一个中间数，</p><p>对于 8 位的 E，这个中间数是 127；对于 11 位的 E，这个中间数是 1023。</p><p>比如，2^10 的 E 是 10，所以保存成 32 位浮点数时，必须保存成 <code>10+127=137</code>，即 <code>10001001</code>。</p><p>然后，指数E从内存中取出还可以再分成三种情况：</p><ul><li><strong>E 不全为 0 或不全为 1</strong></li></ul><p>这时，浮点数就采用下面的规则表示，</p><p>即指数 E 的计算值减去 127（或1023），得到真实值，再将有效数字 M 前加上第一位的 1。</p><p>比如：</p><p>0.5（1&#x2F;2）的二进制形式为 0.1，由于规定正数部分必须为 1，即将小数点右移 1 位，则为 1.0*2^(-1)，其阶码为 <code>-1+127=126</code>，</p><p>表示为 <code>01111110</code>，而尾数 1.0 去掉整数部分为 0，补齐 0 到 23 位 <code>00000000000000000000000</code>，</p><p>则其二进制表示形式为:</p><blockquote><p> 0 01111110 00000000000000000000000</p></blockquote><ul><li><strong>E 全为 0</strong></li></ul><p>这时，浮点数的指数E等于 1-127（或者1-1023）即为真实值，</p><p>有效数字 M 不再加上第一位的1，而是还原为 <code>0.xxxxxx</code> 的小数。这样做是为了表示 ±0 ，以及接近于 0 的很小的数字。</p><ul><li><strong>E全为 1</strong></li></ul><p>这时，如果有效数字 M 全为 0，表示 <code>±无穷大</code>（正负取决于符号位 s）；</p><p>下面，让我们回到一开始的问题：为什么 <code>0x00000009</code> 还原成浮点数，就成了 <code>0.000000</code> ？</p><p>首先，将 <code>0x00000009</code> 拆分，得到第一位符号位 s&#x3D;0，后面 8 位的指数 E&#x3D;00000000 ，</p><p>最后 23 位的有效数字 <code>M=000 0000 0000 0000 0000 1001</code>。</p><blockquote><p>9 -&gt; 0000 0000 0000 0000 0000 0000 0000 1001</p></blockquote><p>由于指数 E 全为 0，所以符合上一节的第二种情况。因此，浮点数 V 就写成：</p><blockquote><p>V&#x3D;(-1)^0 × 0.00000000000000000001001×2^(-126)&#x3D;1.001×2^(-146)</p></blockquote><p>显然，V 是一个很小的接近于 0 的正数，所以用十进制小数表示就是 <code>0.000000</code>。</p><p>再看例题的第二部分。</p><p>请问浮点数 9.0，如何用二进制表示？还原成十进制又是多少？</p><p>首先，浮点数 9.0 等于二进制的 1001.0，即 <code>1.001×2^3</code>。</p><blockquote><p>9.0 -&gt; 1001.0 -&gt;(-1)^01.0012^3 -&gt; s&#x3D;0, M&#x3D;1.001,E&#x3D;3+127&#x3D;130</p></blockquote><p>那么，第一位的符号位 s&#x3D;0，有效数字 M 等于 001 后面再加 20 个 0，凑满 23 位，指数 E 等于 <code>3+127=130</code>，即 <code>10000010</code>。</p><p>所以，写成二进制形式，应该是 s+E+M，即</p><blockquote><p> 0 10000010 001 0000 0000 0000 0000 0000</p></blockquote><p>这个 32 位的二进制数，还原成十进制，正是 <code>1091567616 </code>。</p>]]></content>
      
      
      <categories>
          
          <category> C/C++/Go </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C语言 </tag>
            
            <tag> 408 </tag>
            
            <tag> 复习 </tag>
            
            <tag> 考研 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly美化之路（二）</title>
      <link href="/2022/12/29/Butterfly%E7%BE%8E%E5%8C%96%E4%B9%8B%E8%B7%AF%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2022/12/29/Butterfly%E7%BE%8E%E5%8C%96%E4%B9%8B%E8%B7%AF%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="Butterfly美化之路（二）"><a href="#Butterfly美化之路（二）" class="headerlink" title="Butterfly美化之路（二）"></a>Butterfly美化之路（二）</h1><h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><p>我的博客使用的是 <code>Hexo</code> + <code>GitHub</code> 搭建在线博客，主题用的是 <code>Butterfly</code>，教程及官方文档均可在网上找到，我只是在这里记录一些自己的感受，以防以后玩崩了找不到回家的路</p><p>**本文中，如果没有特殊说明，修改的文件一律为 <em>主题配置文件</em> **</p><p>参考文档:</p><p>Butterfly安装文档:<a href="https://butterfly.js.org/posts/21cfbf15/">https://butterfly.js.org/posts/21cfbf15/</a></p><p>Fomalhaut的分享: <a href="https://www.fomal.cc/">https://www.fomal.cc/</a></p><p>Akilarの糖果屋: <a href="https://akilar.top/">https://akilar.top/</a></p><hr><h2 id="二、一图流"><a href="#二、一图流" class="headerlink" title="二、一图流"></a>二、一图流</h2><p>在 <code>source</code> 文件夹下新建一个文件夹 <code>css</code>，该文件夹用于存放自定义的 css 样式，再新建一个名为 <code>custom.css</code>，</p><p>在里面写入以下代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 页脚与头图透明 */</span></span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#page-header</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 白天模式遮罩透明 */</span></span><br><span class="line"><span class="selector-id">#footer</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 夜间模式遮罩透明 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#footer</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在<strong>主题配置文件</strong> <code>inject.head</code> 下添加引入</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;</span> <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230101212501304.png" alt="引入自定义样式文件"></p><p>将之前设置的背景图置空, 避免冗余加载</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Disable all banner image</span></span><br><span class="line"><span class="attr">disable_top_img:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The banner image of home page</span></span><br><span class="line"><span class="attr">index_img:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># If the banner of page not setting, it will show the top_img</span></span><br><span class="line"><span class="attr">default_top_img:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The banner image of archive page</span></span><br><span class="line"><span class="attr">archive_img:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># If the banner of tag page not setting, it will show the top_img</span></span><br><span class="line"><span class="comment"># <span class="doctag">note:</span> tag page, not tags page (子標籤頁面的 top_img)</span></span><br><span class="line"><span class="attr">tag_img:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The banner image of tag page</span></span><br><span class="line"><span class="comment"># format:</span></span><br><span class="line"><span class="comment">#  - tag name: xxxxx</span></span><br><span class="line"><span class="attr">tag_per_img:</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># If the banner of category page not setting, it will show the top_img</span></span><br><span class="line"><span class="comment"># <span class="doctag">note:</span> category page, not categories page (子分類頁面的 top_img)</span></span><br><span class="line"><span class="attr">category_img:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The banner image of category page</span></span><br><span class="line"><span class="comment"># format:</span></span><br><span class="line"><span class="comment">#  - category name: xxxxx</span></span><br><span class="line"><span class="attr">category_per_img:</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230101212712442.png" alt="置空设置"></p><hr><h2 id="三、新增留言板"><a href="#三、新增留言板" class="headerlink" title="三、新增留言板"></a>三、新增留言板</h2><p>新建留言板路径</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page comments</span><br></pre></td></tr></table></figure><p>导航栏添加</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">留言板:</span> <span class="string">/comments/</span> <span class="string">||fas</span> <span class="string">fa-envelope-open</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221202140800243.png" alt="导航栏添加留言板"></p><p>配置文件添加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># envelope_comment</span><br><span class="line"># see https://akilar.top/posts/e2d3c450/</span><br><span class="line">envelope_comment:</span><br><span class="line">  enable: true #控制开关</span><br><span class="line">  custom_pic:</span><br><span class="line">    cover: https://npm.elemecdn.com/hexo-butterfly-envelope/lib/violet.jpg #信笺头部图片</span><br><span class="line">    line: https://npm.elemecdn.com/hexo-butterfly-envelope/lib/line.png #信笺底部图片</span><br><span class="line">    beforeimg: https://npm.elemecdn.com/hexo-butterfly-envelope/lib/before.png # 信封前半部分</span><br><span class="line">    afterimg: https://npm.elemecdn.com/hexo-butterfly-envelope/lib/after.png # 信封后半部分</span><br><span class="line">  message: #信笺正文，多行文本，写法如下</span><br><span class="line">    - 有什么想问的？</span><br><span class="line">    - 有什么想说的？</span><br><span class="line">    - 有什么想吐槽的？</span><br><span class="line">    - 哪怕是有什么想吃的，都可以告诉我哦~</span><br><span class="line">  bottom: 自动书记人偶竭诚为您服务！ #仅支持单行文本</span><br><span class="line">  height: #1050px，信封划出的高度</span><br><span class="line">  path: #【可选】comments 的路径名称。默认为 comments，生成的页面为 comments/index.html</span><br><span class="line">  front_matter: #【可选】comments页面的 front_matter 配置</span><br><span class="line">    title: 留言板</span><br><span class="line">    comments: true</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230101213511795.png" alt="留言板设置"></p><hr><h2 id="四、页脚GitHub徽标"><a href="#四、页脚GitHub徽标" class="headerlink" title="四、页脚GitHub徽标"></a>四、页脚GitHub徽标</h2><p>安装插件:</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-footer-beautify --save</span><br></pre></td></tr></table></figure><p>添加配置项</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># footer_beautify</span></span><br><span class="line"><span class="comment"># 页脚计时器：[Native JS Timer](https://akilar.top/posts/b941af/)</span></span><br><span class="line"><span class="comment"># 页脚徽标：[Add Github Badge](https://akilar.top/posts/e87ad7f8/)</span></span><br><span class="line"><span class="attr">footer_beautify:</span></span><br><span class="line">  <span class="attr">enable:</span></span><br><span class="line">    <span class="attr">timer:</span> <span class="literal">true</span> <span class="comment"># 计时器开关</span></span><br><span class="line">    <span class="attr">bdage:</span> <span class="literal">true</span> <span class="comment"># 徽标开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment">#过滤器优先权</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">all</span> <span class="comment"># 应用页面</span></span><br><span class="line">  <span class="attr">exclude:</span> <span class="comment">#屏蔽页面</span></span><br><span class="line">  <span class="comment"># - /posts/</span></span><br><span class="line">  <span class="comment"># - /about/</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="comment"># 挂载容器类型</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">id</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">footer-wrap</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="comment"># 计时器部分配置项（看你喜欢哪个，最好下载下来放到自己的项目中不然会增加我网站的负载）</span></span><br><span class="line">  <span class="comment"># 这是我的</span></span><br><span class="line">  <span class="comment"># runtime_js: https://www.fomal.cc/static/js/runtime.js</span></span><br><span class="line">  <span class="comment"># runtime_css: https://www.fomal.cc/static/css/runtime.min.css</span></span><br><span class="line">  <span class="comment"># 这是店长的</span></span><br><span class="line">  <span class="attr">runtime_js:</span> <span class="string">/js/runtime.js</span></span><br><span class="line">  <span class="attr">runtime_css:</span> <span class="string">/css/runtime.css</span></span><br><span class="line">  <span class="comment"># 徽标部分配置项</span></span><br><span class="line">  <span class="attr">swiperpara:</span> <span class="number">0</span> <span class="comment">#若非0，则开启轮播功能，每行徽标个数</span></span><br><span class="line">  <span class="attr">bdageitem:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://hexo.io/</span> <span class="comment">#徽标指向网站链接</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo</span> <span class="comment">#徽标API</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">博客框架为Hexo_v6.3.0</span> <span class="comment">#徽标提示语</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://butterfly.js.org/</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">主题版本Butterfly_v4.5.1</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://vercel.com/</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">本站采用多线部署，主线路托管于Vercel</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://dashboard.4everland.org/</span></span><br><span class="line">      <span class="comment"># https://img.shields.io/badge/Hosted-4EVERLAND-3FE2C1?style=flat&amp;logo=IPFS</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Hosted-4EVERLAND-22DDDD?style=flat&amp;logo=IPFS</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">本站采用多线部署，备用线路托管于4EVERLAND</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://github.com/</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">本站项目由Github托管</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">http://creativecommons.org/licenses/by-nc-sa/4.0/</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可</span></span><br><span class="line">  <span class="attr">swiper_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css</span></span><br><span class="line">  <span class="attr">swiper_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js</span></span><br><span class="line">  <span class="attr">swiperbdage_init_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-footer-beautify/lib/swiperbdage_init.min.js</span></span><br></pre></td></tr></table></figure><p><code>runtime.css</code></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*电子钟字体*/</span></span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">&#x27;UnidreamLED&#x27;</span>;</span><br><span class="line">    <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&quot;https://cdn.jsdelivr.net/npm/akilar-candyassets/fonts/UnidreamLED.ttf&quot;</span>);</span><br><span class="line">    <span class="attribute">font-display</span>: swap;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#runtime</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">padding-inline</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.7</span>);</span><br><span class="line">    <span class="comment">/*font-family: &#x27;UnidreamLED&#x27;;*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#runtime</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#28b4c8</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">28</span>,<span class="number">69</span>,<span class="number">218</span>,<span class="number">0.71</span>);</span><br><span class="line">    <span class="attribute">animation</span>: flashlight <span class="number">1s</span> linear infinite alternate;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*悬停显示徽标提示语*/</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.github-badge</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">width</span>: fit-content;</span><br><span class="line">    <span class="attribute">margin</span>: auto;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">10%</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">attr</span>(data-title);</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--text-bg-hover);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span> <span class="selector-tag">a</span><span class="selector-class">.github-badge</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">18</span>,<span class="number">18</span>,<span class="number">18</span>,<span class="number">0.8</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-moz-keyframes</span> flashlight &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#1478d2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">#1478d2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> flashlight &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#1478d2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">#1478d2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-o-keyframes</span> flashlight &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#1478d2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">#1478d2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> flashlight &#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#1478d2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">#1478d2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>runtime.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> create_time = <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2022-12-1 00:00:00&#x27;</span>).<span class="title function_">getTime</span>() / <span class="number">1000</span>); <span class="comment">//在此行修改建站时间</span></span><br><span class="line">    <span class="keyword">let</span> timestamp = <span class="title class_">Math</span>.<span class="title function_">round</span>((<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>()) / <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">let</span> second = timestamp - create_time;</span><br><span class="line">    <span class="keyword">let</span> time = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> nol = <span class="keyword">function</span>(<span class="params">h</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> h&gt;<span class="number">9</span>?<span class="attr">h</span>:<span class="string">&#x27;0&#x27;</span>+h;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (second &gt;= <span class="number">365</span> * <span class="number">24</span> * <span class="number">3600</span>) &#123;</span><br><span class="line">        time[<span class="number">0</span>] = <span class="built_in">parseInt</span>(second / (<span class="number">365</span> * <span class="number">24</span> * <span class="number">3600</span>));</span><br><span class="line">        second %= <span class="number">365</span> * <span class="number">24</span> * <span class="number">3600</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (second &gt;= <span class="number">24</span> * <span class="number">3600</span>) &#123;</span><br><span class="line">        time[<span class="number">1</span>] = <span class="built_in">parseInt</span>(second / (<span class="number">24</span> * <span class="number">3600</span>));</span><br><span class="line">        second %= <span class="number">24</span> * <span class="number">3600</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (second &gt;= <span class="number">3600</span>) &#123;</span><br><span class="line">        time[<span class="number">2</span>] = <span class="title function_">nol</span>(<span class="built_in">parseInt</span>(second / <span class="number">3600</span>));</span><br><span class="line">        second %= <span class="number">3600</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (second &gt;= <span class="number">60</span>) &#123;</span><br><span class="line">        time[<span class="number">3</span>] = <span class="title function_">nol</span>(<span class="built_in">parseInt</span>(second / <span class="number">60</span>));</span><br><span class="line">        second %= <span class="number">60</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (second &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        time[<span class="number">4</span>] = <span class="title function_">nol</span>(second);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ((<span class="title class_">Number</span>(time[<span class="number">2</span>])&lt;<span class="number">22</span>) &amp;&amp; (<span class="title class_">Number</span>(time[<span class="number">2</span>])&gt;<span class="number">7</span>))&#123;</span><br><span class="line">        currentTimeHtml =<span class="string">&quot;&lt;img class=&#x27;boardsign&#x27; src=&#x27;https://img.shields.io/badge/月华.の冒险-开始了-6adea8?style=social&amp;logo=cakephp&#x27; title=&#x27;今天会发生什么奇妙的事呢？&#x27;&gt;&lt;div id=&#x27;runtime&#x27;&gt;&quot;</span> + time[<span class="number">0</span>] + <span class="string">&#x27; YEAR &#x27;</span> + time[<span class="number">1</span>] + <span class="string">&#x27; DAYS &#x27;</span> + time[<span class="number">2</span>] + <span class="string">&#x27; : &#x27;</span> + time[<span class="number">3</span>] + <span class="string">&#x27; : &#x27;</span> + time[<span class="number">4</span>] + <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        currentTimeHtml =<span class="string">&quot;&lt;img class=&#x27;boardsign&#x27; src=&#x27;https://img.shields.io/badge/月华.的冒险-有些累了-6adea8?style=social&amp;logo=coffeescript&#x27; title=&#x27;为了明天的冒险，今天先暂时休息吧&#x27;&gt;&lt;div id=&#x27;runtime&#x27;&gt;&quot;</span> + time[<span class="number">0</span>] + <span class="string">&#x27; YEAR &#x27;</span> + time[<span class="number">1</span>] + <span class="string">&#x27; DAYS &#x27;</span> + time[<span class="number">2</span>] + <span class="string">&#x27; : &#x27;</span> + time[<span class="number">3</span>] + <span class="string">&#x27; : &#x27;</span> + time[<span class="number">4</span>] + <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;workboard&quot;</span>).<span class="property">innerHTML</span> = currentTimeHtml;</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230101214827849.png" alt="文件位置"></p><table><thead><tr><th>参数</th><th>备选值&#x2F;类型</th><th>释义</th></tr></thead><tbody><tr><td>priority</td><td>number</td><td>【可选】过滤器优先级，数值越小，执行越早，默认为10，选填</td></tr><tr><td>enable.timer</td><td>true&#x2F;false</td><td>【必选】计时器控制开关</td></tr><tr><td>enable.bdage</td><td>true&#x2F;false</td><td>【必选】徽标控制开关</td></tr><tr><td>enable_page</td><td>path</td><td>【可选】填写想要应用的页面,如根目录就填 <code>/</code>,分类页面就填 <code>/categories/</code>。若要应用于所有页面，就填 <code>all</code>，默认为<code>all</code></td></tr><tr><td>exclude</td><td>path</td><td>【可选】填写想要屏蔽的页面，可以多个。仅当 enable_page 为 <code>all</code> 时生效。写法见示例。原理是将屏蔽项的内容逐个放到当前路径去匹配，若当前路径包含任一屏蔽项，则不会挂载。</td></tr><tr><td>layout.type</td><td>id&#x2F;class</td><td>【可选】挂载容器类型，填写 id 或 class，不填则默认为id</td></tr><tr><td>layout.name</td><td>text</td><td>【必选】挂载容器名称</td></tr><tr><td>layout.index</td><td>0和正整数</td><td>【可选】前提是 layout.type 为 class，因为同一页面可能有多个 class，此项用来确认究竟排在第几个顺位</td></tr><tr><td>runtime_js</td><td>url</td><td>【必选】页脚计时器脚本，可以下载上文填写示例的链接，参照注释和<a href="https://akilar.top/posts/b941af/">教程：Native JS Timer</a>自行修改。</td></tr><tr><td>runtime_css</td><td>url</td><td>【可选】自定义样式，预留开发者接口，可自行下载。</td></tr><tr><td>swiperpara</td><td>number</td><td>【可选】若非零，则开启轮播功能，此项表示每行最多容纳徽标个数，用来应对徽标过多显得页脚拥挤的问题</td></tr><tr><td>bdageitem.link</td><td>url</td><td>【可选】页脚徽标指向的网站链接</td></tr><tr><td>bdageitem.shields</td><td>url</td><td>【必选】页脚徽标对应的API，API具体写法示例参照<a href="https://akilar.top/posts/e87ad7f8/">教程Add Github Badge</a></td></tr><tr><td>bdageitem.message</td><td>text</td><td>【可选】页脚徽标悬停时显示的信息</td></tr><tr><td>swiper_css</td><td>url</td><td>【可选】swiper的依赖</td></tr><tr><td>swiper_js</td><td>url</td><td>【可选】swiper的依赖</td></tr><tr><td>swiperbdage_init_js</td><td>url</td><td>【可选】swiper初始化方法</td></tr></tbody></table><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230101214851803.png" alt="效果"></p><hr><h2 id="五、首页分类磁贴"><a href="#五、首页分类磁贴" class="headerlink" title="五、首页分类磁贴"></a>五、首页分类磁贴</h2><p>安装插件:</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-categories-card --save</span><br></pre></td></tr></table></figure><p>添加配置项</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo-butterfly-categories-card</span></span><br><span class="line"><span class="comment"># see https://akilar.top/posts/a9131002/</span></span><br><span class="line"><span class="attr">categoryBar:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment">#过滤器优先权</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">/</span> <span class="comment"># 应用页面</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="comment"># 挂载容器类型</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">id</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">recent-posts</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">column:</span> <span class="string">odd</span> <span class="comment"># odd：3列 | even：4列</span></span><br><span class="line">  <span class="attr">row:</span> <span class="number">2</span> <span class="comment">#显示行数，默认两行，超过行数切换为滚动显示</span></span><br><span class="line">  <span class="attr">message:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">descr:</span> <span class="string">Docs文档</span></span><br><span class="line">      <span class="attr">cover:</span> <span class="string">/img/夏日重现3.jpg</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">descr:</span> <span class="number">408</span></span><br><span class="line">      <span class="attr">cover:</span> <span class="string">/img/夏日重现2.jpg</span></span><br><span class="line">  <span class="attr">custom_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>备选值&#x2F;类型</th><th>释义</th></tr></thead><tbody><tr><td>priority</td><td>number</td><td>【可选】过滤器优先级，数值越小，执行越早，默认为 10 ，选填</td></tr><tr><td>enable</td><td>true&#x2F;false</td><td>【必选】控制开关</td></tr><tr><td>enable_page</td><td>path&#x2F;all</td><td>【可选】填写想要应用的页面的相对路径（即路由地址）,如根目录就填 <code>/</code>,分类页面就填 <code>/categories/</code>。若要应用于所有页面，就填 <code>all</code>，默认为 <code>/</code></td></tr><tr><td>layout.type</td><td>id&#x2F;class</td><td>【可选】挂载容器类型，填写 id 或 class，不填则默认为 id</td></tr><tr><td>layout.name</td><td>text</td><td>【必选】挂载容器名称</td></tr><tr><td>layout.index</td><td>0和正整数</td><td>【可选】前提是 layout.type 为class，因为同一页面可能有多个 class ，此项用来确认究竟排在第几个顺位</td></tr><tr><td>column</td><td>odd&#x2F;even</td><td>【可选】显示列数，考虑到比例问题，只提供3列和4列，odd为3列， even为4列</td></tr><tr><td>row</td><td>number</td><td>【可选】显示行数，默认两行，超过行数切换为滚动显示</td></tr><tr><td>message.descr</td><td>text</td><td>分类描述,需要和你自己的文章分类一一对应。</td></tr><tr><td>message.cover</td><td>url</td><td>分类背景,需要和你自己的文章分类一一对应。</td></tr><tr><td>custom_css</td><td>url</td><td>【可选】自定义样式，会替换默认的css链接，可以下载文档给出的cdn链接后自主修改</td></tr></tbody></table><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230101204432054.png" alt="首页分类磁贴设置"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230101204503149.png" alt="分类磁贴效果"></p><hr><h2 id="六、文章置顶滚动栏"><a href="#六、文章置顶滚动栏" class="headerlink" title="六、文章置顶滚动栏"></a>六、文章置顶滚动栏</h2><p>安装插件:</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-swiper --save</span><br></pre></td></tr></table></figure><p>添加配置项</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo-butterfly-swiper</span></span><br><span class="line"><span class="comment"># see https://akilar.top/posts/8e1264d1/</span></span><br><span class="line"><span class="attr">swiper:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment">#过滤器优先权</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">/</span> <span class="comment"># 应用页面</span></span><br><span class="line">  <span class="attr">timemode:</span> <span class="string">date</span> <span class="comment">#date/updated</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="comment"># 挂载容器类型</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">id</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">recent-posts</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">default_descr:</span> <span class="string">感兴趣就点进来看看吧</span></span><br><span class="line">  <span class="attr">swiper_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css</span> <span class="comment">#swiper css依赖</span></span><br><span class="line">  <span class="attr">swiper_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js</span> <span class="comment">#swiper js依赖</span></span><br><span class="line">  <span class="attr">custom_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css</span> <span class="comment"># 适配主题样式补丁</span></span><br><span class="line">  <span class="attr">custom_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js</span> <span class="comment"># swiper初始化方法</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>备选值&#x2F;类型</th><th>释义</th></tr></thead><tbody><tr><td>priority</td><td>number</td><td>【可选】过滤器优先级，数值越小，执行越早，默认为 10，选填</td></tr><tr><td>enable</td><td>true&#x2F;false</td><td>【必选】控制开关</td></tr><tr><td>enable_page</td><td>path&#x2F;all</td><td>【可选】填写想要应用的页面的相对路径（即路由地址）,如根目录就填 <code>/</code>,分类页面就填 <code>/categories/</code>。若要应用于所有页面，就填 <code>all</code>，默认为 all</td></tr><tr><td>timemode</td><td>date&#x2F;updated</td><td>【可选】时间显示，date 为显示创建日期，updated 为显示更新日期,默认为 date</td></tr><tr><td>layout.type</td><td>id&#x2F;class</td><td>【可选】挂载容器类型，填写 id 或 class，不填则默认为 id</td></tr><tr><td>layout.name</td><td>text</td><td>【必选】挂载容器名称</td></tr><tr><td>layout.index</td><td>0和正整数</td><td>【可选】前提是 layout.type 为 class，因为同一页面可能有多个 class，此项用来确认究竟排在第几个顺位</td></tr><tr><td>default_descr</td><td>text</td><td>默认文章描述</td></tr><tr><td>swiper_css</td><td>url</td><td>【可选】自定义的swiper依赖项css链接</td></tr><tr><td>swiper_js</td><td>url</td><td>【可选】自定义的swiper依赖项加js链接</td></tr><tr><td>custom_css</td><td>url</td><td>【可选】适配主题样式补丁</td></tr><tr><td>custom_js</td><td>url</td><td>【可选】swiper初始化方法</td></tr></tbody></table><p>使用方法: 在要使用的文章的 <code>fromt_matter</code> 中添加配置项</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swiper<span class="emphasis">_index: 1 #置顶轮播图顺序，非负整数，数字越大越靠前</span></span><br></pre></td></tr></table></figure><hr><h2 id="七、文章双侧栏显示"><a href="#七、文章双侧栏显示" class="headerlink" title="七、文章双侧栏显示"></a>七、文章双侧栏显示</h2><p>安装插件:</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-butterfly-article-double-row --save</span><br></pre></td></tr></table></figure><p>在<strong>博客配置文件</strong>中添加配置</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文章双侧栏显示</span></span><br><span class="line"><span class="attr">butterfly_article_double_row:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230101211908625.png" alt="文章双侧栏显示设置"></p><p>在 <code>custom.css</code> 中添加代码</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 翻页按钮居中 */</span></span><br><span class="line"><span class="selector-id">#pagination</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221202143816511.png" alt="技术页bug修复"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230101212036858.png" alt="效果"></p><hr><h2 id="八、wow-js动画"><a href="#八、wow-js动画" class="headerlink" title="八、wow.js动画"></a>八、wow.js动画</h2><p>安装插件:</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-wowjs --save</span><br></pre></td></tr></table></figure><p>添加配置项</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">wowjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#控制动画开关。true是打开，false是关闭</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">10</span> <span class="comment">#过滤器优先级</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">true</span> <span class="comment">#移动端是否启用，默认移动端禁用</span></span><br><span class="line">  <span class="attr">animateitem:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">recent-post-item</span> <span class="comment">#必填项，需要添加动画的元素的class</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span> <span class="comment">#必填项，需要添加的动画</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">1s</span> <span class="comment">#选填项，动画持续时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="string">0s</span> <span class="comment">#选填项，动画开始的延迟时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">offset:</span> <span class="number">100</span> <span class="comment">#选填项，开始动画的距离（相对浏览器底部）</span></span><br><span class="line">      <span class="attr">iteration:</span> <span class="number">1</span> <span class="comment">#选填项，动画重复的次数</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">card-widget</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__zoomIn</span></span><br><span class="line">  <span class="attr">animate_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css</span></span><br><span class="line">  <span class="attr">wow_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js</span></span><br><span class="line">  <span class="attr">wow_init_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>备选值&#x2F;类型</th><th>释义</th></tr></thead><tbody><tr><td>enable</td><td>true&#x2F;false</td><td>【必选】控制开关</td></tr><tr><td>priority</td><td>number</td><td>【可选】过滤器优先级，数值越小，执行越早，默认为10，选填</td></tr><tr><td>mobile</td><td>true&#x2F;false</td><td>控制移动端是否启用，默认移动端禁用</td></tr><tr><td>animateitem.class</td><td>class</td><td>【可选】添加动画类名，只支持给class添加</td></tr><tr><td>animateitem.style</td><td>text</td><td>【可选】动画样式，具体类型参考<a href="https://animate.style/">animate.css</a></td></tr><tr><td>animateitem.duration</td><td>time,单位为s或ms</td><td>【可选】动画持续时间，单位可以是ms也可以是s。例如3s，700ms。</td></tr><tr><td>animateitem.delay</td><td>time,单位为s或ms</td><td>【可选】动画开始的延迟时间，单位可以是ms也可以是s。例如3s，700ms。</td></tr><tr><td>animateitem.offset</td><td>number,单位为px</td><td>【可选】开始动画的距离（相对浏览器底部）。</td></tr><tr><td>animateitem.iteration</td><td>number,单位为s或ms</td><td>【可选】动画重复的次数</td></tr><tr><td>animate_css</td><td>URL</td><td>【可选】animate.css的CDN链接,默认为<code>https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css</code></td></tr><tr><td>wow_js</td><td>URL</td><td>【可选】wow.min.js的CDN链接,默认为<code>https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js</code></td></tr><tr><td>wow_init_js</td><td>URL</td><td>【可选】wow_init.js的CDN链接,默认为<code>https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js</code></td></tr></tbody></table><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230101210621319.png" alt="wow.js动画设置"></p><hr><h2 id="九、改变导航栏"><a href="#九、改变导航栏" class="headerlink" title="九、改变导航栏"></a>九、改变导航栏</h2><blockquote><p>如果子菜单也需要导航栏魔改请参考前言中的参考文档</p></blockquote><p>在 <code>custom.css</code> 中添加代码</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 一级菜单居中 */</span></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">width</span>: fit-content <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line">  <span class="comment">/* 子菜单横向展示 */</span></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.menus_item_child</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line">  <span class="comment">/* 这里的2是代表导航栏的第2个元素，即有子菜单的元素，可以按自己需求修改 */</span></span><br><span class="line"><span class="selector-class">.menus_items</span> <span class="selector-class">.menus_item</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) <span class="selector-class">.menus_item_child</span> &#123;</span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">125px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230101211027323.png" alt="导航栏魔改设置"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230101211148936.png" alt="导航栏魔改效果"></p><hr><h2 id="十、星空背景-amp-流星特效"><a href="#十、星空背景-amp-流星特效" class="headerlink" title="十、星空背景&amp;流星特效"></a>十、星空背景&amp;流星特效</h2><p>在 <code>source/js</code> 下新建<code>universe.js</code></p><p>写入以下代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">dark</span>(<span class="params"></span>) &#123;<span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span>=<span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span>||<span class="variable language_">window</span>.<span class="property">mozRequestAnimationFrame</span>||<span class="variable language_">window</span>.<span class="property">webkitRequestAnimationFrame</span>||<span class="variable language_">window</span>.<span class="property">msRequestAnimationFrame</span>;<span class="keyword">var</span> n,e,i,h,t=<span class="number">.05</span>,s=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;universe&quot;</span>),o=!<span class="number">0</span>,a=<span class="string">&quot;180,184,240&quot;</span>,r=<span class="string">&quot;226,225,142&quot;</span>,d=<span class="string">&quot;226,225,224&quot;</span>,c=[];<span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>)&#123;n=<span class="variable language_">window</span>.<span class="property">innerWidth</span>,e=<span class="variable language_">window</span>.<span class="property">innerHeight</span>,i=<span class="number">.216</span>*n,s.<span class="title function_">setAttribute</span>(<span class="string">&quot;width&quot;</span>,n),s.<span class="title function_">setAttribute</span>(<span class="string">&quot;height&quot;</span>,e)&#125;<span class="keyword">function</span> <span class="title function_">u</span>(<span class="params"></span>)&#123;h.<span class="title function_">clearRect</span>(<span class="number">0</span>,<span class="number">0</span>,n,e);<span class="keyword">for</span>(<span class="keyword">var</span> t=c.<span class="property">length</span>,i=<span class="number">0</span>;i&lt;t;i++)&#123;<span class="keyword">var</span> s=c[i];s.<span class="title function_">move</span>(),s.<span class="title function_">fadeIn</span>(),s.<span class="title function_">fadeOut</span>(),s.<span class="title function_">draw</span>()&#125;&#125;<span class="keyword">function</span> <span class="title function_">y</span>(<span class="params"></span>)&#123;<span class="variable language_">this</span>.<span class="property">reset</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">this</span>.<span class="property">giant</span>=<span class="title function_">m</span>(<span class="number">3</span>),<span class="variable language_">this</span>.<span class="property">comet</span>=!<span class="variable language_">this</span>.<span class="property">giant</span>&amp;&amp;!o&amp;&amp;<span class="title function_">m</span>(<span class="number">10</span>),<span class="variable language_">this</span>.<span class="property">x</span>=<span class="title function_">l</span>(<span class="number">0</span>,n-<span class="number">10</span>),<span class="variable language_">this</span>.<span class="property">y</span>=<span class="title function_">l</span>(<span class="number">0</span>,e),<span class="variable language_">this</span>.<span class="property">r</span>=<span class="title function_">l</span>(<span class="number">1.1</span>,<span class="number">2.6</span>),<span class="variable language_">this</span>.<span class="property">dx</span>=<span class="title function_">l</span>(t,<span class="number">6</span>*t)+(<span class="variable language_">this</span>.<span class="property">comet</span>+<span class="number">1</span>-<span class="number">1</span>)*t*<span class="title function_">l</span>(<span class="number">50</span>,<span class="number">120</span>)+<span class="number">2</span>*t,<span class="variable language_">this</span>.<span class="property">dy</span>=-<span class="title function_">l</span>(t,<span class="number">6</span>*t)-(<span class="variable language_">this</span>.<span class="property">comet</span>+<span class="number">1</span>-<span class="number">1</span>)*t*<span class="title function_">l</span>(<span class="number">50</span>,<span class="number">120</span>),<span class="variable language_">this</span>.<span class="property">fadingOut</span>=<span class="literal">null</span>,<span class="variable language_">this</span>.<span class="property">fadingIn</span>=!<span class="number">0</span>,<span class="variable language_">this</span>.<span class="property">opacity</span>=<span class="number">0</span>,<span class="variable language_">this</span>.<span class="property">opacityTresh</span>=<span class="title function_">l</span>(<span class="number">.2</span>,<span class="number">1</span>-<span class="number">.4</span>*(<span class="variable language_">this</span>.<span class="property">comet</span>+<span class="number">1</span>-<span class="number">1</span>)),<span class="variable language_">this</span>.<span class="property">do</span>=<span class="title function_">l</span>(<span class="number">5e-4</span>,<span class="number">.002</span>)+<span class="number">.001</span>*(<span class="variable language_">this</span>.<span class="property">comet</span>+<span class="number">1</span>-<span class="number">1</span>)&#125;,<span class="variable language_">this</span>.<span class="property">fadeIn</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">this</span>.<span class="property">fadingIn</span>&amp;&amp;(<span class="variable language_">this</span>.<span class="property">fadingIn</span>=!(<span class="variable language_">this</span>.<span class="property">opacity</span>&gt;<span class="variable language_">this</span>.<span class="property">opacityTresh</span>),<span class="variable language_">this</span>.<span class="property">opacity</span>+=<span class="variable language_">this</span>.<span class="property">do</span>)&#125;,<span class="variable language_">this</span>.<span class="property">fadeOut</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">this</span>.<span class="property">fadingOut</span>&amp;&amp;(<span class="variable language_">this</span>.<span class="property">fadingOut</span>=!(<span class="variable language_">this</span>.<span class="property">opacity</span>&lt;<span class="number">0</span>),<span class="variable language_">this</span>.<span class="property">opacity</span>-=<span class="variable language_">this</span>.<span class="property">do</span>/<span class="number">2</span>,(<span class="variable language_">this</span>.<span class="property">x</span>&gt;n||<span class="variable language_">this</span>.<span class="property">y</span>&lt;<span class="number">0</span>)&amp;&amp;(<span class="variable language_">this</span>.<span class="property">fadingOut</span>=!<span class="number">1</span>,<span class="variable language_">this</span>.<span class="title function_">reset</span>()))&#125;,<span class="variable language_">this</span>.<span class="property">draw</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">if</span>(h.<span class="title function_">beginPath</span>(),<span class="variable language_">this</span>.<span class="property">giant</span>)h.<span class="property">fillStyle</span>=<span class="string">&quot;rgba(&quot;</span>+a+<span class="string">&quot;,&quot;</span>+<span class="variable language_">this</span>.<span class="property">opacity</span>+<span class="string">&quot;)&quot;</span>,h.<span class="title function_">arc</span>(<span class="variable language_">this</span>.<span class="property">x</span>,<span class="variable language_">this</span>.<span class="property">y</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">2</span>*<span class="title class_">Math</span>.<span class="property">PI</span>,!<span class="number">1</span>);<span class="keyword">else</span> <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">comet</span>)&#123;h.<span class="property">fillStyle</span>=<span class="string">&quot;rgba(&quot;</span>+d+<span class="string">&quot;,&quot;</span>+<span class="variable language_">this</span>.<span class="property">opacity</span>+<span class="string">&quot;)&quot;</span>,h.<span class="title function_">arc</span>(<span class="variable language_">this</span>.<span class="property">x</span>,<span class="variable language_">this</span>.<span class="property">y</span>,<span class="number">1.5</span>,<span class="number">0</span>,<span class="number">2</span>*<span class="title class_">Math</span>.<span class="property">PI</span>,!<span class="number">1</span>);<span class="keyword">for</span>(<span class="keyword">var</span> t=<span class="number">0</span>;t&lt;<span class="number">30</span>;t++)h.<span class="property">fillStyle</span>=<span class="string">&quot;rgba(&quot;</span>+d+<span class="string">&quot;,&quot;</span>+(<span class="variable language_">this</span>.<span class="property">opacity</span>-<span class="variable language_">this</span>.<span class="property">opacity</span>/<span class="number">20</span>*t)+<span class="string">&quot;)&quot;</span>,h.<span class="title function_">rect</span>(<span class="variable language_">this</span>.<span class="property">x</span>-<span class="variable language_">this</span>.<span class="property">dx</span>/<span class="number">4</span>*t,<span class="variable language_">this</span>.<span class="property">y</span>-<span class="variable language_">this</span>.<span class="property">dy</span>/<span class="number">4</span>*t-<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>),h.<span class="title function_">fill</span>()&#125;<span class="keyword">else</span> h.<span class="property">fillStyle</span>=<span class="string">&quot;rgba(&quot;</span>+r+<span class="string">&quot;,&quot;</span>+<span class="variable language_">this</span>.<span class="property">opacity</span>+<span class="string">&quot;)&quot;</span>,h.<span class="title function_">rect</span>(<span class="variable language_">this</span>.<span class="property">x</span>,<span class="variable language_">this</span>.<span class="property">y</span>,<span class="variable language_">this</span>.<span class="property">r</span>,<span class="variable language_">this</span>.<span class="property">r</span>);h.<span class="title function_">closePath</span>(),h.<span class="title function_">fill</span>()&#125;,<span class="variable language_">this</span>.<span class="property">move</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">this</span>.<span class="property">x</span>+=<span class="variable language_">this</span>.<span class="property">dx</span>,<span class="variable language_">this</span>.<span class="property">y</span>+=<span class="variable language_">this</span>.<span class="property">dy</span>,!<span class="number">1</span>===<span class="variable language_">this</span>.<span class="property">fadingOut</span>&amp;&amp;<span class="variable language_">this</span>.<span class="title function_">reset</span>(),(<span class="variable language_">this</span>.<span class="property">x</span>&gt;n-n/<span class="number">4</span>||<span class="variable language_">this</span>.<span class="property">y</span>&lt;<span class="number">0</span>)&amp;&amp;(<span class="variable language_">this</span>.<span class="property">fadingOut</span>=!<span class="number">0</span>)&#125;,<span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;o=!<span class="number">1</span>&#125;,<span class="number">50</span>)&#125;<span class="keyword">function</span> <span class="title function_">m</span>(<span class="params">t</span>)&#123;<span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">1e3</span>*<span class="title class_">Math</span>.<span class="title function_">random</span>())+<span class="number">1</span>&lt;<span class="number">10</span>*t&#125;<span class="keyword">function</span> <span class="title function_">l</span>(<span class="params">t,i</span>)&#123;<span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">random</span>()*(i-t)+t&#125;<span class="title function_">f</span>(),<span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>,f,!<span class="number">1</span>),<span class="keyword">function</span>(<span class="params"></span>)&#123;h=s.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);<span class="keyword">for</span>(<span class="keyword">var</span> t=<span class="number">0</span>;t&lt;i;t++)c[t]=<span class="keyword">new</span> y,c[t].<span class="title function_">reset</span>();<span class="title function_">u</span>()&#125;(),<span class="keyword">function</span> <span class="title function_">t</span>(<span class="params"></span>)&#123;<span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;html&#x27;</span>)[<span class="number">0</span>].<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-theme&#x27;</span>)==<span class="string">&#x27;dark&#x27;</span>&amp;&amp;<span class="title function_">u</span>(),<span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(t)&#125;()&#125;;</span><br><span class="line"><span class="title function_">dark</span>()</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">light</span>(<span class="params"></span>) &#123;<span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span>=<span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span>||<span class="variable language_">window</span>.<span class="property">mozRequestAnimationFrame</span>||<span class="variable language_">window</span>.<span class="property">webkitRequestAnimationFrame</span>||<span class="variable language_">window</span>.<span class="property">msRequestAnimationFrame</span>;<span class="keyword">var</span> n,e,i,h,t=<span class="number">.05</span>,s=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;universe&quot;</span>),o=!<span class="number">0</span>,a=<span class="string">&quot;180,184,240&quot;</span>,r=<span class="string">&quot;226,225,142&quot;</span>,d=<span class="string">&quot;226,225,224&quot;</span>,c=[];<span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>)&#123;n=<span class="variable language_">window</span>.<span class="property">innerWidth</span>,e=<span class="variable language_">window</span>.<span class="property">innerHeight</span>,i=<span class="number">.216</span>*n,s.<span class="title function_">setAttribute</span>(<span class="string">&quot;width&quot;</span>,n),s.<span class="title function_">setAttribute</span>(<span class="string">&quot;height&quot;</span>,e)&#125;<span class="keyword">function</span> <span class="title function_">u</span>(<span class="params"></span>)&#123;h.<span class="title function_">clearRect</span>(<span class="number">0</span>,<span class="number">0</span>,n,e);<span class="keyword">for</span>(<span class="keyword">var</span> t=c.<span class="property">length</span>,i=<span class="number">0</span>;i&lt;t;i++)&#123;<span class="keyword">var</span> s=c[i];s.<span class="title function_">move</span>(),s.<span class="title function_">fadeIn</span>(),s.<span class="title function_">fadeOut</span>(),s.<span class="title function_">draw</span>()&#125;&#125;<span class="keyword">function</span> <span class="title function_">y</span>(<span class="params"></span>)&#123;<span class="variable language_">this</span>.<span class="property">reset</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">this</span>.<span class="property">giant</span>=<span class="title function_">m</span>(<span class="number">3</span>),<span class="variable language_">this</span>.<span class="property">comet</span>=!<span class="variable language_">this</span>.<span class="property">giant</span>&amp;&amp;!o&amp;&amp;<span class="title function_">m</span>(<span class="number">10</span>),<span class="variable language_">this</span>.<span class="property">x</span>=<span class="title function_">l</span>(<span class="number">0</span>,n-<span class="number">10</span>),<span class="variable language_">this</span>.<span class="property">y</span>=<span class="title function_">l</span>(<span class="number">0</span>,e),<span class="variable language_">this</span>.<span class="property">r</span>=<span class="title function_">l</span>(<span class="number">1.1</span>,<span class="number">2.6</span>),<span class="variable language_">this</span>.<span class="property">dx</span>=<span class="title function_">l</span>(t,<span class="number">6</span>*t)+(<span class="variable language_">this</span>.<span class="property">comet</span>+<span class="number">1</span>-<span class="number">1</span>)*t*<span class="title function_">l</span>(<span class="number">50</span>,<span class="number">120</span>)+<span class="number">2</span>*t,<span class="variable language_">this</span>.<span class="property">dy</span>=-<span class="title function_">l</span>(t,<span class="number">6</span>*t)-(<span class="variable language_">this</span>.<span class="property">comet</span>+<span class="number">1</span>-<span class="number">1</span>)*t*<span class="title function_">l</span>(<span class="number">50</span>,<span class="number">120</span>),<span class="variable language_">this</span>.<span class="property">fadingOut</span>=<span class="literal">null</span>,<span class="variable language_">this</span>.<span class="property">fadingIn</span>=!<span class="number">0</span>,<span class="variable language_">this</span>.<span class="property">opacity</span>=<span class="number">0</span>,<span class="variable language_">this</span>.<span class="property">opacityTresh</span>=<span class="title function_">l</span>(<span class="number">.2</span>,<span class="number">1</span>-<span class="number">.4</span>*(<span class="variable language_">this</span>.<span class="property">comet</span>+<span class="number">1</span>-<span class="number">1</span>)),<span class="variable language_">this</span>.<span class="property">do</span>=<span class="title function_">l</span>(<span class="number">5e-4</span>,<span class="number">.002</span>)+<span class="number">.001</span>*(<span class="variable language_">this</span>.<span class="property">comet</span>+<span class="number">1</span>-<span class="number">1</span>)&#125;,<span class="variable language_">this</span>.<span class="property">fadeIn</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">this</span>.<span class="property">fadingIn</span>&amp;&amp;(<span class="variable language_">this</span>.<span class="property">fadingIn</span>=!(<span class="variable language_">this</span>.<span class="property">opacity</span>&gt;<span class="variable language_">this</span>.<span class="property">opacityTresh</span>),<span class="variable language_">this</span>.<span class="property">opacity</span>+=<span class="variable language_">this</span>.<span class="property">do</span>)&#125;,<span class="variable language_">this</span>.<span class="property">fadeOut</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">this</span>.<span class="property">fadingOut</span>&amp;&amp;(<span class="variable language_">this</span>.<span class="property">fadingOut</span>=!(<span class="variable language_">this</span>.<span class="property">opacity</span>&lt;<span class="number">0</span>),<span class="variable language_">this</span>.<span class="property">opacity</span>-=<span class="variable language_">this</span>.<span class="property">do</span>/<span class="number">2</span>,(<span class="variable language_">this</span>.<span class="property">x</span>&gt;n||<span class="variable language_">this</span>.<span class="property">y</span>&lt;<span class="number">0</span>)&amp;&amp;(<span class="variable language_">this</span>.<span class="property">fadingOut</span>=!<span class="number">1</span>,<span class="variable language_">this</span>.<span class="title function_">reset</span>()))&#125;,<span class="variable language_">this</span>.<span class="property">draw</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">if</span>(h.<span class="title function_">beginPath</span>(),<span class="variable language_">this</span>.<span class="property">giant</span>)h.<span class="property">fillStyle</span>=<span class="string">&quot;rgba(&quot;</span>+a+<span class="string">&quot;,&quot;</span>+<span class="variable language_">this</span>.<span class="property">opacity</span>+<span class="string">&quot;)&quot;</span>,h.<span class="title function_">arc</span>(<span class="variable language_">this</span>.<span class="property">x</span>,<span class="variable language_">this</span>.<span class="property">y</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">2</span>*<span class="title class_">Math</span>.<span class="property">PI</span>,!<span class="number">1</span>);<span class="keyword">else</span> <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">comet</span>)&#123;h.<span class="property">fillStyle</span>=<span class="string">&quot;rgba(&quot;</span>+d+<span class="string">&quot;,&quot;</span>+<span class="variable language_">this</span>.<span class="property">opacity</span>+<span class="string">&quot;)&quot;</span>,h.<span class="title function_">arc</span>(<span class="variable language_">this</span>.<span class="property">x</span>,<span class="variable language_">this</span>.<span class="property">y</span>,<span class="number">1.5</span>,<span class="number">0</span>,<span class="number">2</span>*<span class="title class_">Math</span>.<span class="property">PI</span>,!<span class="number">1</span>);<span class="keyword">for</span>(<span class="keyword">var</span> t=<span class="number">0</span>;t&lt;<span class="number">30</span>;t++)h.<span class="property">fillStyle</span>=<span class="string">&quot;rgba(&quot;</span>+d+<span class="string">&quot;,&quot;</span>+(<span class="variable language_">this</span>.<span class="property">opacity</span>-<span class="variable language_">this</span>.<span class="property">opacity</span>/<span class="number">20</span>*t)+<span class="string">&quot;)&quot;</span>,h.<span class="title function_">rect</span>(<span class="variable language_">this</span>.<span class="property">x</span>-<span class="variable language_">this</span>.<span class="property">dx</span>/<span class="number">4</span>*t,<span class="variable language_">this</span>.<span class="property">y</span>-<span class="variable language_">this</span>.<span class="property">dy</span>/<span class="number">4</span>*t-<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>),h.<span class="title function_">fill</span>()&#125;<span class="keyword">else</span> h.<span class="property">fillStyle</span>=<span class="string">&quot;rgba(&quot;</span>+r+<span class="string">&quot;,&quot;</span>+<span class="variable language_">this</span>.<span class="property">opacity</span>+<span class="string">&quot;)&quot;</span>,h.<span class="title function_">rect</span>(<span class="variable language_">this</span>.<span class="property">x</span>,<span class="variable language_">this</span>.<span class="property">y</span>,<span class="variable language_">this</span>.<span class="property">r</span>,<span class="variable language_">this</span>.<span class="property">r</span>);h.<span class="title function_">closePath</span>(),h.<span class="title function_">fill</span>()&#125;,<span class="variable language_">this</span>.<span class="property">move</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">this</span>.<span class="property">x</span>+=<span class="variable language_">this</span>.<span class="property">dx</span>,<span class="variable language_">this</span>.<span class="property">y</span>+=<span class="variable language_">this</span>.<span class="property">dy</span>,!<span class="number">1</span>===<span class="variable language_">this</span>.<span class="property">fadingOut</span>&amp;&amp;<span class="variable language_">this</span>.<span class="title function_">reset</span>(),(<span class="variable language_">this</span>.<span class="property">x</span>&gt;n-n/<span class="number">4</span>||<span class="variable language_">this</span>.<span class="property">y</span>&lt;<span class="number">0</span>)&amp;&amp;(<span class="variable language_">this</span>.<span class="property">fadingOut</span>=!<span class="number">0</span>)&#125;,<span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;o=!<span class="number">1</span>&#125;,<span class="number">50</span>)&#125;<span class="keyword">function</span> <span class="title function_">m</span>(<span class="params">t</span>)&#123;<span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">1e3</span>*<span class="title class_">Math</span>.<span class="title function_">random</span>())+<span class="number">1</span>&lt;<span class="number">10</span>*t&#125;<span class="keyword">function</span> <span class="title function_">l</span>(<span class="params">t,i</span>)&#123;<span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">random</span>()*(i-t)+t&#125;<span class="title function_">f</span>(),<span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>,f,!<span class="number">1</span>),<span class="keyword">function</span>(<span class="params"></span>)&#123;h=s.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);<span class="keyword">for</span>(<span class="keyword">var</span> t=<span class="number">0</span>;t&lt;i;t++)c[t]=<span class="keyword">new</span> y,c[t].<span class="title function_">reset</span>();<span class="title function_">u</span>()&#125;(),<span class="keyword">function</span> <span class="title function_">t</span>(<span class="params"></span>)&#123;<span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;html&#x27;</span>)[<span class="number">0</span>].<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-theme&#x27;</span>)==<span class="string">&#x27;light&#x27;</span>&amp;&amp;<span class="title function_">u</span>(),<span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(t)&#125;()&#125;;</span><br><span class="line"><span class="title function_">light</span>()</span><br></pre></td></tr></table></figure><p>在 <code>source/css</code> 下新建 <code>universe.css</code></p><p>写入以下代码</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 背景宇宙星光  */</span></span><br><span class="line"><span class="selector-id">#universe</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">pointer-events</span>: none;</span><br><span class="line">    <span class="comment">/* 这个是调置顶的优先级的，-1在文章页下面，背景上面，个人推荐这种 */</span></span><br><span class="line">    <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在<strong>主题配置文件</strong> <code>inject.bottom</code> 下添加引入</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">&lt;canvas</span> <span class="string">id=&quot;universe&quot;&gt;&lt;/canvas&gt;</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">defer</span> <span class="string">src=&quot;/js/universe.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p>在<strong>主题配置文件</strong> <code>inject.head</code> 下添加引入</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/universe.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230101211556655.png" alt="星空特效配置"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230101211652908.png" alt="文件位置"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230101211626891.png" alt="效果"></p><hr><h2 id="十一、Twikoo-评论系统"><a href="#十一、Twikoo-评论系统" class="headerlink" title="十一、Twikoo 评论系统"></a>十一、Twikoo 评论系统</h2><h3 id="11-1-后端配置"><a href="#11-1-后端配置" class="headerlink" title="11.1 后端配置"></a>11.1 后端配置</h3><blockquote><p><a href="https://twikoo.js.org/">https://twikoo.js.org/</a></p></blockquote><p>点击快速上手</p><p>Vercel 部署</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131171852376.png" alt="快速上手 Vercel 部署"></p><p>注册一个 MongoDB 账号</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131172020135.png" alt="注册账号"></p><p>我是这样选的</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131172228310.png" alt="选一选"></p><p>免费的</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131172250738.png" alt="Free"></p><p>再这样选</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131172409383.png" alt="选一选"></p><p>用户名密码要记住</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131172541436.png" alt="创建数据库用户"></p><p>同意所有 IP</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131172729254.png" alt="填一填"></p><p>结束</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131172752461.png" alt="结束"></p><p>无痕模式申请 Vercel 账号</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131173004241.png" alt="申请Vercel账号"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131173039555.png" alt="GitHub申请"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131173257336.png" alt="一键部署到 Vercel"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131173540345.png" alt="创建仓库, 随便命名"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131173644895.png" alt="continue"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131173659360.png" alt="setting"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131173716032.png" alt="环境变量"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131173912648.png" alt="键"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131173939717.png" alt="键"></p><p>下面要好好操作 值</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131174013948.png" alt="connect"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131174031005.png" alt="选一个"></p><p>操作这个字符串, 将 <code>&lt;password&gt;</code> 改成刚刚设置的自己的密码</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131174109239.png" alt="对它操作"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131174237415.png" alt="值"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131174353823.png" alt="选择并保存"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131174452316.png" alt="点这里"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131174528819.png" alt="重新部署"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131174844324.png" alt="重新部署完成"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131174901843.png" alt="后端配置完成"></p><hr><h3 id="11-2-前端配置"><a href="#11-2-前端配置" class="headerlink" title="11.2 前端配置"></a>11.2 前端配置</h3><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131175028940.png" alt="点头像回到控制台"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131175053626.png" alt="进来仓库"></p><p>这一步主要是防止背墙, 但是我这里没办法了只能先不设置二级域名, 直接用下面的吧, 后期在搞大陆可以访问的</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131175221180.png" alt="设置一个二级域名"></p><p>先将就用这个一级域名</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131181503108.png" alt="一级域名"></p><p>进入<strong>主题配置文件</strong></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131181411061.png" alt="配置"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131181637670.png" alt="配置"></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="comment"># Up to two comments system, the first will be shown as default</span></span><br><span class="line">  <span class="comment"># Choose: Disqus/Disqusjs/Livere/Gitalk/Valine/Waline/Utterances/Facebook Comments/Twikoo/Giscus/Remark42/Artalk</span></span><br><span class="line">  <span class="attr">use:</span> <span class="string">Twikoo</span> <span class="comment"># Valine,Disqus</span></span><br><span class="line">  <span class="attr">text:</span> <span class="literal">true</span> <span class="comment"># Display the comment name next to the button</span></span><br><span class="line">  <span class="comment"># lazyload: The comment system will be load when comment element enters the browser&#x27;s viewport.</span></span><br><span class="line">  <span class="comment"># If you set it to true, the comment count will be invalid</span></span><br><span class="line">  <span class="attr">lazyload:</span> <span class="literal">true</span> <span class="comment"># 懒加载, 提高一点网站性能</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">false</span> <span class="comment"># Display comment count in post&#x27;s top_img</span></span><br><span class="line">  <span class="attr">card_post_count:</span> <span class="literal">false</span> <span class="comment"># Display comment count in Home Page</span></span><br></pre></td></tr></table></figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Twikoo</span></span><br><span class="line"><span class="comment"># https://github.com/imaegoo/twikoo</span></span><br><span class="line"><span class="attr">twikoo:</span></span><br><span class="line">  <span class="attr">envId:</span> <span class="string">https://twikoo-rho-brown.vercel.app/</span></span><br><span class="line">  <span class="attr">region:</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">option:</span></span><br></pre></td></tr></table></figure><p>记得设置后台密码</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131191816720.png" alt="预览"></p><hr><h2 id="十二、博客文章统计图"><a href="#十二、博客文章统计图" class="headerlink" title="十二、博客文章统计图"></a>十二、博客文章统计图</h2><h3 id="12-1-新建-charts-页面"><a href="#12-1-新建-charts-页面" class="headerlink" title="12.1 新建 charts 页面"></a>12.1 新建 charts 页面</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page charts</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230117171612873.png" alt="新建 charts"></p><hr><h3 id="12-2-安装插件"><a href="#12-2-安装插件" class="headerlink" title="12.2 安装插件"></a>12.2 安装插件</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i cheerio --save</span><br></pre></td></tr></table></figure><hr><h3 id="12-3-引入-ECharts-js"><a href="#12-3-引入-ECharts-js" class="headerlink" title="12.3 引入 ECharts.js"></a>12.3 引入 ECharts.js</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/universe.css&quot;&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;</span> <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230117171700260.png" alt="引入 Echarts.js"></p><hr><h3 id="12-4-文章统计代码"><a href="#12-4-文章统计代码" class="headerlink" title="12.4 文章统计代码"></a>12.4 文章统计代码</h3><p>在 <code>hexo-theme-butterfly\scripts\helpers\</code> 文件下新建 <code>charts.js</code> 文件</p><p>不要管缩进, 复制就完了</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cheerio = <span class="built_in">require</span>(<span class="string">&#x27;cheerio&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> moment = <span class="built_in">require</span>(<span class="string">&#x27;moment&#x27;</span>)</span><br><span class="line"></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">&#x27;after_render:html&#x27;</span>, <span class="keyword">function</span> (<span class="params">locals</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> $ = cheerio.<span class="title function_">load</span>(locals)</span><br><span class="line">  <span class="keyword">const</span> post = $(<span class="string">&#x27;#posts-chart&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> tag = $(<span class="string">&#x27;#tags-chart&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> category = $(<span class="string">&#x27;#categories-chart&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> htmlEncode = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (post.<span class="property">length</span> &gt; <span class="number">0</span> || tag.<span class="property">length</span> &gt; <span class="number">0</span> || category.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (post.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; $(<span class="string">&#x27;#postsChart&#x27;</span>).<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (post.<span class="title function_">attr</span>(<span class="string">&#x27;data-encode&#x27;</span>) === <span class="string">&#x27;true&#x27;</span>) htmlEncode = <span class="literal">true</span></span><br><span class="line">      post.<span class="title function_">after</span>(<span class="title function_">postsChart</span>(post.<span class="title function_">attr</span>(<span class="string">&#x27;data-start&#x27;</span>)))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (tag.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; $(<span class="string">&#x27;#tagsChart&#x27;</span>).<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (tag.<span class="title function_">attr</span>(<span class="string">&#x27;data-encode&#x27;</span>) === <span class="string">&#x27;true&#x27;</span>) htmlEncode = <span class="literal">true</span></span><br><span class="line">      tag.<span class="title function_">after</span>(<span class="title function_">tagsChart</span>(tag.<span class="title function_">attr</span>(<span class="string">&#x27;data-length&#x27;</span>)))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (category.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; $(<span class="string">&#x27;#categoriesChart&#x27;</span>).<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (category.<span class="title function_">attr</span>(<span class="string">&#x27;data-encode&#x27;</span>) === <span class="string">&#x27;true&#x27;</span>) htmlEncode = <span class="literal">true</span></span><br><span class="line">      category.<span class="title function_">after</span>(<span class="title function_">categoriesChart</span>(category.<span class="title function_">attr</span>(<span class="string">&#x27;data-parent&#x27;</span>)))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (htmlEncode) &#123;</span><br><span class="line">      <span class="keyword">return</span> $.<span class="title function_">root</span>().<span class="title function_">html</span>().<span class="title function_">replace</span>(<span class="regexp">/&amp;amp;#/g</span>, <span class="string">&#x27;&amp;#&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> $.<span class="title function_">root</span>().<span class="title function_">html</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> locals</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="number">15</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">postsChart</span> (startMonth) &#123;</span><br><span class="line">  <span class="keyword">const</span> startDate = <span class="title function_">moment</span>(startMonth || <span class="string">&#x27;2020-01&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> endDate = <span class="title function_">moment</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> monthMap = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line">  <span class="keyword">const</span> dayTime = <span class="number">3600</span> * <span class="number">24</span> * <span class="number">1000</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> time = startDate; time &lt;= endDate; time += dayTime) &#123;</span><br><span class="line">    <span class="keyword">const</span> month = <span class="title function_">moment</span>(time).<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (!monthMap.<span class="title function_">has</span>(month)) &#123;</span><br><span class="line">      monthMap.<span class="title function_">set</span>(month, <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  hexo.<span class="property">locals</span>.<span class="title function_">get</span>(<span class="string">&#x27;posts&#x27;</span>).<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">post</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> month = post.<span class="property">date</span>.<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (monthMap.<span class="title function_">has</span>(month)) &#123;</span><br><span class="line">      monthMap.<span class="title function_">set</span>(month, monthMap.<span class="title function_">get</span>(month) + <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">const</span> monthArr = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...monthMap.<span class="title function_">keys</span>()])</span><br><span class="line">  <span class="keyword">const</span> monthValueArr = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...monthMap.<span class="title function_">values</span>()])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;script id=&quot;postsChart&quot;&gt;</span></span><br><span class="line"><span class="string">    var color = document.documentElement.getAttribute(&#x27;data-theme&#x27;) === &#x27;light&#x27; ? &#x27;#4c4948&#x27; : &#x27;rgba(255,255,255,0.7)&#x27;</span></span><br><span class="line"><span class="string">    var postsChart = echarts.init(document.getElementById(&#x27;posts-chart&#x27;), &#x27;light&#x27;);</span></span><br><span class="line"><span class="string">    var postsOption = &#123;</span></span><br><span class="line"><span class="string">      title: &#123;</span></span><br><span class="line"><span class="string">        text: &#x27;文章发布统计图&#x27;,</span></span><br><span class="line"><span class="string">        x: &#x27;center&#x27;,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      tooltip: &#123;</span></span><br><span class="line"><span class="string">        trigger: &#x27;axis&#x27;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      xAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;日期&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;category&#x27;,</span></span><br><span class="line"><span class="string">        boundaryGap: false,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;monthArr&#125;</span></span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      yAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;value&#x27;,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        splitLine: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      series: [&#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;line&#x27;,</span></span><br><span class="line"><span class="string">        smooth: true,</span></span><br><span class="line"><span class="string">        lineStyle: &#123;</span></span><br><span class="line"><span class="string">            width: 0</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        showSymbol: false,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          opacity: 1,</span></span><br><span class="line"><span class="string">          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">            offset: 0,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(128, 255, 165)&#x27;</span></span><br><span class="line"><span class="string">          &#125;,</span></span><br><span class="line"><span class="string">          &#123;</span></span><br><span class="line"><span class="string">            offset: 1,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(1, 191, 236)&#x27;</span></span><br><span class="line"><span class="string">          &#125;])</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        areaStyle: &#123;</span></span><br><span class="line"><span class="string">          opacity: 1,</span></span><br><span class="line"><span class="string">          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">            offset: 0,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(128, 255, 165)&#x27;</span></span><br><span class="line"><span class="string">          &#125;, &#123;</span></span><br><span class="line"><span class="string">            offset: 1,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(1, 191, 236)&#x27;</span></span><br><span class="line"><span class="string">          &#125;])</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;monthValueArr&#125;</span>,</span></span><br><span class="line"><span class="string">        markLine: &#123;</span></span><br><span class="line"><span class="string">          data: [&#123;</span></span><br><span class="line"><span class="string">            name: &#x27;平均值&#x27;,</span></span><br><span class="line"><span class="string">            type: &#x27;average&#x27;,</span></span><br><span class="line"><span class="string">            label: &#123;</span></span><br><span class="line"><span class="string">              color: color</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">          &#125;]</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;]</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">    postsChart.setOption(postsOption);</span></span><br><span class="line"><span class="string">    window.addEventListener(&#x27;resize&#x27;, () =&gt; &#123; </span></span><br><span class="line"><span class="string">      postsChart.resize();</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">    postsChart.on(&#x27;click&#x27;, &#x27;series&#x27;, (event) =&gt; &#123;</span></span><br><span class="line"><span class="string">      if (event.componentType === &#x27;series&#x27;) window.location.href = &#x27;/archives/&#x27; + event.name.replace(&#x27;-&#x27;, &#x27;/&#x27;);</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">  &lt;/script&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">tagsChart</span> (len) &#123;</span><br><span class="line">  <span class="keyword">const</span> tagArr = []</span><br><span class="line">  hexo.<span class="property">locals</span>.<span class="title function_">get</span>(<span class="string">&#x27;tags&#x27;</span>).<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">tag</span>) &#123;</span><br><span class="line">    tagArr.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: tag.<span class="property">name</span>, <span class="attr">value</span>: tag.<span class="property">length</span>, <span class="attr">path</span>: tag.<span class="property">path</span> &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  tagArr.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123; <span class="keyword">return</span> b.<span class="property">value</span> - a.<span class="property">value</span> &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> dataLength = <span class="title class_">Math</span>.<span class="title function_">min</span>(tagArr.<span class="property">length</span>, len) || tagArr.<span class="property">length</span></span><br><span class="line">  <span class="keyword">const</span> tagNameArr = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; dataLength; i++) &#123;</span><br><span class="line">    tagNameArr.<span class="title function_">push</span>(tagArr[i].<span class="property">name</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> tagNameArrJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(tagNameArr)</span><br><span class="line">  <span class="keyword">const</span> tagArrJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(tagArr)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;script id=&quot;tagsChart&quot;&gt;</span></span><br><span class="line"><span class="string">    var color = document.documentElement.getAttribute(&#x27;data-theme&#x27;) === &#x27;light&#x27; ? &#x27;#4c4948&#x27; : &#x27;rgba(255,255,255,0.7)&#x27;</span></span><br><span class="line"><span class="string">    var tagsChart = echarts.init(document.getElementById(&#x27;tags-chart&#x27;), &#x27;light&#x27;);</span></span><br><span class="line"><span class="string">    var tagsOption = &#123;</span></span><br><span class="line"><span class="string">      title: &#123;</span></span><br><span class="line"><span class="string">        text: &#x27;Top <span class="subst">$&#123;dataLength&#125;</span> 标签统计图&#x27;,</span></span><br><span class="line"><span class="string">        x: &#x27;center&#x27;,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      tooltip: &#123;&#125;,</span></span><br><span class="line"><span class="string">      xAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;标签&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;category&#x27;,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color,</span></span><br><span class="line"><span class="string">          interval: 0</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;tagNameArrJson&#125;</span></span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      yAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;value&#x27;,</span></span><br><span class="line"><span class="string">        splitLine: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      series: [&#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;bar&#x27;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;tagArrJson&#125;</span>,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          borderRadius: [5, 5, 0, 0],</span></span><br><span class="line"><span class="string">          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">            offset: 0,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(128, 255, 165)&#x27;</span></span><br><span class="line"><span class="string">          &#125;,</span></span><br><span class="line"><span class="string">          &#123;</span></span><br><span class="line"><span class="string">            offset: 1,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(1, 191, 236)&#x27;</span></span><br><span class="line"><span class="string">          &#125;])</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        emphasis: &#123;</span></span><br><span class="line"><span class="string">          itemStyle: &#123;</span></span><br><span class="line"><span class="string">            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">              offset: 0,</span></span><br><span class="line"><span class="string">              color: &#x27;rgba(128, 255, 195)&#x27;</span></span><br><span class="line"><span class="string">            &#125;,</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">              offset: 1,</span></span><br><span class="line"><span class="string">              color: &#x27;rgba(1, 211, 255)&#x27;</span></span><br><span class="line"><span class="string">            &#125;])</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        markLine: &#123;</span></span><br><span class="line"><span class="string">          data: [&#123;</span></span><br><span class="line"><span class="string">            name: &#x27;平均值&#x27;,</span></span><br><span class="line"><span class="string">            type: &#x27;average&#x27;,</span></span><br><span class="line"><span class="string">            label: &#123;</span></span><br><span class="line"><span class="string">              color: color</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">          &#125;]</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;]</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">    tagsChart.setOption(tagsOption);</span></span><br><span class="line"><span class="string">    window.addEventListener(&#x27;resize&#x27;, () =&gt; &#123; </span></span><br><span class="line"><span class="string">      tagsChart.resize();</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">    tagsChart.on(&#x27;click&#x27;, &#x27;series&#x27;, (event) =&gt; &#123;</span></span><br><span class="line"><span class="string">      if(event.data.path) window.location.href = &#x27;/&#x27; + event.data.path;</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">  &lt;/script&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">categoriesChart</span> (dataParent) &#123;</span><br><span class="line">  <span class="keyword">const</span> categoryArr = []</span><br><span class="line">  <span class="keyword">let</span> categoryParentFlag = <span class="literal">false</span></span><br><span class="line">  hexo.<span class="property">locals</span>.<span class="title function_">get</span>(<span class="string">&#x27;categories&#x27;</span>).<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">category</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (category.<span class="property">parent</span>) categoryParentFlag = <span class="literal">true</span></span><br><span class="line">    categoryArr.<span class="title function_">push</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: category.<span class="property">name</span>,</span><br><span class="line">      <span class="attr">value</span>: category.<span class="property">length</span>,</span><br><span class="line">      <span class="attr">path</span>: category.<span class="property">path</span>,</span><br><span class="line">      <span class="attr">id</span>: category.<span class="property">_id</span>,</span><br><span class="line">      <span class="attr">parentId</span>: category.<span class="property">parent</span> || <span class="string">&#x27;0&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  categoryParentFlag = categoryParentFlag &amp;&amp; dataParent === <span class="string">&#x27;true&#x27;</span></span><br><span class="line">  categoryArr.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123; <span class="keyword">return</span> b.<span class="property">value</span> - a.<span class="property">value</span> &#125;)</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">translateListToTree</span> (data, parent) &#123;</span><br><span class="line">    <span class="keyword">let</span> tree = []</span><br><span class="line">    <span class="keyword">let</span> temp</span><br><span class="line">    data.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (data[index].<span class="property">parentId</span> == parent) &#123;</span><br><span class="line">        <span class="keyword">let</span> obj = data[index];</span><br><span class="line">        temp = <span class="title function_">translateListToTree</span>(data, data[index].<span class="property">id</span>);</span><br><span class="line">        <span class="keyword">if</span> (temp.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          obj.<span class="property">children</span> = temp</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (tree.<span class="title function_">indexOf</span>())</span><br><span class="line">          tree.<span class="title function_">push</span>(obj)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> tree</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> categoryNameJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(categoryArr.<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">category</span>) &#123; <span class="keyword">return</span> category.<span class="property">name</span> &#125;))</span><br><span class="line">  <span class="keyword">const</span> categoryArrJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(categoryArr)</span><br><span class="line">  <span class="keyword">const</span> categoryArrParentJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="title function_">translateListToTree</span>(categoryArr, <span class="string">&#x27;0&#x27;</span>))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;script id=&quot;categoriesChart&quot;&gt;</span></span><br><span class="line"><span class="string">    var color = document.documentElement.getAttribute(&#x27;data-theme&#x27;) === &#x27;light&#x27; ? &#x27;#4c4948&#x27; : &#x27;rgba(255,255,255,0.7)&#x27;</span></span><br><span class="line"><span class="string">    var categoriesChart = echarts.init(document.getElementById(&#x27;categories-chart&#x27;), &#x27;light&#x27;);</span></span><br><span class="line"><span class="string">    var categoryParentFlag = <span class="subst">$&#123;categoryParentFlag&#125;</span></span></span><br><span class="line"><span class="string">    var categoriesOption = &#123;</span></span><br><span class="line"><span class="string">      title: &#123;</span></span><br><span class="line"><span class="string">        text: &#x27;文章分类统计图&#x27;,</span></span><br><span class="line"><span class="string">        x: &#x27;center&#x27;,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      legend: &#123;</span></span><br><span class="line"><span class="string">        top: &#x27;bottom&#x27;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;categoryNameJson&#125;</span>,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      tooltip: &#123;</span></span><br><span class="line"><span class="string">        trigger: &#x27;item&#x27;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      series: []</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">    categoriesOption.series.push(</span></span><br><span class="line"><span class="string">      categoryParentFlag ? </span></span><br><span class="line"><span class="string">      &#123;</span></span><br><span class="line"><span class="string">        nodeClick :false,</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;sunburst&#x27;,</span></span><br><span class="line"><span class="string">        radius: [&#x27;15%&#x27;, &#x27;90%&#x27;],</span></span><br><span class="line"><span class="string">        center: [&#x27;50%&#x27;, &#x27;55%&#x27;],</span></span><br><span class="line"><span class="string">        sort: &#x27;desc&#x27;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;categoryArrParentJson&#125;</span>,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          borderColor: &#x27;#fff&#x27;,</span></span><br><span class="line"><span class="string">          borderWidth: 2,</span></span><br><span class="line"><span class="string">          emphasis: &#123;</span></span><br><span class="line"><span class="string">            focus: &#x27;ancestor&#x27;,</span></span><br><span class="line"><span class="string">            shadowBlur: 10,</span></span><br><span class="line"><span class="string">            shadowOffsetX: 0,</span></span><br><span class="line"><span class="string">            shadowColor: &#x27;rgba(255, 255, 255, 0.5)&#x27;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      :</span></span><br><span class="line"><span class="string">      &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;pie&#x27;,</span></span><br><span class="line"><span class="string">        radius: [30, 80],</span></span><br><span class="line"><span class="string">        roseType: &#x27;area&#x27;,</span></span><br><span class="line"><span class="string">        label: &#123;</span></span><br><span class="line"><span class="string">          color: color,</span></span><br><span class="line"><span class="string">          formatter: &#x27;&#123;b&#125; : &#123;c&#125; (&#123;d&#125;%)&#x27;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;categoryArrJson&#125;</span>,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          emphasis: &#123;</span></span><br><span class="line"><span class="string">            shadowBlur: 10,</span></span><br><span class="line"><span class="string">            shadowOffsetX: 0,</span></span><br><span class="line"><span class="string">            shadowColor: &#x27;rgba(255, 255, 255, 0.5)&#x27;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">    categoriesChart.setOption(categoriesOption);</span></span><br><span class="line"><span class="string">    window.addEventListener(&#x27;resize&#x27;, () =&gt; &#123; </span></span><br><span class="line"><span class="string">      categoriesChart.resize();</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">    categoriesChart.on(&#x27;click&#x27;, &#x27;series&#x27;, (event) =&gt; &#123;</span></span><br><span class="line"><span class="string">      if(event.data.path) window.location.href = &#x27;/&#x27; + event.data.path;</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">  &lt;/script&gt;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="12-5-使用统计图"><a href="#12-5-使用统计图" class="headerlink" title="12.5 使用统计图"></a>12.5 使用统计图</h3><p>在 <code>source\charts\index.md</code> 文件中添加以下内容</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 文章发布时间统计图 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;posts-chart&quot;</span> <span class="attr">data-start</span>=<span class="string">&quot;2021-01&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border-radius: 8px; height: 300px; padding: 10px;&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;!-- 文章标签统计图 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;tags-chart&quot;</span> <span class="attr">data-length</span>=<span class="string">&quot;10&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border-radius: 8px; height: 300px; padding: 10px;&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;!-- 文章分类统计图 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;categories-chart&quot;</span> <span class="attr">data-parent</span>=<span class="string">&quot;true&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border-radius: 8px; height: 300px; padding: 10px;&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><blockquote><ul><li><code>posts-chart</code> 的 <code>data-start=&quot;2021-01&quot;</code> 属性表示文章发布时间统计图仅显示 <code>2021-01</code> 及以后的文章数据。</li><li><code>tags-chart</code> 的 <code>data-length=&quot;10&quot;</code> 属性表示仅显示排名前 <code>10</code> 的标签。</li><li><code>categories-chart</code> 的 <code>data-parent=&quot;true&quot;</code> 属性表示 <code>有子分类</code> 时以旭日图显示分类，其他 <code>无子分类</code> 或 <code>设置为false</code> 或 <code>不设置该属性</code> 或 <code>设置为其他非true属性</code> 情况都以饼状图显示分类。</li></ul></blockquote><h4 id="在归档页使用统计图"><a href="#在归档页使用统计图" class="headerlink" title="在归档页使用统计图"></a>在归档页使用统计图</h4><p>在 <code>hexo-theme-butterfly\layout\archive.pug</code> 中修改代码, 直接复制过去就行</p><p>代码中的先后顺序会影响统计图在博客中的显示顺序</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">extends includes/layout.pug</span><br><span class="line"></span><br><span class="line">block content</span><br><span class="line">  include ./includes/mixins/article-sort.pug</span><br><span class="line">  #archive</span><br><span class="line">    //- 在归档页使用文章分类统计图</span><br><span class="line">    &lt;div id=&quot;categories-chart&quot; data-parent=&quot;false&quot; style=&quot;height: 300px; padding: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">    //- 在归档页使用发布时间统计图</span><br><span class="line">    &lt;div id=&quot;posts-chart&quot; data-start=&quot;2022-12&quot; style=&quot;height: 300px; padding: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">    //- 在归档页使用标签统计图</span><br><span class="line">    &lt;div id=&quot;tags-chart&quot; data-length=&quot;10&quot; style=&quot;height: 300px; padding: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">    - const archiveLength = findArchiveLength(fragment_cache)</span><br><span class="line">    .article-sort-title= _p(&#x27;page.articles&#x27;) + &#x27; - &#x27; + archiveLength</span><br><span class="line">    +articleSort(page.posts)</span><br><span class="line">    include includes/pagination.pug</span><br><span class="line">    </span><br><span class="line">    </span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230117180411441.png" alt="归档页"></p><h4 id="在标签页使用统计图"><a href="#在标签页使用统计图" class="headerlink" title="在标签页使用统计图"></a>在标签页使用统计图</h4><p>这个标签页不是指 <code>tag</code> 文件夹下的 <code>index.md</code>文件, 而是博客中点进去一个标签进去的页面</p><p>在 <code>hexo-theme-butterfly\layout\tag.pug</code> 中修改代码, 直接复制过去就行</p><p>代码中的先后顺序会影响统计图在博客中的显示顺序</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">extends includes/layout.pug</span><br><span class="line"></span><br><span class="line">block content</span><br><span class="line">  if theme.tag_ui == &#x27;index&#x27;</span><br><span class="line">    include ./includes/mixins/post-ui.pug</span><br><span class="line">    #recent-posts.recent-posts</span><br><span class="line">      +postUI</span><br><span class="line">      include includes/pagination.pug</span><br><span class="line">  else</span><br><span class="line">    include ./includes/mixins/article-sort.pug</span><br><span class="line">    #tag</span><br><span class="line">      //- 在标签页使用文章分类统计图</span><br><span class="line">      &lt;div id=&quot;categories-chart&quot; data-parent=&quot;false&quot; style=&quot;height: 300px; padding: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">      //- 在标签页使用发布时间统计图</span><br><span class="line">      &lt;div id=&quot;posts-chart&quot; data-start=&quot;2022-12&quot; style=&quot;height: 300px; padding: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">      //- 在标签页使用标签统计图</span><br><span class="line">      &lt;div id=&quot;tags-chart&quot; data-length=&quot;10&quot; style=&quot;height: 300px; padding: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">      .article-sort-title= _p(&#x27;page.tag&#x27;) + &#x27; - &#x27; + page.tag</span><br><span class="line">      +articleSort(page.posts)</span><br><span class="line">      include includes/pagination.pug</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230117180430881.png" alt="标签页"></p><h4 id="在分类页使用统计图"><a href="#在分类页使用统计图" class="headerlink" title="在分类页使用统计图"></a>在分类页使用统计图</h4><p>这个分类页不是指 <code>category</code> 文件夹下的 <code>index.md</code>文件, 而是博客中点进去一个分类进去的页面</p><p>在 <code>hexo-theme-butterfly\layout\category.pug</code> 中修改代码, 直接复制过去就行</p><p>代码中的先后顺序会影响统计图在博客中的显示顺序</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">extends includes/layout.pug</span><br><span class="line"></span><br><span class="line">block content</span><br><span class="line">  if theme.category_ui == &#x27;index&#x27;</span><br><span class="line">    include ./includes/mixins/post-ui.pug</span><br><span class="line">    #recent-posts.recent-posts.category_ui</span><br><span class="line">      +postUI</span><br><span class="line">      include includes/pagination.pug</span><br><span class="line">  else</span><br><span class="line">    include ./includes/mixins/article-sort.pug</span><br><span class="line">    #category</span><br><span class="line">      //- 在分类页使用文章分类统计图</span><br><span class="line">      &lt;div id=&quot;categories-chart&quot; data-parent=&quot;false&quot; style=&quot;height: 300px; padding: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">      //- 在分类页使用发布时间统计图</span><br><span class="line">      &lt;div id=&quot;posts-chart&quot; data-start=&quot;2022-12&quot; style=&quot;height: 300px; padding: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">      //- 在分类页使用标签统计图</span><br><span class="line">      &lt;div id=&quot;tags-chart&quot; data-length=&quot;10&quot; style=&quot;height: 300px; padding: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">      .article-sort-title= _p(&#x27;page.category&#x27;) + &#x27; - &#x27; + page.category</span><br><span class="line">      +articleSort(page.posts)</span><br><span class="line">      include includes/pagination.pug</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230117180446109.png" alt="分类页"></p><hr><h3 id="12-6-适配明暗模式"><a href="#12-6-适配明暗模式" class="headerlink" title="12.6 适配明暗模式"></a>12.6 适配明暗模式</h3><p>在 <code>charts.js</code> 中加入以下代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">switchPostChart</span> () &#123;</span><br><span class="line">  <span class="comment">// 这里为了统一颜色选取的是“明暗模式”下的两种字体颜色，也可以自己定义</span></span><br><span class="line">  <span class="keyword">let</span> color = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-theme&#x27;</span>) === <span class="string">&#x27;light&#x27;</span> ? <span class="string">&#x27;#4C4948&#x27;</span> : <span class="string">&#x27;rgba(251, 255, 0)&#x27;</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;posts-chart&#x27;</span>) &amp;&amp; postsOption) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> postsOptionNew = postsOption</span><br><span class="line">      postsOptionNew.<span class="property">title</span>.<span class="property">textStyle</span>.<span class="property">color</span> = color</span><br><span class="line">      postsOptionNew.<span class="property">xAxis</span>.<span class="property">nameTextStyle</span>.<span class="property">color</span> = color</span><br><span class="line">      postsOptionNew.<span class="property">yAxis</span>.<span class="property">nameTextStyle</span>.<span class="property">color</span> = color</span><br><span class="line">      postsOptionNew.<span class="property">xAxis</span>.<span class="property">axisLabel</span>.<span class="property">color</span> = color</span><br><span class="line">      postsOptionNew.<span class="property">yAxis</span>.<span class="property">axisLabel</span>.<span class="property">color</span> = color</span><br><span class="line">      postsOptionNew.<span class="property">xAxis</span>.<span class="property">axisLine</span>.<span class="property">lineStyle</span>.<span class="property">color</span> = color</span><br><span class="line">      postsOptionNew.<span class="property">yAxis</span>.<span class="property">axisLine</span>.<span class="property">lineStyle</span>.<span class="property">color</span> = color</span><br><span class="line">      postsOptionNew.<span class="property">series</span>[<span class="number">0</span>].<span class="property">markLine</span>.<span class="property">data</span>[<span class="number">0</span>].<span class="property">label</span>.<span class="property">color</span> = color</span><br><span class="line">      postsChart.<span class="title function_">setOption</span>(postsOptionNew)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;tags-chart&#x27;</span>) &amp;&amp; tagsOption) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> tagsOptionNew = tagsOption</span><br><span class="line">      tagsOptionNew.<span class="property">title</span>.<span class="property">textStyle</span>.<span class="property">color</span> = color</span><br><span class="line">      tagsOptionNew.<span class="property">xAxis</span>.<span class="property">nameTextStyle</span>.<span class="property">color</span> = color</span><br><span class="line">      tagsOptionNew.<span class="property">yAxis</span>.<span class="property">nameTextStyle</span>.<span class="property">color</span> = color</span><br><span class="line">      tagsOptionNew.<span class="property">xAxis</span>.<span class="property">axisLabel</span>.<span class="property">color</span> = color</span><br><span class="line">      tagsOptionNew.<span class="property">yAxis</span>.<span class="property">axisLabel</span>.<span class="property">color</span> = color</span><br><span class="line">      tagsOptionNew.<span class="property">xAxis</span>.<span class="property">axisLine</span>.<span class="property">lineStyle</span>.<span class="property">color</span> = color</span><br><span class="line">      tagsOptionNew.<span class="property">yAxis</span>.<span class="property">axisLine</span>.<span class="property">lineStyle</span>.<span class="property">color</span> = color</span><br><span class="line">      tagsOptionNew.<span class="property">series</span>[<span class="number">0</span>].<span class="property">markLine</span>.<span class="property">data</span>[<span class="number">0</span>].<span class="property">label</span>.<span class="property">color</span> = color</span><br><span class="line">      tagsChart.<span class="title function_">setOption</span>(tagsOptionNew)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;categories-chart&#x27;</span>) &amp;&amp; categoriesOption) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> categoriesOptionNew = categoriesOption</span><br><span class="line">      categoriesOptionNew.<span class="property">title</span>.<span class="property">textStyle</span>.<span class="property">color</span> = color</span><br><span class="line">      categoriesOptionNew.<span class="property">legend</span>.<span class="property">textStyle</span>.<span class="property">color</span> = color</span><br><span class="line">      <span class="keyword">if</span> (!categoryParentFlag) &#123; categoriesOptionNew.<span class="property">series</span>[<span class="number">0</span>].<span class="property">label</span>.<span class="property">color</span> = color &#125;</span><br><span class="line">      categoriesChart.<span class="title function_">setOption</span>(categoriesOptionNew)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;mode-button&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="built_in">setTimeout</span>(switchPostChart, <span class="number">100</span>) &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><hr><h3 id="12-7-Hexo-三连"><a href="#12-7-Hexo-三连" class="headerlink" title="12.7 Hexo 三连"></a>12.7 Hexo 三连</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo c;hexo g;hexo d</span><br></pre></td></tr></table></figure><hr><h2 id="十三、直达底部按钮"><a href="#十三、直达底部按钮" class="headerlink" title="十三、直达底部按钮"></a>十三、直达底部按钮</h2><p>在 <code>hexo-theme-butterfly\layout\includes\rightside.pug</code> 下进行修改</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131192520542.png" alt="下面的是新增"></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">button</span><span class="selector-id">#go-up</span>(type=&quot;<span class="selector-tag">button</span>&quot; title=_p(&quot;rightside<span class="selector-class">.back_to_top</span>&quot;))</span><br><span class="line">  <span class="selector-tag">i</span><span class="selector-class">.fas</span><span class="selector-class">.fa-arrow-up</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span><span class="selector-id">#go-down</span>(type=&quot;<span class="selector-tag">button</span>&quot; title=&quot;直达底部&quot; onclick=&quot;btf<span class="selector-class">.scrollToDest</span>(document<span class="selector-class">.body</span><span class="selector-class">.scrollHeight</span>, <span class="number">500</span>)&quot;)</span><br><span class="line">  <span class="selector-tag">i</span><span class="selector-class">.fas</span><span class="selector-class">.fa-arrow-down</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131193523505.png" alt="直达底部"></p><hr><h2 id="十四、网站恶搞标题"><a href="#十四、网站恶搞标题" class="headerlink" title="十四、网站恶搞标题"></a>十四、网站恶搞标题</h2><p>在 <code>source\js</code> 下新建 <code>title.js</code> 文件, 写入以下内容</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//动态标题</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">OriginTitile</span> = <span class="variable language_">document</span>.<span class="property">title</span>;</span><br><span class="line"><span class="keyword">var</span> titleTime;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;visibilitychange&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">hidden</span>) &#123;</span><br><span class="line">    <span class="comment">//离开当前页面时标签显示内容</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&#x27;只因你太美~~&#x27;</span>;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(titleTime);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//返回当前页面时标签显示内容</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&#x27;喜欢唱、跳、rap、篮球&#x27;</span>;</span><br><span class="line">    <span class="comment">//两秒后变回正常标题</span></span><br><span class="line">    titleTime = <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="property">title</span> = <span class="title class_">OriginTitile</span>;</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131193119168.png" alt="添加文件"></p><p>在<strong>主题配置文件</strong>中引入</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/universe.css&quot;&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;</span> <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">async</span> <span class="string">src=&quot;/js/title.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line">    <span class="comment"># - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131193413084.png" alt="引入"></p>]]></content>
      
      
      <categories>
          
          <category> Docs文档 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客 </tag>
            
            <tag> 美化 </tag>
            
            <tag> Butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown常用语法</title>
      <link href="/2022/12/21/Markdown%E5%B8%B8%E7%94%A8%E8%AF%AD%E6%B3%95/"/>
      <url>/2022/12/21/Markdown%E5%B8%B8%E7%94%A8%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="Markdown常用语法"><a href="#Markdown常用语法" class="headerlink" title="Markdown常用语法"></a>Markdown常用语法</h1><h2 id="一、标题"><a href="#一、标题" class="headerlink" title="一、标题"></a>一、标题</h2><p>两种形式：<br>1）使用<code>=</code>和<code>-</code>标记一级和二级标题。</p><blockquote><p>一级标题<br><code>=========</code><br>二级标题<br><code>---------</code></p></blockquote><p>效果：</p><blockquote><h1 id="一级标题"><a href="#一级标题" class="headerlink" title="一级标题   "></a>一级标题   </h1><h2 id="二级标题"><a href="#二级标题" class="headerlink" title="二级标题"></a>二级标题</h2></blockquote><p>2）使用<code>#</code>，可表示1-6级标题。</p><blockquote><p># 一级标题<br>## 二级标题<br>### 三级标题<br>#### 四级标题<br>##### 五级标题<br>###### 六级标题    </p></blockquote><p>效果：</p><blockquote><h1 id="一级标题-1"><a href="#一级标题-1" class="headerlink" title="一级标题"></a>一级标题</h1><h2 id="二级标题-1"><a href="#二级标题-1" class="headerlink" title="二级标题"></a>二级标题</h2><h3 id="三级标题"><a href="#三级标题" class="headerlink" title="三级标题"></a>三级标题</h3><h4 id="四级标题"><a href="#四级标题" class="headerlink" title="四级标题"></a>四级标题</h4><h5 id="五级标题"><a href="#五级标题" class="headerlink" title="五级标题"></a>五级标题</h5><h6 id="六级标题"><a href="#六级标题" class="headerlink" title="六级标题"></a>六级标题</h6></blockquote><p>3）提升标题等级 <code>Ctrl +</code></p><p>4）降低标题等级 <code>Ctrl -</code></p><hr><h2 id="二、段落"><a href="#二、段落" class="headerlink" title="二、段落"></a>二、段落</h2><p>段落的前后要有空行，所谓的空行是指没有文字内容。若想在段内强制换行的方式是使用<strong>两个以上</strong>空格加上回车（引用中换行省略回车）。</p><hr><h2 id="三、区块引用"><a href="#三、区块引用" class="headerlink" title="三、区块引用"></a>三、区块引用</h2><p>在段落的每行或者只在第一行使用符号<code>&gt;</code>,还可使用多个嵌套引用，如：</p><blockquote><p>&gt; 区块引用<br>&gt;&gt; 嵌套引用  </p></blockquote><p>效果：</p><blockquote><p>区块引用  </p><blockquote><p>嵌套引用</p></blockquote></blockquote><hr><h2 id="四、代码区块"><a href="#四、代码区块" class="headerlink" title="四、代码区块"></a>四、代码区块</h2><ul><li>小区块 <strong>Ctrl+Shift+&#96;</strong></li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`world`</span><br></pre></td></tr></table></figure><ul><li>大区块 <code>```</code> 后面可直接添加区块语言</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">```</span><br></pre></td></tr></table></figure><hr><h2 id="五、强调"><a href="#五、强调" class="headerlink" title="五、强调"></a>五、强调</h2><ul><li>用1个星号*或底线_表示斜体 <strong>斜体：*Ctrl+I*</strong></li><li>用2个星号*或底线_表示粗体 <strong>加粗：Ctrl+B</strong></li><li>用3个星号*或底线_表示粗斜体</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">*斜体文字*</span><br><span class="line"></span><br><span class="line">_斜体文字_</span><br><span class="line"></span><br><span class="line">**粗体文字**</span><br><span class="line"></span><br><span class="line">__粗体文字__</span><br><span class="line"></span><br><span class="line">***粗斜体文字***</span><br><span class="line"></span><br><span class="line">___粗斜体文字___</span><br></pre></td></tr></table></figure><hr><h2 id="六、列表"><a href="#六、列表" class="headerlink" title="六、列表"></a>六、列表</h2><ul><li>无序列表</li></ul><p>使用<code>·</code>、<code>+</code>、或<code>-</code>标记无序列表，如：</p><blockquote><p>-（+*） 第一项<br>-（+*） 第二项<br>- （+*）第三项</p></blockquote><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">* 第一项</span><br><span class="line">* 第二项</span><br><span class="line">* 第三项</span><br><span class="line"></span><br><span class="line">+ 第一项</span><br><span class="line">+ 第二项</span><br><span class="line">+ 第三项</span><br><span class="line"></span><br><span class="line">- 第一项</span><br><span class="line">- 第二项</span><br><span class="line">- 第三项</span><br></pre></td></tr></table></figure><p><strong>注意</strong>：标记后面最少有一个_空格_或_制表符_。若不在引用区块中，必须和前方段落之间存在空行。</p><p>效果：</p><blockquote><ul><li>第一项</li><li>第二项</li><li>第三项</li></ul></blockquote><ul><li>有序列表</li></ul><p>有序列表的标记方式是将上述的符号换成数字,并辅以<code>.</code>，如：</p><blockquote><p>1 . 第一项<br>2 . 第二项<br>3 . 第三项    </p></blockquote><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 第一项</span><br><span class="line">2. 第二项</span><br><span class="line">3. 第三项</span><br></pre></td></tr></table></figure><p>效果：</p><blockquote><ol><li>第一项</li><li>第二项</li><li>第三项</li></ol></blockquote><ul><li>嵌套列表</li></ul><p>无序有序均可嵌套</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. 第一项：</span><br><span class="line">    - 第一项嵌套的第一个元素</span><br><span class="line">    - 第一项嵌套的第二个元素</span><br><span class="line">2. 第二项：</span><br><span class="line">    - 第二项嵌套的第一个元素</span><br><span class="line">    - 第二项嵌套的第二个元素</span><br></pre></td></tr></table></figure><hr><h2 id="七、分割线-amp-删除线-amp-下划线"><a href="#七、分割线-amp-删除线-amp-下划线" class="headerlink" title="七、分割线&amp;删除线&amp;下划线"></a>七、分割线&amp;删除线&amp;下划线</h2><ul><li>分割线最常使用就是三个或以上<code>*</code>，还可以使用<code>-</code>和<code>_</code>。</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">***</span><br><span class="line">******</span><br><span class="line">------</span><br></pre></td></tr></table></figure><ul><li>删除线 <code>Alt + Shift + 5</code></li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~~tencent.com~~</span><br></pre></td></tr></table></figure><ul><li>下划线 <code>Ctrl + U</code></li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;u&gt;带下划线文本&lt;/u&gt;   </span><br></pre></td></tr></table></figure><hr><h2 id="八、链接"><a href="#八、链接" class="headerlink" title="八、链接"></a>八、链接</h2><ul><li>快捷键 <code>Ctrl + K</code></li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">这是一个链接 [新浪新闻](https://news.sina.com.cn/)</span><br><span class="line">&lt;https://news.sina.com.cn/&gt;</span><br></pre></td></tr></table></figure><p>链接可以由两种形式生成：<strong>行内式</strong>和<strong>参考式</strong>。<br><strong>行内式</strong>：</p><blockquote><p>[younghz的Markdown库](https::&#x2F;&#x2F;github.com&#x2F;younghz&#x2F;Markdown “Markdown”)。</p></blockquote><p>效果：</p><blockquote><p><a href="https:://github.com/younghz/Markdown" title="Markdown">younghz的Markdown库</a>。</p></blockquote><p><strong>参考式</strong>：</p><blockquote><p>[younghz的Markdown库1][1]<br>[younghz的Markdown库2][2]<br>[1]:https::&#x2F;&#x2F;github.com&#x2F;younghz&#x2F;Markdown “Markdown”<br>[2]:https::&#x2F;&#x2F;github.com&#x2F;younghz&#x2F;Markdown “Markdown”    </p></blockquote><p>效果：</p><blockquote><p><a href="https:://github.com/younghz/Markdown" title="Markdown">younghz的Markdown库1</a><br><a href="https:://github.com/younghz/Markdown" title="Markdown">younghz的Markdown库2</a></p></blockquote><p><strong>注意</strong>：上述的<code>[1]:https:://github.com/younghz/Markdown &quot;Markdown&quot;</code>不出现在区块中。</p><hr><h2 id="九、图片"><a href="#九、图片" class="headerlink" title="九、图片"></a>九、图片</h2><ul><li>快捷键 <code>Ctrl + Shift + L</code></li></ul><p>添加图片的形式和链接相似，只需在链接的基础上前方加一个<code>！</code>。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">![alt 属性文本](图片地址)</span><br><span class="line">![alt 属性文本](图片地址 &quot;可选标题&quot;)</span><br></pre></td></tr></table></figure><hr><h2 id="十、反斜杠"><a href="#十、反斜杠" class="headerlink" title="十、反斜杠\"></a>十、反斜杠<code>\</code></h2><p>相当于<strong>反转义</strong>作用。使符号成为普通符号。</p><hr><h2 id="十一、表格"><a href="#十一、表格" class="headerlink" title="十一、表格"></a>十一、表格</h2><ul><li>快捷键 <code>Ctrl + t</code></li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">| 左对齐 | 右对齐 | 居中对齐 |</span><br><span class="line">| :-----| ----: | :----: |</span><br><span class="line">| 单元格 | 单元格 | 单元格 |</span><br><span class="line">| 单元格 | 单元格 | 单元格 |</span><br><span class="line"></span><br><span class="line">|  表头   | 表头  |</span><br><span class="line">|  ----  | ----  |</span><br><span class="line">| 单元格  | 单元格 |</span><br><span class="line">| 单元格  | 单元格 |</span><br></pre></td></tr></table></figure><hr><h2 id="十二、高亮"><a href="#十二、高亮" class="headerlink" title="十二、高亮"></a>十二、高亮</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">==高亮==</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Docs文档 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
            <tag> 语法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown写作规范</title>
      <link href="/2022/12/20/Markdown%E5%86%99%E4%BD%9C%E8%A7%84%E8%8C%83/"/>
      <url>/2022/12/20/Markdown%E5%86%99%E4%BD%9C%E8%A7%84%E8%8C%83/</url>
      
        <content type="html"><![CDATA[<h1 id="Markdown写作规范"><a href="#Markdown写作规范" class="headerlink" title="Markdown写作规范"></a>Markdown写作规范</h1><p><strong>《JERRY 中文技术文档的写作规范》</strong></p><blockquote><p>主要内容基于阮一峰<a href="https://github.com/ruanyf/document-style-guide">《中文技术文档的写作规范》</a>，部分内容依据平时习惯进行了个人补充。</p><p>转载请注明出处，请勿用于商业用途！</p></blockquote><h1 id="一、标题"><a href="#一、标题" class="headerlink" title="一、标题"></a>一、标题</h1><h2 id="1-1-层级"><a href="#1-1-层级" class="headerlink" title="1.1 层级"></a>1.1 层级</h2><p>标题分为四级。</p><ul><li>一级标题：文章的标题</li><li>二级标题：文章主要部分的大标题</li><li>三级标题：二级标题下面一级的小标题</li><li>四级标题：三级标题下面某一方面的小标题</li></ul><p>下面是示例。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 一级标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 二级标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">### 三级标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">#### 四级标题</span></span><br></pre></td></tr></table></figure><h2 id="1-2-原则"><a href="#1-2-原则" class="headerlink" title="1.2 原则"></a>1.2 原则</h2><p><strong>（1）一级标题下，不能直接出现三级标题</strong></p><p>示例：下面的文章结构，缺少二级标题。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 一级标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">### 三级标题</span></span><br></pre></td></tr></table></figure><p><strong>（2）标题要避免孤立编号（即同级标题只有一个）</strong></p><p>示例：下面的文章结构，<code>二级标题 A</code> 只包含一个三级标题，完全可以省略 <code>三级标题 A</code>。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">## 二级标题 A</span></span><br><span class="line"></span><br><span class="line"><span class="section">### 三级标题 A</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 二级标题 B</span></span><br></pre></td></tr></table></figure><p><strong>（3）下级标题不重复上一级标题的名字</strong></p><p>示例：下面的文章结构，二级标题与下属的三级标题同名，建议避免。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">## 概述</span></span><br><span class="line"></span><br><span class="line"><span class="section">### 概述</span></span><br></pre></td></tr></table></figure><p><strong>（4）谨慎使用四级标题，尽量避免出现，保持层级的简单，防止出现过于复杂的章节</strong></p><p>如果三级标题下有并列性的内容，建议只使用项目列表（Item list）。</p><p>示例：下面的结构二要好于结构一。结构一适用的场景，主要是较长篇幅的内容。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">结构一</span><br><span class="line"></span><br><span class="line"><span class="section">### 三级标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">#### 四级标题 A</span></span><br><span class="line"></span><br><span class="line"><span class="section">#### 四级标题 B</span></span><br><span class="line"></span><br><span class="line"><span class="section">#### 四级标题 C</span></span><br><span class="line"></span><br><span class="line">结构二</span><br><span class="line"></span><br><span class="line"><span class="section">### 三级标题</span></span><br><span class="line"></span><br><span class="line"><span class="strong">**（1）A**</span></span><br><span class="line"></span><br><span class="line"><span class="strong">**（2）B**</span></span><br><span class="line"></span><br><span class="line"><span class="strong">**（3）C**</span></span><br></pre></td></tr></table></figure><blockquote><p>建议：无论是几级标题，只要下方的内容是对标题的解释，那么推荐直接使用项目列表（Item list）</p><p>举例：<code>一、标题</code>（一级标题）的 <code>1.2 原则</code>（二级标题）下方直接跟项目列表</p></blockquote><h1 id="二、文本"><a href="#二、文本" class="headerlink" title="二、文本"></a>二、文本</h1><h2 id="2-1-字间距"><a href="#2-1-字间距" class="headerlink" title="2.1 字间距"></a>2.1 字间距</h2><p><strong>（1）全角中文字符与半角英文字符之间，应有一个半角空格</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">错误：本文介绍如何快速启动Windows系统。</span><br><span class="line"></span><br><span class="line">正确：本文介绍如何快速启动 Windows 系统。</span><br></pre></td></tr></table></figure><p><strong>（2）全角中文字符与半角阿拉伯数字之间，有没有半角空格都可，但必须保证风格统一，不能两种风格混杂</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">正确：2011年5月15日，我订购了5台笔记本电脑与10台平板电脑。</span><br><span class="line"></span><br><span class="line">正确：2011 年 5 月 15 日，我订购了 5 台笔记本电脑与 10 台平板电脑。(个人推荐)</span><br></pre></td></tr></table></figure><p>半角的百分号，视同阿拉伯数字。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">正确：今年我国经济增长率是6.5%。</span><br><span class="line"></span><br><span class="line">正确：今年我国经济增长率是 6.5%。（个人推荐）</span><br></pre></td></tr></table></figure><p><strong>（3）英文单位若不翻译，单位前的阿拉伯数字与单位符号之间，应留出适当的空隙</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">例1：一部容量为 16 GB 的智能手机</span><br><span class="line"></span><br><span class="line">例2：1 h = 60 min = 3,600 s</span><br></pre></td></tr></table></figure><p><strong>（4）半角英文字符和半角阿拉伯数字，与全角标点符号之间不留空格</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">错误：他的电脑是 MacBook Air 。</span><br><span class="line"></span><br><span class="line">正确：他的电脑是 MacBook Air。</span><br></pre></td></tr></table></figure><h2 id="2-2-句子"><a href="#2-2-句子" class="headerlink" title="2.2 句子"></a>2.2 句子</h2><p><strong>（1）避免使用长句</strong></p><p>不包含任何标点符号的单个句子，或者以逗号分隔的句子构件，长度尽量保持在 20 个字以内；20～29 个字的句子，可以接受；30～39 个字的句子，语义必须明确，才能接受；多于 40 个字的句子，任何情况下都不能接受。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">错误：本产品适用于从由一台服务器进行动作控制的单一节点结构到由多台服务器进行动作控制的并行处理程序结构等多种体系结构。</span><br><span class="line"></span><br><span class="line">正确：本产品适用于多种体系结构。无论是由一台服务器（单一节点结构），还是由多台服务器（并行处理结构）进行动作控制，均可以使用本产品。</span><br></pre></td></tr></table></figure><p>逗号分割的长句，总长度不应该超过 100 字或者正文的 3 行。</p><p><strong>（2）尽量使用简单句和并列句，避免使用复合句</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">并列句：他昨天生病了，没有参加会议。</span><br><span class="line"></span><br><span class="line">复合句：那个昨天生病的人没有参加会议。</span><br></pre></td></tr></table></figure><p><strong>（3）同样一个意思，尽量使用肯定句表达，不使用否定句表达</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">错误：请确认没有接通装置的电源。</span><br><span class="line"></span><br><span class="line">正确：请确认装置的电源已关闭。</span><br></pre></td></tr></table></figure><p><strong>（4）避免使用双重否定句</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">错误：没有删除权限的用户，不能删除此文件。</span><br><span class="line"></span><br><span class="line">正确：用户必须拥有删除权限，才能删除此文件。</span><br></pre></td></tr></table></figure><h2 id="2-3-写作风格"><a href="#2-3-写作风格" class="headerlink" title="2.3 写作风格"></a>2.3 写作风格</h2><p><strong>（1）尽量不使用被动语态，改为使用主动语态</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">错误：假如此软件尚未被安装，</span><br><span class="line"></span><br><span class="line">正确：假如尚未安装这个软件，</span><br></pre></td></tr></table></figure><p><strong>（2）不使用非正式的语言风格</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">错误：Lady Gaga 的演唱会真是酷毙了，从没看过这么给力的表演！！！</span><br><span class="line"></span><br><span class="line">正确：无法参加本次活动，我深感遗憾。</span><br></pre></td></tr></table></figure><p><strong>（3）不使用冷僻、生造或者文言文的词语，而要使用现代汉语的常用表达方式</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">错误：这是唯二的快速启动的方法。</span><br><span class="line"></span><br><span class="line">正确：这是仅有的两种快速启动的方法。</span><br></pre></td></tr></table></figure><p><strong>（4）用对 “的”、“地”、“得”</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">她露出了开心的笑容。</span><br><span class="line">（形容词＋的＋名词）</span><br><span class="line"></span><br><span class="line">她开心地笑了。</span><br><span class="line">（副词＋地＋动词）</span><br><span class="line"></span><br><span class="line">她笑得很开心。</span><br><span class="line">（动词＋得＋副词）</span><br></pre></td></tr></table></figure><p><strong>（5）使用代词时（比如 “其”、“该”、“此”、“这” 等词），必须明确指代的内容，保证只有一个含义</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">错误：从管理系统可以监视中继系统和受其直接控制的分配系统。</span><br><span class="line"></span><br><span class="line">正确：从管理系统可以监视两个系统：中继系统和受中继系统直接控制的分配系统。</span><br></pre></td></tr></table></figure><p><strong>（6）名词前不要使用过多的形容词</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">错误：此设备的使用必须在接受过本公司举办的正式的设备培训的技师的指导下进行。</span><br><span class="line"></span><br><span class="line">正确：此设备必须在技师的指导下使用，且指导技师必须接受过由本公司举办的正式设备培训。</span><br></pre></td></tr></table></figure><h2 id="2-4-英文处理"><a href="#2-4-英文处理" class="headerlink" title="2.4 英文处理"></a>2.4 英文处理</h2><p><strong>（1）英文原文如果使用了复数形式，翻译成中文时，应该将其还原为单数形式</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">英文：⋯information stored in random access memory (RAMs)⋯</span><br><span class="line"></span><br><span class="line">中文：……存储在随机存取存储器（RAM）里的信息……</span><br></pre></td></tr></table></figure><p><strong>（2）外文缩写可以使用半角圆点(<code>.</code>)表示缩写</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">U.S.A.</span><br><span class="line">Apple, Inc.</span><br></pre></td></tr></table></figure><p><strong>（3）表示中文时，英文省略号（<code>⋯</code>）应改为中文省略号（<code>……</code>）</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">英文：5 minutes later⋯</span><br><span class="line"></span><br><span class="line">中文：5 分钟过去了……</span><br></pre></td></tr></table></figure><p><strong>（4）英文书名或电影名改用中文表达时，双引号应改为书名号</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">英文：He published an article entitled &quot;The Future of the Aviation&quot;.</span><br><span class="line"></span><br><span class="line">中文：他发表了一篇名为《航空业的未来》的文章。</span><br></pre></td></tr></table></figure><p><strong>（5）第一次出现英文词汇时，在括号中给出中文标注。此后再次出现时，直接使用英文缩写即可</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IOC（International Olympic Committee，国际奥林匹克委员会）。这样定义后，便可以直接使用 “IOC” 了。</span><br></pre></td></tr></table></figure><p><strong>（6）专有名词中每个词第一个字母均应大写，非专有名词则不需要大写</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">“American Association of Physicists in Medicine”（美国医学物理学家协会）是专有名词，需要大写。</span><br><span class="line"></span><br><span class="line">“online transaction processing”（在线事务处理）不是专有名词，不应大写。</span><br></pre></td></tr></table></figure><h1 id="三、段落"><a href="#三、段落" class="headerlink" title="三、段落"></a>三、段落</h1><h2 id="3-1-原则"><a href="#3-1-原则" class="headerlink" title="3.1 原则"></a>3.1 原则</h2><ul><li>一个段落只能有一个主题，或一个中心句子</li><li>段落的中心句子放在段首，对全段内容进行概述。后面陈述的句子为核心句服务</li><li>一个段落的长度不能超过七行，最佳段落长度小于等于四行</li><li>段落的句子语气要使用陈述和肯定语气，避免使用感叹语气</li><li>段落之间使用一个空行隔开</li><li>段落开头不要留出空白字符</li><li>文本句子正常情况下均该以句号结尾</li></ul><h2 id="3-2-引用"><a href="#3-2-引用" class="headerlink" title="3.2 引用"></a>3.2 引用</h2><p>引用第三方内容时，应注明出处。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">One man’s constant is another man’s variable. — Alan Perlis</span><br></pre></td></tr></table></figure><p>如果是全篇转载，请在全文开头显著位置注明作者和出处，并链接至原文。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">本文转载自 WikiQuote</span><br></pre></td></tr></table></figure><p>使用外部图片时，必须在图片下方或文末标明来源。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">本文部分图片来自 Wikipedia</span><br></pre></td></tr></table></figure><h1 id="四、数值"><a href="#四、数值" class="headerlink" title="四、数值"></a>四、数值</h1><h2 id="4-1-半角数字"><a href="#4-1-半角数字" class="headerlink" title="4.1 半角数字"></a>4.1 半角数字</h2><p>阿拉伯数字一律使用半角形式，不得使用全角形式。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">错误：这件商品的价格是１０００元。</span><br><span class="line"></span><br><span class="line">正确：这件商品的价格是 1000 元。</span><br></pre></td></tr></table></figure><h2 id="4-2-千分号"><a href="#4-2-千分号" class="headerlink" title="4.2 千分号"></a>4.2 千分号</h2><p>数值为千位以上，应添加千分号（半角逗号）。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">XXX 公司的实收资本为 ￥1,258,000 人民币。</span><br></pre></td></tr></table></figure><p>对于 4 位以下的数值，千分号是选用的，比如 <code>1000</code> 和 <code>1,000</code> 都可以接受。对于 4 位以上的数值，千分号是必须的。</p><h2 id="4-3-货币"><a href="#4-3-货币" class="headerlink" title="4.3 货币"></a>4.3 货币</h2><p>货币应为阿拉伯数字，并在数字前写出货币符号，或在数字后写出货币中文名称。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$1,000</span><br><span class="line">1,000 美元</span><br></pre></td></tr></table></figure><p>英文的货币名称，建议参考国际标准 <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO 4217</a>。</p><h2 id="4-4-数值范围"><a href="#4-4-数值范围" class="headerlink" title="4.4 数值范围"></a>4.4 数值范围</h2><p>表示数值范围时，用 <code>～</code> 或 <code>——</code> 连接。参见《标点符号》一节的 “连接号” 部分。</p><p>带有单位或百分号时，两个数字建议都要加上单位或百分号。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">132kg～234kg</span><br><span class="line"></span><br><span class="line">67%～89%</span><br></pre></td></tr></table></figure><h2 id="4-5-变化程度的表示法"><a href="#4-5-变化程度的表示法" class="headerlink" title="4.5 变化程度的表示法"></a>4.5 变化程度的表示法</h2><p>数字的增加要使用 “增加了”、“增加到”。“了” 表示增量，“到” 表示定量。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">增加到过去的两倍</span><br><span class="line">（过去为一，现在为二）</span><br><span class="line"></span><br><span class="line">增加了两倍</span><br><span class="line">（过去为一，现在为三）</span><br></pre></td></tr></table></figure><p>数字的减少要使用 “降低了”、“降低到”。“了” 表示增量，“到” 表示定量。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">降低到百分之八十</span><br><span class="line">（定额是一百，现在是八十）</span><br><span class="line"></span><br><span class="line">降低了百分之八十</span><br><span class="line">（原来是一百，现在是二十）</span><br></pre></td></tr></table></figure><p>不能用 “降低 N 倍 ” 或 “减少 N 倍” 的表示法，要用 “降低百分之几” 或 “减少百分之几”。因为减少（或降低）一倍表示数值原来为一百，现在等于零。</p><h1 id="五、标点符号"><a href="#五、标点符号" class="headerlink" title="五、标点符号"></a>五、标点符号</h1><h2 id="5-1-原则"><a href="#5-1-原则" class="headerlink" title="5.1 原则"></a>5.1 原则</h2><p><strong>（1）中文语句的标点符号，均应该采取全角符号，这样可以与全角文字保持视觉的一致</strong></p><p><strong>（2）如果整句为英文，则该句使用英文&#x2F;半角标点</strong></p><p><strong>（3）句号、问号、叹号、逗号、顿号、分号和冒号不得出现在一行之首</strong></p><p><strong>（4）点号（句号、逗号、顿号、分号、冒号）不得出现在标题的末尾，而标号（引号、括号、破折号、省略号、书名号、着重号、间隔号、叹号、问号）可以</strong></p><h2 id="5-2-句号"><a href="#5-2-句号" class="headerlink" title="5.2 句号"></a>5.2 句号</h2><p><strong>（1）中文语句的结尾处应该用全角句号（<code>。</code>）</strong></p><p><strong>（2）句子末尾用括号加注时，句号应在括号之外</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">错误：关于文件的输出，请参照第 1.3 节（见第 26 页。）</span><br><span class="line"></span><br><span class="line">正确：关于文件的输出，请参照第 1.3 节（见第 26 页）。</span><br></pre></td></tr></table></figure><h2 id="5-3-逗号"><a href="#5-3-逗号" class="headerlink" title="5.3 逗号"></a>5.3 逗号</h2><p><strong>（1）逗号（<code>，</code>）表示句子内部的一般性停顿</strong></p><p><strong>（2）注意避免 “一逗到底”，即整个段落除了结尾，全部停顿都使用逗号</strong></p><h2 id="5-4-顿号"><a href="#5-4-顿号" class="headerlink" title="5.4 顿号"></a>5.4 顿号</h2><p><strong>（1）中文句子内部的并列词，应该用全角顿号(<code>、</code>) 分隔，而不用逗号，即使存在并列词是英语也是如此</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">错误：我最欣赏的科技公司有 Google, Facebook, 腾讯, 阿里和百度等。</span><br><span class="line"></span><br><span class="line">正确：我最欣赏的科技公司有 Google、Facebook、腾讯、阿里和百度等。</span><br></pre></td></tr></table></figure><p><strong>（2）英文句子中，并列词语之间使用半角逗号（<code>,</code>）分隔</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">例句：Microsoft Office includes Word, Excel, PowerPoint, Outlook and other components.</span><br></pre></td></tr></table></figure><p><strong>（3）中文句子内部的并列词，最后一个尽量使用（<code>和</code>）来连接，使句子读起来更加连贯，下面两个句子都可以，第二个更优</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">正确：我最欣赏的科技公司有 Google、Facebook、腾讯、阿里，以及百度等。</span><br><span class="line"></span><br><span class="line">正确：我最欣赏的科技公司有 Google、Facebook、腾讯、阿里和百度等。</span><br></pre></td></tr></table></figure><h2 id="5-5-分号"><a href="#5-5-分号" class="headerlink" title="5.5 分号"></a>5.5 分号</h2><p><strong>（1）分号（<code>；</code>）表示复句内部并列分句之间的停顿</strong></p><h2 id="5-6-引号"><a href="#5-6-引号" class="headerlink" title="5.6 引号"></a>5.6 引号</h2><p><strong>（1）引用时，应该使用全角双引号（<code>“ ”</code>），注意前后双引号不同</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">例句：许多人都认为客户服务的核心是 “友好” 和 “专业”。</span><br></pre></td></tr></table></figure><p><strong>（2）引号里面还要用引号时，外面一层用双引号，里面一层用单引号（<code>‘ ’</code>），注意前后单引号不同</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">例句：鲍勃解释道：“我要放音乐，可萨利说，‘不行！’。”</span><br></pre></td></tr></table></figure><p><strong>（3）引号与前后文字之间应该用一个空格隔开，与标点符号之间则不用</strong></p><h2 id="5-7-括号"><a href="#5-7-括号" class="headerlink" title="5.7 括号"></a>5.7 括号</h2><p><strong>（1）使用全角圆括号（<code>（）</code>），括号前后不加空格。使用半角圆括号（<code>()</code>），括号前后加一个空格</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">例句：请确认所有的连接（电缆和接插件）均安装牢固。</span><br><span class="line"></span><br><span class="line">例句：I love you (GitHub).</span><br></pre></td></tr></table></figure><p>圆括号前后遇到标点符号不用加空格。</p><p><strong>（2）几种括号的中英文名称</strong></p><table><thead><tr><th align="center"></th><th align="center">英文</th><th align="center">中文</th></tr></thead><tbody><tr><td align="center"><code>&#123; &#125;</code></td><td align="center">braces 或 curly brackets</td><td align="center">大括号</td></tr><tr><td align="center"><code>[ ]</code></td><td align="center">square brackets 或 brackets</td><td align="center">方括号</td></tr><tr><td align="center"><code>&lt; &gt;</code></td><td align="center">angled brackets</td><td align="center">尖括号</td></tr><tr><td align="center"><code>( )</code></td><td align="center">parentheses</td><td align="center">圆括号</td></tr></tbody></table><p><strong>（3）中文句子中只能出现全角圆括号（<code>（）</code>），无论括号中是中文还是英文。英文句子中只能出现半角圆括号（<code>()</code>），无论括号中是英文还是中文</strong></p><h2 id="5-8-冒号"><a href="#5-8-冒号" class="headerlink" title="5.8 冒号"></a>5.8 冒号</h2><p><strong>（1）全角冒号（<code>：</code>）常用在需要解释的词语后边，引出解释和说明</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">例句：请确认以下几项内容：时间、地点、活动名称和来宾数量。</span><br></pre></td></tr></table></figure><p><strong>（2）中文句子中一律使用全角冒号（<code>：</code>），无论冒号前是中文还是英文；英文句子中一律使用半角冒号（<code>:</code>），无论冒号前是英文还是中文</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Markdown：是一种轻量级标记语言，它允许人们使用易读易写的纯文本格式编写文档。</span><br></pre></td></tr></table></figure><p><strong>（3）表示时间时，应使用半角冒号（<code>:</code>）</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">例句：早上 8:00</span><br></pre></td></tr></table></figure><h2 id="5-9-省略号"><a href="#5-9-省略号" class="headerlink" title="5.9 省略号"></a>5.9 省略号</h2><p><strong>（1）省略号（<code>……</code>）表示语句未完、或者语气的不连续</strong></p><p><strong>（2）省略号占两个汉字空间、包含六个省略点，不要使用 <code>。。。</code> 或 <code>...</code> 等非标准形式</strong></p><p><strong>（3）省略号不应与 “等” 这个词一起使用</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">错误：我们为会餐准备了香蕉、苹果、梨…等各色水果。</span><br><span class="line"></span><br><span class="line">正确：我们为会餐准备了各色水果，有香蕉、苹果、梨……</span><br><span class="line"></span><br><span class="line">正确：我们为会餐准备了香蕉、苹果、梨等各色水果。</span><br></pre></td></tr></table></figure><h2 id="5-10-感叹号"><a href="#5-10-感叹号" class="headerlink" title="5.10 感叹号"></a>5.10 感叹号</h2><p><strong>（1）应该使用平静的语气叙述，尽量避免使用感叹号（<code>！</code>）</strong></p><p><strong>（2）不得多个感叹号连用，比如 <code>！！</code> 和 <code>!!!</code></strong></p><h2 id="5-11-破折号"><a href="#5-11-破折号" class="headerlink" title="5.11 破折号"></a>5.11 破折号</h2><p><strong>（1）破折号 <code>————</code> 一般用于进一步解释</strong></p><p><strong>（2）破折号应占两个汉字的位置。如果破折号本身只占一个汉字的位置，那么前后应该留出一个半角空格</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">例句：直觉————尽管它并不总是可靠的————告诉我，这事可能出了些问题。</span><br><span class="line"></span><br><span class="line">例句：直觉 —— 尽管它并不总是可靠的 —— 告诉我，这事可能出了些问题。</span><br></pre></td></tr></table></figure><h2 id="5-12-连接号"><a href="#5-12-连接号" class="headerlink" title="5.12 连接号"></a>5.12 连接号</h2><p><strong>（1）连接号用于连接两个类似的词</strong></p><p><strong>（2）以下场合应该使用直线连接号（<code>-</code>），占一个半角字符的位置</strong></p><ul><li>两个名词的复合</li><li>图表编号</li></ul><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">例句：氧化-还原反应</span><br><span class="line"></span><br><span class="line">例句：图 1-1</span><br></pre></td></tr></table></figure><p><strong>（3）数值范围（例如日期、时间或数字）应该使用波浪连接号（<code>～</code>），占一个全角字符的位置</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">例句：2009年～2011年</span><br></pre></td></tr></table></figure><p>注意，波浪连接号前后两个值都应该加上单位。</p><p><strong>（4）波浪连接号也可以用汉字 “至” 代替</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">例句：周围温度：-20°C 至 -10°C</span><br></pre></td></tr></table></figure><h1 id="六、Markdown"><a href="#六、Markdown" class="headerlink" title="六、Markdown"></a>六、Markdown</h1><blockquote><p> Markdown 中所有文本内容均建议按照上述规范来书写。</p></blockquote><h2 id="6-1-标题"><a href="#6-1-标题" class="headerlink" title="6.1 标题"></a>6.1 标题</h2><p>只使用三级标题。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 一级标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 二级标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">### 三级标题</span></span><br></pre></td></tr></table></figure><p>四级标题。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 全角圆括号加粗 --&gt;</span><br><span class="line"><span class="strong">**（1）标题**</span></span><br></pre></td></tr></table></figure><p>一到四级标题末尾不能出现句号。</p><p>单个四级标题直接加粗即可，不要写序号。</p><p>四级标题后请使用列表。</p><p><strong>开头规范</strong></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 名称&lt;!-- 书名、文件名、文档名用《》，其他用 【】 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="strong">**第二名称**</span></span><br><span class="line"></span><br><span class="line"><span class="quote">&gt; 声明</span></span><br><span class="line"></span><br><span class="line"><span class="strong">**目录**</span></span><br><span class="line"></span><br><span class="line"><span class="section"># 一、一级标题</span></span><br><span class="line">或者</span><br><span class="line"><span class="section"># 第一章 一级标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">## 1.1 二级标题</span></span><br><span class="line"></span><br><span class="line"><span class="section">### 1.1.1 三级标题</span></span><br><span class="line"></span><br><span class="line"><span class="strong">**（1）四级标题**</span></span><br></pre></td></tr></table></figure><h2 id="6-2-段落"><a href="#6-2-段落" class="headerlink" title="6.2 段落"></a>6.2 段落</h2><p>四级标题及关键字才能使用 “加粗”，书名、人名等可以 “斜体”，建议不要使用 “高亮”。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="strong">**Markdown**</span>：是一种轻量级标记语言，它允许人们使用易读易写的纯文本格式编写文档。</span><br><span class="line"></span><br><span class="line"><span class="emphasis">*斜体*</span></span><br><span class="line"></span><br><span class="line">==高亮==</span><br></pre></td></tr></table></figure><blockquote><p> <strong>Markdown</strong>：是一种轻量级标记语言，它允许人们使用易读易写的纯文本格式编写文档。</p></blockquote><p>标题上下不要使用分割线。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">---</span><br></pre></td></tr></table></figure><p>上下角标。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">5~4~</span><br><span class="line">2^4^</span><br><span class="line">5<span class="language-xml"><span class="tag">&lt;<span class="name">sup</span>&gt;</span></span>4<span class="language-xml"><span class="tag">&lt;/<span class="name">sup</span>&gt;</span></span></span><br><span class="line">2<span class="language-xml"><span class="tag">&lt;<span class="name">sub</span>&gt;</span></span>4<span class="language-xml"><span class="tag">&lt;/<span class="name">sub</span>&gt;</span></span></span><br><span class="line">&lt;!-- 推荐使用 HTML 便签法 --&gt;</span><br></pre></td></tr></table></figure><blockquote><p>5<del>4</del></p><p>2^4^ </p><p>5<sup>4</sup></p><p>2<sub>4</sub></p></blockquote><h2 id="6-3-列表"><a href="#6-3-列表" class="headerlink" title="6.3 列表"></a>6.3 列表</h2><p>同一列表不能分隔开，建议列表元素单行字数不要过长。</p><p>两个及以上元素才能使用列表，单个元素不能用列表表示。</p><p>列表每行的结束不加句号。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 无序列表 --&gt;</span><br><span class="line"><span class="bullet">-</span> 第一项</span><br><span class="line"><span class="bullet">-</span> 第二项</span><br><span class="line"><span class="bullet">-</span> 第三项</span><br><span class="line"></span><br><span class="line">&lt;!-- 有序列表 --&gt;</span><br><span class="line"><span class="bullet">1.</span> 第一项</span><br><span class="line"><span class="bullet">2.</span> 第二项</span><br><span class="line"><span class="bullet">3.</span> 第三项</span><br></pre></td></tr></table></figure><h2 id="6-4-区块"><a href="#6-4-区块" class="headerlink" title="6.4 区块"></a>6.4 区块</h2><p>区块使用在声明、引用、特殊强调和非主体内容部分。</p><p>区块严禁嵌套，区块中可以使用列表。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="quote">&gt; 区块中使用列表</span></span><br><span class="line"><span class="quote">&gt; 1. 第一项</span></span><br><span class="line"><span class="quote">&gt; 2. 第二项</span></span><br><span class="line"><span class="quote">&gt; 3. 第三项</span></span><br><span class="line"><span class="quote">&gt; - 第一项</span></span><br><span class="line"><span class="quote">&gt; - 第二项</span></span><br><span class="line"><span class="quote">&gt; - 第三项</span></span><br></pre></td></tr></table></figure><blockquote><p>区块中使用列表</p><ol><li>第一项</li><li>第二项</li><li>第三项</li></ol><ul><li>第一项</li><li>第二项</li><li>第三项</li></ul></blockquote><h2 id="6-5-代码"><a href="#6-5-代码" class="headerlink" title="6.5 代码"></a>6.5 代码</h2><p>段落中的片段代码适量使用，关键字不要重复使用片段代码。</p><p>片段代码前后遇到文字留一个空格，遇到标点符号不用留空格。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这是一个 <span class="code">`片段代码`</span> 示 <span class="code">`例`</span>。</span><br></pre></td></tr></table></figure><blockquote><p>这是一个 <code>片段代码</code> 示 <code>例</code>。</p></blockquote><p>代码块严格标注类型。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 普通文本 --&gt;</span><br><span class="line">​<span class="code">```text</span></span><br><span class="line"><span class="code">普通文字标注 text 类型</span></span><br><span class="line"><span class="code">​```</span></span><br><span class="line"></span><br><span class="line">&lt;!-- markdown --&gt;</span><br><span class="line">​<span class="code">```markdown</span></span><br><span class="line"><span class="code">### Markdown 文本标注为 markdown 类型。</span></span><br><span class="line"><span class="code">​```</span></span><br><span class="line"></span><br><span class="line">&lt;!-- 命令行 --&gt;</span><br><span class="line">​<span class="code">```bash</span></span><br><span class="line"><span class="code">$ javac Test.java</span></span><br><span class="line"><span class="code"># 编译 Test.java 文件。</span></span><br><span class="line"><span class="code"># 命令行统一为 bash 类型，且每条命令前加上 &#x27;$&#x27;，其中 &#x27;#&#x27; 为 bash 注释。</span></span><br><span class="line"><span class="code">​```</span></span><br><span class="line"></span><br><span class="line">&lt;!-- 代码 --&gt;</span><br><span class="line">​<span class="code">```java</span></span><br><span class="line"><span class="code">System.out.println(&quot;Hello World!&quot;);</span></span><br><span class="line"><span class="code">// 打印 Hello World!</span></span><br><span class="line"><span class="code">/* 根据不同的编程语言选择不同的类型。 */</span></span><br><span class="line"><span class="code">​```</span></span><br></pre></td></tr></table></figure><blockquote> <!-- 普通文本 --></blockquote><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">普通文字标注 text 类型</span><br></pre></td></tr></table></figure><blockquote> <!-- markdown --></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">### Markdown 文本标注为 markdown 类型。</span></span><br></pre></td></tr></table></figure><blockquote> <!-- 命令行 --></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ javac Test.java</span><br><span class="line"><span class="comment"># 编译 Test.java 文件。</span></span><br><span class="line"><span class="comment"># 命令行统一为 bash 类型，且每条命令前加上 &#x27;$&#x27;，其中 &#x27;#&#x27; 为 bash 注释。</span></span><br></pre></td></tr></table></figure><blockquote> <!-- 代码 --></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line"><span class="comment">// 打印 Hello World!</span></span><br><span class="line"><span class="comment">/* 根据不同的编程语言选择不同的类型。 */</span></span><br></pre></td></tr></table></figure><h2 id="6-6-链接"><a href="#6-6-链接" class="headerlink" title="6.6 链接"></a>6.6 链接</h2><p>非特殊情况不要直接暴露链接地址。</p><p>链接左右为文字时留一个空格，为标点符号时不用。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">建议：[<span class="string">bilibili</span>](<span class="link">https://www.bilibili.com/</span>)</span><br><span class="line"></span><br><span class="line">不建议：<span class="language-xml">&lt;https://www.bilibili.com/&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>建议：<a href="https://www.bilibili.com/">bilibili</a></p><p>不建议：<a href="https://www.bilibili.com/">https://www.bilibili.com/</a></p></blockquote><h2 id="6-7-图片"><a href="#6-7-图片" class="headerlink" title="6.7 图片"></a>6.7 图片</h2><p>合理调整图片大小。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">RUNOOB 图标</span>](<span class="link">http://static.runoob.com/images/runoob-logo.png &quot;RUNOOB&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;http://static.runoob.com/images/runoob-logo.png&quot;</span> <span class="attr">width</span>=<span class="string">&quot;50%&quot;</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="6-8-表格"><a href="#6-8-表格" class="headerlink" title="6.8 表格"></a>6.8 表格</h2><p>表格非特殊情况一律默认左对齐。</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|  表头   | 表头  |</span><br><span class="line">|  ----  | ----  |</span><br><span class="line">| 单元格  | 单元格 |</span><br><span class="line">| 单元格  | 单元格 |</span><br></pre></td></tr></table></figure><table><thead><tr><th>表头</th><th>表头</th></tr></thead><tbody><tr><td>单元格</td><td>单元格</td></tr><tr><td>单元格</td><td>单元格</td></tr></tbody></table><h2 id="6-9-高级"><a href="#6-9-高级" class="headerlink" title="6.9 高级"></a>6.9 高级</h2><blockquote><p>以下用法存在一定风险，不建议使用</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 键盘按键 --&gt;</span><br><span class="line">使用 <span class="language-xml"><span class="tag">&lt;<span class="name">kbd</span>&gt;</span></span>Ctrl<span class="language-xml"><span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span>+<span class="language-xml"><span class="tag">&lt;<span class="name">kbd</span>&gt;</span></span>Alt<span class="language-xml"><span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span>+<span class="language-xml"><span class="tag">&lt;<span class="name">kbd</span>&gt;</span></span>Del<span class="language-xml"><span class="tag">&lt;/<span class="name">kbd</span>&gt;</span></span> 重启电脑</span><br></pre></td></tr></table></figure><blockquote><p> 使用 <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>Del</kbd> 重启电脑</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 转义 --&gt;</span><br><span class="line"><span class="strong">**文本加粗**</span> </span><br><span class="line">\<span class="emphasis">*\*</span> 正常显示星号 \<span class="emphasis">*\*</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>文本加粗</strong><br>** 正常显示星号 **</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 居中 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span>中<span class="language-xml"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span></span><br></pre></td></tr></table></figure><blockquote><center>中<center></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 左对齐 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">align</span>=<span class="string">&quot;left&quot;</span>&gt;</span></span>左<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br></pre></td></tr></table></figure><blockquote><p align="left">左</p></blockquote><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 右对齐 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">align</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span>右<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br></pre></td></tr></table></figure><blockquote><p align="right">右</p></blockquote><h1 id="七、文档体系"><a href="#七、文档体系" class="headerlink" title="七、文档体系"></a>七、文档体系</h1><h2 id="7-1-结构"><a href="#7-1-结构" class="headerlink" title="7.1 结构"></a>7.1 结构</h2><p>软件手册是一部完整的书，建议采用下面的结构。</p><ul><li><strong>简介</strong>（Introduction）： [必备] [文件] 提供对产品和文档本身的总体的、扼要的说明</li><li><strong>快速上手</strong>（Getting Started）：[可选] [文件] 如何最快速地使用产品</li><li><strong>入门篇</strong>（Basics）： [必备] [目录] 又称 “使用篇”，提供初级的使用教程<ul><li><strong>环境准备</strong>（Prerequisite）：[必备] [文件] 软件使用需要满足的前置条件</li><li><strong>安装</strong>（Installation）：[可选] [文件] 软件的安装方法</li><li><strong>设置</strong>（Configuration）：[必备] [文件] 软件的设置</li></ul></li><li><strong>进阶篇</strong>（Advanced)：[可选] [目录] 又称 “开发篇”，提供中高级的开发教程</li><li><strong>API</strong>（Reference）：[可选] [目录|文件] 软件 API 的逐一介绍</li><li><strong>FAQ</strong>：[可选] [文件] 常见问题解答</li><li><strong>附录</strong>（Appendix）：[可选] [目录] 不属于教程本身、但对阅读教程有帮助的内容<ul><li><strong>Glossary</strong>：[可选] [文件] 名词解释</li><li><strong>Recipes</strong>：[可选] [文件] 最佳实践</li><li><strong>Troubleshooting</strong>：[可选] [文件] 故障处理</li><li><strong>ChangeLog</strong>：[可选] [文件] 版本说明</li><li><strong>Feedback</strong>：[可选] [文件] 反馈方式</li></ul></li></ul><h2 id="7-2-文件名"><a href="#7-2-文件名" class="headerlink" title="7.2 文件名"></a>7.2 文件名</h2><p>文档的文件名不得含有空格。</p><p>文件名必须使用半角字符，不得使用全角字符。这也意味着，中文不能用于文件名。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">错误：名词解释.md</span><br><span class="line"></span><br><span class="line">正确：glossary.md</span><br></pre></td></tr></table></figure><p>文件名建议只使用小写字母，不使用大写字母。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">错误：TroubleShooting.md</span><br><span class="line"></span><br><span class="line">正确：troubleshooting.md </span><br></pre></td></tr></table></figure><p>为了醒目，某些说明文件的文件名，可以使用大写字母，比如 <code>README</code>、<code>LICENSE</code>。</p><p>文件名包含多个单词时，单词之间建议使用半角的连词线（<code>-</code>）分隔。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">不佳：advanced_usage.md</span><br><span class="line"></span><br><span class="line">正确：advanced-usage.md</span><br></pre></td></tr></table></figure><h1 id="八、重要问题"><a href="#八、重要问题" class="headerlink" title="八、重要问题"></a>八、重要问题</h1><h2 id="8-1-为什么文件名要小写？"><a href="#8-1-为什么文件名要小写？" class="headerlink" title="8.1 为什么文件名要小写？"></a>8.1 为什么文件名要小写？</h2><p><strong>（1）可移植性</strong></p><p>Linux 系统是大小写敏感的，而 Windows 系统和 Mac 系统正好相反，大小写不敏感。一般来说，这不是大问题。</p><p>但是，如果两个文件名只有大小写不同，其他都相同，跨平台就会出问题。</p><ul><li><code>foobar</code></li><li><code>Foobar</code></li><li><code>FOOBAR</code></li><li><code>fOObAr</code></li></ul><p>上面四个文件名，Windows 系统会把它们都当作 <code>foobar</code>。如果它们同时存在，你可能没办法打开后面三个文件。</p><p>另一方面，在 Mac 系统上开发时，有时会疏忽，写错大小写。</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正确文件名是 MyModule.js</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable language_">module</span> = <span class="built_in">require</span>(<span class="string">&#x27;./myModule&#x27;</span>);</span><br></pre></td></tr></table></figure><p>上面的代码在 Mac 上面可以运行，因为 Mac 认为 <code>MyModule.js</code> 和 <code>myModule.js</code> 是同一个文件。但是，一旦代码到服务器运行就会报错，因为 Linux 系统找不到 <code>myModule.js</code>。</p><p>如果所有的文件名都采用小写，就不会出现上面的问题，可以保证项目有良好的可移植性。</p><p><strong>（2）易读性</strong></p><p>小写文件名通常比大写文件名更易读，比如 <code>accessibility.txt</code> 就比 <code>ACCESSIBILITY.TXT</code> 易读。</p><p>有人习惯使用 <a href="https://baike.baidu.com/item/%E9%AA%86%E9%A9%BC%E5%91%BD%E5%90%8D%E6%B3%95?fromtitle=%E9%A9%BC%E5%B3%B0%E5%91%BD%E5%90%8D%E6%B3%95&fromid=7560610">驼峰命名法</a>，单词的第一个字母大写，其他字母小写。这种方法的问题是，如果遇到全部是大写的缩略词，就会不适用。</p><p>比如，一个姓李的纽约特警，无论写成 <code>NYPoliceSWATLee</code> 还是 <code>NyPoliceSwatlee</code>，都怪怪的，还是写成 <code>ny-police-swat-lee</code> 比较容易接受。</p><p><strong>（3）易用性</strong></p><p>某些系统会生成一些预置的用户目录，采用首字母大写的目录名。比如，Ubuntu 在用户主目录会默认生成  <code>Downloads</code>、 <code>Pictures</code>、<code>Documents </code> 等目录。</p><p>Mac 系统一部分系统目录也是大写的，比如 <code>/Library/Audio/Apple Loops/</code>。</p><p>另外，某些常见的配置文件或说明文件，也采用大写的文件名，比如 <code>Makefile</code>、<code>INSTALL</code>、<code>CHANGELOG</code>、<code>.Xclients</code> 和 <code>.Xauthority</code> 等等。</p><p>所以，用户的文件都采用小写文件名，就很方便与上面这些目录或文件相区分。</p><p>那问到底，为什么操作系统会采用这样的大写文件名？原因也很简单，因为早期 Unix 系统上，<code>ls</code> 命令先列出大写字母，再列出小写字母，大写的路径会排在前面。因此，如果目录名或文件名是大写的，就比较容易被用户首先看到。</p><p><strong>（4）便捷性</strong></p><p>文件名全部小写，还有利于命令行操作。比如，某些命令可以不使用 <code>-i</code> 参数了。</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 大小写敏感的搜索</span></span><br><span class="line">$ find . -name abc</span><br><span class="line">$ locate <span class="string">&quot;*.htmL&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 大小写不敏感的搜索</span></span><br><span class="line">$ find . -iname abc</span><br><span class="line">$ locate -i <span class="string">&quot;*.HtmL&quot;</span></span><br></pre></td></tr></table></figure><p>另外，大写字母需要按下 Shift 键，多多少少有些麻烦。如果文件名小写，就不用碰这个键了，不仅省事，还可以提高打字速度。</p><p>程序员长时间使用键盘，每分钟少按几次 Shift，一天下来就可以省掉很多手指动作。长年累月，也是对自己身体的一种保护。</p><p>综上所述，文件名全部使用小写字母和连词线（all-lowercase-with-dashes），是一种值得推广的正确做法。</p><h2 id="8-2-技术文档与文章的区别？"><a href="#8-2-技术文档与文章的区别？" class="headerlink" title="8.2 技术文档与文章的区别？"></a>8.2 技术文档与文章的区别？</h2><ul><li>技术文档注重：专业、严谨、严肃、简练</li><li>技术文章注重：图文并茂、通俗易懂、妙趣横生</li></ul><h2 id="8-3-技术文档与文章的核心？"><a href="#8-3-技术文档与文章的核心？" class="headerlink" title="8.3 技术文档与文章的核心？"></a>8.3 技术文档与文章的核心？</h2><p><strong>（1）技术文档</strong></p><ul><li><p>必要的声明</p></li><li><p>清晰严谨的章节安排</p></li><li><p>单独设计合理的目录导航页</p></li><li><p>删减一切非必要图片</p></li><li><p>严谨地运用链接</p></li><li><p>合理留白</p></li></ul><p><strong>（2）技术文章</strong></p><ul><li>必要的声明</li><li>清晰直观的目录</li><li>合理布局图文内容</li><li>图片适量且具有代表性</li><li>注意文章的平台可移植性</li><li>搭建合理的分享传播途径</li><li>注重通俗易懂</li><li>注重趣味</li><li>注重美观</li><li>合理留白</li></ul>]]></content>
      
      
      <categories>
          
          <category> Docs文档 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
            <tag> 写作规范 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly美化之路（一）</title>
      <link href="/2022/12/02/Butterfly%E7%BE%8E%E5%8C%96%E4%B9%8B%E8%B7%AF%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2022/12/02/Butterfly%E7%BE%8E%E5%8C%96%E4%B9%8B%E8%B7%AF%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="Butterfly美化之路（一）"><a href="#Butterfly美化之路（一）" class="headerlink" title="Butterfly美化之路（一）"></a>Butterfly美化之路（一）</h1><h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><p>我的博客使用的是 <code>Hexo</code> + <code>GitHub</code> 搭建在线博客，主题用的是 <code>Butterfly</code>，教程及官方文档均可在网上找到，我只是在这里记录一些自己的感受，以防以后玩崩了找不到回家的路</p><p>**本文中，如果没有特殊说明，修改的文件一律为 <em>主题配置文件</em> **</p><p>参考文档:</p><p>余白的分享:<a href="https://www.vipyubai.top/post/a42befc0.html">https://www.vipyubai.top/post/a42befc0.html</a></p><p>三水的分享:<a href="https://sanshui.vip/2022/08/10/indexday1/">https://sanshui.vip/2022/08/10/indexday1/</a></p><p>Butterfly安装文档:<a href="https://butterfly.js.org/posts/21cfbf15/">https://butterfly.js.org/posts/21cfbf15/</a></p><p>Fomalhaut的分享: <a href="https://www.fomal.cc/">https://www.fomal.cc/</a></p><h2 id="二、配置主页信息"><a href="#二、配置主页信息" class="headerlink" title="二、配置主页信息"></a>二、配置主页信息</h2><p>在<strong>博客配置文件</strong>中配置主页信息</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">月华.の奇妙冒险</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&#x27;欢迎来到我的博客&#x27;</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&#x27;我连宇宙的尽头在哪都不知道，怎么知道这个&#x27;</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">博客</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">月华.</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221201183533368.png" alt="主页信息"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221201183614618.png" alt="主页"></p><hr><h2 id="三、先来创建一些页面"><a href="#三、先来创建一些页面" class="headerlink" title="三、先来创建一些页面"></a>三、先来创建一些页面</h2><p>输入创建页面指令，路径名是以后在<strong>主题配置文件</strong>中怎么进入这个页面就用什么名字</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page 路径名</span><br></pre></td></tr></table></figure><p>比如：tags, link, categories….. </p><p>创建之后会在source文件夹下生成一个与路径名同名的文件夹, 每个文件夹下会自带一个index.md文件</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221201173754557.png" alt="创建页面"></p><hr><h2 id="四、导航栏菜单以及-icon"><a href="#四、导航栏菜单以及-icon" class="headerlink" title="四、导航栏菜单以及 icon"></a>四、导航栏菜单以及 <code>icon</code></h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">主页:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="string">归档:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="string">标签:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="string">分类:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-folder-open</span></span><br><span class="line">  <span class="string">留言板:</span> <span class="string">/comments/</span> <span class="string">||fas</span> <span class="string">fa-envelope-open</span></span><br><span class="line">  <span class="string">链接:</span> <span class="string">/link/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-link</span></span><br><span class="line">  <span class="string">关于:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-heart</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221229131920957.png" alt="导航栏设置"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221229131939938.png" alt="效果"></p><hr><h2 id="五、Front-matter-页面设置"><a href="#五、Front-matter-页面设置" class="headerlink" title="五、Front-matter 页面设置"></a>五、Front-matter 页面设置</h2><p>Front-matter部分是在Markdown文档上方的配置信息部分，格式如下</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">//要用上下三个-包起来</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line">title: </span><br><span class="line">date: </span><br><span class="line"><span class="section">type: </span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><p>写了示例的是用过的，没写就是还没用过</p><h3 id="5-1-Page-Front-matter-主页面-设置"><a href="#5-1-Page-Front-matter-主页面-设置" class="headerlink" title="5.1 Page Front-matter  主页面 设置"></a>5.1 Page Front-matter  <em>主页面</em> 设置</h3><p>用于配置每个路径下的 <code>index.md</code> 文件</p><table><thead><tr><th>属性</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td>title</td><td>【必】页面标题</td><td>title: 文章分类</td></tr><tr><td>date</td><td>【必】页面创建日期</td><td>date: 2022-12-01</td></tr><tr><td>type</td><td>【必】tags，category，link页面需配置。需使用双引号</td><td>type: “categories”</td></tr><tr><td>updated</td><td>【选】页面更新日期</td><td></td></tr><tr><td>description</td><td>【选】页面描述</td><td></td></tr><tr><td>keywords</td><td>【选】页面关键字</td><td></td></tr><tr><td>comments</td><td>【选】显示页面评论模块(默认 true)</td><td></td></tr><tr><td>top_img</td><td>【选】页面顶部图片</td><td></td></tr><tr><td>mathjax</td><td>【选】显示mathjax(当设置mathjax的per_page: false时，才需要配置，默认 false)</td><td></td></tr><tr><td>katex</td><td>【选】显示katex(当设置katex的per_page: false时，才需要配置，默认 false)</td><td></td></tr><tr><td>aside</td><td>【选】显示侧边栏 (默认 true)</td><td></td></tr><tr><td>aplayer</td><td>【选】在需要的页面加载aplayer的js和css,请参考官方文档下面的<strong>音乐</strong>配置</td><td></td></tr><tr><td>highlight_shrink</td><td>【选】配置代码框是否展开(true&#x2F;false)(默认为设置中highlight_shrink的配置)</td><td></td></tr></tbody></table><h3 id="5-2-Post-Front-matter-文章页面-设置"><a href="#5-2-Post-Front-matter-文章页面-设置" class="headerlink" title="5.2 Post Front-matter 文章页面 设置"></a>5.2 Post Front-matter <em>文章页面</em> 设置</h3><p>配置自己写md文档</p><table><thead><tr><th>属性</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td>title</td><td>【必】文章标题</td><td>title: 搭建自己的图床</td></tr><tr><td>date</td><td>【必】文章创建日期</td><td>date: 2022-12-01</td></tr><tr><td>updated</td><td>【选】文章更新日期</td><td></td></tr><tr><td>tags</td><td>【选】文章标签</td><td><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221201180322869.png" alt="标签写法"></td></tr><tr><td>categories</td><td>【选】文章分类</td><td>categories: 学习总结</td></tr><tr><td>keywords</td><td>【选】文章关键字</td><td></td></tr><tr><td>description</td><td>【选】文章描述</td><td>description: 我自己的搭建图床的笔记整理, 希望对你有帮助</td></tr><tr><td>top_img</td><td>【选】文章顶部图片</td><td><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221201180351089.png" alt="文章顶部图写法"></td></tr><tr><td>cover</td><td>【选】文章缩略图<br />(如果没有设置top_img,文章页顶部将显示缩略图，可设为false&#x2F;图片地址&#x2F;留空)</td><td><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221201180404793.png" alt="文章缩略图写法"></td></tr><tr><td>comments</td><td>【选】显示文章评论模块(默认 true)</td><td></td></tr><tr><td>toc</td><td>【选】显示文章TOC(默认为设置中toc的enable配置)</td><td></td></tr><tr><td>toc_number</td><td>【选】显示toc_number(默认为设置中toc的number配置)</td><td></td></tr><tr><td>toc_style_simple</td><td>【选】显示 toc 简洁模式</td><td></td></tr><tr><td>copyright</td><td>【选】显示文章版权模块(默认为设置中post_copyright的enable配置)</td><td></td></tr><tr><td>copyright_author</td><td>【选】文章版权模块的文章作者</td><td></td></tr><tr><td>copyright_author_href</td><td>【选】文章版权模块的文章作者链接</td><td></td></tr><tr><td>copyright_url</td><td>【选】文章版权模块的文章连结链接</td><td></td></tr><tr><td>copyright_info</td><td>【选】文章版权模块的版权声明文字</td><td></td></tr><tr><td>mathjax</td><td>【选】显示mathjax<br />(当设置mathjax的per_page: false时，才需要配置，默认 false)</td><td></td></tr><tr><td>katex</td><td>【选】显示katex<br />(当设置katex的per_page: false时，才需要配置，默认 false)</td><td></td></tr><tr><td>aplayer</td><td>【选】在需要的页面加载aplayer的js和css,请参考文章下面的音乐 配置</td><td></td></tr><tr><td>highlight_shrink</td><td>【选】配置代码框是否展开(true&#x2F;false)<br />(默认为设置中highlight_shrink的配置)</td><td></td></tr><tr><td>aside</td><td>【选】显示侧边栏 (默认 true)</td><td></td></tr></tbody></table><h2 id="六、友情链接"><a href="#六、友情链接" class="headerlink" title="六、友情链接"></a>六、友情链接</h2><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 创建友情链接界面</span><br><span class="line">hexo new page link</span><br></pre></td></tr></table></figure><h3 id="6-1-本地设置"><a href="#6-1-本地设置" class="headerlink" title="6.1 本地设置"></a>6.1 本地设置</h3><p>现在source文件夹下创建<code>_data</code>文件夹, 在<code>_data</code>文件夹下创建<code>link.yml</code>文件</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 内容</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">友情链接</span></span><br><span class="line">  <span class="attr">class_desc:</span> <span class="string">把你的友链给我，我会把它放到我的友链里</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">yuehua-HNU</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://github.com/yuehua-HNU</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">/img/config_img/avatar.jpg</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">欢迎访问我的GitHub</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">网站</span></span><br><span class="line">  <span class="attr">class_desc:</span> <span class="string">值得推荐的网站</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Youtube</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://www.youtube.com/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">视频网站</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Weibo</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://www.weibo.com/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">中国最大社交分享平台</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Twitter</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://twitter.com/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">社交分享平台</span></span><br></pre></td></tr></table></figure><h3 id="6-2-写法"><a href="#6-2-写法" class="headerlink" title="6.2 写法"></a>6.2 写法</h3><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221201181633612.png" alt="友链写法"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221201181657634.png" alt="友链"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221201181710275.png" alt="其他链接"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221201181716872.png" alt="其他链接效果"></p><hr><h2 id="七、404页面"><a href="#七、404页面" class="headerlink" title="七、404页面"></a>七、404页面</h2><p><strong>主题配置文件</strong>中，把 <code>enable</code> 改为 <code>true</code> 启用 404 页面, 404 图片可以自己改</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># A simple 404 page</span></span><br><span class="line"><span class="attr">error_404:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">subtitle:</span> <span class="string">&#x27;Page Not Found&#x27;</span></span><br><span class="line">  <span class="attr">background:</span> <span class="string">https://i.loli.net/2020/05/19/aKOcLiyPl2JQdFD.png</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221201183249047.png" alt="404页面"></p><hr><h2 id="八、代码"><a href="#八、代码" class="headerlink" title="八、代码"></a>八、代码</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 代码高亮主题</span></span><br><span class="line"><span class="attr">highlight_theme:</span> <span class="string">mac</span> <span class="comment">#  darker / pale night / light / ocean / mac / mac light / false</span></span><br><span class="line"><span class="comment"># 代码是否可复制</span></span><br><span class="line"><span class="attr">highlight_copy:</span> <span class="literal">true</span> <span class="comment"># copy button</span></span><br><span class="line"><span class="comment"># 是否显示代码语言</span></span><br><span class="line"><span class="attr">highlight_lang:</span> <span class="literal">true</span> <span class="comment"># show the code language</span></span><br><span class="line"><span class="comment"># 代码框是否展开</span></span><br><span class="line"><span class="attr">highlight_shrink:</span> <span class="literal">false</span> <span class="comment"># true: 代码框不展开 / false: 代码框展开 | none: 不显示代码框展开按钮</span></span><br><span class="line"><span class="comment"># 代码高度限制</span></span><br><span class="line"><span class="attr">highlight_height_limit:</span> <span class="number">200</span> <span class="comment"># unit: px</span></span><br><span class="line"><span class="comment"># 代码过长是否自动换行</span></span><br><span class="line"><span class="attr">code_word_wrap:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221229132728428.png" alt="代码相关设置"></p><hr><h2 id="九、社交图标设置"><a href="#九、社交图标设置" class="headerlink" title="九、社交图标设置"></a>九、社交图标设置</h2><blockquote><p><a href="https://fontawesome.com/icons?from=io">https://fontawesome.com/icons?from=io</a></p></blockquote><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># social settings (社交圖標設置)</span></span><br><span class="line"><span class="comment"># formal:</span></span><br><span class="line"><span class="comment">#   icon: link || the description</span></span><br><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">fab fa-github:</span> <span class="string">https://github.com/yuehua-HNU</span> <span class="string">||</span> <span class="string">Github</span></span><br><span class="line">  <span class="attr">fa-brands fa-bilibili:</span> <span class="string">https://space.bilibili.com/475208497?spm_id_from=333.1007.0.0</span> <span class="string">||</span> <span class="string">Bilibili</span></span><br><span class="line">  <span class="comment"># fas fa-envelope: mailto:xxxxxx@gmail.com || Email</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221229132840639.png" alt="社交图标设置"></p><hr><h2 id="十、主页文章描述"><a href="#十、主页文章描述" class="headerlink" title="十、主页文章描述"></a>十、主页文章描述</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Display the article introduction on homepage</span></span><br><span class="line"><span class="comment"># 1: description 只显示description</span></span><br><span class="line"><span class="comment"># 2: both 优先选择description，如果没有配置description，则显示自动节选的内容</span></span><br><span class="line"><span class="comment"># 3: auto_excerpt 只显示自动节选</span></span><br><span class="line"><span class="comment"># false: 不显示文章内容</span></span><br><span class="line"><span class="attr">index_post_content:</span></span><br><span class="line">  <span class="attr">method:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">length:</span> <span class="number">500</span> <span class="comment"># if you set method to 2 or 3, the length need to config</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221229133230909.png" alt="主页文章描述设置"></p><hr><h2 id="十一、设置主页背景"><a href="#十一、设置主页背景" class="headerlink" title="十一、设置主页背景"></a>十一、设置主页背景</h2><p>在<strong>主题配置文件</strong>中找到background</p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221201184146749.png" alt="主页背景设置"></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Website Background (設置網站背景)</span></span><br><span class="line"><span class="comment"># can set it to color or image (可設置圖片 或者 顔色)</span></span><br><span class="line"><span class="comment"># The formal of image: url(http://xxxxxx.com/xxx.jpg)</span></span><br><span class="line"><span class="attr">background:</span> <span class="string">url(/img/宵宫绝美.webp)</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221201184203085.png" alt="背景"></p><hr><h2 id="十二、开启footer背景"><a href="#十二、开启footer背景" class="headerlink" title="十二、开启footer背景"></a>十二、开启footer背景</h2><p>在<strong>主题配置文件</strong>中找到 <code>footer_bg</code>, 将属性改为 <code>true</code></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Footer Background</span></span><br><span class="line"><span class="attr">footer_bg:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221201184443954.png" alt="footer设置"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221201184504591.png" alt="footer效果"></p><p><code>footer</code> 背景与 <code>top_img</code> 相同</p><hr><h2 id="十三、文章页相关显示"><a href="#十三、文章页相关显示" class="headerlink" title="十三、文章页相关显示"></a>十三、文章页相关显示</h2><h3 id="13-1-文章信息显示"><a href="#13-1-文章信息显示" class="headerlink" title="13.1 文章信息显示"></a>13.1 文章信息显示</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_meta:</span></span><br><span class="line">  <span class="attr">page:</span> <span class="comment"># Home Page</span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">created</span> <span class="comment"># created or updated or both 主頁文章日期是創建日或者更新日或都顯示</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">relative</span> <span class="comment"># date/relative 顯示日期還是相對日期</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span> <span class="comment"># true or false 主頁是否顯示分類</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span> <span class="comment"># true or false 主頁是否顯示標籤</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span> <span class="comment"># true or false 顯示描述性文字</span></span><br><span class="line">  <span class="attr">post:</span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">both</span> <span class="comment"># created or updated or both 文章頁日期是創建日或者更新日或都顯示</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">date</span> <span class="comment"># date/relative 顯示日期還是相對日期</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span> <span class="comment"># true or false 文章頁是否顯示分類</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span> <span class="comment"># true or false 文章頁是否顯示標籤</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span> <span class="comment"># true or false 顯示描述性文字</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228103654240.png" alt="文章页主页 &amp; 主页文章信息设置"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228104912258.png" alt="文章页信息"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228104937545.png" alt="文章页信息"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228105002357.png" alt="首页文章信息"></p><h3 id="13-2-文章页版权信息显示"><a href="#13-2-文章页版权信息显示" class="headerlink" title="13.2 文章页版权信息显示"></a>13.2 文章页版权信息显示</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_copyright:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">decode:</span> <span class="literal">true</span> <span class="comment">#true, 显示中文网址, 防止被解码</span></span><br><span class="line">  <span class="attr">author_href:</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">CC</span> <span class="string">BY-NC-SA</span> <span class="number">4.0</span></span><br><span class="line">  <span class="attr">license_url:</span> <span class="string">https://creativecommons.org/licenses/by-nc-sa/4.0/</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228104816325.png" alt="版权信息设置"></p><h3 id="13-3-打赏设置"><a href="#13-3-打赏设置" class="headerlink" title="13.3 打赏设置"></a>13.3 打赏设置</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">QR_code:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">/img/微信收款码.jpg</span></span><br><span class="line">      <span class="attr">link:</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">wechat</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">/img/支付宝收款码.jpg</span></span><br><span class="line">      <span class="attr">link:</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">alipay</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228105155530.png" alt="打赏设置"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228105215672.png" alt="打赏"></p><h3 id="13-4-目录设置"><a href="#13-4-目录设置" class="headerlink" title="13.4 目录设置"></a>13.4 目录设置</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span> <span class="comment"># 文章页是否显示目录</span></span><br><span class="line">  <span class="attr">page:</span> <span class="literal">false</span> <span class="comment"># 普通页面是否显示目录</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">false</span> <span class="comment"># 是否显示章节数</span></span><br><span class="line">  <span class="attr">expand:</span> <span class="literal">true</span> <span class="comment"># 是否展开目录</span></span><br><span class="line">  <span class="attr">style_simple:</span> <span class="literal">false</span> <span class="comment"># 简洁模式 (侧边栏只显示目录, 只对文章页有效)</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228105841559.png" alt="目录设置"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228110508251.png" alt="目录"></p><hr><h2 id="十四、相关推荐"><a href="#十四、相关推荐" class="headerlink" title="十四、相关推荐"></a>十四、相关推荐</h2><p>根据文章标签的比重来推荐</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">related_post:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">6</span> <span class="comment"># 推荐文章数目</span></span><br><span class="line">  <span class="attr">date_type:</span> <span class="string">updated</span> <span class="comment"># or created or updated 文章日期顯示創建日或者更新日</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228110841657.png" alt="相关推荐"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228111047789.png" alt="相关推荐"></p><hr><h2 id="十五、文章分页"><a href="#十五、文章分页" class="headerlink" title="十五、文章分页"></a>十五、文章分页</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># post_pagination (分頁)</span></span><br><span class="line"><span class="comment"># value: 1 || 2 || false</span></span><br><span class="line"><span class="comment"># 1: 下一篇显示旧文章</span></span><br><span class="line"><span class="comment"># 2: 下一篇显示新文章</span></span><br><span class="line"><span class="comment"># false: disable pagination</span></span><br><span class="line"><span class="attr">post_pagination:</span> <span class="number">2</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228155832558.png" alt="文章分页"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228155924656.png" alt="下一篇显示新文章"></p><hr><h2 id="十六、复制相关设置"><a href="#十六、复制相关设置" class="headerlink" title="十六、复制相关设置"></a>十六、复制相关设置</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># copy settings</span></span><br><span class="line"><span class="comment"># copyright: Add the copyright information after copied content (複製的內容後面加上版權信息)</span></span><br><span class="line"><span class="attr">copy:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">copyright:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">limit_count:</span> <span class="number">50</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228161705353.png" alt="复制设置"></p><hr><h2 id="十七、页脚文本-amp-起始年份"><a href="#十七、页脚文本-amp-起始年份" class="headerlink" title="十七、页脚文本 &amp; 起始年份"></a>十七、页脚文本 &amp; 起始年份</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">owner:</span> <span class="string">月华.</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">since:</span> <span class="number">2022</span></span><br><span class="line">  <span class="attr">custom_text:</span> <span class="string">这</span> <span class="string">就</span> <span class="string">是</span> <span class="string">我</span> <span class="string">的</span> <span class="string">&lt;a</span> <span class="string">href=&quot;https://github.com/yuehua-HNU/&quot;&gt;逃</span> <span class="string">跑</span> <span class="string">路</span> <span class="string">线&lt;/a&gt;</span> <span class="string">！</span></span><br><span class="line">  <span class="attr">copyright:</span> <span class="literal">true</span> <span class="comment"># Copyright of theme and framework</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228163711751.png" alt="页脚文本 &amp; 起始年份设置"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228163730009.png" alt="页脚文本 &amp; 起始年份"></p><hr><h2 id="十八、右下角按钮"><a href="#十八、右下角按钮" class="headerlink" title="十八、右下角按钮"></a>十八、右下角按钮</h2><h3 id="18-1-简繁转换"><a href="#18-1-简繁转换" class="headerlink" title="18.1 简繁转换"></a>18.1 简繁转换</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Conversion between Traditional and Simplified Chinese (簡繁轉換)</span></span><br><span class="line"><span class="attr">translate:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 默认按钮显示文字(网站是简体，应设置为&#x27;default: 繁&#x27;)</span></span><br><span class="line">  <span class="attr">default:</span> <span class="string">繁</span></span><br><span class="line">  <span class="comment"># 网站默认语言 (1 - 繁体中文/ 2 - 简体中文）</span></span><br><span class="line">  <span class="attr">defaultEncoding:</span> <span class="number">2</span></span><br><span class="line">  <span class="comment"># 延迟时间,若不在前, 要设定延迟翻译时间, 如100表示100ms,默认为0</span></span><br><span class="line">  <span class="attr">translateDelay:</span> <span class="number">0</span></span><br><span class="line">  <span class="comment"># 当文字是简体时，按钮显示的文字</span></span><br><span class="line">  <span class="attr">msgToTraditionalChinese:</span> <span class="string">&#x27;繁&#x27;</span></span><br><span class="line">  <span class="comment"># 当文字是繁体时，按钮显示的文字</span></span><br><span class="line">  <span class="attr">msgToSimplifiedChinese:</span> <span class="string">&#x27;簡&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228164315391.png" alt="简繁转换"></p><h3 id="18-2-夜间模式"><a href="#18-2-夜间模式" class="headerlink" title="18.2 夜间模式"></a>18.2 夜间模式</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dark mode</span></span><br><span class="line"><span class="attr">darkmode:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Toggle Button to switch dark/light mode</span></span><br><span class="line">  <span class="attr">button:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Switch dark/light mode automatically (自動切換 dark mode和 light mode)</span></span><br><span class="line">  <span class="comment"># autoChangeMode: 1  Following System Settings, if the system doesn&#x27;t support dark mode, it will switch dark mode between 6 pm to 6 am</span></span><br><span class="line">  <span class="comment"># autoChangeMode: 2  Switch dark mode between 6 pm to 6 am</span></span><br><span class="line">  <span class="comment"># autoChangeMode: false</span></span><br><span class="line">  <span class="attr">autoChangeMode:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228164444790.png" alt="夜间模式"></p><h3 id="18-3-阅读模式"><a href="#18-3-阅读模式" class="headerlink" title="18.3 阅读模式"></a>18.3 阅读模式</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Read Mode (閲讀模式)</span></span><br><span class="line"><span class="attr">readmode:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228164633176.png" alt="阅读模式"></p><h3 id="18-4-按钮排序"><a href="#18-4-按钮排序" class="headerlink" title="18.4 按钮排序"></a>18.4 按钮排序</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Don&#x27;t modify the following settings unless you know how they work (非必要請不要修改 )</span></span><br><span class="line"><span class="comment"># Choose: readmode,translate,darkmode,hideAside,toc,chat,comment</span></span><br><span class="line"><span class="comment"># Don&#x27;t repeat 不要重複</span></span><br><span class="line"><span class="attr">rightside_item_order:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hide:</span> <span class="string">readmode,translate,darkmode,hideAside</span></span><br><span class="line">  <span class="attr">show:</span> <span class="comment"># toc,chat,comment</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228164836744.png" alt="按钮排序"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228164901153.png" alt="右下角按钮"></p><hr><h2 id="十九-、侧边栏设置"><a href="#十九-、侧边栏设置" class="headerlink" title="十九 、侧边栏设置"></a>十九 、侧边栏设置</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># aside (側邊欄)</span></span><br><span class="line"><span class="comment"># --------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="attr">aside:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hide:</span> <span class="literal">false</span> <span class="comment"># 是否隐藏</span></span><br><span class="line">  <span class="attr">button:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">true</span> <span class="comment"># display on mobile</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">right</span> <span class="comment"># left or right， 展示位置</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="attr">archive:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">tag:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">category:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">card_author:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">我连宇宙的尽头在哪都不知道，怎么知道这个</span></span><br><span class="line">    <span class="attr">button:</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">icon:</span> <span class="string">fa-sharp</span> <span class="string">fa-solid</span> <span class="string">fa-plane</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">快来一起玩</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://github.com/yuehua-HNU</span></span><br><span class="line">  <span class="attr">card_announcement:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">content:</span> <span class="string">图床那篇因为图片隐私问题还在修改,</span> <span class="string">无限期后应该就改完了,</span> <span class="string">哎嘿(doge)</span></span><br><span class="line">  <span class="attr">card_recent_post:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">5</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">sort:</span> <span class="string">updated</span> <span class="comment"># date or updated</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_categories:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">0</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">expand:</span> <span class="literal">true</span> <span class="comment"># none/true/false</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_tags:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">20</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">color:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_archives:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">monthly</span> <span class="comment"># yearly or monthly</span></span><br><span class="line">    <span class="attr">format:</span> <span class="string">MMMM</span> <span class="string">YYYY</span> <span class="comment"># eg: YYYY年MM月</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">-1</span> <span class="comment"># Sort of order. 1, asc for ascending; -1, desc for descending</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">4</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">card_webinfo:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">post_count:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">last_push_date:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># busuanzi count for PV / UV in site</span></span><br><span class="line"><span class="comment"># 訪問人數</span></span><br><span class="line"><span class="attr">busuanzi:</span></span><br><span class="line">  <span class="attr">site_uv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">site_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page_pv:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Time difference between publish date and now (網頁運行時間)</span></span><br><span class="line"><span class="comment"># Formal: Month/Day/Year Time or Year/Month/Day Time</span></span><br><span class="line"><span class="attr">runtimeshow:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">publish_date:</span> <span class="number">12</span><span class="string">/1/2022</span> <span class="number">00</span><span class="string">:00:00</span></span><br><span class="line"><span class="comment">##网页开通时间</span></span><br><span class="line">  <span class="comment">#格式: 月/日/年 时间</span></span><br><span class="line">  <span class="comment">#也可以写成 年/月/日 时间</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Aside widget - Newest Comments (最新评论)</span></span><br><span class="line"><span class="attr">newest_comments:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">6</span></span><br><span class="line">  <span class="attr">storage:</span> <span class="number">10</span> <span class="comment"># unit: mins, save data to localStorage</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><hr><h2 id="二十、分享"><a href="#二十、分享" class="headerlink" title="二十、分享"></a>二十、分享</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sharejs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sites:</span> <span class="string">facebook,twitter,wechat,weibo,qq</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221228194105137.png" alt="分享设置"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221229102840473.png" alt="分享"></p><hr><h2 id="二十一、搜索系统"><a href="#二十一、搜索系统" class="headerlink" title="二十一、搜索系统"></a>二十一、搜索系统</h2><p>终端输入指令</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><p>在<strong>博客配置文件</strong>中添加以下代码</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131194059953.png" alt="添加"></p><p>在<strong>主题配置文件</strong>中开启本地搜索</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Local search</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">preload:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">CDN:</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131194234756.png" alt="开启"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20230131194550323.png" alt="预览"></p><hr><h2 id="二十二、美化与特效"><a href="#二十二、美化与特效" class="headerlink" title="二十二、美化与特效"></a>二十二、美化与特效</h2><h3 id="22-1-自定义主题颜色"><a href="#22-1-自定义主题颜色" class="headerlink" title="22.1 自定义主题颜色"></a>22.1 自定义主题颜色</h3><p>将<strong>主题配置文件</strong>中的theme_color解注, 颜色值必须被双引号包裹</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme_color:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">main:</span> <span class="string">&quot;#595219&quot;</span> <span class="comment"># 主题</span></span><br><span class="line">  <span class="attr">paginator:</span> <span class="string">&quot;#4819b4&quot;</span> <span class="comment"># 页码</span></span><br><span class="line">  <span class="attr">button_hover:</span> <span class="string">&quot;#d6b10d&quot;</span> <span class="comment"># 鼠标放置按钮</span></span><br><span class="line">  <span class="attr">text_selection:</span> <span class="string">&quot;#00c4b6&quot;</span> <span class="comment"># 文字选择</span></span><br><span class="line">  <span class="attr">link_color:</span> <span class="string">&quot;#99a9bf&quot;</span>  <span class="comment"># 链接</span></span><br><span class="line">  <span class="attr">meta_color:</span> <span class="string">&quot;#858585&quot;</span> <span class="comment"># 标签</span></span><br><span class="line">  <span class="attr">hr_color:</span> <span class="string">&quot;#212121&quot;</span> <span class="comment"># 滚动块</span></span><br><span class="line">  <span class="attr">code_foreground:</span> <span class="string">&quot;#F47466&quot;</span> <span class="comment"># 代码前景</span></span><br><span class="line">  <span class="attr">code_background:</span> <span class="string">&quot;rgba(27, 31, 35, .05)&quot;</span> <span class="comment"># 代码背景</span></span><br><span class="line">  <span class="attr">toc_color:</span> <span class="string">&quot;#00c4b6&quot;</span> <span class="comment"># 目录</span></span><br><span class="line">  <span class="attr">blockquote_padding_color:</span> <span class="string">&quot;#49b1f5&quot;</span> <span class="comment"># 引用快</span></span><br><span class="line">  <span class="attr">blockquote_background_color:</span> <span class="string">&quot;#49b1f5&quot;</span> <span class="comment"># 引用块背景</span></span><br><span class="line">  <span class="attr">scrollbar_color:</span> <span class="string">&quot;#ff8800&quot;</span> <span class="comment"># 滚动条</span></span><br><span class="line">  <span class="attr">meta_theme_color_light:</span> <span class="string">&quot;#0d0d0d&quot;</span> <span class="comment"># 主题块颜色</span></span><br><span class="line">  <span class="attr">meta_theme_color_dark:</span> <span class="string">&quot;#0d0d0d&quot;</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221229103736008.png" alt="主题颜色设置"></p><h3 id="22-2-打字特效"><a href="#22-2-打字特效" class="headerlink" title="22.2 打字特效"></a>22.2 打字特效</h3><p>enable改为true</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">activate_power_mode:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">colorful:</span> <span class="literal">true</span> <span class="comment"># open particle animation (冒光特效)</span></span><br><span class="line">  <span class="attr">shake:</span> <span class="literal">true</span> <span class="comment">#  open shake (抖動特效)</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221202110102892.png" alt="打字特效设置"></p><h3 id="22-3-鼠标点击特效"><a href="#22-3-鼠标点击特效" class="headerlink" title="22.3 鼠标点击特效"></a>22.3 鼠标点击特效</h3><p>三选一</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Mouse click effects: fireworks (鼠標點擊效果: 煙火特效)</span></span><br><span class="line"><span class="attr">fireworks:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">9999</span> <span class="comment"># -1 or 9999</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Mouse click effects: Heart symbol (鼠標點擊效果: 愛心)</span></span><br><span class="line"><span class="attr">click_heart:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Mouse click effects: words (鼠標點擊效果: 文字)</span></span><br><span class="line"><span class="attr">ClickShowText:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">text:</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221202110255671.png" alt="鼠标点击特效设置"></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 点击出现文字，文字可自行修改</span></span><br><span class="line"><span class="attr">ClickShowText:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">text:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">I</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">LOVE</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">YOU</span></span><br><span class="line">  <span class="attr">fontSize:</span> <span class="string">15px</span></span><br><span class="line">  <span class="attr">random:</span> <span class="literal">false</span> <span class="comment"># 文字随机显示</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221229104009583.png" alt="鼠标点击出现文字"></p><h3 id="22-4-自定义字体和字体大小"><a href="#22-4-自定义字体和字体大小" class="headerlink" title="22.4 自定义字体和字体大小"></a>22.4 自定义字体和字体大小</h3><p>可更改全局或Blog标题字体以及大小</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Global font settings</span></span><br><span class="line"><span class="comment"># Don&#x27;t modify the following settings unless you know how they work (非必要不要修改)</span></span><br><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">global-font-size:</span></span><br><span class="line">  <span class="attr">code-font-size:</span></span><br><span class="line">  <span class="attr">font-family:</span> <span class="string">&quot;思源宋体 SemiBold&quot;</span></span><br><span class="line">  <span class="attr">code-font-family:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Font settings for the site title and site subtitle</span></span><br><span class="line"><span class="comment"># 左上角網站名字 主頁居中網站名字</span></span><br><span class="line"><span class="attr">blog_title_font:</span></span><br><span class="line">  <span class="attr">font_link:</span></span><br><span class="line">  <span class="attr">font-family:</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221202111201068.png" alt="自定义字体大小设置"></p><h3 id="22-5-页面美化"><a href="#22-5-页面美化" class="headerlink" title="22.5 页面美化"></a>22.5 页面美化</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Beautify (美化頁面顯示)</span></span><br><span class="line"><span class="attr">beautify:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span> <span class="comment"># site/post , site -- 全站 ; post -- 文章页</span></span><br><span class="line">  <span class="attr">title-prefix-icon:</span> <span class="comment"># &#x27;\f0c1&#x27;</span></span><br><span class="line">  <span class="attr">title-prefix-icon-color:</span> <span class="comment"># &#x27;#F47466&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221229104251172.png" alt="页面美化设置"></p><h3 id="22-6-字体和字体大小"><a href="#22-6-字体和字体大小" class="headerlink" title="22.6 字体和字体大小"></a>22.6 字体和字体大小</h3><ul><li>全局字体</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Global font settings</span></span><br><span class="line"><span class="comment"># Don&#x27;t modify the following settings unless you know how they work (非必要不要修改)</span></span><br><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">global-font-size:</span></span><br><span class="line">  <span class="attr">code-font-size:</span></span><br><span class="line">  <span class="attr">font-family:</span> <span class="string">&quot;思源宋体 SemiBold&quot;</span></span><br><span class="line">  <span class="attr">code-font-family:</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221229104615746.png" alt="字体和字体大小"></p><ul><li>博客导航栏标题字体</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Font settings for the site title and site subtitle</span></span><br><span class="line"><span class="comment"># 左上角網站名字 主頁居中網站名字</span></span><br><span class="line"><span class="attr">blog_title_font:</span></span><br><span class="line">  <span class="attr">font_link:</span></span><br><span class="line">  <span class="attr">font-family:</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221229110736599.png" alt="博客导航栏标题字体"></p><h3 id="22-7-网站副标题"><a href="#22-7-网站副标题" class="headerlink" title="22.7 网站副标题"></a>22.7 网站副标题</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># the subtitle on homepage (主頁subtitle)</span></span><br><span class="line"><span class="attr">subtitle:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Typewriter Effect (打字效果)</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Effect Speed Options (打字效果速度參數)</span></span><br><span class="line">  <span class="attr">startDelay:</span> <span class="number">300</span> <span class="comment"># time before typing starts in milliseconds</span></span><br><span class="line">  <span class="attr">typeSpeed:</span> <span class="number">150</span> <span class="comment"># type speed in milliseconds</span></span><br><span class="line">  <span class="attr">backSpeed:</span> <span class="number">50</span> <span class="comment"># backspacing speed in milliseconds</span></span><br><span class="line">  <span class="comment"># loop (循環打字)</span></span><br><span class="line">  <span class="attr">loop:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># source 調用第三方服務</span></span><br><span class="line">  <span class="comment"># source: false 關閉調用</span></span><br><span class="line">  <span class="comment"># source: 1  調用一言網的一句話（簡體） https://hitokoto.cn/</span></span><br><span class="line">  <span class="comment"># source: 2  調用一句網（簡體） http://yijuzhan.com/</span></span><br><span class="line">  <span class="comment"># source: 3  調用今日詩詞（簡體） https://www.jinrishici.com/</span></span><br><span class="line">  <span class="comment"># subtitle 會先顯示 source , 再顯示 sub 的內容</span></span><br><span class="line">  <span class="attr">source:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># 如果關閉打字效果，subtitle 只會顯示 sub 的第一行文字</span></span><br><span class="line">  <span class="attr">sub:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">“最是人间留不住，朱颜辞镜花辞树”</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">“人生而自由，却无往不在枷锁中”</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">“我只知道一件事，就是我什么都不知道。”</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">“未经审视的人生不值得过。”</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221202111249597.png" alt="网站副标题"></p><h3 id="22-8-页面加载动画"><a href="#22-8-页面加载动画" class="headerlink" title="22.8 页面加载动画"></a>22.8 页面加载动画</h3><p>事例: <code>hyperspace(星际穿越)</code> 来源: <a href="https://akilar.top/posts/3d221bf2/">https://akilar.top/posts/3d221bf2/</a></p><p>随便在哪里创建一个<code>hyperspace.pug</code>文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#loading-box</span><br><span class="line">  .space-scene</span><br><span class="line">    .space-wrap</span><br><span class="line">      .space-wall.space-wall-right</span><br><span class="line">      .space-wall.space-wall-left</span><br><span class="line">      .space-wall.space-wall-top</span><br><span class="line">      .space-wall.space-wall-bottom</span><br><span class="line">      .space-wall.space-wall-back</span><br><span class="line">    .space-wrap</span><br><span class="line">      .space-wall.space-wall-right</span><br><span class="line">      .space-wall.space-wall-left</span><br><span class="line">      .space-wall.space-wall-top</span><br><span class="line">      .space-wall.space-wall-bottom</span><br><span class="line">      .space-wall.space-wall-back</span><br></pre></td></tr></table></figure><p>和一个<code>hyperspace.styl</code>文件</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#loading-box</span></span><br><span class="line">  <span class="attribute">position</span> fixed</span><br><span class="line">  <span class="attribute">z-index</span> <span class="number">1000</span></span><br><span class="line">  <span class="attribute">width</span> <span class="number">100vw</span></span><br><span class="line">  <span class="attribute">height</span> <span class="number">100vh</span></span><br><span class="line">  <span class="attribute">overflow</span> hidden</span><br><span class="line">  <span class="attribute">text-align</span> center</span><br><span class="line">  <span class="attribute">background</span> <span class="built_in">rgba</span>(<span class="number">236</span>,<span class="number">236</span>,<span class="number">236</span>,<span class="number">0.95</span>)</span><br><span class="line">  <span class="attribute">text-align</span> center</span><br><span class="line">  <span class="selector-pseudo">&amp;:before</span></span><br><span class="line">    <span class="attribute">content</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="attribute">display</span> inline-block</span><br><span class="line">    <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">vertical-align</span> middle</span><br><span class="line">  &amp;<span class="selector-class">.loaded</span></span><br><span class="line">    <span class="attribute">z-index</span> -<span class="number">1000</span></span><br><span class="line">    <span class="selector-class">.space-scene</span></span><br><span class="line">      <span class="attribute">display</span> none</span><br><span class="line">  <span class="selector-class">.space-wall</span></span><br><span class="line">    <span class="attribute">background</span> <span class="built_in">url</span>(https://s3-us-west-<span class="number">2</span>.amazonaws.com/s.cdpn.io/<span class="number">18515</span>/PIA09959-<span class="number">1280</span>x800_copy.jpg)</span><br><span class="line">    <span class="attribute">background-size</span> cover</span><br><span class="line">    <span class="attribute">width</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">100%</span></span><br><span class="line">    <span class="attribute">position</span> absolute</span><br><span class="line">    <span class="attribute">opacity</span> <span class="number">0</span></span><br><span class="line">    <span class="attribute">animation</span> space-fade <span class="number">12s</span> infinite linear</span><br><span class="line">    <span class="attribute">animation-delay</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.space-scene</span></span><br><span class="line">    <span class="attribute">display</span> inline-block</span><br><span class="line">    <span class="attribute">vertical-align</span> middle</span><br><span class="line">    <span class="attribute">perspective</span> <span class="number">5px</span></span><br><span class="line">    <span class="attribute">perspective-origin</span> <span class="number">50%</span> <span class="number">50%</span></span><br><span class="line">    <span class="attribute">position</span> relative</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.space-wrap</span></span><br><span class="line">    <span class="attribute">position</span> absolute</span><br><span class="line">    <span class="attribute">width</span> <span class="number">1000px</span></span><br><span class="line">    <span class="attribute">height</span> <span class="number">1000px</span></span><br><span class="line">    <span class="attribute">left</span> -<span class="number">500px</span></span><br><span class="line">    <span class="attribute">top</span> -<span class="number">500px</span></span><br><span class="line">    <span class="attribute">transform-style</span> preserve-<span class="number">3</span>d</span><br><span class="line">    <span class="attribute">animation</span> space-move <span class="number">12s</span> infinite linear</span><br><span class="line">    <span class="attribute">animation-fill-mode</span> forwards</span><br><span class="line">    <span class="selector-pseudo">&amp;:nth-child</span>(<span class="number">2</span>)</span><br><span class="line">      <span class="attribute">animation</span> space-move <span class="number">12s</span> infinite linear</span><br><span class="line">      <span class="attribute">animation-delay</span> <span class="number">6s</span></span><br><span class="line">      <span class="selector-class">.space-wall</span></span><br><span class="line">        <span class="attribute">animation-delay</span> <span class="number">6s</span></span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.space-wall-right</span></span><br><span class="line">    <span class="attribute">transform</span> <span class="built_in">rotateY</span>(<span class="number">90deg</span>) <span class="built_in">translateZ</span>(<span class="number">500px</span>)</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.space-wall-left</span></span><br><span class="line">    <span class="attribute">transform</span> <span class="built_in">rotateY</span>(-<span class="number">90deg</span>) <span class="built_in">translateZ</span>(<span class="number">500px</span>)</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.space-wall-top</span></span><br><span class="line">    <span class="attribute">transform</span> <span class="built_in">rotateX</span>(<span class="number">90deg</span>) <span class="built_in">translateZ</span>(<span class="number">500px</span>)</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.space-wall-bottom</span></span><br><span class="line">    <span class="attribute">transform</span> <span class="built_in">rotateX</span>(-<span class="number">90deg</span>) <span class="built_in">translateZ</span>(<span class="number">500px</span>)</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.space-wall-back</span></span><br><span class="line">    <span class="attribute">transform</span> <span class="built_in">rotateX</span>(<span class="number">180deg</span>) <span class="built_in">translateZ</span>(<span class="number">500px</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> space-move &#123;</span><br><span class="line">  <span class="number">0%</span>&#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateZ</span>(-<span class="number">500px</span>) <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span>&#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateZ</span>(<span class="number">500px</span>) <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> space-fade &#123;</span><br><span class="line">  <span class="number">0%</span>&#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">75%</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span>&#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>找到<code>hexo-theme-butterfly/layout/loading/fullpage-loading.pug</code>, </p><p>用<code>hyperspace.pug</code>中<code>#loading-box</code>的部分替换<code>fullpage-loading.pug</code>下的<code>#loading-box</code>部分</p><p>找到<code>hexo-theme-butterfly/source/css/_layout/loading.styl</code>, </p><p>用<code>hyperspace.styl</code>中<code>#loading-box</code>的部分替换<code>loading.styl</code>下的<code>#loading-box</code>部分</p><p><strong>注意缩进</strong></p><p>将配置文件中的<code>enable</code>改为 <code>true</code></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">preloader:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># source</span></span><br><span class="line">  <span class="comment"># 1. fullpage-loading</span></span><br><span class="line">  <span class="comment"># 2. pace (progress bar)</span></span><br><span class="line">  <span class="attr">source:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment"># pace theme (see https://codebyzach.github.io/pace/)</span></span><br><span class="line">  <span class="attr">pace_css_url:</span></span><br></pre></td></tr></table></figure><p>重新加载界面即可设置完成</p><hr><h2 id="二十三、字数统计"><a href="#二十三、字数统计" class="headerlink" title="二十三、字数统计"></a>二十三、字数统计</h2><h3 id="23-1-全局安装cnpm"><a href="#23-1-全局安装cnpm" class="headerlink" title="23.1 全局安装cnpm"></a>23.1 全局安装cnpm</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npmmirror.com</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221201184923110.png" alt="安装cnpm"></p><h3 id="23-2-安装插件"><a href="#23-2-安装插件" class="headerlink" title="23.2 安装插件"></a>23.2 安装插件</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-wordcount --save</span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221201184951204.png" alt="安装字数统计插件"></p><h3 id="23-3-开启wordcount"><a href="#23-3-开启wordcount" class="headerlink" title="23.3 开启wordcount"></a>23.3 开启wordcount</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># wordcount (字數統計)</span></span><br><span class="line"><span class="comment"># see https://butterfly.js.org/posts/ceeb73f/#字數統計</span></span><br><span class="line"><span class="attr">wordcount:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_wordcount:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">min2read:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_wordcount:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221201185129809.png" alt="开启Wordcount"></p><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221202101829797.png" alt="字数统计"></p><hr><h2 id="二十四、Snackbar-弹窗"><a href="#二十四、Snackbar-弹窗" class="headerlink" title="二十四、Snackbar 弹窗"></a>二十四、Snackbar 弹窗</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Snackbar (Toast Notification 彈窗)</span></span><br><span class="line"><span class="comment"># https://github.com/polonel/SnackBar</span></span><br><span class="line"><span class="comment"># position 彈窗位置</span></span><br><span class="line"><span class="comment"># 可選 top-left / top-center / top-right / bottom-left / bottom-center / bottom-right</span></span><br><span class="line"><span class="attr">snackbar:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">bottom-left</span></span><br><span class="line">  <span class="attr">bg_light:</span> <span class="string">&#x27;#49b1f5&#x27;</span> <span class="comment"># The background color of Toast Notification in light mode</span></span><br><span class="line">  <span class="attr">bg_dark:</span> <span class="string">&#x27;#1f1f1f&#x27;</span> <span class="comment"># The background color of Toast Notification in dark mode</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221229113037208.png" alt="弹窗设置"></p><hr><h2 id="二十五、Pangu"><a href="#二十五、Pangu" class="headerlink" title="二十五、Pangu"></a>二十五、Pangu</h2><blockquote><p>这个外挂会自动替你在网页中所有的中文字和半形的英文、数字、符号之间插入空白。</p></blockquote><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># https://github.com/vinta/pangu.js</span></span><br><span class="line"><span class="comment"># Insert a space between Chinese character and English character (中英文之間添加空格)</span></span><br><span class="line"><span class="attr">pangu:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">site</span> <span class="comment"># site/post, site -- 全站, post -- 文章页</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221229114125320.png" alt="Pangu外挂"></p><hr><h2 id="二十六、CSS-前缀"><a href="#二十六、CSS-前缀" class="headerlink" title="二十六、CSS 前缀"></a>二十六、CSS 前缀</h2><blockquote><p>自动为一些 CSS 增加前缀。（会增加 20%的体积）</p></blockquote><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add the vendor prefixes to ensure compatibility</span></span><br><span class="line"><span class="attr">css_prefix:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221229114315133.png" alt="开启CSS前缀"></p><hr><h2 id="二十七、Open-Graph"><a href="#二十七、Open-Graph" class="headerlink" title="二十七、Open Graph"></a>二十七、Open Graph</h2><blockquote><p>在 head 里增加一些 meta 资料，例如缩略图、标题、时间等等。当你分享网页到一些平台时，平台会读取 Open Graph 的内容，展示缩略图，标题等等信息。</p></blockquote><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Open graph meta tags</span></span><br><span class="line"><span class="comment"># https://developers.facebook.com/docs/sharing/webmasters/</span></span><br><span class="line"><span class="attr">Open_Graph_meta:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">option:</span></span><br><span class="line">    <span class="comment"># twitter_card:</span></span><br><span class="line">    <span class="comment"># twitter_image:</span></span><br><span class="line">    <span class="comment"># twitter_id:</span></span><br><span class="line">    <span class="comment"># twitter_site:</span></span><br><span class="line">    <span class="comment"># google_plus:</span></span><br><span class="line">    <span class="comment"># fb_admins:</span></span><br><span class="line">    <span class="comment"># fb_app_id:</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221229115148880.png" alt="Open_Graph_meta"></p><hr><h2 id="二十八、Instantpage"><a href="#二十八、Instantpage" class="headerlink" title="二十八、Instantpage"></a>二十八、Instantpage</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># https://instant.page/</span></span><br><span class="line"><span class="comment"># prefetch (預加載)</span></span><br><span class="line"><span class="attr">instantpage:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><img src="https://yuehua-hnu-1313248262.cos.ap-nanjing.myqcloud.com/typora/image-20221229115240805.png" alt="Instantpage"></p>]]></content>
      
      
      <categories>
          
          <category> Docs文档 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客 </tag>
            
            <tag> 美化 </tag>
            
            <tag> Butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建个人博客历程</title>
      <link href="/2022/12/01/%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/"/>
      <url>/2022/12/01/%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="搭建个人博客历程"><a href="#搭建个人博客历程" class="headerlink" title="搭建个人博客历程"></a>搭建个人博客历程</h1><h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><p>我的博客使用的是 <code>Hexo</code> + <code>GitHub</code> 搭建在线博客，主题用的是 <code>Butterfly</code>，教程及官方文档均可在网上找到，我只是在这里记录一些自己的感受，以防以后玩崩了找不到回家的路</p><p>参考文档:</p><p>余白的分享:<a href="https://www.vipyubai.top/post/a42befc0.html">https://www.vipyubai.top/post/a42befc0.html</a></p><p>三水的分享:<a href="https://sanshui.vip/2022/08/10/indexday1/">https://sanshui.vip/2022/08/10/indexday1/</a></p><p>Butterfly安装文档:<a href="https://butterfly.js.org/posts/21cfbf15/">https://butterfly.js.org/posts/21cfbf15/</a></p><hr><h2 id="二、搭建博客"><a href="#二、搭建博客" class="headerlink" title="二、搭建博客"></a>二、搭建博客</h2><h3 id="2-1-全局安装-Hexo"><a href="#2-1-全局安装-Hexo" class="headerlink" title="2.1 全局安装 Hexo"></a>2.1 全局安装 <code>Hexo</code></h3><p><code>win + R</code></p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-cli -g</span><br></pre></td></tr></table></figure><p>随便找一个空文件夹作为 <code>Hexo</code> 的根目录，在这个根目录安装 <code>Hexo</code></p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo --save</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/moonlight_yuehua/Note_picture/raw/main/image-20221201080622513.png" alt="安装hexo"></p><h3 id="2-2-初始化根目录"><a href="#2-2-初始化根目录" class="headerlink" title="2.2 初始化根目录"></a>2.2 初始化根目录</h3><p>初始化根目录，输入以下两条指令</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/moonlight_yuehua/Note_picture/raw/main/image-20221201082833976.png" alt="初始化根目录"></p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/moonlight_yuehua/Note_picture/raw/main/image-20221201082844509.png" alt="安装依赖"></p><h3 id="2-3-启动-Hexo-服务"><a href="#2-3-启动-Hexo-服务" class="headerlink" title="2.3 启动 Hexo 服务"></a>2.3 启动 <code>Hexo</code> 服务</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/moonlight_yuehua/Note_picture/raw/main/image-20221201081031095.png" alt="启动本地hexo"></p><h3 id="2-4-进入本地4000端口"><a href="#2-4-进入本地4000端口" class="headerlink" title="2.4 进入本地4000端口"></a>2.4 进入本地4000端口</h3><p>此时在本地的4000端口可以看到超级毛坯版的个人博客</p><p><img src="https://gitee.com/moonlight_yuehua/Note_picture/raw/main/image-20221201081043798.png" alt="个人博客毛坯版"></p><hr><h2 id="三、网页美化"><a href="#三、网页美化" class="headerlink" title="三、网页美化"></a>三、网页美化</h2><h3 id="3-1-安装-butterfly（我是-npm-安装）"><a href="#3-1-安装-butterfly（我是-npm-安装）" class="headerlink" title="3.1 安装 butterfly（我是 npm 安装）"></a>3.1 安装 <code>butterfly</code>（我是 <code>npm</code> 安装）</h3><p>在 <code>Hexo</code> 根目录输入以下指令安装 <code>butterfly</code></p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-theme-butterfly</span><br></pre></td></tr></table></figure><p>值得一提的是通过 <code>npm</code> 安装并不会在 <code>themes</code> 里生成主题文件夹，而是在 <code>node_modules</code> 里生成</p><p><img src="https://gitee.com/moonlight_yuehua/Note_picture/raw/main/image-20221201083421150.png" alt="将node_modules中的_config.butterfly.yml文件复制到根目录"></p><h3 id="3-2-修改-博客配置文件-主题信息"><a href="#3-2-修改-博客配置文件-主题信息" class="headerlink" title="3.2 修改 博客配置文件 主题信息"></a>3.2 修改 <em>博客配置文件</em> 主题信息</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">PS:从此开始</span><br><span class="line">博客配置文件=Hexo根目录中的_config.yml文件</span><br><span class="line">主题配置文件=_config.butterfly.yml文件</span><br></pre></td></tr></table></figure><p>将 <code>_config.yml</code> 文件中最下面的 <code>theme</code> 改为 <code>butterfly</code></p><p><img src="https://gitee.com/moonlight_yuehua/Note_picture/raw/main/image-20221201083503332.png" alt="修改主题为butterfly"></p><h3 id="3-3-安装插件"><a href="#3-3-安装插件" class="headerlink" title="3.3 安装插件"></a>3.3 安装插件</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/moonlight_yuehua/Note_picture/raw/main/image-20221201083610537.png" alt="安装插件"></p><h3 id="3-4-重启服务"><a href="#3-4-重启服务" class="headerlink" title="3.4 重启服务"></a>3.4 重启服务</h3><p>在编译器终端中输入</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean # 清除缓存</span><br><span class="line">hexo g # 生成界面</span><br><span class="line">hexo s # 启动Hexo服务</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/moonlight_yuehua/Note_picture/raw/main/image-20221201083758613.png" alt="简装版博客"></p>]]></content>
      
      
      <categories>
          
          <category> Docs文档 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客 </tag>
            
            <tag> Butterfly </tag>
            
            <tag> Hexo </tag>
            
            <tag> GitHub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建自己的图床</title>
      <link href="/2022/12/01/%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9B%BE%E5%BA%8A/"/>
      <url>/2022/12/01/%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%9B%BE%E5%BA%8A/</url>
      
        <content type="html"><![CDATA[<h1 id="搭建自己的图床"><a href="#搭建自己的图床" class="headerlink" title="搭建自己的图床"></a>搭建自己的图床</h1><h2 id="SSH远程链接服务器"><a href="#SSH远程链接服务器" class="headerlink" title="SSH远程链接服务器"></a>SSH远程链接服务器</h2><p>首先购买一个服务器</p><p>打开powershell(cmd应该也可以)</p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130205514531.png" alt="image-20221130205514531"></p><p>通过powershell通过账号密码远程链接服务器(可以直接在腾讯云重置密码的)</p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130205612218.png" alt="image-20221130205612218"></p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130205618590.png" alt="image-20221130205618590"></p><p>输入指令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh 用户名@IP地址</span><br></pre></td></tr></table></figure><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130205810179.png" alt="image-20221130205810179"></p><p>是否添加记录值</p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130205846719.png" alt="image-20221130205846719"></p><p>输入密码后成功登录</p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130205905989.png" alt="image-20221130205905989"></p><p>进入宝塔面板官网Linux版执行安装脚本(Debian)</p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130210116797.png" alt="image-20221130210116797"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; bash install.sh ed8484bec</span><br></pre></td></tr></table></figure><p>选y进行安装</p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130210146953.png" alt="image-20221130210146953"></p><p>安装好后去服务器后台放行端口</p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130210326605.png" alt="image-20221130210326605"></p><p>复制端口号</p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130210437999.png" alt="image-20221130210437999"></p><p>打开腾讯云</p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130210450477.png" alt="image-20221130210450477"></p><p>添加防火墙</p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130210526683.png" alt="image-20221130210526683"></p><p>输入端口</p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130210553346.png" alt="image-20221130210553346"></p><p>复制外网访问地址到主机(不是服务器!)访问宝塔面板</p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130210636267.png" alt="image-20221130210636267"></p><p>进入面板, 弹窗直接关闭</p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130211040061.png" alt="image-20221130211040061"></p><p>进入软件商店</p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130211053504.png" alt="image-20221130211053504"></p><p>安装Nginx</p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130211121753.png" alt="image-20221130211121753"></p><p>选编译安装</p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130211140569.png" alt="image-20221130211140569"></p><p>开始漫长等待</p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130211708495.png" alt="image-20221130211708495"></p><p>安装完成</p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130212058768.png" alt="image-20221130212058768"></p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130212128676.png" alt="image-20221130212128676"></p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130212404828.png" alt="image-20221130212404828"></p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130212529247.png" alt="image-20221130212529247"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install git -y</span><br></pre></td></tr></table></figure><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130212923086.png" alt="image-20221130212923086"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/passwd|grep -v nologin|grep -v halt|grep -v shutdown|awk -F&quot;:&quot; &#x27;&#123; print $1&quot;|&quot;$3&quot;|&quot;$4 &#125;&#x27;|more</span><br></pre></td></tr></table></figure><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130213101011.png" alt="image-20221130213101011"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo adduser git</span><br></pre></td></tr></table></figure><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130213200229.png" alt="image-20221130213200229"></p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130213319755.png" alt="image-20221130213319755"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R git:git /www/wwwroot/域名</span><br></pre></td></tr></table></figure><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130213423701.png" alt="image-20221130213423701"></p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130213622426.png" alt="image-20221130213622426"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo su - git</span><br></pre></td></tr></table></figure><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130213722467.png" alt="image-20221130213722467"></p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130213950940.png" alt="image-20221130213950940"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init --bare -b main imagehost.git</span><br></pre></td></tr></table></figure><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130214046676.png" alt="image-20221130214046676"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim post-receive</span><br></pre></td></tr></table></figure><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130214651259.png" alt="image-20221130214651259"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git --work-tree=/www/wwwroot/域名 --git-dir=/home/git/images/imagehost.git checkout -f</span><br></pre></td></tr></table></figure><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130214643641.png" alt="image-20221130214643641"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x post-receive</span><br></pre></td></tr></table></figure><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130214734521.png" alt="image-20221130214734521"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git@域名:/home/git/images/imagehost.git</span><br></pre></td></tr></table></figure><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130215029123.png" alt="image-20221130215029123"></p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130220106641.png" alt="image-20221130220106641"></p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130220214705.png" alt="image-20221130220214705"></p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221130220321697.png" alt="image-20221130220321697"></p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221201073654313.png" alt="image-20221201073654313"></p><p><img src="D:\AppData\AppData\Typora\typora-user-images\image-20221201074626549.png" alt="image-20221201074626549"></p>]]></content>
      
      
      <categories>
          
          <category> Docs文档 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 图床 </tag>
            
            <tag> 服务器 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
